# 银行功能开发文档

## 功能概述

在《House Journey》游戏中增加银行功能，允许玩家：
1. 存入资金获取每周利息收益
2. 贷款获取额外资金，需支付每周利息

银行功能将与游戏现有的经济系统无缝集成，利用相同的利率机制，增加玩家的财务决策维度。

## 系统设计

### 核心功能
- **存款功能**：玩家可以将闲置资金存入银行获取利息
- **贷款功能**：玩家可以借贷最多20,000元作为额外资金
- **利息计算**：每周结算一次利息，与现有债务利率保持一致
- **操作界面**：提供直观的存取款和贷款界面

### 技术参数
- **存款年利率**：与游戏现有债务利率一致（约0.5%/周）
- **贷款年利率**：与游戏现有债务利率一致（约0.5%/周）
- **最大贷款额度**：20,000元
- **结算周期**：每周结算一次（与游戏周期保持一致）

## 数据结构

在玩家模型中添加以下属性：
```javascript
{
  bankDeposit: 0,       // 银行存款金额
  bankLoan: 0,          // 银行贷款金额
  maxLoanAmount: 20000, // 最大贷款额度
}
```

## 界面设计

### 银行入口
在玩家信息面板（PlayerInfo.vue）中增加"银行"按钮，位置与现有"还债"按钮并列。

### 银行界面
实现一个模态框包含：
1. 总览区：显示当前存款、贷款和利率信息
2. 操作区：
   - 存款操作（滑动条选择存款金额）
   - 取款操作（滑动条选择取款金额）
   - 贷款操作（滑动条选择贷款金额）
   - 还款操作（滑动条选择还款金额）

## 实现步骤

### 1. 模型层修改
- 修改玩家模型（Player.js）增加银行相关属性
- 在玩家状态更新方法中增加银行利息计算逻辑

### 2. 存储层修改
- 更新PlayerStore增加银行相关操作方法：
  - deposit(amount) - 存款方法
  - withdraw(amount) - 取款方法
  - takeLoan(amount) - 贷款方法
  - repayLoan(amount) - 还贷款方法
  - 修改updateWeeklyPlayerState处理银行利息

### 3. 界面层实现
- 修改PlayerInfo.vue添加银行按钮
- 创建新组件BankModal.vue实现银行交互界面
- 在i18n文件中添加银行相关的文本翻译

### 4. 游戏逻辑调整
- 确保存款和贷款金额在保存游戏时被正确保存
- 添加银行相关事件（可选）

## 详细UI设计

### 银行按钮设计
在PlayerInfo.vue中的action-buttons区域添加银行按钮：
```html
<button 
  class="btn bank-btn" 
  @click="showBankModal = true"
>
  <span class="btn-icon">🏦</span>
  {{ $t('playerInfo.bank') }}
</button>
```

### 银行模态框设计
创建BankModal.vue组件，包含以下部分：
- 顶部标题和关闭按钮
- 当前银行状态概览（存款、贷款、利率信息）
- 四个操作选项卡（存款、取款、贷款、还款）
- 每个选项卡包含金额滑动条和确认按钮
- 底部确认和取消按钮

## 本地化

在i18n/langs/zh-CN/player.js中添加以下翻译：
```javascript
bank: {
  title: '银行服务',
  deposit: '存款',
  withdraw: '取款',
  loan: '贷款',
  repay: '还款',
  currentDeposit: '当前存款',
  currentLoan: '当前贷款',
  interestRate: '利率',
  depositInterest: '存款利率',
  loanInterest: '贷款利率',
  maxLoan: '最大贷款额度',
  availableLoan: '可贷款额度',
  amountToDeposit: '存款金额',
  amountToWithdraw: '取款金额',
  amountToLoan: '贷款金额',
  amountToRepay: '还款金额',
  confirmDeposit: '确认存款',
  confirmWithdraw: '确认取款',
  confirmLoan: '确认贷款',
  confirmRepay: '确认还款',
  interestInfo: '每周结算一次利息',
  notEnoughMoney: '资金不足',
  depositSuccess: '存款成功',
  withdrawSuccess: '取款成功',
  loanSuccess: '贷款成功',
  repaySuccess: '还款成功',
}
```

## 附加功能（后期可考虑）

1. **不同等级的银行账户**：随着游戏进程，玩家可以解锁更高级的银行账户，提供更好的利率
2. **定期存款**：提供更高利率但资金锁定一段时间的选项
3. **贷款信用评级**：基于玩家的还款历史，调整最大贷款额度和利率
4. **银行特殊事件**：如金融危机影响利率、银行推出特殊优惠等

## 开发计划

1. 数据模型修改（0.5天）
2. 存储层方法实现（0.5天）
3. UI组件开发（1天）
4. 集成测试和bug修复（0.5天）

总开发时间：约2.5天 
