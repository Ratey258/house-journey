var e=Object.defineProperty,t=(t,i,r)=>(((t,i,r)=>{i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r})(t,"symbol"!=typeof i?i+"":i,r),r);import{c as i,d as r,a as o}from"./vendor-3ea32499.js";import{r as s}from"./ui-a9bb16a6.js";const a={},n=function(e,t,i){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,i),e in a)return;a[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(!!i)for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.href===e&&(!t||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${e}"]${o}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise((t,i)=>{s.addEventListener("load",t),s.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})},c={VALIDATION:"validation",NETWORK:"network",STORAGE:"storage",GAME_LOGIC:"gameLogic",SYSTEM:"system",UNKNOWN:"unknown"},l={FATAL:"fatal",ERROR:"error",WARNING:"warning",INFO:"info"};function u(e,t={}){return function(e,t=c.UNKNOWN,i=l.ERROR,r={}){const o=new Error(e);return o.type=t,o.severity=i,o.metadata=r,o.timestamp=(new Date).toISOString(),o}(e,c.STORAGE,l.ERROR,t)}const d={common:{confirm:"ç¡®è®¤",cancel:"å–æ¶ˆ",back:"è¿”å›",save:"ä¿å­˜",delete:"åˆ é™¤",loading:"åŠ è½½ä¸­...",yes:"æ˜¯",no:"å¦",ok:"ç¡®å®š",next:"ä¸‹ä¸€æ­¥",previous:"ä¸Šä¸€æ­¥",close:"å…³é—­",edit:"ç¼–è¾‘",create:"åˆ›å»º",update:"æ›´æ–°",remove:"ç§»é™¤",search:"æœç´¢",filter:"ç­›é€‰",sort:"æ’åº",refresh:"åˆ·æ–°",retry:"é‡è¯•",more:"æ›´å¤š"},time:{week:"ç¬¬{week}å‘¨",weeks:"{count}å‘¨",of:"/",remaining:"å‰©ä½™: {weeks}å‘¨",day:"å¤©",hour:"å°æ—¶",minute:"åˆ†é’Ÿ",second:"ç§’"},system:{defaultPlayerName:"ç©å®¶",autoSave:"è‡ªåŠ¨å­˜æ¡£",unknownError:"å‘ç”ŸæœªçŸ¥é”™è¯¯",criticalError:"å‘ç”Ÿä¸¥é‡é”™è¯¯",componentError:"ç»„ä»¶é”™è¯¯",retry:"é‡è¯•",errorLogs:"é”™è¯¯æ—¥å¿—",exportLogs:"å¯¼å‡ºæ—¥å¿—",clearLogs:"æ¸…ç©ºæ—¥å¿—",severity:"ä¸¥é‡ç¨‹åº¦",type:"ç±»å‹",search:"æœç´¢"},currency:"å…ƒ",settings:{title:"æ¸¸æˆè®¾ç½®",game:"æ¸¸æˆè®¾ç½®",display:"æ˜¾ç¤ºè®¾ç½®",audio:"éŸ³é¢‘è®¾ç½®",language:"è¯­è¨€",difficulty:"æ¸¸æˆéš¾åº¦",difficulties:{easy:"ç®€å•",standard:"æ ‡å‡†",hard:"å›°éš¾"},autoSaveInterval:"è‡ªåŠ¨ä¿å­˜é—´éš”",autoSaveIntervals:{1:"æ¯å‘¨",2:"æ¯2å‘¨",5:"æ¯5å‘¨",10:"æ¯10å‘¨"},soundEnabled:"æ¸¸æˆéŸ³æ•ˆ",fullScreen:"å…¨å±æ¨¡å¼",textSpeed:"æ–‡æœ¬é€Ÿåº¦",textSpeeds:{slow:"æ…¢é€Ÿ",normal:"æ­£å¸¸",fast:"å¿«é€Ÿ"},reset:"æ¢å¤é»˜è®¤è®¾ç½®",saveSuccess:"è®¾ç½®å·²ä¿å­˜",resetSuccess:"è®¾ç½®å·²é‡ç½®",description:{difficulty:"è°ƒæ•´æ¸¸æˆçš„æ•´ä½“éš¾åº¦ï¼Œå½±å“ä»·æ ¼æ³¢åŠ¨ã€äº‹ä»¶è§¦å‘æ¦‚ç‡ç­‰",autoSave:"è®¾ç½®æ¸¸æˆè‡ªåŠ¨ä¿å­˜çš„é¢‘ç‡",sound:"å¯ç”¨æˆ–ç¦ç”¨æ¸¸æˆéŸ³æ•ˆ",fullScreen:"ä»¥å…¨å±æ¨¡å¼è¿è¡Œæ¸¸æˆ",textSpeed:"è°ƒæ•´å¯¹è¯å’Œæç¤ºæ–‡æœ¬çš„æ˜¾ç¤ºé€Ÿåº¦",language:"é€‰æ‹©æ¸¸æˆç•Œé¢è¯­è¨€"}},game:{title:"ä¹°æˆ¿è®°",week:"å‘¨æ•°",menu:"èœå•",nextWeek:"è¿›å…¥ä¸‹ä¸€å‘¨",tabs:{market:"å¸‚åœº",inventory:"èƒŒåŒ…",houses:"æˆ¿å±‹"},marketStatus:{bull:"ä¸Šæ¶¨(ç‰›å¸‚)",bear:"ä¸‹è·Œ(ç†Šå¸‚)",stable:"ç¨³å®š",mixed:"æ··åˆ"}},gameMenu:{title:"æ¸¸æˆèœå•",save:"ä¿å­˜æ¸¸æˆ",load:"è¯»å–æ¸¸æˆ",mainMenu:"è¿”å›ä¸»èœå•",settings:"è®¾ç½®",continue:"ç»§ç»­æ¸¸æˆ"},saveDialog:{title:"ä¿å­˜æ¸¸æˆ",namePlaceholder:"è¾“å…¥å­˜æ¡£åç§°"},gameOver:{title:"æ¸¸æˆç»“æŸ",victory:"æ­å–œï¼ä½ æˆåŠŸè´­ä¹°äº†è±ªå®…ï¼",houseVictory:"æ­å–œï¼ä½ å·²è´­ä¹°æˆ¿äº§ï¼Œå®Œæˆæ¸¸æˆä¸»è¦ç›®æ ‡ï¼",timeLimit:"æ—¶é—´å·²åˆ°ï¼",weeksPlayed:"æ¸¸æˆå‘¨æ•°",finalMoney:"æœ€ç»ˆèµ„é‡‘",netWorth:"å‡€èµ„äº§",purchasedHouses:"å·²è´­æˆ¿å±‹",backToMenu:"è¿”å›ä¸»èœå•",continueGame:"ç»§ç»­æ¸¸æˆ",continueDescription:"ä½ å¯ä»¥é€‰æ‹©ç»§ç»­æ¸¸æˆï¼Œç›´åˆ°ç¬¬52å‘¨ç»“æŸï¼Œæˆ–æŸ¥çœ‹å½“å‰æˆç»©",restartGame:"é‡æ–°å¼€å§‹"},recovery:{title:"æ¸¸æˆæ¢å¤",defaultMessage:"æ£€æµ‹åˆ°æ¸¸æˆæ„å¤–ä¸­æ–­ã€‚æˆ‘ä»¬æ‰¾åˆ°äº†æ‚¨çš„æ¸¸æˆè¿›åº¦ï¼Œæ˜¯å¦æ¢å¤ï¼Ÿ",date:"æ—¥æœŸ",gameWeek:"æ¸¸æˆå‘¨",weekNumber:"ç¬¬ {week} å‘¨",playerName:"ç©å®¶åç§°",money:"èµ„é‡‘",recover:"æ¢å¤æ¸¸æˆ",cancel:"æ”¾å¼ƒæ¢å¤",success:"æ¸¸æˆçŠ¶æ€å·²æˆåŠŸæ¢å¤",failed:"æ— æ³•æ¢å¤æ¸¸æˆçŠ¶æ€",noSnapshot:"æ²¡æœ‰å¯ç”¨çš„æ¢å¤ç‚¹",automaticRecovery:"æ¸¸æˆå°†å°è¯•è‡ªåŠ¨æ¢å¤æ‚¨çš„è¿›åº¦",currency:"å…ƒ"},inventory:{title:"èƒŒåŒ…",capacityUsed:"å®¹é‡: {used}/{total}",productName:"å•†å“åç§°",quantity:"æ•°é‡",purchasePrice:"è´­ä¹°ä»·",currentPrice:"å½“å‰ä»·",trend:"è¶‹åŠ¿",profit:"ç›ˆäº",action:"æ“ä½œ",sell:"å‡ºå”®",empty:"èƒŒåŒ…ç©ºç©ºå¦‚ä¹Ÿ",full:"èƒŒåŒ…å·²æ»¡",almostFull:"èƒŒåŒ…å³å°†è£…æ»¡"},market:{title:"{location}",selectLocation:"é€‰æ‹©åœ°ç‚¹",productName:"å•†å“åç§°",price:"ä»·æ ¼",trend:"è¶‹åŠ¿",change:"æ¶¨è·Œ",action:"æ“ä½œ",buy:"è´­ä¹°",noProducts:"å½“å‰åœ°ç‚¹æ²¡æœ‰å¯è´­ä¹°çš„å•†å“",special:"ç‰¹ä»·å•†å“",viewMode:{table:"è¡¨æ ¼è§†å›¾",card:"å¡ç‰‡è§†å›¾"},priceHistory:"ä»·æ ¼å†å²",priceChart:{title:"ä»·æ ¼èµ°åŠ¿å›¾",weeks:"å‘¨æ•°",price:"ä»·æ ¼",high:"æœ€é«˜ä»·",low:"æœ€ä½ä»·",average:"å¹³å‡ä»·",currentPrice:"å½“å‰ä»·æ ¼",historicalPrices:"å†å²ä»·æ ¼",priceRange:"ä»·æ ¼åŒºé—´",weekRange:"å‘¨æ•°åŒºé—´",noData:"æš‚æ— ä»·æ ¼æ•°æ®"},filter:{all:"å…¨éƒ¨å•†å“",special:"ç‰¹ä»·å•†å“",rising:"ä¸Šæ¶¨å•†å“",falling:"ä¸‹è·Œå•†å“",stable:"ç¨³å®šå•†å“"},sort:{default:"é»˜è®¤æ’åº",priceAsc:"ä»·æ ¼ä»ä½åˆ°é«˜",priceDesc:"ä»·æ ¼ä»é«˜åˆ°ä½",changeAsc:"æ¶¨å¹…ä»ä½åˆ°é«˜",changeDesc:"æ¶¨å¹…ä»é«˜åˆ°ä½",nameAsc:"åç§°æ­£åº",nameDesc:"åç§°å€’åº"},location:{travel:"å‰å¾€",currentLocation:"å½“å‰åœ°ç‚¹",travelCost:"æ—…è¡Œè´¹ç”¨",travelTime:"æ—…è¡Œæ—¶é—´",travelConfirm:"ç¡®è®¤å‰å¾€{location}å—ï¼Ÿ",travelSuccess:"ä½ å·²åˆ°è¾¾{location}",second_hand_market:"äºŒæ‰‹å¸‚åœº",premium_mall:"é«˜ç«¯å•†åŸ",electronics_hub:"ç”µå­ç§‘æŠ€åŸ",black_market:"åœ°ä¸‹é»‘å¸‚",commodity_market:"å¤§å®—å•†å“äº¤æ˜“æ‰€",second_hand_market_desc:"å„ç±»äºŒæ‰‹ç‰©å“å’Œä½ä»·ç”Ÿæ´»å¿…éœ€å“çš„é›†æ•£åœ°ï¼Œä»·æ ¼ä¾¿å®œä½†å“è´¨å‚å·®ä¸é½",premium_mall_desc:"æ±‡èšå„ç±»é«˜ç«¯å“ç‰Œå’Œå¥¢ä¾ˆå“çš„è´­ç‰©ä¸­å¿ƒï¼Œä»·æ ¼æ˜‚è´µä½†å“è´¨ä¼˜è‰¯",electronics_hub_desc:"å„ç±»ç”µå­äº§å“å’Œæ•°ç è®¾å¤‡çš„ä¸“ä¸šäº¤æ˜“å¸‚åœºï¼Œä»·æ ¼é€‚ä¸­ä¸”å“ç§é½å…¨",black_market_desc:"éšè”½çš„éæ³•äº¤æ˜“åœºæ‰€ï¼Œå„ç±»çç¨€æ”¶è—å“å’Œå¥‡ç‰¹å•†å“äº‘é›†ï¼Œé£é™©ä¸æœºé‡å¹¶å­˜",commodity_market_desc:"æ‰¹å‘å¸‚åœºå’Œå¤§å®—å•†å“äº¤æ˜“çš„é›†ä¸­åœ°ï¼Œä»·æ ¼ä½å»‰ä½†éœ€è¦å¤§é‡é‡‡è´­"},houseMarket:{title:"æˆ¿äº§å¸‚åœº",affordable:"å¯è´­ä¹°",purchased:"å·²è´­ä¹°",alreadyOwned:"å·²æ‹¥æœ‰",price:"ä»·æ ¼",level:"ç­‰çº§",size:"é¢ç§¯",location:"ä½ç½®",buyButton:"è´­ä¹°",noHouses:"æ²¡æœ‰å¯è´­ä¹°çš„æˆ¿å±‹",notEnoughMoney:"èµ„é‡‘ä¸è¶³ï¼æ‚¨éœ€è¦Â¥{price}ï¼Œä½†åªæœ‰Â¥{money}ï¼Œè¿˜å·®Â¥{shortfall}",fundsChanged:"æ‚¨çš„èµ„é‡‘å·²å‘ç”Ÿå˜åŒ–ï¼éœ€è¦Â¥{price}ï¼Œä½†åªæœ‰Â¥{money}ï¼Œè¿˜å·®Â¥{shortfall}",significantConfirm:"è¿™ç¬”äº¤æ˜“å°†èŠ±è´¹æ‚¨{percent}%çš„èµ„é‡‘ï¼Œç¡®å®šè¦è´­ä¹°å—ï¼Ÿ",purchaseSuccess:"æ­å–œï¼æ‚¨å·²æˆåŠŸè´­ä¹°{house}",purchaseFailed:"è´­ä¹°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",confirmTitle:"ç¡®è®¤è´­ä¹°æˆ¿äº§",confirmMessage:'æ‚¨ç¡®å®šè¦è´­ä¹°"{house}"å—ï¼Ÿ',yourMoney:"æ‚¨çš„èµ„é‡‘",remaining:"è´­ä¹°åå‰©ä½™",significantWarning:"æ³¨æ„ï¼šè¿™æ˜¯ä¸€ç¬”å¤§é¢äº¤æ˜“ï¼Œå°†è€—è´¹æ‚¨å¤§éƒ¨åˆ†èµ„é‡‘ï¼",victoryPurchase:"æ­å–œï¼æ‚¨å·²æˆåŠŸè´­ä¹°æˆ¿äº§",victoryMessage:"æ­å–œæ‚¨è´­ä¹°äº†æˆ¿äº§ï¼š{house}ï¼\n\næ‚¨å½“å‰å¤„äºç¬¬{week}å‘¨ï¼Œæ¸¸æˆæ€»å…±æœ‰{maxWeek}å‘¨ã€‚",continuePrompt:"æ‚¨æƒ³è¦ç»“æŸæ¸¸æˆå¹¶æŸ¥çœ‹ç»“æœï¼Œè¿˜æ˜¯ç»§ç»­æ¸¸æˆäº‰å–æ›´é«˜åˆ†æ•°ï¼Ÿ",continuePlaying:"æ‚¨é€‰æ‹©äº†ç»§ç»­æ¸¸æˆï¼Œäº‰å–æ›´é«˜åˆ†æ•°ï¼æ¸¸æˆå°†ç»§ç»­è¿›è¡Œåˆ°ç¬¬52å‘¨ã€‚",endGameNow:"ç»“æŸæ¸¸æˆå¹¶æŸ¥çœ‹æˆç»©",continueGame:"ç»§ç»­æ¸¸æˆ",details:{title:"æˆ¿å±‹è¯¦æƒ…",price:"ä»·æ ¼",size:"é¢ç§¯",location:"ä½ç½®",type:"ç±»å‹",features:"ç‰¹è‰²",description:"æè¿°"},types:{apartment:"å…¬å¯“",house:"ç‹¬æ ‹åˆ«å¢…",villa:"è±ªååˆ«å¢…",mansion:"è±ªå®…",penthouse:"é¡¶å±‚å…¬å¯“"},features:{garden:"èŠ±å›­",pool:"æ¸¸æ³³æ± ",garage:"è½¦åº“",security:"å®‰ä¿ç³»ç»Ÿ",view:"æ™¯è§‚è§†é‡",central:"ä¸­å¿ƒä½ç½®",quiet:"å®‰é™ç¤¾åŒº",modern:"ç°ä»£è£…ä¿®",classic:"ç»å…¸é£æ ¼",luxury:"è±ªåè£…ä¿®"}}},houses:{small:{name:"å•èº«å…¬å¯“",description:"é€‚åˆå•èº«äººå£«å±…ä½çš„å°å‹å…¬å¯“ï¼Œä½ç½®ä¾¿åˆ©ä½†ç©ºé—´æœ‰é™ã€‚"},medium:{name:"äºŒæ‰‹æ—§æˆ¿",description:"å¹´ä»£è¾ƒä¹…çš„äºŒæ‰‹ä½å®…ï¼Œä»·æ ¼é€‚ä¸­ä½†å¯èƒ½éœ€è¦è£…ä¿®ã€‚ç©ºé—´è¾ƒå¤§ï¼Œéå¸¸é€‚åˆæ”¹é€ æˆç†æƒ³çš„å®¶ã€‚"},large:{name:"é«˜æ¡£å°åŒº",description:"ç°ä»£åŒ–é«˜æ¡£ä½å®…å°åŒºï¼Œç¯å¢ƒä¼˜ç¾ï¼Œé…å¥—è®¾æ–½é½å…¨ã€‚ç¤¾åŒºç¯å¢ƒå®‰å…¨ï¼Œæ˜¯å®¶åº­å±…ä½çš„ç»ä½³é€‰æ‹©ã€‚"},luxury:{name:"ç°ä»£åˆ«å¢…",description:"ç‹¬æ ‹ç°ä»£åˆ«å¢…ï¼Œæ‹¥æœ‰ç§å®¶èŠ±å›­å’Œè½¦åº“ã€‚å®½æ•çš„ç©ºé—´å’Œç²¾è‡´çš„è®¾è®¡ï¼Œå½°æ˜¾ä¸»äººçš„å“å‘³ä¸åœ°ä½ã€‚"},mansion:{name:"ç§äººåº„å›­",description:"å¤§å‹ç§äººåº„å›­ï¼Œå¸¦æœ‰å¤§ç‰‡ç»¿åœ°å’Œå¤šåŠŸèƒ½åŒºåŸŸã€‚æ‹¥æœ‰è¿™æ ·çš„æˆ¿äº§ï¼Œä»£è¡¨ä½ å·²è¾¾åˆ°äººç”Ÿå·…å³°ï¼"}},buyModal:{title:"è´­ä¹° {product}",price:"å•ä»·",availableMoney:"å¯ç”¨èµ„é‡‘",availableSpace:"å¯ç”¨ç©ºé—´",quantity:"è´­ä¹°æ•°é‡",totalCost:"æ€»èŠ±è´¹",maxQuantity:"æœ€å¤§",confirm:"ç¡®è®¤è´­ä¹°",cancel:"å–æ¶ˆ"},sellModal:{title:"å‡ºå”® {product}",purchasePrice:"ä¹°å…¥ä»·",currentPrice:"å½“å‰ä»·",quantity:"æŒæœ‰æ•°é‡",sellQuantity:"å‡ºå”®æ•°é‡",potentialProfit:"é¢„è®¡ç›ˆäº",totalIncome:"æ€»æ”¶å…¥",maxQuantity:"å…¨éƒ¨",confirm:"ç¡®è®¤å‡ºå”®",cancel:"å–æ¶ˆ"},houseModal:{title:"è´­ä¹° {house}",confirmPurchase:"ç¡®è®¤è´­ä¹°æ­¤æˆ¿å±‹å—ï¼Ÿ",price:"æˆ¿å±‹ä»·æ ¼",availableMoney:"å¯ç”¨èµ„é‡‘",remainingMoney:"è´­ä¹°åå‰©ä½™",confirm:"ç¡®è®¤è´­ä¹°",cancel:"å–æ¶ˆ",endGame:"è´­ä¹°æ­¤æˆ¿å±‹å°†ç»“æŸæ¸¸æˆ"},trends:{rising_strong:"ä»·æ ¼æ€¥å‰§ä¸Šæ¶¨",rising:"ä»·æ ¼ä¸Šæ¶¨ä¸­",stable_high:"é«˜ä½ç¨³å®š",stable:"ä»·æ ¼ç¨³å®š",stable_low:"ä½ä½ç¨³å®š",falling:"ä»·æ ¼ä¸‹è·Œä¸­",falling_strong:"ä»·æ ¼æ€¥å‰§ä¸‹è·Œ",volatile:"ä»·æ ¼å‰§çƒˆæ³¢åŠ¨",trendAnalysis:{title:"è¶‹åŠ¿åˆ†æ",shortTerm:"çŸ­æœŸè¶‹åŠ¿",midTerm:"ä¸­æœŸè¶‹åŠ¿",longTerm:"é•¿æœŸè¶‹åŠ¿",prediction:"é¢„æµ‹",confidence:"ç½®ä¿¡åº¦",high:"é«˜",medium:"ä¸­",low:"ä½"}},playerInfo:{title:"ç©å®¶ä¿¡æ¯",name:"å§“å",money:"èµ„é‡‘",debt:"å€ºåŠ¡",capacity:"èƒŒåŒ…å®¹é‡",week:"å‘¨æ•°",repayDebt:"è¿˜æ¬¾",bank:"é“¶è¡Œ",stats:{title:"ç©å®¶ç»Ÿè®¡",totalProfit:"æ€»åˆ©æ¶¦",transactions:"äº¤æ˜“æ¬¡æ•°",visitedLocations:"å·²è®¿é—®åœ°ç‚¹",eventsTriggered:"è§¦å‘äº‹ä»¶æ•°",highestSingleProfit:"å•ç¬”æœ€é«˜åˆ©æ¶¦",mostProfitableProduct:"æœ€èµšé’±å•†å“",mostVisitedLocation:"æœ€å¸¸å»åœ°ç‚¹"}},inventory:{title:"èƒŒåŒ…",capacityUsed:"å®¹é‡: {used}/{total}",productName:"å•†å“åç§°",quantity:"æ•°é‡",purchasePrice:"ä¹°å…¥ä»·",currentPrice:"å½“å‰ä»·",trend:"è¶‹åŠ¿",profit:"ç›ˆäº",action:"æ“ä½œ",sell:"å‡ºå”®",empty:"èƒŒåŒ…æ˜¯ç©ºçš„",sort:{default:"é»˜è®¤æ’åº",profitDesc:"åˆ©æ¶¦ä»é«˜åˆ°ä½",profitAsc:"åˆ©æ¶¦ä»ä½åˆ°é«˜",quantityDesc:"æ•°é‡ä»å¤šåˆ°å°‘",quantityAsc:"æ•°é‡ä»å°‘åˆ°å¤š",nameAsc:"åç§°æ­£åº",nameDesc:"åç§°å€’åº"},filter:{all:"å…¨éƒ¨å•†å“",profitable:"ç›ˆåˆ©å•†å“",unprofitable:"äºæŸå•†å“"},details:{title:"å•†å“è¯¦æƒ…",purchaseInfo:"è´­ä¹°ä¿¡æ¯",purchaseDate:"è´­ä¹°æ—¥æœŸ",purchaseLocation:"è´­ä¹°åœ°ç‚¹",currentInfo:"å½“å‰ä¿¡æ¯",potentialProfit:"æ½œåœ¨åˆ©æ¶¦",profitPercentage:"åˆ©æ¶¦ç‡"}},repayModal:{title:"å¿è¿˜å€ºåŠ¡",currentDebt:"å½“å‰å€ºåŠ¡",availableMoney:"å¯ç”¨èµ„é‡‘",repayAmount:"è¿˜æ¬¾é‡‘é¢",remainingDebt:"å‰©ä½™å€ºåŠ¡",remainingMoney:"å‰©ä½™èµ„é‡‘",fullRepay:"å…¨éƒ¨è¿˜æ¸…",confirm:"ç¡®è®¤è¿˜æ¬¾",cancel:"å–æ¶ˆ"},debtSystem:{title:"å€ºåŠ¡ç³»ç»Ÿ",currentDebt:"å½“å‰å€ºåŠ¡",interestRate:"åˆ©ç‡",nextInterest:"ä¸‹æ¬¡åˆ©æ¯",paymentDue:"åº”ä»˜é‡‘é¢",warning:{high:"è­¦å‘Šï¼šå€ºåŠ¡è¿‡é«˜",critical:"å±é™©ï¼šå€ºåŠ¡å³å°†è§¦å‘ç ´äº§",bankrupt:"æ‚¨å·²ç ´äº§ï¼"},interestApplied:"å·²æ”¶å–{amount}å…ƒåˆ©æ¯"},bank:{title:"é“¶è¡ŒæœåŠ¡",deposit:"å­˜æ¬¾",withdraw:"å–æ¬¾",loan:"è´·æ¬¾",repay:"è¿˜æ¬¾",currentDeposit:"å½“å‰å­˜æ¬¾",currentLoan:"å½“å‰è´·æ¬¾",interestRate:"åˆ©ç‡",depositInterest:"å­˜æ¬¾åˆ©ç‡",loanInterest:"è´·æ¬¾åˆ©ç‡",maxLoan:"æœ€å¤§è´·æ¬¾é¢åº¦",availableLoan:"å¯è´·æ¬¾é¢åº¦",amountToDeposit:"å­˜æ¬¾é‡‘é¢",amountToWithdraw:"å–æ¬¾é‡‘é¢",amountToLoan:"è´·æ¬¾é‡‘é¢",amountToRepay:"è¿˜æ¬¾é‡‘é¢",confirmDeposit:"ç¡®è®¤å­˜æ¬¾",confirmWithdraw:"ç¡®è®¤å–æ¬¾",confirmLoan:"ç¡®è®¤è´·æ¬¾",confirmRepay:"ç¡®è®¤è¿˜æ¬¾",interestInfo:"æ¯å‘¨ç»“ç®—ä¸€æ¬¡åˆ©æ¯",notEnoughMoney:"èµ„é‡‘ä¸è¶³",depositSuccess:"å­˜æ¬¾æˆåŠŸ",withdrawSuccess:"å–æ¬¾æˆåŠŸ",loanSuccess:"è´·æ¬¾æˆåŠŸ",repaySuccess:"è¿˜æ¬¾æˆåŠŸ",weeklyInterest:"æ¯å‘¨åˆ©æ¯",remainingMoney:"å‰©ä½™èµ„é‡‘",remainingDeposit:"å‰©ä½™å­˜æ¬¾",remainingLoan:"å‰©ä½™è´·æ¬¾",remainingDebt:"å‰©ä½™å€ºåŠ¡"},tutorial:{tips:{welcome:{title:"æ¬¢è¿æ¥åˆ°ã€Šä¹°æˆ¿è®°ã€‹",content:"åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä½ çš„ç›®æ ‡æ˜¯é€šè¿‡ä¹°å–å•†å“èµšå–å·®ä»·ï¼Œæœ€ç»ˆç§¯ç´¯è¶³å¤Ÿçš„èµ„é‡‘è´­ä¹°æˆ¿äº§ã€‚<br><br>ä½ æœ‰52å‘¨çš„æ—¶é—´æ¥å®ç°è¿™ä¸ªç›®æ ‡ï¼Œç¥ä½ å¥½è¿ï¼"},market_intro:{title:"å¸‚åœºäº¤æ˜“",content:"åœ¨å¸‚åœºæ ‡ç­¾é¡µä¸­ï¼Œä½ å¯ä»¥è´­ä¹°å„ç§å•†å“ã€‚ä¸åŒåœ°ç‚¹æä¾›çš„å•†å“å’Œä»·æ ¼å„ä¸ç›¸åŒã€‚<br><br>å…³æ³¨ä»·æ ¼è¶‹åŠ¿ï¼Œåœ¨ä»·æ ¼ä½æ—¶è´­ä¹°ï¼Œä»·æ ¼é«˜æ—¶å–å‡ºï¼Œèµšå–å·®ä»·ã€‚"},inventory_intro:{title:"åº“å­˜ç®¡ç†",content:"åœ¨åº“å­˜æ ‡ç­¾é¡µä¸­ï¼Œä½ å¯ä»¥æŸ¥çœ‹å·²è´­ä¹°çš„å•†å“ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶æœºå–å‡ºã€‚<br><br>æ³¨æ„èƒŒåŒ…å®¹é‡æœ‰é™ï¼Œåˆç†è§„åˆ’è´­ä¹°çš„å•†å“æ•°é‡ã€‚"},location_change:{title:"åˆ‡æ¢åœ°ç‚¹",content:"ä½ å¯ä»¥åœ¨ä¸åŒåœ°ç‚¹ä¹‹é—´åˆ‡æ¢ï¼Œæ¯ä¸ªåœ°ç‚¹éƒ½æœ‰ä¸åŒçš„å•†å“å’Œä»·æ ¼ã€‚<br><br>åˆ©ç”¨ä¸åŒåœ°ç‚¹ä¹‹é—´çš„ä»·æ ¼å·®å¼‚ï¼Œå¯ä»¥èµšå–æ›´å¤šåˆ©æ¶¦ã€‚"},price_trends:{title:"ä»·æ ¼è¶‹åŠ¿",content:"å•†å“ä»·æ ¼ä¼šéšæ—¶é—´æ³¢åŠ¨ï¼Œå…³æ³¨ä»·æ ¼è¶‹åŠ¿æ˜¯è·åˆ©çš„å…³é”®ã€‚<br><br>ä¸Šæ¶¨è¶‹åŠ¿è¡¨ç¤ºä»·æ ¼å¯èƒ½ç»§ç»­ä¸Šæ¶¨ï¼Œä¸‹è·Œè¶‹åŠ¿è¡¨ç¤ºä»·æ ¼å¯èƒ½ç»§ç»­ä¸‹è·Œã€‚"},special_products:{title:"ç‰¹è‰²å•†å“",content:"æ¯ä¸ªåœ°ç‚¹éƒ½æœ‰ç‰¹è‰²å•†å“ï¼Œä»·æ ¼æ›´ä¼˜æƒ ã€‚ç‰¹è‰²å•†å“åœ¨å•†å“åˆ—è¡¨ä¸­ä¼šæœ‰ç‰¹æ®Šæ ‡è®°ã€‚<br><br>å…³æ³¨ç‰¹è‰²å•†å“å¯ä»¥æé«˜äº¤æ˜“åˆ©æ¶¦ã€‚"},houses:{title:"æˆ¿äº§è´­ä¹°",content:"å½“ä½ ç§¯ç´¯äº†è¶³å¤Ÿçš„èµ„é‡‘åï¼Œå¯ä»¥åœ¨æˆ¿äº§æ ‡ç­¾é¡µä¸­è´­ä¹°æˆ¿å±‹ã€‚<br><br>ä¸åŒæˆ¿å±‹æœ‰ä¸åŒçš„ä»·æ ¼ï¼Œè´­ä¹°ä»»æ„æˆ¿å±‹éƒ½ä¼šç»“æŸæ¸¸æˆã€‚"},mid_game:{title:"æ¸¸æˆè¿›å±•",content:"ä½ å·²ç»å®Œæˆäº†æ¸¸æˆçš„å››åˆ†ä¹‹ä¸€ï¼ç°åœ¨æ˜¯æ—¶å€™åˆ¶å®šæ›´é•¿è¿œçš„è®¡åˆ’äº†ã€‚<br><br>è€ƒè™‘ç§¯ç´¯æ›´å¤šèµ„é‡‘ï¼Œä¸ºè´­ä¹°æˆ¿äº§åšå‡†å¤‡ã€‚"},late_game:{title:"æ¸¸æˆåæœŸ",content:"æ¸¸æˆå·²ç»è¿‡åŠï¼Œç¡®ä¿ä½ çš„èµ„é‡‘å¢é•¿è¶³å¤Ÿå¿«ï¼Œä»¥ä¾¿åœ¨æ¸¸æˆç»“æŸå‰è´­ä¹°ç†æƒ³çš„æˆ¿äº§ã€‚<br><br>å¦‚æœèµ„é‡‘å¢é•¿ç¼“æ…¢ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´äº¤æ˜“ç­–ç•¥æˆ–æ‰¿æ‹…æ›´å¤šé£é™©ã€‚"}},help:{title:"æ¸¸æˆå¸®åŠ©",basics:"æ¸¸æˆåŸºç¡€",trading:"äº¤æ˜“æŠ€å·§",events:"äº‹ä»¶ç³»ç»Ÿ",settings:"æ¸¸æˆè®¾ç½®",gotIt:"çŸ¥é“äº†",dontShowAgain:"ä¸å†æ˜¾ç¤ºæ­¤æç¤º",prev:"ä¸Šä¸€æ¡",next:"ä¸‹ä¸€æ¡",shortcuts:{title:"é”®ç›˜å¿«æ·é”®",space:"è¿›å…¥ä¸‹ä¸€å‘¨",tab:"åˆ‡æ¢æ ‡ç­¾é¡µ",esc:"æ‰“å¼€/å…³é—­èœå•",h:"æ‰“å¼€å¸®åŠ©é¢æ¿"}}},event:{title:"äº‹ä»¶",debtIncrease:"å€ºåŠ¡å¢åŠ ",debtDecrease:"å€ºåŠ¡å‡å°‘",gainProduct:"è·å¾—ç‰©å“",loseProduct:"å¤±å»ç‰©å“",moneyGain:"è·å¾—èµ„é‡‘",moneyLoss:"å¤±å»èµ„é‡‘",priceChange:"ä»·æ ¼å˜åŠ¨",capacityChange:"èƒŒåŒ…å®¹é‡å˜åŒ–",specialEvent:"ç‰¹æ®Šäº‹ä»¶",types:{positive:"æ­£é¢äº‹ä»¶",negative:"è´Ÿé¢äº‹ä»¶",neutral:"ä¸­æ€§äº‹ä»¶",mixed:"å¤åˆäº‹ä»¶"},effects:{money:"èµ„é‡‘ {change}",debt:"å€ºåŠ¡ {change}",capacity:"èƒŒåŒ…å®¹é‡ {change}",product:"å•†å“: {product} x {quantity}",price:"{product} ä»·æ ¼ {change}",location:"è§£é”åœ°ç‚¹: {location}"},choices:{accept:"æ¥å—",decline:"æ‹’ç»",option1:"é€‰é¡¹1",option2:"é€‰é¡¹2",option3:"é€‰é¡¹3",continue:"ç»§ç»­"},notifications:{triggered:"è§¦å‘äº‹ä»¶: {name}",completed:"äº‹ä»¶å®Œæˆ: {name}",reward:"è·å¾—å¥–åŠ±: {reward}",penalty:"å—åˆ°æƒ©ç½š: {penalty}",choiceMade:"å·²é€‰æ‹©: {choice}"},common:{marketCrash:"å¸‚åœºå´©ç›˜",marketBoom:"å¸‚åœºç¹è£",robbery:"é­é‡æŠ¢åŠ«",lottery:"ä¸­å½©ç¥¨",backpackUpgrade:"èƒŒåŒ…å‡çº§",backpackDamage:"èƒŒåŒ…æŸå",investmentSuccess:"æŠ•èµ„æˆåŠŸ",investmentFailure:"æŠ•èµ„å¤±è´¥",taxAudit:"ç¨åŠ¡å®¡è®¡",inheritance:"æ„å¤–ç»§æ‰¿",donation:"æ…ˆå–„ææ¬¾",discount:"ç‰¹åˆ«æŠ˜æ‰£",priceHike:"ä»·æ ¼ä¸Šæ¶¨",specialOffer:"ç‰¹åˆ«ä¼˜æƒ ",blackMarket:"é»‘å¸‚äº¤æ˜“"},descriptions:{marketCrash:"å¸‚åœºçªç„¶å´©ç›˜ï¼æ‰€æœ‰å•†å“ä»·æ ¼å¤§å¹…ä¸‹è·Œã€‚",marketBoom:"å¸‚åœºçªç„¶ç¹è£ï¼æ‰€æœ‰å•†å“ä»·æ ¼å¤§å¹…ä¸Šæ¶¨ã€‚",robbery:"ä½ è¢«æŠ¢åŠ«äº†ï¼å¤±å»äº†ä¸€äº›èµ„é‡‘å’Œå•†å“ã€‚",lottery:"æ­å–œä½ ä¸­äº†å½©ç¥¨ï¼è·å¾—é¢å¤–èµ„é‡‘ã€‚",backpackUpgrade:"ä½ æ‰¾åˆ°äº†ä¸€ä¸ªæ›´å¤§çš„èƒŒåŒ…ï¼Œå®¹é‡å¢åŠ ï¼",backpackDamage:"ä½ çš„èƒŒåŒ…ç ´æŸäº†ï¼Œå®¹é‡å‡å°‘ï¼",investmentSuccess:"ä½ çš„æŠ•èµ„è·å¾—äº†æˆåŠŸï¼Œè·å¾—é¢å¤–æ”¶ç›Šã€‚",investmentFailure:"ä½ çš„æŠ•èµ„å¤±è´¥äº†ï¼ŒæŸå¤±äº†ä¸€äº›èµ„é‡‘ã€‚",taxAudit:"ç¨åŠ¡éƒ¨é—¨å¯¹ä½ è¿›è¡Œäº†å®¡è®¡ï¼Œä½ éœ€è¦æ”¯ä»˜ä¸€äº›ç¨æ¬¾ã€‚",inheritance:"ä½ æ„å¤–ç»§æ‰¿äº†ä¸€ç¬”è´¢äº§ï¼Œè·å¾—é¢å¤–èµ„é‡‘ã€‚",donation:"ä½ å†³å®šä¸ºæ…ˆå–„äº‹ä¸šææ¬¾ï¼Œå¤±å»ä¸€äº›èµ„é‡‘ä½†è·å¾—äº†å¥½è¯„ã€‚",discount:"å•†åº—æ¨å‡ºäº†ç‰¹åˆ«æŠ˜æ‰£ï¼ŒæŸäº›å•†å“ä»·æ ¼ä¸‹é™ã€‚",priceHike:"ç”±äºä¾›åº”çŸ­ç¼ºï¼ŒæŸäº›å•†å“ä»·æ ¼ä¸Šæ¶¨ã€‚",specialOffer:"ä½ æ”¶åˆ°äº†ä¸€ä¸ªç‰¹åˆ«ä¼˜æƒ ï¼Œå¯ä»¥ä½ä»·è´­ä¹°æŸäº›å•†å“ã€‚",blackMarket:"ä½ å‘ç°äº†ä¸€ä¸ªé»‘å¸‚äº¤æ˜“æœºä¼šï¼Œå¯ä»¥é«˜ä»·å‡ºå”®æŸäº›å•†å“ã€‚"}},notifications:{error:{inventoryFull:"èƒŒåŒ…ç©ºé—´ä¸è¶³",insufficientStock:"åº“å­˜æ•°é‡ä¸è¶³",houseNotFound:"æ‰¾ä¸åˆ°æŒ‡å®šçš„æˆ¿å±‹",alreadyOwned:"å·²ç»æ‹¥æœ‰æ­¤æˆ¿å±‹",invalidRepayment:"è¿˜æ¬¾é‡‘é¢æ— æ•ˆ",saveFailed:"ä¿å­˜æ¸¸æˆå¤±è´¥",loadFailed:"æ‰¾ä¸åˆ°å­˜æ¡£æˆ–å­˜æ¡£å·²æŸå",insufficientFunds:"èµ„é‡‘ä¸è¶³ï¼Œæ— æ³•è´­ä¹°",autoSaveFailed:"è‡ªåŠ¨ä¿å­˜å¤±è´¥",autoSaveError:"è‡ªåŠ¨ä¿å­˜è¿‡ç¨‹å‡ºé”™"},success:{purchased:"æˆåŠŸè´­ä¹°",sold:"æˆåŠŸå‡ºå”®",housePurchased:"æˆåŠŸè´­ä¹°æˆ¿å±‹",repaid:"æˆåŠŸè¿˜æ¬¾",gameSaved:"æ¸¸æˆå·²ä¿å­˜",gameLoaded:"å·²åŠ è½½æ¸¸æˆ",autoSaved:"è‡ªåŠ¨ä¿å­˜æˆåŠŸ"},info:{endGame:"ä½ é€‰æ‹©äº†ç»“æŸæ¸¸æˆ",timeUp:"æ—¶é—´å·²åˆ°ï¼æ¸¸æˆç»“æŸ",bankrupt:"ä½ å·²ç ´äº§ï¼æ¸¸æˆç»“æŸ",weekProgress:"è¿›å…¥ç¬¬ {week} å‘¨",locationChange:"ä½ å·²åˆ°è¾¾ {location}"},achievement:{earlyGoal:"æå‰è¾¾æˆç›®æ ‡",noDebtHouse:"é›¶è´Ÿå€ºè´­æˆ¿",victory:"æ­å–œï¼ä½ æˆåŠŸè´­ä¹°äº†æœ€è´µçš„æˆ¿äº§ï¼",achieved:"ä½ è¾¾æˆäº†æˆå°±: {name}"}},ui:{mainMenu:{title:"ä¹°æˆ¿è®°",newGame:"æ–°æ¸¸æˆ",loadGame:"åŠ è½½æ¸¸æˆ",settings:"è®¾ç½®",exit:"é€€å‡º",version:"ç‰ˆæœ¬ {version}",credits:"åˆ¶ä½œå›¢é˜Ÿ"},saveMenu:{title:"å­˜æ¡£ç®¡ç†",newSave:"æ–°å»ºå­˜æ¡£",loadSave:"åŠ è½½å­˜æ¡£",deleteSave:"åˆ é™¤å­˜æ¡£",back:"è¿”å›",noSaves:"æ²¡æœ‰æ‰¾åˆ°å­˜æ¡£",saveDate:"ä¿å­˜æ—¥æœŸ: {date}",saveWeek:"æ¸¸æˆå‘¨: {week}",playerName:"ç©å®¶: {name}",playerMoney:"èµ„é‡‘: {money}",confirmDelete:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­˜æ¡£å—ï¼Ÿ",overwriteConfirm:"å­˜æ¡£å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ",invalidSave:"æ— æ•ˆçš„å­˜æ¡£æ–‡ä»¶"},gameView:{nextWeek:"ä¸‹ä¸€å‘¨",menu:"èœå•",tabs:{market:"å¸‚åœº",inventory:"èƒŒåŒ…",houses:"æˆ¿å±‹"},weekDisplay:"ç¬¬ {current}/{total} å‘¨",moneyDisplay:"{amount} å…ƒ",debtDisplay:"å€ºåŠ¡: {amount} å…ƒ",loading:"åŠ è½½ä¸­...",saving:"ä¿å­˜ä¸­..."},dialogs:{confirm:{title:"ç¡®è®¤",ok:"ç¡®å®š",cancel:"å–æ¶ˆ"},alert:{title:"æç¤º",ok:"ç¡®å®š"},input:{title:"è¾“å…¥",ok:"ç¡®å®š",cancel:"å–æ¶ˆ"},error:{title:"é”™è¯¯",ok:"ç¡®å®š",details:"è¯¦ç»†ä¿¡æ¯"}},toast:{success:"æˆåŠŸ",error:"é”™è¯¯",info:"æç¤º",warning:"è­¦å‘Š"},loading:{initializing:"åˆå§‹åŒ–æ¸¸æˆ...",loadingAssets:"åŠ è½½èµ„æº...",loadingGame:"åŠ è½½æ¸¸æˆ...",savingGame:"ä¿å­˜æ¸¸æˆ...",processingTurn:"å¤„ç†æ¸¸æˆå›åˆ...",generatingWorld:"ç”Ÿæˆæ¸¸æˆä¸–ç•Œ...",ready:"å‡†å¤‡å°±ç»ª"},devTools:{title:"å¼€å‘å·¥å…·",addMoney:"æ·»åŠ èµ„é‡‘",removeMoney:"å‡å°‘èµ„é‡‘",addDebt:"æ·»åŠ å€ºåŠ¡",removeDebt:"å‡å°‘å€ºåŠ¡",skipWeek:"è·³è¿‡å‘¨æ•°",unlockAllLocations:"è§£é”æ‰€æœ‰åœ°ç‚¹",resetPrices:"é‡ç½®ä»·æ ¼",triggerEvent:"è§¦å‘äº‹ä»¶",amount:"æ•°é‡",apply:"åº”ç”¨",cancel:"å–æ¶ˆ",eventType:"äº‹ä»¶ç±»å‹",warning:"è­¦å‘Šï¼šä½¿ç”¨å¼€å‘å·¥å…·å¯èƒ½ä¼šå½±å“æ¸¸æˆå¹³è¡¡å’Œä½“éªŒ"},charts:{title:"å›¾è¡¨",priceHistory:"ä»·æ ¼å†å²",playerNetWorth:"ç©å®¶å‡€èµ„äº§",weeklyProfit:"æ¯å‘¨åˆ©æ¶¦",zoom:"ç¼©æ”¾",period:"å‘¨æœŸ",showAll:"æ˜¾ç¤ºå…¨éƒ¨",last10Weeks:"æœ€è¿‘10å‘¨",last20Weeks:"æœ€è¿‘20å‘¨",custom:"è‡ªå®šä¹‰",noData:"æš‚æ— æ•°æ®",exportData:"å¯¼å‡ºæ•°æ®",importData:"å¯¼å…¥æ•°æ®"},errorHandling:{title:"é”™è¯¯å¤„ç†",message:"å‘ç”Ÿé”™è¯¯",details:"è¯¦ç»†ä¿¡æ¯",stackTrace:"å †æ ˆè·Ÿè¸ª",retry:"é‡è¯•",ignore:"å¿½ç•¥",report:"æŠ¥å‘Šé—®é¢˜",close:"å…³é—­",errorBoundary:{title:"ç»„ä»¶é”™è¯¯",message:"ç»„ä»¶æ¸²æŸ“å‡ºé”™",reset:"é‡ç½®ç»„ä»¶"}}},errors:{defaultError:"å‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯",severity:{fatal:"è‡´å‘½é”™è¯¯",error:"é”™è¯¯",warning:"è­¦å‘Š",info:"æç¤º"},type:{validation:{default:"æ•°æ®éªŒè¯é”™è¯¯: {message}",specific:{required_field:"å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º",invalid_format:"æ•°æ®æ ¼å¼ä¸æ­£ç¡®",out_of_range:"æ•°å€¼è¶…å‡ºå…è®¸èŒƒå›´",invalid_type:"æ•°æ®ç±»å‹ä¸æ­£ç¡®",duplicate_entry:"æ•°æ®å·²å­˜åœ¨",too_short:"è¾“å…¥å†…å®¹è¿‡çŸ­",too_long:"è¾“å…¥å†…å®¹è¿‡é•¿"}},network:{default:"ç½‘ç»œé”™è¯¯: {message}",specific:{connection_failed:"è¿æ¥æœåŠ¡å™¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥",timeout:"è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•",server_error:"æœåŠ¡å™¨é”™è¯¯",api_error:"APIé”™è¯¯",invalid_response:"æ— æ•ˆçš„æœåŠ¡å™¨å“åº”",offline:"æ‚¨å½“å‰å¤„äºç¦»çº¿çŠ¶æ€"}},storage:{default:"å­˜å‚¨é”™è¯¯: {message}",specific:{file_not_found:"æ‰¾ä¸åˆ°æ–‡ä»¶",permission_denied:"æ²¡æœ‰è¶³å¤Ÿæƒé™",quota_exceeded:"å­˜å‚¨ç©ºé—´ä¸è¶³",data_corrupt:"æ•°æ®å·²æŸå",unknown:"æœªçŸ¥å­˜å‚¨é”™è¯¯",save_failed:"ä¿å­˜æ¸¸æˆå¤±è´¥",load_failed:"åŠ è½½æ¸¸æˆå¤±è´¥",file_io_error:"æ–‡ä»¶è¯»å†™é”™è¯¯",invalid_format:"æ— æ•ˆçš„æ–‡ä»¶æ ¼å¼",version_mismatch:"ç‰ˆæœ¬ä¸å…¼å®¹"}},game_logic:{default:"æ¸¸æˆé€»è¾‘é”™è¯¯: {message}",specific:{invalid_operation:"æ— æ•ˆçš„æ“ä½œ",insufficient_funds:"èµ„é‡‘ä¸è¶³",inventory_full:"èƒŒåŒ…å·²æ»¡",invalid_state:"æ— æ•ˆçš„æ¸¸æˆçŠ¶æ€",invalid_transition:"æ— æ•ˆçš„çŠ¶æ€è½¬æ¢",out_of_bounds:"è¶…å‡ºè¾¹ç•Œ",dependency_missing:"ç¼ºå°‘ä¾èµ–é¡¹",invalid_parameter:"æ— æ•ˆçš„å‚æ•°",calculation_error:"è®¡ç®—é”™è¯¯",rule_violation:"è¿åæ¸¸æˆè§„åˆ™"}},system:{default:"ç³»ç»Ÿé”™è¯¯: {message}",specific:{initialization_failed:"åˆå§‹åŒ–æ¸¸æˆå¤±è´¥",resource_not_found:"æ‰¾ä¸åˆ°éœ€è¦çš„èµ„æº",memory_error:"å†…å­˜é”™è¯¯",performance_issue:"æ€§èƒ½é—®é¢˜",render_error:"æ¸²æŸ“é”™è¯¯",audio_error:"éŸ³é¢‘é”™è¯¯",plugin_error:"æ’ä»¶é”™è¯¯",compatibility_issue:"å…¼å®¹æ€§é—®é¢˜",unexpected_state:"æ„å¤–çš„ç³»ç»ŸçŠ¶æ€",critical_failure:"ä¸¥é‡æ•…éšœ"}},unknown:{default:"{message}"}},recovery:{title:"é”™è¯¯æ¢å¤",message:"æ¸¸æˆé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ­£åœ¨å°è¯•æ¢å¤...",success:"æ¢å¤æˆåŠŸ",failed:"æ¢å¤å¤±è´¥",options:{retry:"é‡è¯•",reload:"é‡æ–°åŠ è½½",reset:"é‡ç½®æ¸¸æˆ",ignore:"å¿½ç•¥å¹¶ç»§ç»­",report:"æŠ¥å‘Šé—®é¢˜"},autoSave:{corrupted:"è‡ªåŠ¨å­˜æ¡£å·²æŸå",notFound:"æ‰¾ä¸åˆ°è‡ªåŠ¨å­˜æ¡£",incompatible:"è‡ªåŠ¨å­˜æ¡£ä¸å½“å‰ç‰ˆæœ¬ä¸å…¼å®¹",loadFailed:"åŠ è½½è‡ªåŠ¨å­˜æ¡£å¤±è´¥"},stateSnapshot:{restoring:"æ­£åœ¨æ¢å¤æ¸¸æˆçŠ¶æ€...",noValidSnapshot:"æ²¡æœ‰å¯ç”¨çš„æ¸¸æˆçŠ¶æ€å¿«ç…§",partialRestore:"éƒ¨åˆ†æ¸¸æˆçŠ¶æ€å·²æ¢å¤",fullRestore:"æ¸¸æˆçŠ¶æ€å·²å®Œå…¨æ¢å¤"}},errorLog:{title:"é”™è¯¯æ—¥å¿—",empty:"æ²¡æœ‰è®°å½•çš„é”™è¯¯",timestamp:"æ—¶é—´",message:"æ¶ˆæ¯",type:"ç±»å‹",severity:"ä¸¥é‡ç¨‹åº¦",details:"è¯¦ç»†ä¿¡æ¯",actions:{clear:"æ¸…ç©ºæ—¥å¿—",export:"å¯¼å‡ºæ—¥å¿—",filter:"ç­›é€‰æ—¥å¿—",search:"æœç´¢",showDetails:"æ˜¾ç¤ºè¯¦æƒ…",hideDetails:"éšè—è¯¦æƒ…"}}}};function m(){try{const e=localStorage.getItem("userLanguage");if(e)return e}catch(e){F(e,"i18n.getUserLanguage",c.STORAGE,l.INFO),console.warn("æ— æ³•ä»æœ¬åœ°å­˜å‚¨è¯»å–è¯­è¨€è®¾ç½®:",e)}return(navigator.language||navigator.userLanguage).startsWith("zh"),"zh-CN"}const p=function(){const e=i({legacy:!1,locale:m(),fallbackLocale:"zh-CN",messages:{"zh-CN":d},datetimeFormats:{"zh-CN":{short:{year:"numeric",month:"2-digit",day:"2-digit"},long:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}}},numberFormats:{"zh-CN":{currency:{style:"currency",currency:"CNY",notation:"standard"},decimal:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2},percent:{style:"percent",useGrouping:!1}}}});return e.global.setLanguage=t=>{e.global.availableLocales.includes(t)||(console.warn(`è¯­è¨€ ${t} ä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤è¯­è¨€`),t=e.global.fallbackLocale.value),e.global.locale.value=t,document.querySelector("html").setAttribute("lang",t);try{localStorage.setItem("userLanguage",t)}catch(i){F(i,"i18n.setLanguage",c.STORAGE,l.INFO),console.warn("æ— æ³•ä¿å­˜è¯­è¨€è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨:",i)}},e.global.getSupportedLanguages=()=>[{code:"zh-CN",name:"ç®€ä½“ä¸­æ–‡",flag:"ğŸ‡¨ğŸ‡³"}],e.global.formatCurrency=t=>e.global.n(t,"currency"),e.global.formatDate=(t,i="long")=>e.global.d(t,i),e.global.formatNumber=t=>e.global.n(t,"decimal"),e.global.formatPercent=t=>e.global.n(t,"percent"),e}();p.global.t,p.global.d,p.global.n,p.global.setLanguage;const h=p.global.getSupportedLanguages;p.global.formatCurrency,p.global.formatDate,p.global.formatNumber,p.global.formatPercent;var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var v={exports:{}},f=function(e){return Object.defineProperties(t,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof t.labelPadding){case"boolean":return t.labelPadding?t.maxLabelLength:0;case"number":return t.labelPadding;default:return 0}}}});function t(i){t.maxLabelLength=Math.max(t.maxLabelLength,i.length);const r={};for(const t of e.levels)r[t]=(...r)=>e.logData(r,{level:t,scope:i});return r.log=r.info,r}};const b=f,k=class{constructor({processMessage:e}){this.processMessage=e,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(e){this.buffer.push(e)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(e=>this.processMessage(e)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}},P=class e{constructor({allowUnknownLevel:i=!1,dependencies:r={},errorHandler:o,eventLogger:s,initializeFn:a,isDev:n=!1,levels:c=["error","warn","info","verbose","debug","silly"],logId:l,transportFactories:u={},variables:d}={}){t(this,"dependencies",{}),t(this,"errorHandler",null),t(this,"eventLogger",null),t(this,"functions",{}),t(this,"hooks",[]),t(this,"isDev",!1),t(this,"levels",null),t(this,"logId",null),t(this,"scope",null),t(this,"transports",{}),t(this,"variables",{}),this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=i,this.buffering=new k(this),this.dependencies=r,this.initializeFn=a,this.isDev=n,this.levels=c,this.logId=l,this.scope=b(this),this.transportFactories=u,this.variables=d||{};for(const e of this.levels)this.addLevel(e,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=o,null==o||o.setOptions({...r,logFn:this.error}),this.eventLogger=s,null==s||s.setOptions({...r,logger:this});for(const[e,t]of Object.entries(u))this.transports[e]=t(this,r);e.instances[l]=this}static getInstance({logId:e}){return this.instances[e]||this.instances.default}addLevel(e,t=this.levels.length){!1!==t&&this.levels.splice(t,0,e),this[e]=(...t)=>this.logData(t,{level:e}),this.functions[e]=this[e]}catchErrors(e){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(e)}create(t){return"string"==typeof t&&(t={logId:t}),new e({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...t})}compareLevels(e,t,i=this.levels){const r=i.indexOf(e),o=i.indexOf(t);return-1===o||-1===r||o<=r}initialize(e={}){this.initializeFn({logger:this,...this.dependencies,...e})}logData(e,t={}){this.buffering.enabled?this.buffering.addMessage({data:e,date:new Date,...t}):this.processMessage({data:e,...t})}processMessage(e,{transports:t=this.transports}={}){if("errorHandler"===e.cmd)return void this.errorHandler.handle(e.error,{errorName:e.errorName,processType:"renderer",showDialog:Boolean(e.showDialog)});let i=e.level;this.allowUnknownLevel||(i=this.levels.includes(e.level)?e.level:"info");const r={date:new Date,logId:this.logId,...e,level:i,variables:{...this.variables,...e.variables}};for(const[s,a]of this.transportEntries(t))if("function"==typeof a&&!1!==a.level&&this.compareLevels(a.level,e.level))try{const e=this.hooks.reduce((e,t)=>e?t(e,a,s):e,r);e&&a({...e,data:[...e.data]})}catch(o){this.processInternalErrorFn(o)}}processInternalErrorFn(e){}transportEntries(e=this.transports){return(Array.isArray(e)?e:Object.entries(e)).map(e=>{switch(typeof e){case"string":return this.transports[e]?[e,this.transports[e]]:null;case"function":return[e.name,e];default:return Array.isArray(e)?e:null}}).filter(Boolean)}};t(P,"instances",{});var _=P;const E=console.error;var S=class{constructor({logFn:e=null}={}){t(this,"logFn",null),t(this,"onError",null),t(this,"showDialog",!1),t(this,"preventDefault",!0),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=e}handle(e,{logFn:t=this.logFn,errorName:i="",onError:r=this.onError,showDialog:o=this.showDialog}={}){try{!1!==(null==r?void 0:r({error:e,errorName:i,processType:"renderer"}))&&t({error:e,errorName:i,showDialog:o})}catch{E(e)}}setOptions({logFn:e,onError:t,preventDefault:i,showDialog:r}){"function"==typeof e&&(this.logFn=e),"function"==typeof t&&(this.onError=t),"boolean"==typeof i&&(this.preventDefault=i),"boolean"==typeof r&&(this.showDialog=r)}startCatching({onError:e,showDialog:t}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:e,showDialog:t}),window.addEventListener("error",e=>{var t;this.preventDefault&&(null==(t=e.preventDefault)||t.call(e)),this.handleError(e.error||e)}),window.addEventListener("unhandledrejection",e=>{var t;this.preventDefault&&(null==(t=e.preventDefault)||t.call(e)),this.handleRejection(e.reason||e)}))}handleError(e){this.handle(e,{errorName:"Unhandled"})}handleRejection(e){const t=e instanceof Error?e:new Error(JSON.stringify(e));this.handle(t,{errorName:"Unhandled rejection"})}},M={transform:function({logger:e,message:t,transport:i,initialData:r=(null==t?void 0:t.data)||[],transforms:o=(null==i?void 0:i.transforms)}){return o.reduce((r,o)=>"function"==typeof o?o({data:r,logger:e,message:t,transport:i}):r,r)}};const{transform:w}=M;var L=function(e){return Object.assign(function t(i){t.writeFn({message:{...i,data:w({logger:e,message:i,transport:t})}})},{format:"{h}:{i}:{s}.{ms}{scope} â€º {text}",transforms:[x],writeFn({message:{level:e,data:t}}){const i=I[e]||I.info;setTimeout(()=>i(...t))}})};const I={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function x({data:e=[],logger:t={},message:i={},transport:r={}}){if("function"==typeof r.format)return r.format({data:e,level:(null==i?void 0:i.level)||"info",logger:t,message:i,transport:r});if("string"!=typeof r.format)return e;e.unshift(r.format),"string"==typeof e[1]&&e[1].match(/%[1cdfiOos]/)&&(e=[`${e[0]}${e[1]}`,...e.slice(2)]);const o=i.date||new Date;return e[0]=e[0].replace(/\{(\w+)}/g,(e,r)=>{var s,a;switch(r){case"level":return i.level;case"logId":return i.logId;case"scope":{const e=i.scope||(null==(s=t.scope)?void 0:s.defaultLabel);return e?` (${e})`:""}case"text":return"";case"y":return o.getFullYear().toString(10);case"m":return(o.getMonth()+1).toString(10).padStart(2,"0");case"d":return o.getDate().toString(10).padStart(2,"0");case"h":return o.getHours().toString(10).padStart(2,"0");case"i":return o.getMinutes().toString(10).padStart(2,"0");case"s":return o.getSeconds().toString(10).padStart(2,"0");case"ms":return o.getMilliseconds().toString(10).padStart(3,"0");case"iso":return o.toISOString();default:return(null==(a=i.variables)?void 0:a[r])||e}}).trim(),e}const{transform:W}=M;var A=function(e){return Object.assign(function t(i){if(!window.__electronLog)return void e.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});try{const r=W({initialData:i,logger:e,message:i,transport:t});__electronLog.sendToMain(r)}catch(r){e.transports.console({data:["electronLog.transports.ipc",r,"data:",i.data],level:"error"})}},{depth:5,transforms:[R]})};const C=new Set([Promise,WeakMap,WeakSet]);function O(e){return Object(e)!==e}function R({data:e,depth:t,seen:i=new WeakSet,transport:r={}}={}){const o=t||r.depth||5;return i.has(e)?"[Circular]":o<1?O(e)?e:Array.isArray(e)?"[Array]":`[${typeof e}]`:["function","symbol"].includes(typeof e)?e.toString():O(e)?e:C.has(e.constructor)?`[${e.constructor.name}]`:Array.isArray(e)?e.map(e=>R({data:e,depth:o-1,seen:i})):e instanceof Date?e.toISOString():e instanceof Error?e.stack:e instanceof Map?new Map(Array.from(e).map(([e,t])=>[R({data:e,depth:o-1,seen:i}),R({data:t,depth:o-1,seen:i})])):e instanceof Set?new Set(Array.from(e).map(e=>R({data:e,depth:o-1,seen:i}))):(i.add(e),Object.fromEntries(Object.entries(e).map(([e,t])=>[e,R({data:t,depth:o-1,seen:i})])))}!function(e){const t=_,i=S,r=L,o=A;"object"==typeof process&&"browser"===process.type&&console.warn("electron-log/renderer is loaded in the main process. It could cause unexpected behaviour."),e.exports=function(){const e=new t({allowUnknownLevel:!0,errorHandler:new i,initializeFn:()=>{},logId:"default",transportFactories:{console:r,ipc:o},variables:{processType:"renderer"}});e.errorHandler.setOptions({logFn({error:t,errorName:i,showDialog:r}){e.transports.console({data:[i,t].filter(Boolean),level:"error"}),e.transports.ipc({cmd:"errorHandler",error:{cause:null==t?void 0:t.cause,code:null==t?void 0:t.code,name:null==t?void 0:t.name,message:null==t?void 0:t.message,stack:null==t?void 0:t.stack},errorName:i,logId:e.logId,showDialog:r})}}),"object"==typeof window&&window.addEventListener("message",e=>{const{cmd:i,logId:r,...o}=e.data||{},s=t.getInstance({logId:r});"message"===i&&s.processMessage(o,{transports:["console"]})});return new Proxy(e,{get:(t,i)=>void 0!==t[i]?t[i]:(...t)=>e.logData(t,{level:i})})}(),e.exports.Logger=t,e.exports.default=e.exports}(v);const N=y(v.exports),D=s([]),G=200,T="gameRunning",$="lastGameActivity";let j=null;async function H(){if(j)return j;const e=async(t=0)=>{try{const e=await n(()=>Promise.resolve().then(()=>X),void 0,import.meta.url);if(e&&"function"==typeof e.useUiStore){const t=e.useUiStore();if(t&&"object"==typeof t)return j=t,t;throw new Error("Invalid uiStore instance")}throw new Error("useUiStore function not found")}catch(i){return console.error(`Failed to import uiStore (attempt ${t+1}/3):`,i),t<2?(console.log("Retrying in 300ms..."),await new Promise(e=>setTimeout(e,300)),e(t+1)):null}};return e()}function F(e,t,i=c.UNKNOWN,r=l.ERROR){const o={message:e.message||"æœªçŸ¥é”™è¯¯",context:t,type:i,severity:r,timestamp:(new Date).toISOString(),stack:e.stack,metadata:e.metadata||{}};return function(e){D.value.unshift(e),D.value.length>G&&(D.value=D.value.slice(0,G));try{const e=JSON.stringify(D.value);localStorage.setItem("errorLogs",e)}catch(t){console.error("Failed to save error logs to localStorage:",t)}}(o),r===l.FATAL||r===l.ERROR?async function(e){try{const t=await H();t&&"function"==typeof t.showErrorDialog?t.showErrorDialog({title:e.severity===l.FATAL?"ä¸¥é‡é”™è¯¯":"é”™è¯¯",message:q(e),details:void 0,timestamp:e.timestamp,context:e.context}):(console.error("UI Storeä¸å¯ç”¨ï¼Œä½¿ç”¨å¤‡ç”¨é”™è¯¯æç¤º"),alert(q(e)))}catch(t){console.error("Error showing error dialog:",t),alert(q(e))}}(o):r===l.WARNING&&async function(e){try{const t=await H();t&&"function"==typeof t.showToast?t.showToast({type:"error",message:q(e),duration:5e3}):console.warn(q(e))}catch(t){console.warn("Error showing toast:",t)}}(o),window.electronAPI&&window.electronAPI.logError?window.electronAPI.logError(o):N.error(`[${i}][${t}]`,e),o}function U(){return new Promise(e=>{try{const t=localStorage.getItem("errorLogs");if(t){const e=JSON.parse(t);D.value=e,D.value.length>G&&(D.value=D.value.slice(0,G))}e([...D.value])}catch(t){console.error("Failed to load error logs from localStorage:",t),e([])}})}function q(e){try{const t=`errors.${e.type}.specific.${e.message.toLowerCase().replace(/\s+/g,"_").replace(/[^\w]/g,"")}`,i=`errors.${e.type}.default`,r="å‘ç”Ÿé”™è¯¯";return p.global&&p.global.te&&p.global.te(t)?p.global.t(t):p.global&&p.global.te&&p.global.te(i)?p.global.t(i,{message:e.message}):e.message||r}catch(t){return console.error("Error getting localized error message:",t),e.message||"å‘ç”Ÿé”™è¯¯"}}async function V(e,t,i=c.UNKNOWN,r=l.ERROR){try{return await e()}catch(o){throw F(o,t,i,r),o}}function z(e){e&&e.config?(e.config.errorHandler=(e,t,i)=>{let r="Unknown";try{t&&t.$options&&t.$options.name?r=t.$options.name:t&&t.$root&&(r="Root Component")}catch(o){r="Error getting component name"}F(e,`Vueç»„ä»¶: ${r}`,c.COMPONENT,l.ERROR)},window.addEventListener("unhandledrejection",e=>{F(e.reason||new Error("æœªå¤„ç†çš„Promiseå¼‚å¸¸"),"Promise",c.ASYNC,l.ERROR)}),window.addEventListener("error",e=>{e.error&&F(e.error,"å…¨å±€å¼‚å¸¸",c.RUNTIME,l.ERROR)}),U(),window.addEventListener("beforeunload",()=>{J()})):console.warn("æ— æ³•è®¾ç½®å…¨å±€é”™è¯¯å¤„ç†ï¼šappå®ä¾‹æ— æ•ˆ")}function B(){try{localStorage.setItem(T,"true"),function(){try{localStorage.setItem($,Date.now().toString())}catch(e){console.warn("Failed to update game activity timestamp:",e)}}()}catch(e){console.warn("Failed to set game running flag:",e)}}function J(){try{localStorage.removeItem(T)}catch(e){console.warn("Failed to clear game running flag:",e)}}function K(){try{if(!("true"===localStorage.getItem(T)))return!1;const e=localStorage.getItem($);if(e){const t=parseInt(e,10);if(Date.now()-t<3e5)return!0}return!1}catch(e){return console.warn("Failed to check game running flag:",e),!1}}function Y(e){if(!e||"undefined"===e||"null"===e)return"/resources/assets/images/house_1.jpeg";if(!isNaN(parseInt(e))){const t=parseInt(e);return`/resources/assets/images/house_${t?Math.max(1,Math.min(5,t%5||1)):1}.jpeg`}return{apartment:"/resources/assets/images/house_1.jpeg",second_hand:"/resources/assets/images/house_2.jpeg",highend:"/resources/assets/images/house_3.jpeg",villa:"/resources/assets/images/house_4.jpeg",mansion:"/resources/assets/images/house_5.jpeg"}[e]||"/resources/assets/images/house_1.jpeg"}const Q=r("ui",()=>{const e=s(!1),t=s(null),i=s([]),r=s({}),o=s(!1),a=s(null),n=s(!1),c=s(null);function l({type:e="info",message:t="",duration:o=3e3,action:s=null,actionText:a="ç¡®å®š",actionCallback:n=null}){const c=i.value.find(e=>e.message===t);c&&u(c.id);const l=Date.now()+Math.random().toString(36).substring(2,10),d={id:l,type:e,message:t,action:s,actionText:a,actionCallback:n};if(i.value.unshift(d),i.value.length>5){const e=i.value.pop();r.value[e.id]&&(clearTimeout(r.value[e.id]),delete r.value[e.id])}return r.value[l]=setTimeout(()=>{u(l)},3e3),l}function u(e){const t=i.value.findIndex(t=>t.id===e);-1!==t&&(i.value.splice(t,1),r.value[e]&&(clearTimeout(r.value[e]),delete r.value[e]))}function d(){o.value=!1,setTimeout(()=>{a.value=null},300)}return{errorDialogVisible:e,errorDialogData:t,showErrorDialog:function(i){t.value=i,e.value=!0},closeErrorDialog:function(){e.value=!1,setTimeout(()=>{t.value=null},300)},toasts:i,addToast:l,removeToast:u,showToast:function({type:e="info",message:t="",duration:i=3e3}){return l({type:e,message:t,duration:i})},closeToast:function(){i.value.forEach(e=>{u(e.id)})},recoveryDialogVisible:o,recoveryDialogData:a,showRecoveryDialog:function({snapshot:e,message:t,title:i,allowCancel:r=!0,onRecover:s,onCancel:n}){a.value={snapshot:e,message:t||"æ£€æµ‹åˆ°æ¸¸æˆæ„å¤–ä¸­æ–­ã€‚æ˜¯å¦æ¢å¤ä¸Šæ¬¡ä¿å­˜çš„æ¸¸æˆçŠ¶æ€ï¼Ÿ",title:i||"æ¸¸æˆæ¢å¤",allowCancel:r,onRecover:s||(()=>d()),onCancel:n||(()=>d())},o.value=!0},closeRecoveryDialog:d,dialogVisible:n,dialogData:c,showDialog:function(e){c.value=e,n.value=!0},closeDialog:function(){n.value=!1,setTimeout(()=>{c.value=null},300)}}}),X=Object.freeze(Object.defineProperty({__proto__:null,useUiStore:Q},Symbol.toStringTag,{value:"Module"})),Z=r("settings",{state:()=>({difficulty:"normal",tutorialEnabled:!0,autoSave:!0,autoSaveInterval:5,soundEnabled:!0,soundVolume:.7,musicEnabled:!0,musicVolume:.5,language:"zh-CN",theme:"light",uiScale:1,animationsEnabled:!0,graphicsQuality:"medium",currentScene:"menu"}),actions:{updateSetting(e,t){e in this.$state&&(this[e]=t,this.saveSettings())},updateSettings(e){Object.entries(e).forEach(([e,t])=>{e in this.$state&&(this[e]=t)}),this.saveSettings()},resetSettings(){this.$reset(),this.saveSettings()},saveSettings(){try{const e=JSON.stringify(this.$state);localStorage.setItem("house-journey-settings",e)}catch(e){F(e,"SettingsStore",c.STORAGE,l.WARNING),console.error("ä¿å­˜è®¾ç½®å¤±è´¥:",e)}},loadSettings(){try{const e=localStorage.getItem("house-journey-settings");if(e){const t=JSON.parse(e);this.updateSettings(t)}}catch(e){F(e,"SettingsStore",c.STORAGE,l.WARNING),console.error("åŠ è½½è®¾ç½®å¤±è´¥:",e)}},setCurrentScene(e){this.currentScene=e,window.gameAudio&&this.musicEnabled&&window.gameAudio.playBGM(e)}}}),ee=Object.freeze(Object.defineProperty({__proto__:null,useSettingsStore:Z},Symbol.toStringTag,{value:"Module"})),te=r("player",{state:()=>({name:"",money:2e3,debt:5e3,loanPrincipal:5e3,capacity:100,inventoryUsed:0,inventory:[],purchasedHouses:[],initialized:!1,bankDeposit:0,maxLoanAmount:2e4,statistics:{weekCount:1,transactionCount:0,totalProfit:0,maxMoney:2e3,visitedLocations:[],housePurchases:[],firstHousePurchaseWeek:null,mostExpensiveHouse:null,highestLevelHouse:null}}),actions:{initializePlayer(e){return console.log("PlayerStore - åˆå§‹åŒ–ç©å®¶:",e),new Promise(t=>{setTimeout(()=>{this.name=e||p.global.t("system.defaultPlayerName"),this.money=2e3,this.debt=5e3,this.loanPrincipal=5e3,this.capacity=100,this.inventoryUsed=0,this.inventory=[],this.purchasedHouses=[],this.initialized=!0,this.bankDeposit=0,this.maxLoanAmount=2e4,this.statistics={weekCount:1,transactionCount:0,totalProfit:0,maxMoney:2e3,visitedLocations:[],housePurchases:[],firstHousePurchaseWeek:null,mostExpensiveHouse:null,highestLevelHouse:null},console.log("PlayerStore - ç©å®¶åˆå§‹åŒ–å®Œæˆ"),t()},400)})},updateWeeklyPlayerState(e){if(this.statistics.weekCount=e,this.debt>0){const e=Math.floor(.005*this.debt);this.debt+=e}if(this.bankDeposit>0){const e=Math.floor(.003*this.bankDeposit);this.bankDeposit+=e}this.money>this.statistics.maxMoney&&(this.statistics.maxMoney=this.money)},addMoney(e){return!(e<=0)&&(this.money+=e,this.money>this.statistics.maxMoney&&(this.statistics.maxMoney=this.money),!0)},spendMoney(e){return!(e<=0||e>this.money)&&(this.money-=e,!0)},repayDebt(e){return!(e<=0||e>this.money)&&(e>this.debt&&(e=this.debt),this.money-=e,this.debt-=e,e<=this.loanPrincipal?this.loanPrincipal-=e:this.loanPrincipal=0,!0)},addVisitedLocation(e){return!this.statistics.visitedLocations.includes(e)&&(this.statistics.visitedLocations.push(e),!0)},purchaseHouse(e){if(!e||"object"!=typeof e)return console.error("æ— æ•ˆçš„æˆ¿å±‹å¯¹è±¡ä¼ é€’ç»™purchaseHouse"),!1;const t=["id","name","level","price"];for(const o of t)if(!(o in e))return console.error(`è´­ä¹°æˆ¿å±‹å¤±è´¥ï¼šæˆ¿å±‹å¯¹è±¡ç¼ºå°‘å¿…éœ€å±æ€§ ${o}`),!1;if(e.price>this.money)return console.warn(`è´­ä¹°å¤±è´¥ï¼šèµ„é‡‘ä¸è¶³ (æ‹¥æœ‰: ${this.money}, éœ€è¦: ${e.price}, å·®é¢: ${e.price-this.money})`),!1;if(this.purchasedHouses.some(t=>t.houseId===e.id))return console.warn(`è´­ä¹°å¤±è´¥ï¼šå·²æ‹¥æœ‰IDä¸º ${e.id} çš„æˆ¿å±‹`),!1;this.money-=e.price;const i=pt().currentWeek,r={houseId:e.id,name:e.name,level:e.level,purchasePrice:e.price,purchaseWeek:i,description:e.description||`${e.level}çº§æˆ¿äº§`,purchaseDate:(new Date).toISOString()};return this.purchasedHouses.push(r),this.statistics.housePurchases||(this.statistics.housePurchases=[]),this.statistics.housePurchases.push({houseId:e.id,name:e.name,level:e.level,price:e.price,week:i}),null===this.statistics.firstHousePurchaseWeek&&(this.statistics.firstHousePurchaseWeek=i),(!this.statistics.mostExpensiveHouse||e.price>this.statistics.mostExpensiveHouse.price)&&(this.statistics.mostExpensiveHouse={id:e.id,name:e.name,price:e.price,level:e.level,week:i}),(!this.statistics.highestLevelHouse||e.level>this.statistics.highestLevelHouse.level)&&(this.statistics.highestLevelHouse={id:e.id,name:e.name,price:e.price,level:e.level,week:i}),console.log(`æˆåŠŸè´­ä¹°æˆ¿äº§: ${e.name} - Â¥${e.price} (ç¬¬${i}å‘¨)`),!0},depositToBank(e){return!(e<=0||e>this.money)&&(this.money-=e,this.bankDeposit+=e,!0)},withdrawFromBank(e){return!(e<=0||e>this.bankDeposit)&&(this.bankDeposit-=e,this.money+=e,!0)},takeLoan(e){const t=this.availableLoanAmount;return!(e<=0||e>t)&&(this.debt+=e,this.loanPrincipal+=e,this.money+=e,!0)}},getters:{netWorth:e=>{const t=e.inventory.reduce((e,t)=>e+t.quantity*t.purchasePrice,0),i=e.purchasedHouses.reduce((e,t)=>e+t.purchasePrice,0);return e.money+e.bankDeposit+t+i-e.debt},totalMoney:e=>{const t=e.inventory.reduce((e,t)=>e+t.quantity*t.purchasePrice,0);return e.money+t},hasHighestHouse:e=>e.purchasedHouses.some(e=>e.level>=5),mostExpensiveHouse:e=>0===e.purchasedHouses.length?null:e.purchasedHouses.reduce((e,t)=>t.purchasePrice>e.purchasePrice?t:e,e.purchasedHouses[0]),availableCapacity:e=>e.capacity-e.inventoryUsed,availableLoanAmount:e=>{void 0===e.loanPrincipal&&(e.loanPrincipal=e.debt);const t=e.maxLoanAmount;return Math.max(0,Math.floor(t-e.loanPrincipal))},depositInterestRate:()=>.003,loanInterestRate:()=>.005}}),ie=()=>{const e=te();return{addToInventory:(t,i,r)=>{if(!t||i<=0||r<0)return{success:!1,message:"æ— æ•ˆçš„äº§å“æ•°æ®"};const o=i;if(e.inventoryUsed+o>e.capacity)return{success:!1,message:"èƒŒåŒ…å®¹é‡ä¸è¶³"};const s=e.inventory.findIndex(e=>e.productId===t.id),a=r*i;if(-1!==s){const t=e.inventory[s],o=t.totalValue||t.purchasePrice*t.quantity,a=t.quantity+i,n=o+r*i,c=Math.round(n/a);e.inventory[s].quantity=a,e.inventory[s].purchasePrice=c,e.inventory[s].totalValue=n}else e.inventory.push({productId:t.id,name:t.name,quantity:i,purchasePrice:r,totalValue:a,size:1});return e.inventoryUsed+=o,{success:!0}},removeFromInventory:(t,i)=>{if(t<0||t>=e.inventory.length)return{success:!1,message:"æ— æ•ˆçš„ç‰©å“ç´¢å¼•"};const r=e.inventory[t];if(i<=0||i>r.quantity)return{success:!1,message:"æ— æ•ˆçš„ç§»é™¤æ•°é‡"};const o=i,s={...r,quantity:i};return r.quantity-=i,r.quantity<=0&&e.inventory.splice(t,1),e.inventoryUsed-=o,{success:!0,product:s}},findByProductId:t=>e.inventory.filter(e=>e.productId===t),getTotalQuantity:t=>e.inventory.filter(e=>e.productId===t).reduce((e,t)=>e+t.quantity,0),getTotalValue:()=>e.inventory.reduce((e,t)=>e+t.quantity*t.purchasePrice,0),clearInventory:()=>{e.inventory=[],e.inventoryUsed=0}}},re="DAILY",oe="FOOD",se="ELECTRONICS",ae="LUXURY",ne="COLLECTIBLE";class ce{constructor({id:e,name:t,description:i="",basePrice:r,minPrice:o,maxPrice:s,volatility:a=5,category:n=re,size:c=1,icon:l="box",availableAt:u=[]}){this.id=e,this.name=t,this.description=i,this.basePrice=r,this.minPrice=o,this.maxPrice=s,this.volatility=Math.min(Math.max(a,1),10),this.category=n,this.size=c,this.icon=l,this.availableAt=u}getPriceRange(){return{min:this.minPrice,max:this.maxPrice,range:this.maxPrice-this.minPrice}}isValidPrice(e){return e>=this.minPrice&&e<=this.maxPrice}adjustPriceToRange(e){return Math.max(this.minPrice,Math.min(e,this.maxPrice))}}const le=[{id:101,name:"å«ç”Ÿçº¸",description:"æ—¥å¸¸å¿…å¤‡ç”¨å“",basePrice:15,minPrice:10,maxPrice:30,volatility:2,category:re,size:3,icon:"paper",availableAt:["second_hand_market","commodity_market"]},{id:102,name:"æ´—å‘æ°´",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:35,minPrice:20,maxPrice:50,volatility:2,category:re,size:1,icon:"bottle",availableAt:["second_hand_market","commodity_market"]},{id:103,name:"ç‰™è†",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:8,minPrice:5,maxPrice:15,volatility:2,category:re,size:1,icon:"hygiene",availableAt:["second_hand_market","commodity_market"]},{id:104,name:"è‚¥çš‚",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:6,minPrice:3,maxPrice:12,volatility:2,category:re,size:1,icon:"soap",availableAt:["second_hand_market","commodity_market"]},{id:105,name:"æ¯›å·¾",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:25,minPrice:15,maxPrice:40,volatility:2,category:re,size:2,icon:"towel",availableAt:["second_hand_market","commodity_market"]},{id:106,name:"äºŒæ‰‹è¡£ç‰©",description:"äºŒæ‰‹æœè£…ï¼Œä»·æ ¼ä¾¿å®œä½†å“è´¨ä¸€èˆ¬",basePrice:40,minPrice:20,maxPrice:80,volatility:3,category:re,size:4,icon:"clothes",availableAt:["second_hand_market"]},{id:107,name:"äºŒæ‰‹å®¶å…·",description:"äºŒæ‰‹å®¶å…·ï¼Œä»·æ ¼å®æƒ ",basePrice:200,minPrice:100,maxPrice:500,volatility:4,category:re,size:10,icon:"furniture",availableAt:["second_hand_market"]},{id:201,name:"é¸¡è›‹",description:"æ–°é²œé£Ÿå“ï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:15,minPrice:8,maxPrice:25,volatility:4,category:oe,size:2,icon:"egg",availableAt:["commodity_market"]},{id:202,name:"å¤§ç±³",description:"ä¸»é£Ÿï¼Œä»·æ ¼ç›¸å¯¹ç¨³å®š",basePrice:50,minPrice:30,maxPrice:80,volatility:4,category:oe,size:5,icon:"rice",availableAt:["commodity_market"]},{id:203,name:"é£Ÿç”¨æ²¹",description:"çƒ¹é¥ªå¿…å¤‡ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:70,minPrice:40,maxPrice:120,volatility:4,category:oe,size:3,icon:"oil",availableAt:["commodity_market"]},{id:204,name:"æ–°é²œè”¬èœ",description:"æ—¶ä»¤è”¬èœï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:30,minPrice:15,maxPrice:50,volatility:4,category:oe,size:4,icon:"vegetable",availableAt:["commodity_market"]},{id:205,name:"æ°´æœ",description:"æ—¶ä»¤æ°´æœï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:35,minPrice:20,maxPrice:60,volatility:4,category:oe,size:4,icon:"fruit",availableAt:["commodity_market"]},{id:301,name:"æ‰‹æœº",description:"æ™ºèƒ½æ‰‹æœºï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:1800,minPrice:1e3,maxPrice:3e3,volatility:6,category:se,size:1,icon:"phone",availableAt:["electronics_hub","premium_mall"]},{id:302,name:"ç”µè§†",description:"å®¶ç”¨ç”µè§†ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:3500,minPrice:2e3,maxPrice:6e3,volatility:6,category:se,size:15,icon:"tv",availableAt:["electronics_hub"]},{id:303,name:"ç¬”è®°æœ¬ç”µè„‘",description:"ä¾¿æºå¼ç”µè„‘ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:4500,minPrice:3e3,maxPrice:8e3,volatility:6,category:se,size:5,icon:"laptop",availableAt:["electronics_hub"]},{id:304,name:"å¹³æ¿ç”µè„‘",description:"è§¦å±å¹³æ¿è®¾å¤‡ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:2e3,minPrice:1200,maxPrice:3500,volatility:6,category:se,size:3,icon:"tablet",availableAt:["electronics_hub"]},{id:305,name:"æ™ºèƒ½æ‰‹è¡¨",description:"å¯ç©¿æˆ´è®¾å¤‡ï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:1500,minPrice:800,maxPrice:2500,volatility:7,category:se,size:1,icon:"watch",availableAt:["electronics_hub","premium_mall"]},{id:401,name:"åç‰Œæ‰‹è¡¨",description:"å¥¢ä¾ˆå“ï¼Œä»·æ ¼æ˜‚è´µä½†ä¿å€¼",basePrice:12e3,minPrice:8e3,maxPrice:2e4,volatility:8,category:ae,size:1,icon:"luxury-watch",availableAt:["premium_mall"]},{id:402,name:"é’»çŸ³é¡¹é“¾",description:"å¥¢ä¾ˆå“ï¼Œä»·æ ¼æ˜‚è´µä¸”æ³¢åŠ¨è¾ƒå¤§",basePrice:15e3,minPrice:1e4,maxPrice:25e3,volatility:8,category:ae,size:1,icon:"diamond",availableAt:["premium_mall"]},{id:403,name:"è®¾è®¡å¸ˆåŒ…åŒ…",description:"é«˜æ¡£æ‰‹è¢‹ï¼Œæœ‰ä¸€å®šä¿å€¼èƒ½åŠ›",basePrice:8e3,minPrice:5e3,maxPrice:15e3,volatility:7,category:ae,size:2,icon:"bag",availableAt:["premium_mall"]},{id:404,name:"é«˜çº§é¦™æ°´",description:"çŸ¥åå“ç‰Œé¦™æ°´ï¼Œä»·æ ¼é€‚ä¸­",basePrice:1200,minPrice:800,maxPrice:2e3,volatility:5,category:ae,size:1,icon:"perfume",availableAt:["premium_mall"]},{id:501,name:"å¤è‘£èŠ±ç“¶",description:"æ”¶è—å“ï¼Œä»·æ ¼æ³¢åŠ¨éå¸¸å¤§",basePrice:9e3,minPrice:4e3,maxPrice:2e4,volatility:9,category:ne,size:4,icon:"vase",availableAt:["black_market"]},{id:502,name:"é‚®ç¥¨",description:"æ”¶è—é‚®ç¥¨ï¼Œä»·æ ¼æ³¢åŠ¨æå¤§",basePrice:3e3,minPrice:1e3,maxPrice:1e4,volatility:10,category:ne,size:1,icon:"stamp",availableAt:["black_market"]},{id:503,name:"å¤ç”»",description:"è‰ºæœ¯æ”¶è—å“ï¼Œä»·æ ¼æ³¢åŠ¨æå¤§",basePrice:2e4,minPrice:1e4,maxPrice:5e4,volatility:10,category:ne,size:8,icon:"painting",availableAt:["black_market"]},{id:504,name:"è€å¼ç›¸æœº",description:"å¤è‘£ç›¸æœºï¼Œæ”¶è—ä»·å€¼é«˜",basePrice:4500,minPrice:2e3,maxPrice:1e4,volatility:8,category:ne,size:3,icon:"camera",availableAt:["black_market","electronics_hub"]},{id:505,name:"çºªå¿µå¸",description:"é™é‡å‘è¡Œçš„çºªå¿µå¸ï¼Œæ”¶è—ä»·å€¼é«˜",basePrice:2500,minPrice:1e3,maxPrice:8e3,volatility:9,category:ne,size:1,icon:"coin",availableAt:["black_market"]}];function ue(){return le.map(e=>new ce(e))}class de{constructor({id:e,name:t,description:i="",availableProducts:r=[],specialProducts:o=[],modifiers:s={priceFactor:1},icon:a="map-marker",image:n="",eventProbability:c=.3}){this.id=e,this.name=t,this.description=i,this.availableProducts=r,this.specialProducts=o,this.modifiers=s,this.icon=a,this.image=n,this.eventProbability=c}getPriceFactor(){return this.modifiers.priceFactor||1}isSpecialProduct(e){return this.specialProducts.includes(e)}hasProduct(e){return this.availableProducts.includes(e)||this.specialProducts.includes(e)}applyPriceModifiers(e,t){let i=e*this.getPriceFactor();return this.isSpecialProduct(t)&&(i*=.85),Math.round(i)}}const me=[{id:"commodity_market",name:"å¤§å®—å•†å“äº¤æ˜“æ‰€",description:"æ‰¹å‘å¸‚åœºå’Œå¤§å®—å•†å“äº¤æ˜“çš„é›†ä¸­åœ°ï¼Œä»·æ ¼ä½å»‰ä½†éœ€è¦å¤§é‡é‡‡è´­ã€‚è¿™é‡Œé€‚åˆå¤§é‡è¿›è´§è·å–æ›´å¥½çš„ä»·æ ¼ä¼˜åŠ¿ã€‚",modifiers:{priceFactor:.75},specialProducts:[202,203],availableProducts:["bulk_rice","bulk_goods","industrial_materials"],eventProbability:.2,icon:"commodity.png",image:"commodity_market.jpg"},{id:"second_hand_market",name:"äºŒæ‰‹å¸‚åœº",description:"å„ç±»äºŒæ‰‹ç‰©å“å’Œä½ä»·ç”Ÿæ´»å¿…éœ€å“çš„é›†æ•£åœ°ï¼Œä»·æ ¼ä¾¿å®œä½†å“è´¨å‚å·®ä¸é½ã€‚è¿™é‡Œæ˜¯æ·˜å®å’Œå›¤ç§¯æ—¥å¸¸ç”¨å“çš„å¥½åœ°æ–¹ã€‚",modifiers:{priceFactor:.8},specialProducts:[101,104,106,107],availableProducts:["clothes","toiletries","used_items","furniture"],eventProbability:.3,icon:"second-hand.png",image:"second_hand_market.jpg"},{id:"premium_mall",name:"é«˜ç«¯å•†åŸ",description:"æ±‡èšå„ç±»é«˜ç«¯å“ç‰Œå’Œå¥¢ä¾ˆå“çš„è´­ç‰©ä¸­å¿ƒï¼Œä»·æ ¼æ˜‚è´µä½†å“è´¨ä¼˜è‰¯ã€‚è¿™é‡Œæ˜¯è´­ä¹°ç å®ã€æ‰‹è¡¨ç­‰é«˜ç«¯å•†å“çš„åœ°æ–¹ã€‚",modifiers:{priceFactor:1.3},specialProducts:[401,404],availableProducts:["jewelry","watch","designer_clothes"],eventProbability:.25,icon:"premium.png",image:"premium_mall.jpg"},{id:"electronics_hub",name:"ç”µå­ç§‘æŠ€åŸ",description:"å„ç±»ç”µå­äº§å“å’Œæ•°ç è®¾å¤‡çš„ä¸“ä¸šäº¤æ˜“å¸‚åœºï¼Œä»·æ ¼é€‚ä¸­ä¸”å“ç§é½å…¨ã€‚è¿™é‡Œæ˜¯è´­ä¹°æ‰‹æœºã€ç”µè„‘ç­‰ç”µå­äº§å“çš„ç†æƒ³ä¹‹åœ°ã€‚",modifiers:{priceFactor:.95},specialProducts:[301,305],availableProducts:["phone","laptop","tablet","camera"],eventProbability:.3,icon:"electronics.png",image:"electronics_hub.jpg"},{id:"black_market",name:"åœ°ä¸‹é»‘å¸‚",description:"éšè”½çš„éæ³•äº¤æ˜“åœºæ‰€ï¼Œå„ç±»çç¨€æ”¶è—å“å’Œå¥‡ç‰¹å•†å“äº‘é›†ã€‚é£é™©ä¸æœºé‡å¹¶å­˜ï¼Œæ˜¯å¯»æ‰¾ç¨€æœ‰ç‰©å“çš„ç»ä½³åœ°ç‚¹ã€‚",modifiers:{priceFactor:1.1},specialProducts:[502,503],availableProducts:["stamp","antique","artwork","rare_coin"],eventProbability:.35,icon:"black-market.png",image:"black_market.jpg"}];function pe(){return me.map(e=>new de(e))}class he{constructor({id:e,name:t,price:i,level:r=1,description:o="",specialFeature:s="",purchaseCondition:a="",image:n=""}){this.id=e,this.name=t,this.price=i,this.level=r,this.description=o,this.specialFeature=s,this.purchaseCondition=a||`éœ€è¦${i}å…ƒç°é‡‘`,this.image=n||function(e){try{return e&&"undefined"!==e&&"null"!==e?Y(e):"/resources/assets/images/house_1.jpeg"}catch(t){console.warn("è·å–æˆ¿å±‹å›¾ç‰‡è·¯å¾„æ—¶å‡ºé”™:",t);const i={apartment:"/resources/assets/images/house_1.jpeg",second_hand:"/resources/assets/images/house_2.jpeg",highend:"/resources/assets/images/house_3.jpeg",villa:"/resources/assets/images/house_4.jpeg",mansion:"/resources/assets/images/house_5.jpeg"};if(!isNaN(parseInt(e))){const t=parseInt(e);return`/resources/assets/images/house_${t?Math.max(1,Math.min(5,t%5||1)):1}.jpeg`}return i[e]||"/resources/assets/images/house_1.jpeg"}}(e)}canBePurchasedWith(e){return e>=this.price}getValueRating(){return this.price<4e5?7:this.price<8e5?6:this.price<15e5?5:this.price<25e5?4:3}}const ge=[{id:"apartment",name:"å•èº«å…¬å¯“",price:35e4,level:1,description:"é€‚åˆå•èº«äººå£«å±…ä½çš„å°å‹å…¬å¯“ï¼Œä½ç½®ä¾¿åˆ©ä½†ç©ºé—´æœ‰é™ã€‚è¿™æ˜¯è¿ˆå‘æˆ¿äº§é˜¶æ¢¯çš„ç¬¬ä¸€æ­¥ï¼",specialFeature:"äº¤é€šä¾¿åˆ©ï¼Œæœˆä¾›è¾ƒä½ï¼Œé¦–æ¬¡ç½®ä¸šçš„ç†æƒ³é€‰æ‹©",image:"/resources/assets/images/house_1.jpeg"},{id:"second_hand",name:"äºŒæ‰‹æ—§æˆ¿",price:58e4,level:2,description:"å¹´ä»£è¾ƒä¹…çš„äºŒæ‰‹ä½å®…ï¼Œä»·æ ¼é€‚ä¸­ä½†å¯èƒ½éœ€è¦è£…ä¿®ã€‚ç©ºé—´è¾ƒå¤§ï¼Œéå¸¸é€‚åˆæ”¹é€ æˆç†æƒ³çš„å®¶ã€‚",specialFeature:"ç©ºé—´è¾ƒå¤§ï¼Œå‘¨è¾¹é…å¥—å®Œå–„ï¼Œæ€§ä»·æ¯”è¾ƒé«˜",image:"/resources/assets/images/house_2.jpeg"},{id:"highend",name:"é«˜æ¡£å°åŒº",price:8e5,level:3,description:"ç°ä»£åŒ–é«˜æ¡£ä½å®…å°åŒºï¼Œç¯å¢ƒä¼˜ç¾ï¼Œé…å¥—è®¾æ–½é½å…¨ã€‚ç¤¾åŒºç¯å¢ƒå®‰å…¨ï¼Œæ˜¯å®¶åº­å±…ä½çš„ç»ä½³é€‰æ‹©ã€‚",specialFeature:"ç¯å¢ƒä¼˜ç¾ï¼Œç‰©ä¸šç®¡ç†å®Œå–„ï¼Œç¤¾åŒºæ´»åŠ¨ä¸°å¯Œ",image:"/resources/assets/images/house_3.jpeg"},{id:"villa",name:"ç°ä»£åˆ«å¢…",price:15e5,level:4,description:"ç‹¬æ ‹ç°ä»£åˆ«å¢…ï¼Œæ‹¥æœ‰ç§å®¶èŠ±å›­å’Œè½¦åº“ã€‚å®½æ•çš„ç©ºé—´å’Œç²¾è‡´çš„è®¾è®¡ï¼Œå½°æ˜¾ä¸»äººçš„å“å‘³ä¸åœ°ä½ã€‚",specialFeature:"ç‹¬ç«‹ç©ºé—´ï¼Œå±…ä½å“è´¨é«˜ï¼Œæ˜¯æˆåŠŸäººå£«çš„æ ‡å¿—",image:"/resources/assets/images/house_4.jpeg"},{id:"mansion",name:"ç§äººåº„å›­",price:3e6,level:5,description:"å¤§å‹ç§äººåº„å›­ï¼Œå¸¦æœ‰å¤§ç‰‡ç»¿åœ°å’Œå¤šåŠŸèƒ½åŒºåŸŸã€‚æ‹¥æœ‰è¿™æ ·çš„æˆ¿äº§ï¼Œä»£è¡¨ä½ å·²è¾¾åˆ°äººç”Ÿå·…å³°ï¼",specialFeature:"ç»ˆæè±ªå®…ï¼Œç§å¯†æ€§æä½³ï¼Œç¤¾ä¼šåœ°ä½çš„è±¡å¾",image:"/resources/assets/images/house_5.jpeg"}];function ye(){return ge.map(e=>new he(e))}const ve={RISING_STRONG:"rising_strong",RISING:"rising",STABLE_HIGH:"stable_high",STABLE:"stable",STABLE_LOW:"stable_low",FALLING:"falling",FALLING_STRONG:"falling_strong",VOLATILE:"volatile"},fe=new Map;function be(e){if(0===(e%=2*Math.PI)||e===Math.PI)return 0;if(e===Math.PI/2)return 1;if(e===3*Math.PI/2)return-1;const t=e*e,i=t*e,r=i*t;return e-i/6+r/120-r*t/5040}function ke(e,t,i,r,o){const s=`${e.id}_${t}_${(null==i?void 0:i.price)||0}_${r}_${JSON.stringify(o)}`;if(fe.has(s))return fe.get(s);const a=_e(e,t,i,r,o);return fe.set(s,a),a}function Pe(){fe.clear(),console.log("ä»·æ ¼è®¡ç®—ç¼“å­˜å·²æ¸…é™¤")}function _e(e,t,i=null,r=1,o={}){var s,a,n,c,l,u;const d=(null==i?void 0:i.price)||e.basePrice,m=(null==i?void 0:i.trend)||ve.STABLE,p=e.id,h=e.minPrice,g=e.maxPrice,y=e.volatility,v=e.category,f=1023&t,b=.6+.15*y,k={[ve.RISING]:.05,[ve.RISING_STRONG]:.08,[ve.FALLING]:-.12,[ve.FALLING_STRONG]:-.15,[ve.STABLE]:-.01,[ve.STABLE_HIGH]:-.04,[ve.STABLE_LOW]:.02,[ve.VOLATILE]:-.02},P=(1e3*p+t)%997/997,_=Math.random();let E;E=P<.3?_<.75?k[m]||0:.08*(Math.random()-.35):_<.75?k[m]||0:.08*(Math.random()-.65);const S=(()=>{console.log("è®¡ç®—ç±»åˆ«å‘¨æœŸå› å­:",{category:v,weekMod:f});let e=0;switch(v){case"DAILY":e=.1*be(.077*f)-.03;break;case"FOOD":e=.2*be(.167*f)-.05;break;case"ELECTRONICS":e=.15*be(.1*f)-.08;break;case"LUXURY":e=.25*be(.067*f)-.03;break;case"COLLECTIBLE":e=.3*be(.125*f)-.04+(.15*Math.cos(.2*f)-.02);break;default:e=0}return e+=.01*(p%10-5),console.log("ç±»åˆ«å‘¨æœŸå› å­ç»“æœ:",e),e})(),M=.12*be(.1*(f+p%10*.1)+.01*(15&p))-.03,w=r||1,L=(null==(s=o.specialProducts)?void 0:s.includes(p))?.8:1,I=.9+.16*(.5*Math.sin(p*t*.01)+.5),x=o.globalPriceModifier||1,W=(null==(a=o.categoryModifiers)?void 0:a[v])||1,A=(null==(n=o.productModifiers)?void 0:n[p])||1,C=o.currentLocationId;let O=1,R=1;C&&(O=(null==(c=o.locationModifiers)?void 0:c[C])||1,(null==(u=null==(l=o.locationProductModifiers)?void 0:l[C])?void 0:u[p])&&(R=o.locationProductModifiers[C][p]),1===O&&1===R||console.log(`åº”ç”¨åœ°åŒºä»·æ ¼ä¿®æ­£ - åœ°åŒº: ${C}, å•†å“: ${p}, åœ°åŒºä¿®æ­£: ${O.toFixed(2)}, åœ°åŒºå•†å“ä¿®æ­£: ${R.toFixed(2)}`));const N=b*(1+E)*(1+S)*(1+M)*w*L*I*x*W*A*O*R;let D=N;if(Math.abs(N-1)<.005){D=1+(p*t%2==0?1:-1)*(.005+.01*Math.random()),console.log(`å•†å“ ${p} ä»·æ ¼å˜åŒ–å¤ªå°ï¼Œå¼ºåˆ¶è°ƒæ•´ä¸º ${(100*(D-1)).toFixed(2)}%`)}let G=d*D;G=function(e,t,i,r){const o=i.volatility/10,s=r.volatilityMultiplier||1,a=.2*(1+o)*s,n=t*(1+a),c=t*(1-a),l=.005*t;if(Math.abs(e-t)<l){e=t*(1+(i.id%2==0?1:-1)*(.005+.01*Math.random()))}let u=Math.max(c,Math.min(e,n));const d=i.minPrice+.5*(i.maxPrice-i.minPrice),m=Math.abs(u-d)/(i.maxPrice-i.minPrice);if(m>.4){const e=u>d?-1:1;u+=.05*(m-.4)*(i.maxPrice-i.minPrice)*e}return u}(G,d,e,o),G=Math.max(h,Math.min(G,g));const T=(G-e.basePrice)/e.basePrice,$=function(e,t,i,r){const o=.05,s=-.15,a=-.05;if(e>.15)return ve.RISING_STRONG;if(e>o)return ve.RISING;if(e<s)return ve.FALLING_STRONG;if(e<a)return ve.FALLING;const n=r-i;if(n<=0)return ve.STABLE;const c=(t-i)/n;return c>.8?ve.STABLE_HIGH:c<.2?ve.STABLE_LOW:ve.STABLE}(T,G,h,g);return{price:Math.round(G),trend:$,changePercent:parseFloat((100*T).toFixed(1)),originalPricePercent:T}}function Ee(e){return{[ve.RISING_STRONG]:"å¤§å¹…ä¸Šæ¶¨",[ve.RISING]:"ä¸Šæ¶¨",[ve.STABLE_HIGH]:"é«˜ä½ç¨³å®š",[ve.STABLE]:"ç¨³å®š",[ve.STABLE_LOW]:"ä½ä½ç¨³å®š",[ve.FALLING]:"ä¸‹è·Œ",[ve.FALLING_STRONG]:"å¤§å¹…ä¸‹è·Œ",[ve.VOLATILE]:"å‰§çƒˆæ³¢åŠ¨"}[e]||"æœªçŸ¥"}function Se(e){return{[ve.RISING_STRONG]:"â†‘â†‘",[ve.RISING]:"â†‘",[ve.STABLE_HIGH]:"â†—",[ve.STABLE]:"â†’",[ve.STABLE_LOW]:"â†˜",[ve.FALLING]:"â†“",[ve.FALLING_STRONG]:"â†“â†“",[ve.VOLATILE]:"â†•"}[e]||"â†’"}function Me(e){return{[ve.RISING_STRONG]:"#e53935",[ve.RISING]:"#f44336",[ve.STABLE_HIGH]:"#ff9800",[ve.STABLE]:"#9e9e9e",[ve.STABLE_LOW]:"#8bc34a",[ve.FALLING]:"#4caf50",[ve.FALLING_STRONG]:"#2e7d32",[ve.VOLATILE]:"#9c27b0"}[e]||"#9e9e9e"}const we=()=>{const e=Le();return{updateProductPrices:t=>{console.log("å¼€å§‹æ›´æ–°äº§å“ä»·æ ¼ï¼Œå½“å‰å‘¨æ•°:",t);const i=e.products;console.log("äº§å“æ€»æ•°:",i.length);const r={...e.productPrices},o=e.marketModifiers;console.log("å¸‚åœºä¿®æ­£å› å­:",o),Pe();const s=function(e,t,i={},r={}){console.time("BatchPriceUpdate"),r.currentLocation&&(r.currentLocationId=r.currentLocation.id);const o={},s=e.length;console.log(`æ‰¹é‡æ›´æ–°ä»·æ ¼ - å•†å“æ€»æ•°: ${s}, å½“å‰å‘¨æ•°: ${t}, å¸‚åœºä¿®æ­£å› å­:`,{global:r.globalPriceModifier||1,categories:Object.keys(r.categoryModifiers||{}).length,products:Object.keys(r.productModifiers||{}).length,locations:Object.keys(r.locationModifiers||{}).length,locationProducts:Object.keys(r.locationProductModifiers||{}).reduce((e,t)=>e+Object.keys(r.locationProductModifiers[t]||{}).length,0),currentLocationId:r.currentLocationId});for(let n=0;n<s;n++){const s=e[n],c=s.id,l=i[c]||null;try{o[c]=ke(s,t,l,1,r)}catch(a){console.error(`æ›´æ–°å•†å“ ${c} ä»·æ ¼æ—¶å‡ºé”™:`,a),o[c]={price:s.basePrice,trend:"stable",changePercent:0}}}return console.timeEnd("BatchPriceUpdate"),o}(i,t,r,o);console.log("æ‰¹é‡æ›´æ–°åçš„æ–°ä»·æ ¼æ•°é‡:",Object.keys(s).length),Object.keys(s).forEach(o=>{var a,n;const c=r[o]||{price:0,history:[]},l=s[o],u=c.price||(null==(a=i.find(e=>e.id===Number(o)))?void 0:a.basePrice)||0;if(!(Math.abs(l.price-u)>=1)||Math.abs(l.changePercent)<1){const e=(31*(parseInt(o)||0)+(t||0))%100,i=e<30?1:-1,r=12*Math.abs(Math.sin(.1*e)),s=Math.max(3,r),a=1+i*s/100;l.price=Math.round(u*a),console.log(`å¼ºåˆ¶ä»·æ ¼æ³¢åŠ¨ - å•†å“ID: ${o}, åŸä»·: ${u}, æ–°ä»·: ${l.price}, æ–¹å‘: ${i>0?"ä¸Šæ¶¨":"ä¸‹è·Œ"}, å˜åŒ–å¹…åº¦: ${s.toFixed(1)}%`)}if(0===l.changePercent&&u>0){const e=(null==(n=i.find(e=>e.id===Number(o)))?void 0:n.basePrice)||u;l.changePercent=(l.price-e)/e*100,l.changePercent=parseFloat(l.changePercent.toFixed(1))}e.productPrices[o]={price:l.price,prevPrice:u,trend:l.trend,changePercent:l.changePercent,originalPricePercent:l.originalPricePercent,history:[...c.history||[],l.price].slice(-20)};const d=i.find(e=>e.id===Number(o));if(d){console.log(`å•†å“ ${d.name}(ID:${o}) ä»·æ ¼æ›´æ–° - åŸºç¡€ä»·æ ¼: ${d.basePrice}, å½“å‰ä»·æ ¼: ${l.price}, å†å²: [${e.productPrices[o].history.join(", ")}]`);const{trend:t,changePercent:i}=e.calculateLongTermTrend(o,d.basePrice);e.productPrices[o].trend=t,e.productPrices[o].changePercent=i,console.log(`å•†å“ ${d.name}(ID:${o}) è¶‹åŠ¿æ›´æ–° - è¶‹åŠ¿: ${t}, å˜åŒ–ç™¾åˆ†æ¯”: ${i}%`)}}),e.updateLocationProducts(),console.log("ä»·æ ¼æ›´æ–°å®Œæˆ")},getProductTrendInfo:t=>{const i=e.getProductPriceTrend(t);return{text:Ee(i),icon:Se(i),color:Me(i)}},getPriceChangeText:t=>{const i=e.productPrices[t];if(!i||void 0===i.changePercent)return"0%";const r=i.changePercent;return`${r>0?"+":""}${r.toFixed(1)}%`},measurePricePerformance:(e,t)=>null,clearPriceCache:Pe}},Le=r("market",{state:()=>({locations:[],currentLocation:null,productPrices:{},products:[],availableProducts:[],houses:[],marketModifiers:{globalPriceModifier:1,categoryModifiers:{},productModifiers:{},locationModifiers:{},locationProductModifiers:{},weeksSinceLastGlobalChange:0,categoryUnchangedWeeks:{},productUnchangedWeeks:{},locationUnchangedWeeks:{},locationProductUnchangedWeeks:{}},initialized:!1}),actions:{initializeMarket(){return new Promise((e,t)=>{try{setTimeout(()=>{this.locations=pe(),this.products=ue(),this.houses=ye(),this.initializeProductPrices(),this.marketModifiers={globalPriceModifier:1,categoryModifiers:{},productModifiers:{},locationModifiers:{},locationProductModifiers:{},weeksSinceLastGlobalChange:0,categoryUnchangedWeeks:{},productUnchangedWeeks:{},locationUnchangedWeeks:{},locationProductUnchangedWeeks:{}},this.locations.length>0&&(this.changeLocation(this.locations[0].id),this.updateLocationProducts()),this.initialized=!0,console.log("MarketStore - å¸‚åœºåˆå§‹åŒ–å®Œæˆ"),console.log("å¯ç”¨å•†å“æ•°é‡:",this.availableProducts.length),e()},500)}catch(i){F(i,"marketState (market)",c.UNKNOWN,l.ERROR),console.error("MarketStore - åˆå§‹åŒ–å¸‚åœºå¤±è´¥:",i),t(i)}})},initializeProductPrices(){this.productPrices={},this.products.forEach(e=>{const t=Math.floor(Math.random()*(e.maxPrice-e.minPrice)+e.minPrice);this.productPrices[e.id]={price:t,trend:ve.STABLE,history:[t],changePercent:0}})},updateMarketState(e){console.log("MarketStore - æ›´æ–°å¸‚åœºçŠ¶æ€, å½“å‰å‘¨æ•°:",e),this.updateMarketModifiers();try{const{updateProductPrices:t}=we();if("function"!=typeof t)return void console.error("MarketStore - updateProductPrices ä¸æ˜¯ä¸€ä¸ªå‡½æ•°");this.currentLocation&&(this.marketModifiers.currentLocation=this.currentLocation),t(e),console.log("MarketStore - å•†å“ä»·æ ¼å·²æ›´æ–°")}catch(t){console.error("MarketStore - æ›´æ–°å•†å“ä»·æ ¼æ—¶å‡ºé”™:",t)}this.updateLocationProducts()},updateMarketModifiers(){const e=this.marketModifiers;if(console.log("MarketStore - æ›´æ–°å¸‚åœºè°ƒæ•´å› å­"),e.weeksSinceLastGlobalChange++,e.weeksSinceLastGlobalChange>=Math.max(4,Math.floor(5*Math.random())+4)&&(e.weeksSinceLastGlobalChange=0,Math.random()<.7)){const t=e.globalPriceModifier,i=.2*(Math.random()-.5);e.globalPriceModifier=Math.max(.8,Math.min(1.2,t+i)),console.log(`MarketStore - å…¨å±€ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${t.toFixed(2)} -> ${e.globalPriceModifier.toFixed(2)}`)}if(["food","electronics","luxury","daily","collectible"].forEach(t=>{if(e.categoryUnchangedWeeks[t]=(e.categoryUnchangedWeeks[t]||0)+1,e.categoryUnchangedWeeks[t]>=4||Math.random()<.3){e.categoryUnchangedWeeks[t]=0;const i=e.categoryModifiers[t]||1,r=.3*(Math.random()-.5);e.categoryModifiers[t]=Math.max(.7,Math.min(1.3,i+r)),console.log(`MarketStore - ${t}ç±»åˆ«ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${i.toFixed(2)} -> ${e.categoryModifiers[t].toFixed(2)}`)}}),Math.random()<.15){const t=Math.floor(3*Math.random())+1,i=Object.keys(this.productPrices);for(let r=0;r<t&&i.length>0;r++){const t=i[Math.floor(Math.random()*i.length)];e.productUnchangedWeeks[t]=0;const r=e.productModifiers[t]||1,o=.6*(Math.random()-.5);e.productModifiers[t]=Math.max(.5,Math.min(1.5,r+o));const s=this.products.find(e=>e.id===Number(t));console.log(`MarketStore - å•†å“ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${(null==s?void 0:s.name)||t} ${r.toFixed(2)} -> ${e.productModifiers[t].toFixed(2)}`)}}if(Math.random()<.2){const t=Math.floor(2*Math.random())+1,i=this.locations.map(e=>e.id);for(let r=0;r<t&&i.length>0;r++){const t=i[Math.floor(Math.random()*i.length)];e.locationUnchangedWeeks[t]=0;const r=e.locationModifiers[t]||1,o=.4*(Math.random()-.5);e.locationModifiers[t]=Math.max(.6,Math.min(1.4,r+o));const s=this.locations.find(e=>e.id===t);console.log(`MarketStore - åœ°åŒºä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${(null==s?void 0:s.name)||t} ${r.toFixed(2)} -> ${e.locationModifiers[t].toFixed(2)}`)}}if(Math.random()<.1){const t=this.locations.map(e=>e.id),i=t[Math.floor(Math.random()*t.length)],r=Math.floor(3*Math.random())+1,o=Object.keys(this.productPrices);e.locationProductModifiers[i]||(e.locationProductModifiers[i]={}),e.locationProductUnchangedWeeks[i]||(e.locationProductUnchangedWeeks[i]={});for(let s=0;s<r&&o.length>0;s++){const t=o[Math.floor(Math.random()*o.length)];e.locationProductUnchangedWeeks[i][t]=0;const r=e.locationProductModifiers[i][t]||1,s=.8*(Math.random()-.5);e.locationProductModifiers[i][t]=Math.max(.4,Math.min(1.6,r+s));const a=this.products.find(e=>e.id===Number(t)),n=this.locations.find(e=>e.id===i);console.log(`MarketStore - åœ°åŒºå†…å•†å“ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${(null==n?void 0:n.name)||i} çš„ ${(null==a?void 0:a.name)||t} ${r.toFixed(2)} -> ${e.locationProductModifiers[i][t].toFixed(2)}`)}}(e.globalPriceModifier<.8||e.globalPriceModifier>1.2)&&(e.globalPriceModifier=1)},changeLocation(e){const t=this.locations.find(t=>t.id===e);return!!t&&(this.currentLocation=t,this.updateLocationProducts(),!0)},updateLocationProducts(){if(console.log("MarketStore - æ›´æ–°å½“å‰åœ°ç‚¹å¯ç”¨å•†å“"),!this.currentLocation)return console.warn("MarketStore - æ›´æ–°å¯ç”¨å•†å“å¤±è´¥: å½“å‰åœ°ç‚¹æœªè®¾ç½®"),void(this.availableProducts=[]);try{const e=this.getLocationAvailableProducts(this.currentLocation);console.log("MarketStore - å½“å‰åœ°ç‚¹å¯ç”¨å•†å“ID:",e),this.availableProducts=this.products.filter(t=>e.includes(t.id)).map(e=>{const t=this.getCurrentProductPrice(e.id),i=this.isSpecialProduct(e.id),{trend:r,changePercent:o}=this.calculateLongTermTrend(e.id,e.basePrice);return this.productPrices[e.id]&&(this.productPrices[e.id].trend=r,this.productPrices[e.id].changePercent=o),console.log(`å•†å“ ${e.name} - ä»·æ ¼: ${t}, è¶‹åŠ¿: ${r}, å˜åŒ–ç™¾åˆ†æ¯”: ${o}%`),{...e,currentPrice:t,trend:r,changePercent:o,isSpecial:i}}),console.log(`MarketStore - æ›´æ–°å®Œæˆï¼Œå¯ç”¨å•†å“æ•°é‡: ${this.availableProducts.length}`)}catch(e){F(e,"marketState (market)",c.UNKNOWN,l.ERROR),console.error("MarketStore - æ›´æ–°å½“å‰åœ°ç‚¹å¯ç”¨å•†å“æ—¶å‡ºé”™:",e),this.availableProducts=[]}},calculateLongTermTrend(e,t){const i=this.productPrices[e];if(!i||!i.history||0===i.history.length)return console.log(`å•†å“ ${e} æ²¡æœ‰ä»·æ ¼å†å²æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤è¶‹åŠ¿`),{trend:ve.STABLE,changePercent:0};const r=i.history,o=r[r.length-1],s=(o-t)/t*100;let a;if(console.log(`å•†å“ ${e} è¶‹åŠ¿è®¡ç®— - åŸºç¡€ä»·æ ¼: ${t}, å½“å‰ä»·æ ¼: ${o}, å†å²è®°å½•: [${r.join(", ")}], å˜åŒ–ç™¾åˆ†æ¯”: ${s.toFixed(1)}%`),s>15)a=ve.RISING_STRONG;else if(s>5)a=ve.RISING;else if(s<-15)a=ve.FALLING_STRONG;else if(s<-5)a=ve.FALLING;else{const t=this.products.find(t=>t.id===Number(e));if(t){const i=t.minPrice,r=t.maxPrice,s=r-i;if(s<=0)console.log(`å•†å“ ${e} ä»·æ ¼èŒƒå›´ä¸º0ï¼Œä½¿ç”¨é»˜è®¤è¶‹åŠ¿`),a=ve.STABLE;else{const t=(o-i)/s;console.log(`å•†å“ ${e} ç›¸å¯¹ä½ç½®è®¡ç®— - æœ€ä½ä»·: ${i}, æœ€é«˜ä»·: ${r}, ç›¸å¯¹ä½ç½®: ${(100*t).toFixed(1)}%`),a=t>.8?ve.STABLE_HIGH:t<.2?ve.STABLE_LOW:ve.STABLE}}else console.log(`å•†å“ ${e} æœªæ‰¾åˆ°äº§å“ä¿¡æ¯ï¼Œä½¿ç”¨é»˜è®¤è¶‹åŠ¿`),a=ve.STABLE}if(r.length>=3){const t=r.slice(-3),i=this.calculateVolatility(t);console.log(`å•†å“ ${e} æ³¢åŠ¨æ€§è®¡ç®— - æœ€è¿‘ä»·æ ¼: [${t.join(", ")}], æ³¢åŠ¨æ€§: ${i.toFixed(3)}`),i>.1&&(a=ve.VOLATILE)}return console.log(`å•†å“ ${e} æœ€ç»ˆè¶‹åŠ¿: ${a}, å˜åŒ–ç™¾åˆ†æ¯”: ${s.toFixed(1)}%`),{trend:a,changePercent:parseFloat(s.toFixed(1))}},calculateVolatility(e){if(!e||e.length<2)return 0;let t=0;for(let i=1;i<e.length;i++){const r=e[i-1],o=e[i];if(r>0){t+=Math.abs((o-r)/r)}}return t/(e.length-1)},getLocationAvailableProducts(e){if(!e)return[];try{const t=this.products.filter(t=>t.availableAt&&t.availableAt.includes(e.id)).map(e=>e.id);return e.specialProducts&&e.specialProducts.length>0&&e.specialProducts.forEach(e=>{t.includes(e)||t.push(e)}),t}catch(t){return console.error("è·å–åœ°ç‚¹å¯ç”¨å•†å“åˆ—è¡¨å‡ºé”™:",t),[]}},isSpecialProduct(e){return!(!this.currentLocation||!this.currentLocation.specialProducts)&&this.currentLocation.specialProducts.includes(e)},getCurrentProductPrice(e){if(!e)return console.warn(`MarketStore - getCurrentProductPrice: æ— æ•ˆçš„å•†å“ID: ${e}`),0;const t=String(e);if(!this.productPrices||!this.productPrices[t]){console.warn(`MarketStore - getCurrentProductPrice: æ‰¾ä¸åˆ°å•†å“ä»·æ ¼ (ID: ${t})`);const e=this.products.find(e=>String(e.id)===t);return e?(console.log(`MarketStore - ä½¿ç”¨å•†å“åŸºç¡€ä»·æ ¼: ${e.basePrice}`),e.basePrice||0):0}return this.productPrices[t].price||0},getProductPriceHistory(e){var t;return(null==(t=this.productPrices[e])?void 0:t.history)||[]},getProductPriceTrend(e){var t;return(null==(t=this.productPrices[e])?void 0:t.trend)||ve.STABLE},addMarketModifier(e,t){switch(e){case"global":this.marketModifiers.globalPriceModifier=t.value;break;case"category":this.marketModifiers.categoryModifiers[t.category]=t.value;break;case"product":this.marketModifiers.productModifiers[t.productId]=t.value;break;case"location":this.marketModifiers.locationModifiers[t.locationId]=t.value;break;case"locationProduct":this.marketModifiers.locationProductModifiers[t.locationId]||(this.marketModifiers.locationProductModifiers[t.locationId]={}),this.marketModifiers.locationProductModifiers[t.locationId][t.productId]=t.value}},loadProducts(e){if(console.log("MarketStore - åŠ è½½äº§å“æ•°æ®:",e),Array.isArray(e)){if(0===this.products.length&&(this.products=ue()),e.length>0&&"string"==typeof e[0]){const t=ue();this.products=t.filter(t=>e.includes(t.id)),console.log("MarketStore - å·²åŠ è½½æŒ‡å®šäº§å“:",this.products.length)}this.updateLocationProducts()}else console.warn("MarketStore - åŠ è½½äº§å“æ•°æ®æ—¶ä¼ å…¥çš„ä¸æ˜¯æ•°ç»„:",e)},loadHouses(e){if(console.log("MarketStore - åŠ è½½æˆ¿å±‹æ•°æ®:",e),Array.isArray(e)){if(0===this.houses.length&&(this.houses=ye()),e.length>0&&"string"==typeof e[0]){const t=ye();this.houses=t.filter(t=>e.includes(t.id)),console.log("MarketStore - å·²åŠ è½½æŒ‡å®šæˆ¿å±‹:",this.houses.length)}}else console.warn("MarketStore - åŠ è½½æˆ¿å±‹æ•°æ®æ—¶ä¼ å…¥çš„ä¸æ˜¯æ•°ç»„:",e)}},getters:{availableHouses:e=>e.houses,currentLocationInfo:e=>e.currentLocation?{id:e.currentLocation.id,name:e.currentLocation.name,description:e.currentLocation.description,modifiers:e.currentLocation.modifiers,hasSpecialProducts:e.currentLocation.specialProducts&&e.currentLocation.specialProducts.length>0}:null,marketStatus(e){const t=e.marketModifiers.globalPriceModifier;let i="neutral";t>1.1?i="bull":t<.9&&(i="bear");const r=e.products.filter(t=>e.productPrices[t.id]),o=r.filter(t=>(e.productPrices[t.id].price-t.minPrice)/(t.maxPrice-t.minPrice)>.7),s=r.filter(t=>(e.productPrices[t.id].price-t.minPrice)/(t.maxPrice-t.minPrice)<.3);return{status:i,globalModifier:t,highPriceProductsRatio:r.length>0?o.length/r.length:0,lowPriceProductsRatio:r.length>0?s.length/r.length:0,activeModifiersCount:Object.keys(e.marketModifiers.categoryModifiers).length+Object.keys(e.marketModifiers.productModifiers).length}}}}),Ie="random",xe="story",We="location",Ae="market",Ce="personal",Oe="tutorial";let Re=class{constructor({id:e,title:t,description:i,options:r=[],conditions:o={},repeatable:s=!1,type:a=Ie,weight:n=1,imageUrl:c=null}){this.id=e,this.title=t,this.description=i,this.options=r,this.conditions=o,this.repeatable=s,this.type=a,this.weight=n,this.imageUrl=null}canTrigger(e,t=[]){var i,r;const o=this.conditions;if(!this.repeatable&&t.includes(this.id))return!1;if(null!==o.minWeek&&e.currentWeek<o.minWeek)return!1;if(null!==o.maxWeek&&e.currentWeek>o.maxWeek)return!1;if(null!==o.locations&&!o.locations.includes(null==(i=e.currentLocation)?void 0:i.id))return!1;if(null!==o.playerMoney){const t=e.player.money;if(void 0!==o.playerMoney.min&&t<o.playerMoney.min)return!1;if(void 0!==o.playerMoney.max&&t>o.playerMoney.max)return!1}if(null!==o.playerDebt){const t=e.player.debt;if(void 0!==o.playerDebt.min&&t<o.playerDebt.min)return!1;if(void 0!==o.playerDebt.max&&t>o.playerDebt.max)return!1}if(null!==o.inventoryItems)for(const s of o.inventoryItems){const t=e.player.inventory.find(e=>e.productId===s.productId),i=t?t.quantity:0;if(void 0!==s.minQuantity&&i<s.minQuantity)return!1;if(void 0!==s.maxQuantity&&i>s.maxQuantity)return!1}if(null!==o.attributes)for(const[s,a]of Object.entries(o.attributes)){const t=(null==(r=e.player.attributes)?void 0:r[s])||0;if(void 0!==a.min&&t<a.min)return!1;if(void 0!==a.max&&t>a.max)return!1}if(null!==o.requiredEvents)for(const s of o.requiredEvents)if(!t.includes(s))return!1;if(null!==o.excludedEvents)for(const s of o.excludedEvents)if(t.includes(s))return!1;return!(null!==o.customCondition&&!o.customCondition(e))&&Math.random()<=(o.probability||1)}getAvailableOptions(e){return this.options.filter(t=>null===t.condition||t.condition(e))}};class Ne{constructor({text:e,result:t,effects:i,condition:r=null}){this.text=e,this.result=t,this.effects=i,this.condition=r}isAvailable(e){return null===this.condition||this.condition(e)}}class De{constructor({money:e=0,debt:t=0,inventory:i=[],attributes:r={},market:o=null,forceLocationChange:s=!1,targetLocation:a=null,capacity:n=0,nextEvent:c=null,gameState:l=null}){this.money=e,this.debt=t,this.inventory=i,this.attributes=r,this.market=o,this.forceLocationChange=s,this.targetLocation=a,this.capacity=n,this.nextEvent=c,this.gameState=l}}class Ge{constructor({minWeek:e=null,maxWeek:t=null,locations:i=null,probability:r=1,playerMoney:o=null,playerDebt:s=null,inventoryItems:a=null,attributes:n=null,requiredEvents:c=null,excludedEvents:l=null,customCondition:u=null}){this.minWeek=e,this.maxWeek=t,this.locations=i,this.probability=r,this.playerMoney=o,this.playerDebt=s,this.inventoryItems=a,this.attributes=n,this.requiredEvents=c,this.excludedEvents=l,this.customCondition=u}}function Te(e){if("object"!=typeof e||Array.isArray(e)){const[e,t,i,r,o,s,a,n,c]=arguments;return new Re({id:e,title:t,description:i,options:r,conditions:o,repeatable:s,type:a,weight:n,imageUrl:c})}return new Re(e)}const $e=(e,t,i,r=null)=>new Ne({text:e,result:t,effects:i,condition:r}),je=e=>new De(e),He=e=>new Ge(e),Fe=[Te("market_boom","å±€éƒ¨å¸‚åœºç¹è£","æœ€æ–°ç»æµæŠ¥é“ï¼šé«˜ç«¯å•†åŸå’Œç”µå­ç§‘æŠ€åŸè¿æ¥æ¶ˆè´¹çƒ­æ½®ï¼Œå•†å“ä»·æ ¼æ™®éä¸Šæ¶¨ï¼è¿™å¯èƒ½æ˜¯è°ƒæ•´è´­ä¹°ç­–ç•¥çš„å¥½æ—¶æœºã€‚",[$e("æŠ“ä½æœºä¼šåœ¨çƒ­é—¨åœ°åŒºé‡‡è´­","ä½ å†³å®šå‰å¾€è¿™äº›ç¹è£åœ°åŒºé‡‡è´­æ›´å¤šå•†å“ï¼Œå¸Œæœ›èƒ½ä»ä»·æ ¼æ³¢åŠ¨ä¸­è·ç›Šã€‚",je({market:{locationModifiers:{premium_mall:1.25,electronics_hub:1.15},duration:2}})),$e("è§‚æœ›å¸‚åœºèµ°åŠ¿","ä½ å†³å®šä¿æŒè§‚æœ›æ€åº¦ï¼Œä¸åšä»»ä½•ç‰¹åˆ«çš„æ“ä½œã€‚",je({})),$e("è¶é«˜ä»·å‡ºå”®ç›¸å…³åº“å­˜å•†å“","ä½ å†³å®šåˆ©ç”¨è¿™äº›åœ°åŒºä»·æ ¼ä¸Šæ¶¨çš„æœºä¼šå‡ºå”®ä¸€äº›åº“å­˜å•†å“ã€‚",je({market:{locationModifiers:{premium_mall:1.2,electronics_hub:1.1},duration:1}}),e=>e.player.inventoryUsed>0)],He({minWeek:5,probability:.2}),!0,Ae,1.5,"/assets/images/events/market_boom.jpg"),Te("market_crash","å±€éƒ¨å¸‚åœºå´©ç›˜","çªå‘æ¶ˆæ¯ï¼šäºŒæ‰‹å¸‚åœºå’Œåœ°ä¸‹é»‘å¸‚çˆ†å‘å®‰å…¨äº‹ä»¶ï¼Œå¯¼è‡´è¿™äº›åœ°åŒºäº¤æ˜“èç¼©ï¼Œå•†å“ä»·æ ¼å¤§å¹…ä¸‹è·Œï¼ä½ éœ€è¦å†³å®šæ˜¯å¦åˆ©ç”¨è¿™æ¬¡ä½ä»·æœºä¼šã€‚",[$e("æŠ„åº•è´­ä¹°","ä½ å†³å®šè¶ä½ä»·å‰å¾€å—å½±å“åœ°åŒºå¤§é‡è´­å…¥å•†å“ï¼Œå¸Œæœ›èƒ½åœ¨ä»·æ ¼å›å‡æ—¶è·åˆ©ã€‚",je({market:{locationModifiers:{second_hand_market:.65,black_market:.7},duration:3}})),$e("ç­‰å¾…å¸‚åœºç¨³å®š","ä½ å†³å®šç­‰å¾…å¸‚åœºç¨³å®šåå†è¡ŒåŠ¨ï¼Œé¿å…åœ¨åŠ¨è¡æ—¶æœŸå†’é™©ã€‚",je({})),$e("æå‰å–å‡ºæŒæœ‰å•†å“","ä½ æ‹…å¿ƒå…¶ä»–åœ°åŒºä¹Ÿä¼šå—å½±å“ï¼Œå†³å®šç«‹å³å‡ºå”®éƒ¨åˆ†å•†å“å‡å°‘å¯èƒ½çš„æŸå¤±ã€‚",je({market:{locationModifiers:{second_hand_market:.75,black_market:.8},duration:1}}),e=>e.player.inventoryUsed>0)],He({minWeek:10,probability:.15}),!0,Ae,1.5,"/assets/images/events/market_crash.jpg"),Te("lucky_money","æ„å¤–ä¹‹è´¢","ä½ åœ¨è·¯ä¸Šæ¡åˆ°äº†ä¸€ä¸ªé’±åŒ…ï¼Œé‡Œé¢æœ‰ä¸€äº›ç°é‡‘å’Œå¤±ä¸»çš„è”ç³»æ–¹å¼ã€‚è¿™æ˜¯ä¸ªè€ƒéªŒä½ è¯šä¿¡çš„æ—¶åˆ»ã€‚",[$e("å½’è¿˜é’±åŒ…","ä½ è”ç³»äº†å¤±ä¸»å¹¶å½’è¿˜äº†é’±åŒ…ï¼Œå¯¹æ–¹éå¸¸æ„Ÿè°¢å¹¶ç»™äº†ä½ 500å…ƒé…¬é‡‘ã€‚",je({money:500,attributes:{creditRating:1,reputation:1}})),$e("æ®ä¸ºå·±æœ‰","ä½ å†³å®šæŠŠé’±åŒ…é‡Œçš„é’±æ®ä¸ºå·±æœ‰ï¼Œè·å¾—äº†2000å…ƒï¼Œä½†æ„Ÿåˆ°æœ‰äº›æ„§ç–šã€‚",je({money:2e3,attributes:{creditRating:-2,reputation:-2}}))],He({probability:.1,minWeek:3}),!1,Ce,1,"/assets/images/events/lucky_money.jpg"),Te("health_problem","å¥åº·é—®é¢˜","ä½ çªç„¶æ„Ÿåˆ°èº«ä½“ä¸é€‚ï¼ŒåŒ»ç”Ÿå»ºè®®ä½ åŠæ—¶å°±åŒ»ã€‚ä¸åŠæ—¶å¤„ç†å¯èƒ½ä¼šå½±å“åˆ°ä½ çš„æ—¥å¸¸å·¥ä½œå’Œç”Ÿæ´»ã€‚",[$e("ç«‹å³å°±åŒ»","ä½ é€‰æ‹©ç«‹å³å»åŒ»é™¢æ£€æŸ¥æ²»ç–—ï¼ŒèŠ±è´¹äº†ä¸€äº›åŒ»ç–—è´¹ï¼Œä½†è¿…é€Ÿæ¢å¤äº†å¥åº·ã€‚",je({money:-800,attributes:{health:1}})),$e("æš‚æ—¶å¿è€","ä½ å†³å®šå…ˆå¿ç€ï¼Œå¸Œæœ›ç—‡çŠ¶ä¼šè‡ªè¡Œå¥½è½¬ï¼Œçœä¸‹åŒ»ç–—è´¹ç”¨ã€‚ä½†è¿™å¯¼è‡´ä½ çš„å¥åº·çŠ¶å†µæœ‰æ‰€ä¸‹é™ã€‚",je({attributes:{health:-1}})),$e("å¯»æ±‚ä¸­è¯è°ƒç†","ä½ é€‰æ‹©è´­ä¹°ä¸€äº›ä¸­è¯è¿›è¡Œè°ƒç†ï¼ŒèŠ±è´¹è¾ƒå°‘ä½†æ•ˆæœæ¸©å’Œã€‚",je({money:-300,attributes:{health:.5}}))],He({probability:.15,minWeek:8}),!0,Ce,1,"/assets/images/events/health_problem.jpg"),Te("market_raid","é»‘å¸‚çªè¢­","è­¦æ–¹çªç„¶çªè¢­äº†åœ°ä¸‹é»‘å¸‚ï¼æ‰€æœ‰äººéƒ½åœ¨æ…Œä¹±ä¸­é€ƒçªœï¼Œä½ éœ€è¦å¿«é€Ÿåšå‡ºå†³å®šã€‚",[$e("è¿…é€Ÿç¦»å¼€","ä½ è¿…é€Ÿé€ƒç¦»äº†ç°åœºï¼Œè™½ç„¶æ²¡èƒ½å®Œæˆäº¤æ˜“ï¼Œä½†é¿å…äº†ä¸å¿…è¦çš„éº»çƒ¦ã€‚",je({forceLocationChange:!0,targetLocation:"commodity_market"})),$e("å†’é™©å®Œæˆäº¤æ˜“","ä½ å†’é™©ç•™ä¸‹æ¥å®Œæˆäº¤æ˜“ï¼Œè·å¾—äº†ä½ä»·å•†å“ï¼Œä½†å·®ç‚¹è¢«æ‰§æ³•äººå‘˜æŠ“ä½ã€‚",je({market:{globalPriceModifier:.6,duration:1},attributes:{businessSkill:1,risk_tolerance:1}}))],He({locations:["black_market"],probability:.25}),!0,We,1.5,"/assets/images/events/market_raid.jpg"),Te("celebrity_appearance","åäººç°èº«","ä¸€ä½çŸ¥åæ˜æ˜Ÿåœ¨é«˜ç«¯å•†åŸç°èº«è´­ç‰©ï¼Œå¼•èµ·ä¸€é˜µè½°åŠ¨ã€‚äººæµæ¿€å¢ï¼Œå•†å®¶çº·çº·è°ƒé«˜ä»·æ ¼ã€‚",[$e("è¶æœºæé«˜å”®ä»·","ä½ æŠ“ä½æœºä¼šåœ¨é™„è¿‘è®¾æ‘Šï¼Œä»¥ç•¥é«˜çš„ä»·æ ¼å‡ºå”®å•†å“ï¼Œèµšäº†ä¸€ç¬”ã€‚",je({money:1500,market:{globalPriceModifier:1.2,duration:1}})),$e("å°è¯•æ¥è¿‘åäºº","ä½ è¯•å›¾æ¥è¿‘åäººè·å–åˆå½±ï¼Œç»“æœä¸å°å¿ƒè¢«ä¿å®‰æ¨æ¡ï¼Œæ‰‹æœºæ‘”åäº†ã€‚",je({money:-500}))],He({locations:["premium_mall"],probability:.2}),!0,We,1,"/assets/images/events/celebrity.jpg"),Te("debt_relief","å€ºåŠ¡å‡å…","é“¶è¡Œæ¨å‡ºäº†å€ºåŠ¡é‡ç»„è®¡åˆ’ï¼Œä½ æ”¶åˆ°äº†å‚ä¸æœºä¼šã€‚è¿™å¯èƒ½æ˜¯å‡è½»å€ºåŠ¡è´Ÿæ‹…çš„å¥½æœºä¼šã€‚",[$e("ç”³è¯·å‚ä¸","ä½ æˆåŠŸç”³è¯·äº†å€ºåŠ¡å‡å…è®¡åˆ’ï¼Œå€ºåŠ¡å‡å°‘äº†20%ã€‚",je({debt:-.2})),$e("æ”¾å¼ƒæœºä¼š","ä½ è®¤ä¸ºè¿™å¯èƒ½æœ‰éšè—æ¡æ¬¾ï¼Œå†³å®šæ”¾å¼ƒè¿™ä¸ªæœºä¼šã€‚",je({}))],He({minWeek:15,playerDebt:{min:5e3},probability:.3}),!1,Ce,1,"/assets/images/events/debt_relief.jpg"),Te("electronics_discount","ç”µå­äº§å“ä¿ƒé”€","ç”µå­äº§å“å¸‚åœºæ¨å‡ºå¤§è§„æ¨¡ä¿ƒé”€æ´»åŠ¨ï¼Œä»·æ ¼å¤§å¹…ä¸‹é™ï¼è¿™æ˜¯å›¤ç§¯ç”µå­äº§å“çš„å¥½æ—¶æœºã€‚",[$e("è´­ä¹°ç”µå­äº§å“","ä½ è¶æœºè´­ä¹°äº†ä¸€äº›ç”µå­äº§å“ï¼Œä»·æ ¼æ¯”å¹³æ—¶ä¾¿å®œå¾ˆå¤šã€‚",je({market:{categoryModifier:"ELECTRONICS",modifier:.7,duration:2}})),$e("ä¸æ„Ÿå…´è¶£","ä½ å¯¹ç”µå­äº§å“ä¸æ„Ÿå…´è¶£ï¼Œå†³å®šå¿½ç•¥è¿™æ¬¡ä¿ƒé”€ã€‚",je({}))],He({probability:.15,minWeek:5}),!0,Ae,1,"/assets/images/events/electronics_sale.jpg"),Te("luxury_tax","å¥¢ä¾ˆå“å¾ç¨","æ”¿åºœå®£å¸ƒå¯¹å¥¢ä¾ˆå“å¾æ”¶é¢å¤–ç¨è´¹ï¼Œå¯¼è‡´å¥¢ä¾ˆå“ä»·æ ¼å…¨é¢ä¸Šæ¶¨ã€‚",[$e("æå‰å›¤è´§","ä½ å†³å®šåœ¨ç¨æ”¶æ”¿ç­–å®æ–½å‰å›¤ç§¯ä¸€äº›å¥¢ä¾ˆå“ï¼Œä»¥å¤‡åç»­é«˜ä»·å‡ºå”®ã€‚",je({market:{categoryModifier:"LUXURY",modifier:1.1,duration:1},nextEvent:"luxury_tax_aftermath"})),$e("è§‚æœ›å¸‚åœº","ä½ å†³å®šç­‰å¾…çœ‹çœ‹å¸‚åœºå¦‚ä½•ååº”ï¼Œé¿å…åšå‡ºå†’é™©å†³ç­–ã€‚",je({market:{categoryModifier:"LUXURY",modifier:1.3,duration:4}}))],He({probability:.1,minWeek:12,excludedEvents:["luxury_tax","luxury_tax_aftermath"]}),!1,Ae,1,"/assets/images/events/luxury_tax.jpg"),Te("luxury_tax_aftermath","å¥¢ä¾ˆå“ä»·æ ¼é£™å‡","å¥¢ä¾ˆå“å¾ç¨æ”¿ç­–æ­£å¼å®æ–½ï¼Œå¸‚åœºä»·æ ¼å¦‚é¢„æœŸèˆ¬å¤§å¹…ä¸Šæ¶¨ã€‚ä½ ä¹‹å‰çš„å‡†å¤‡æ˜¯å¦å……åˆ†ï¼Ÿ",[$e("é«˜ä»·å‡ºå”®å›¤è´§","ä½ å°†ä¹‹å‰å›¤ç§¯çš„å¥¢ä¾ˆå“ä»¥é«˜ä»·å‡ºå”®ï¼Œè·å¾—äº†å¯è§‚åˆ©æ¶¦ã€‚",je({money:3e3,market:{categoryModifier:"LUXURY",modifier:1.4,duration:3}}),e=>e.player.inventory.some(t=>{const i=e.products.find(e=>e.id===t.productId);return i&&"LUXURY"===i.category})),$e("ç»§ç»­æŒæœ‰","ä½ è®¤ä¸ºä»·æ ¼è¿˜ä¼šè¿›ä¸€æ­¥ä¸Šæ¶¨ï¼Œå†³å®šç»§ç»­æŒæœ‰å›¤ç§¯çš„å•†å“ã€‚",je({market:{categoryModifier:"LUXURY",modifier:1.3,duration:3}}))],He({requiredEvents:["luxury_tax"]}),!1,Ae,1,"/assets/images/events/luxury_price_rise.jpg"),Te("storage_expansion","å­˜å‚¨ç©ºé—´æ‰©å±•","ä½ å‘ç°ä¸€ä¸ªå¯ä»¥æ‰©å±•èƒŒåŒ…å®¹é‡çš„å¥½æœºä¼šï¼Œä½†éœ€è¦æŠ•å…¥ä¸€äº›èµ„é‡‘ã€‚",[$e("è´­ä¹°æ–°èƒŒåŒ…","ä½ èŠ±é’±è´­ä¹°äº†ä¸€ä¸ªæ›´å¤§çš„èƒŒåŒ…ï¼Œæå‡äº†å­˜å‚¨å®¹é‡ã€‚",je({money:-1500,capacity:20})),$e("ç§Ÿç”¨ä»“åº“ç©ºé—´","ä½ ç§Ÿäº†ä¸€ä¸ªå°å‹ä»“åº“ç©ºé—´ï¼ŒèŠ±è´¹è¾ƒä½ä½†å®¹é‡æå‡æœ‰é™ã€‚",je({money:-500,capacity:10})),$e("æ”¾å¼ƒæœºä¼š","ä½ è®¤ä¸ºå½“å‰å®¹é‡å¤Ÿç”¨ï¼Œå†³å®šèŠ‚çº¦èµ„é‡‘ä¸è¿›è¡Œæ‰©å±•ã€‚",je({}))],He({probability:.15,minWeek:10,playerMoney:{min:500},inventoryUsed:{min:.7}}),!0,Ce,1,"/assets/images/events/storage_expansion.jpg"),Te("tutorial_trading","äº¤æ˜“å…¥é—¨","æ¬¢è¿æ¥åˆ°ã€Šä¹°æˆ¿è®°ã€‹ï¼åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä½ çš„ç›®æ ‡æ˜¯é€šè¿‡ä¹°å–å•†å“èµšå–å·®ä»·ï¼Œæœ€ç»ˆç§¯ç´¯è¶³å¤Ÿçš„èµ„é‡‘è´­ä¹°ç†æƒ³çš„æˆ¿äº§ã€‚",[$e("äº†è§£åŸºæœ¬äº¤æ˜“","ä½ å­¦ä¹ äº†åŸºæœ¬çš„äº¤æ˜“çŸ¥è¯†ï¼Œæ˜ç™½äº†å¦‚ä½•åœ¨ä¸åŒåœ°ç‚¹ä¹‹é—´ä¹°å–å•†å“èµšå–å·®ä»·ã€‚",je({nextEvent:"tutorial_market"}))],He({minWeek:1,maxWeek:1}),!1,Oe,1,"/assets/images/events/tutorial.jpg"),Te("tutorial_market","å¸‚åœºè§£æ","ä¸åŒåœ°ç‚¹çš„å•†å“ä»·æ ¼ä¼šæœ‰å·®å¼‚ï¼ŒåŒæ—¶è¿˜ä¼šéšæ—¶é—´æ³¢åŠ¨ã€‚å…³æ³¨ä»·æ ¼è¶‹åŠ¿æ˜¯è·åˆ©çš„å…³é”®ï¼",[$e("ç»§ç»­å­¦ä¹ ","ä½ äº†è§£äº†ä»·æ ¼è¶‹åŠ¿ç³»ç»Ÿï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ä»·æ ¼æ³¢åŠ¨è·åˆ©ã€‚",je({nextEvent:"tutorial_goal"}))],He({requiredEvents:["tutorial_trading"]}),!1,Oe,1,"/assets/images/events/tutorial_market.jpg"),Te("tutorial_goal","æ¸¸æˆç›®æ ‡","æ¸¸æˆä¸­ä½ æœ‰52å‘¨çš„æ—¶é—´æ¥ç§¯ç´¯è´¢å¯Œã€‚æœ€ç»ˆç›®æ ‡æ˜¯è´­ä¹°ä¸€å¥—ç†æƒ³ä½æˆ¿ï¼Œæˆ¿å±‹ç§ç±»ä»ä¾¿å®œçš„å°å…¬å¯“åˆ°è±ªååˆ«å¢…ä¸ç­‰ã€‚ç¥ä½ å¥½è¿ï¼",[$e("å¼€å§‹æ¸¸æˆ","ä½ å·²ç»äº†è§£äº†æ¸¸æˆçš„åŸºæœ¬è§„åˆ™ï¼Œç°åœ¨å¯ä»¥å¼€å§‹ä½ çš„ä¹°æˆ¿ä¹‹æ—…äº†ï¼",je({attributes:{businessSkill:1}}))],He({requiredEvents:["tutorial_market"]}),!1,Oe,1,"/assets/images/events/tutorial_goal.jpg"),Te("unexpected_inheritance","æ„å¤–ç»§æ‰¿","ä½ æ”¶åˆ°ä¸€ä»½å¾‹å¸ˆå‡½ï¼Œä¸€ä½è¿œæˆ¿äº²æˆšå»ä¸–åå°†ä¸€ç¬”èµ„é‡‘ç•™ç»™äº†ä½ ã€‚è¿™æ˜¯ä¸ªæ„å¤–ä¹‹å–œï¼",[$e("æ¥å—ç»§æ‰¿","ä½ æ¥å—äº†è¿™ç¬”æ„å¤–ä¹‹è´¢ï¼Œè·å¾—äº†ä¸€ç¬”å¯è§‚çš„èµ„é‡‘ã€‚",je({money:5e3,attributes:{happiness:1}})),$e("æèµ ä¸€éƒ¨åˆ†","ä½ å†³å®šå°†ä¸€éƒ¨åˆ†ç»§æ‰¿çš„é’±æç»™æ…ˆå–„æœºæ„ï¼Œæ„Ÿè§‰å¿ƒæƒ…èˆ’ç•…ã€‚",je({money:3500,attributes:{happiness:2,reputation:2}}))],He({probability:.05,minWeek:15}),!1,Ce,.8,"/assets/images/events/inheritance.jpg"),Te("business_training","å•†ä¸šåŸ¹è®­","ä½ å‘ç°ä¸€ä¸ªå•†ä¸šæŠ€èƒ½åŸ¹è®­ç­çš„å¹¿å‘Šï¼Œå‚åŠ å¯èƒ½ä¼šæå‡ä½ çš„äº¤æ˜“èƒ½åŠ›ï¼Œä½†éœ€è¦ä»˜å‡ºä¸€å®šè´¹ç”¨å’Œæ—¶é—´ã€‚",[$e("å‚åŠ åŸ¹è®­","ä½ æŠ•å…¥æ—¶é—´å’Œé‡‘é’±å‚åŠ äº†åŸ¹è®­ï¼Œå•†ä¸šæŠ€èƒ½å¾—åˆ°äº†æå‡ã€‚",je({money:-1e3,attributes:{businessSkill:2}})),$e("è‡ªå­¦å•†ä¸šçŸ¥è¯†","ä½ å†³å®šé€šè¿‡ä¹¦ç±å’Œç½‘ç»œè‡ªå­¦å•†ä¸šçŸ¥è¯†ï¼ŒèŠ±è´¹è¾ƒå°‘ä½†æ•ˆæœæœ‰é™ã€‚",je({money:-200,attributes:{businessSkill:1}})),$e("å¿½ç•¥è¿™ä¸ªæœºä¼š","ä½ è®¤ä¸ºå®è·µå‡ºçœŸçŸ¥ï¼Œå†³å®šæŠŠæ—¶é—´å’Œé‡‘é’±ç”¨åœ¨å®é™…äº¤æ˜“ä¸Šã€‚",je({}))],He({probability:.15,minWeek:4,playerMoney:{min:1e3}}),!0,Ce,1,"/assets/images/events/business_training.jpg"),Te("social_networking","ç¤¾äº¤æœºä¼š","ä½ è¢«é‚€è¯·å‚åŠ ä¸€ä¸ªå•†ä¸šäººå£«çš„ç¤¾äº¤èšä¼šï¼Œè¿™å¯èƒ½æ˜¯ç»“è¯†äººè„‰ã€è·å–ä¿¡æ¯çš„å¥½æœºä¼šã€‚",[$e("ç§¯æå‚ä¸","ä½ åœ¨èšä¼šä¸Šç§¯æç¤¾äº¤ï¼Œç»“è¯†äº†å‡ ä½æœ‰ä»·å€¼çš„å•†ä¸šä¼™ä¼´ï¼Œè·å¾—äº†ä¸€äº›å¸‚åœºå†…å¹•ã€‚",je({money:-300,attributes:{socialSkill:1,businessSkill:.5},market:{insiderInfo:!0,duration:2}})),$e("ç®€å•å‡ºå¸­","ä½ ä½è°ƒåœ°å‚åŠ äº†èšä¼šï¼Œæ²¡æœ‰ç‰¹åˆ«çš„æ”¶è·ï¼Œä½†ä¹Ÿå¼€é˜”äº†çœ¼ç•Œã€‚",je({money:-300,attributes:{socialSkill:.5}})),$e("å©‰æ‹’é‚€è¯·","ä½ å› ä¸ºå¿™äºå…¶ä»–äº‹åŠ¡å©‰æ‹’äº†é‚€è¯·ï¼Œé”™è¿‡äº†è¿™æ¬¡ç¤¾äº¤æœºä¼šã€‚",je({}))],He({probability:.12,minWeek:8,playerMoney:{min:300}}),!0,Ce,1,"/assets/images/events/social_networking.jpg"),Te("investment_opportunity","æŠ•èµ„æœºä¼š","ä¸€ä¸ªæœ‹å‹å‘ä½ æ¨èäº†ä¸€ä¸ªå°å‹åˆ›ä¸šå…¬å¸çš„æŠ•èµ„æœºä¼šï¼Œå£°ç§°æœ‰é«˜å›æŠ¥ï¼Œä½†é£é™©æœªçŸ¥ã€‚",[$e("å¤§ç¬”æŠ•èµ„","ä½ å†³å®šæŠ•å…¥ä¸€å¤§ç¬”èµ„é‡‘ï¼Œå¸Œæœ›è·å¾—é«˜å›æŠ¥ã€‚",je({money:-4e3,nextEvent:"investment_result_big"})),$e("å°é¢æŠ•èµ„","ä½ è°¨æ…åœ°æŠ•å…¥ä¸€å°ç¬”èµ„é‡‘ï¼Œé™ä½å¯èƒ½çš„é£é™©ã€‚",je({money:-1500,nextEvent:"investment_result_small"})),$e("æ‹’ç»æŠ•èµ„","ä½ å¯¹è¿™ä¸ªæœºä¼šæŒæ€€ç–‘æ€åº¦ï¼Œå†³å®šä¸å†’é™©æŠ•èµ„ã€‚",je({}))],He({probability:.1,minWeek:20,playerMoney:{min:4e3}}),!1,Ce,1,"/assets/images/events/investment_opportunity.jpg"),Te("investment_result_big","æŠ•èµ„ç»“æœ","å‡ å‘¨åï¼Œä½ æŠ•èµ„çš„åˆ›ä¸šå…¬å¸æœ‰äº†æ–°è¿›å±•...",[$e("æŸ¥çœ‹ç»“æœ","ä½ æ»¡æ€€æœŸå¾…åœ°æŸ¥çœ‹æŠ•èµ„ç»“æœ...",je({money:Math.random()>.3?8e3:-2e3,attributes:{businessSkill:1}}))],He({requiredEvents:["investment_opportunity"]}),!1,Ce,1,"/assets/images/events/investment_result.jpg"),Te("investment_result_small","æŠ•èµ„ç»“æœ","å‡ å‘¨åï¼Œä½ æŠ•èµ„çš„åˆ›ä¸šå…¬å¸æœ‰äº†æ–°è¿›å±•...",[$e("æŸ¥çœ‹ç»“æœ","ä½ æ»¡æ€€æœŸå¾…åœ°æŸ¥çœ‹æŠ•èµ„ç»“æœ...",je({money:Math.random()>.2?2500:-500,attributes:{businessSkill:.5}}))],He({requiredEvents:["investment_opportunity"]}),!1,Ce,1,"/assets/images/events/investment_result.jpg"),Te("clothing_fashion_trend","æ—¶å°šæ½®æµ","ä¸€è‚¡æ–°çš„æ—¶å°šæ½®æµå¸­å·å…¨åŸï¼Œæœè£…ç±»äº§å“çš„éœ€æ±‚çªç„¶å¢åŠ ï¼",[$e("å›¤ç§¯æœè£…ç±»å•†å“","ä½ é¢„è§åˆ°è¿™æ˜¯ä¸€ä¸ªå•†æœºï¼Œå†³å®šå¤§é‡è´­å…¥æœè£…ç±»å•†å“ã€‚",je({market:{categoryModifier:"CLOTHING",modifier:1.3,duration:3}})),$e("è§‚æœ›å¸‚åœºå˜åŒ–","ä½ å¯¹æ—¶å°šæ½®æµæŒè§‚æœ›æ€åº¦ï¼Œå†³å®šç»§ç»­å…³æ³¨å¸‚åœºå˜åŒ–å†åšå†³å®šã€‚",je({})),$e("å‡ºå”®ç°æœ‰æœè£…åº“å­˜","ä½ å†³å®šè¶æœºå‡ºå”®æ‰‹ä¸­çš„æœè£…ç±»å•†å“ï¼Œè·å¾—ä¸€å®šåˆ©æ¶¦ã€‚",je({money:800}),e=>e.player.inventory.some(t=>{const i=e.products.find(e=>e.id===t.productId);return i&&"CLOTHING"===i.category}))],He({probability:.15,minWeek:4}),!0,Ae,1,"/assets/images/events/fashion_trend.jpg"),Te("food_shortage","é£Ÿå“çŸ­ç¼º","ç”±äºæ¶åŠ£å¤©æ°”å½±å“ï¼Œå¸‚åœºä¸Šå‡ºç°äº†é£Ÿå“çŸ­ç¼ºçš„æƒ…å†µï¼Œä»·æ ¼å¼€å§‹ä¸Šæ¶¨ã€‚",[$e("å¤§é‡è´­å…¥é£Ÿå“","ä½ é¢„è®¡ä»·æ ¼ä¼šè¿›ä¸€æ­¥ä¸Šæ¶¨ï¼Œå†³å®šè¶ç°åœ¨å¤§é‡è´­å…¥é£Ÿå“ç±»å•†å“ã€‚",je({market:{categoryModifiers:{FOOD:1.4},productModifiers:{201:1.6,202:1.5,204:1.7},duration:4}})),$e("å¯»æ‰¾æ›¿ä»£é£Ÿå“æ¥æº","ä½ å¼€å§‹å¯»æ‰¾æ›¿ä»£çš„é£Ÿå“æ¥æºï¼Œé¿å…å—åˆ°ä»·æ ¼æ³¢åŠ¨çš„å½±å“ã€‚",je({market:{categoryModifiers:{FOOD:1.2},productModifiers:{201:1.3,202:1.25},duration:2}}))],He({probability:.12,minWeek:8,excludedEvents:["food_shortage"]}),!0,Ae,1,"/assets/images/events/food_shortage.jpg"),Te("tech_innovation","ç§‘æŠ€åˆ›æ–°","ä¸€é¡¹çªç ´æ€§çš„ç§‘æŠ€åˆ›æ–°å¼•èµ·äº†å¸‚åœºå…³æ³¨ï¼Œç›¸å…³ç”µå­äº§å“éœ€æ±‚æ¿€å¢ã€‚",[$e("æŠ•èµ„ç§‘æŠ€äº§å“","ä½ å†³å®šè´­å…¥ä¸€æ‰¹æœ€æ–°çš„ç§‘æŠ€äº§å“ï¼Œå¸Œæœ›èƒ½å¤Ÿè·å¾—é«˜é¢åˆ©æ¶¦ã€‚",je({market:{categoryModifiers:{ELECTRONICS:1.25},productModifiers:{301:1.4,303:1.35,305:1.45},locationModifiers:{electronics_hub:1.15},duration:3}})),$e("ç»§ç»­å…³æ³¨ä¼ ç»Ÿäº§å“","ä½ è®¤ä¸ºç§‘æŠ€åˆ›æ–°åªæ˜¯çŸ­æœŸæ•ˆåº”ï¼Œå†³å®šç»§ç»­ä¸“æ³¨äºä¼ ç»Ÿäº§å“ã€‚",je({market:{productModifiers:{301:1.2,305:1.25},duration:2}}))],He({probability:.15,minWeek:6}),!0,Ae,1,"/assets/images/events/tech_innovation.jpg"),Te("supply_chain_disruption","ä¾›åº”é“¾ä¸­æ–­","å…¨çƒä¾›åº”é“¾å‡ºç°ä¸¥é‡ä¸­æ–­ï¼Œå¤šç§å•†å“çš„ä¾›åº”å—åˆ°å½±å“ï¼Œä»·æ ¼å¼€å§‹æ³¢åŠ¨ã€‚",[$e("å›¤ç§¯å—å½±å“å•†å“","ä½ å†³å®šè¶ä»·æ ¼è¿˜æœªå¤§å¹…ä¸Šæ¶¨å‰ï¼Œå›¤ç§¯ä¸€æ‰¹å—å½±å“çš„å•†å“ã€‚",je({market:{globalPriceModifier:1.15,duration:5}})),$e("è½¬å‘æœ¬åœ°äº§å“","ä½ å†³å®šè½¬å‘é‡‡è´­æœ¬åœ°ç”Ÿäº§çš„å•†å“ï¼Œå‡å°‘å¯¹å…¨çƒä¾›åº”é“¾çš„ä¾èµ–ã€‚",je({market:{globalPriceModifier:1.1,duration:3}})),$e("å»¶è¿Ÿé‡‡è´­è®¡åˆ’","ä½ å†³å®šæš‚æ—¶å»¶è¿Ÿé‡‡è´­è®¡åˆ’ï¼Œç­‰å¾…ä¾›åº”é“¾æ¢å¤æ­£å¸¸ã€‚",je({nextEvent:"supply_chain_recovery"}))],He({probability:.1,minWeek:15}),!1,Ae,1.2,"/assets/images/events/supply_chain.jpg"),Te("supply_chain_recovery","å…¨çƒä¾›åº”é“¾é€æ­¥æ¢å¤","ç»è¿‡ä¸€æ®µæ—¶é—´çš„è°ƒæ•´ï¼Œå…¨çƒä¾›åº”é“¾å¼€å§‹é€æ­¥æ¢å¤ï¼Œä½†ä¸åŒåœ°åŒºå’Œå•†å“çš„æ¢å¤é€Ÿåº¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚",[$e("æŠŠæ¡æ¢å¤æœºä¼š","ä½ åˆ†æäº†å¸‚åœºæ¢å¤è¶‹åŠ¿ï¼Œå†³å®šæœ‰é€‰æ‹©åœ°æŠ•èµ„äºä»·æ ¼å¼€å§‹æ¢å¤æ­£å¸¸çš„å•†å“ã€‚",je({market:{globalPriceModifier:.95,locationModifiers:{commodity_market:.9,electronics_hub:1.1,black_market:.85},locationProductModifiers:{commodity_market:{202:.85,203:.9},electronics_hub:{301:1.2,305:1.15},black_market:{502:.7,503:.75}},duration:3}})),$e("ç¨³å¥ç­–ç•¥","ä½ å†³å®šé‡‡å–ç¨³å¥ç­–ç•¥ï¼Œå¹³è¡¡è°ƒæ•´ä½ çš„åº“å­˜å’Œäº¤æ˜“è®¡åˆ’ã€‚",je({market:{globalPriceModifier:.98,locationModifiers:{commodity_market:.95,premium_mall:.95,second_hand_market:.95},duration:2}}))],He({requiredEvents:["supply_chain_disruption","old_supply_chain_disruption"]}),!1,Ae,1,"/assets/images/events/supply_recovery.jpg"),Te("seasonal_sales","å­£èŠ‚æ€§ä¿ƒé”€","å¹´åº¦å¤§ä¿ƒé”€æ´»åŠ¨å¼€å§‹äº†ï¼Œå„å¤§å•†å®¶çº·çº·é™ä»·å¸å¼•é¡¾å®¢ã€‚è¿™æ˜¯å›¤è´§çš„å¥½æ—¶æœºï¼",[$e("å¤§é‡é‡‡è´­","ä½ å†³å®šåˆ©ç”¨ä¿ƒé”€æ´»åŠ¨å¤§é‡é‡‡è´­å„ç±»å•†å“ï¼Œä¸ºæœªæ¥çš„é”€å”®åšå‡†å¤‡ã€‚",je({market:{globalPriceModifier:.75,duration:2}})),$e("é€‰æ‹©æ€§é‡‡è´­","ä½ æœ‰é€‰æ‹©åœ°è´­ä¹°ä¸€äº›ç‰¹ä»·å•†å“ï¼Œé¿å…èµ„é‡‘è¿‡åº¦å ç”¨ã€‚",je({market:{globalPriceModifier:.85,duration:1}})),$e("è·³è¿‡ä¿ƒé”€","ä½ è®¤ä¸ºä¿ƒé”€å•†å“è´¨é‡å¯èƒ½ä¸é«˜ï¼Œå†³å®šè·³è¿‡è¿™æ¬¡æ´»åŠ¨ã€‚",je({}))],He({probability:.2,minWeek:12,maxWeek:40}),!0,Ae,1,"/assets/images/events/seasonal_sales.jpg"),Te("market_discount","å¤§å®—äº¤æ˜“ä¼˜æƒ ","å¤§å®—å•†å“äº¤æ˜“æ‰€ä»Šå¤©æ¨å‡ºç‰¹åˆ«ä¼˜æƒ ï¼Œæ‰€æœ‰å•†å“éƒ½æœ‰é¢å¤–æŠ˜æ‰£ï¼",[$e("å¤§é‡é‡‡è´­","ä½ å†³å®šåˆ©ç”¨è¿™ä¸ªæœºä¼šå¤§é‡é‡‡è´­å„ç±»å•†å“ï¼Œä¸ºæœªæ¥çš„é”€å”®åšå‡†å¤‡ã€‚",je({market:{locationModifiers:{commodity_market:.8},categoryModifiers:{FOOD:.75,DAILY:.7},productModifiers:{201:.6,202:.65,101:.6},duration:1},forceLocationChange:!0,targetLocation:"commodity_market"})),$e("æœ‰é€‰æ‹©åœ°è´­ä¹°","ä½ ä»”ç»†æŒ‘é€‰ï¼Œåªè´­ä¹°é‚£äº›çœŸæ­£åˆ’ç®—çš„å•†å“ã€‚",je({market:{locationModifiers:{commodity_market:.9},productModifiers:{202:.7,203:.75},duration:1},forceLocationChange:!0,targetLocation:"commodity_market"})),$e("æ”¾å¼ƒæ­¤æ¬¡æœºä¼š","ä½ è§‰å¾—ä»·æ ¼ä¼˜æƒ å¹…åº¦ä¸å¤Ÿå¤§ï¼Œå†³å®šä¸å‚ä¸æ­¤æ¬¡ä¼˜æƒ æ´»åŠ¨ã€‚",je({market:{locationModifiers:{commodity_market:.95},duration:1}}))],He({locations:["commodity_market"],probability:.25}),!0,We,1,"/assets/images/events/wholesale_discount.jpg"),Te("mall_event","å•†åŸåäººæ´»åŠ¨","é«˜ç«¯å•†åŸä¸¾åŠäº†ä¸€åœºåäººè§é¢ä¼šï¼Œå¸å¼•äº†å¤§é‡äººæµã€‚å•†åœºå†…çš„å•†å“ä»·æ ¼ä¸´æ—¶ä¸Šè°ƒã€‚",[$e("è¶æœºè®¾æ‘Šé”€å”®","ä½ åœ¨å•†åŸå¤–è®¾ç½®ä¸´æ—¶æ‘Šä½ï¼Œåˆ©ç”¨äººæµé‡å¢åŠ é”€å”®é¢ã€‚",je({money:1200,inventory:[{productId:"random",quantity:-5}]}),e=>e.player.inventoryUsed>=5),$e("é¿å¼€äººç¾¤","ä½ å†³å®šé¿å¼€æ‹¥æŒ¤çš„äººç¾¤ï¼Œæ”¹å¤©å†æ¥è´­ç‰©ã€‚",je({forceLocationChange:!0}))],He({locations:["premium_mall"],probability:.2}),!0,We,1,"/assets/images/events/mall_celebrity.jpg"),Te("electronics_expo","ç”µå­ç§‘æŠ€åŸå±•é”€ä¼š","ç”µå­ç§‘æŠ€åŸä¸¾åŠå¤§å‹æ•°ç äº§å“å±•é”€ä¼šï¼Œæœ€æ–°æ¬¾æ‰‹æœºå’Œæ™ºèƒ½æ‰‹è¡¨éƒ½æœ‰ç‰¹åˆ«ä¼˜æƒ ï¼è¿™æ˜¯é‡‡è´­ç”µå­äº§å“çš„ç»ä½³æ—¶æœºã€‚",[$e("å‚è§‚å±•ä¼š","ä½ èŠ±è´¹ä¸€äº›æ—¶é—´å‚è§‚å±•é”€ä¼šï¼Œäº†è§£æœ€æ–°çš„ç§‘æŠ€è¶‹åŠ¿ã€‚",je({money:-100,market:{locationModifiers:{electronics_hub:.95},duration:1}})),$e("é‡‡è´­ç‰¹ä»·ç”µå­äº§å“","ä½ å†³å®šæŠ•èµ„è´­ä¹°å±•ä¼šä¸Šçš„ç‰¹ä»·æ‰‹æœºå’Œæ™ºèƒ½æ‰‹è¡¨ï¼ŒæœŸæœ›èƒ½åœ¨ä»·æ ¼ä¸Šæ¶¨å‰è½¬å”®è·åˆ©ã€‚",je({money:-2e3,market:{locationProductModifiers:{electronics_hub:{301:.7,305:.75}},duration:2}}),e=>e.player.money>=2e3)],He({locations:["electronics_hub"],probability:.3}),!0,We,1,"/assets/images/events/electronics_expo.jpg"),Te("market_inspection","å¸‚åœºæ£€æŸ¥","å¸‚åœºç®¡ç†äººå‘˜çªç„¶æ¥åˆ°æŠ˜æ‰£å¸‚åœºè¿›è¡Œæ£€æŸ¥ï¼ŒæŸ¥éªŒæ‘Šä½åˆè§„æ€§ï¼ä½ éœ€è¦å¿«é€Ÿå†³å®šå¦‚ä½•åº”å¯¹ã€‚",[$e("é…åˆæ£€æŸ¥","ä½ ä¸»åŠ¨é…åˆæ£€æŸ¥ï¼Œå±•ç¤ºè‡ªå·±çš„åˆè§„ç»è¥ï¼Œè·å¾—äº†ç®¡ç†äººå‘˜çš„å¥½æ„Ÿã€‚",je({money:-50,attributes:{businessSkill:1}})),$e("æš‚æ—¶ç¦»åœº","ä½ å†³å®šæš‚æ—¶æ”¶æ‘Šç¦»åœºï¼Œé¿å¼€è¿™æ¬¡æ£€æŸ¥ï¼Œä½†æŸå¤±äº†ä¸€å¤©çš„ç”Ÿæ„ã€‚",je({money:-300,attributes:{businessSkill:-1}}))],He({locations:["discount_market"],probability:.25}),!0,We,1,"/assets/images/events/market_inspection.jpg"),Te("business_competition","å•†ä¸šç«èµ›","å½“åœ°ä¸¾åŠäº†ä¸€åœºå•†ä¸šæŠ€èƒ½ç«èµ›ï¼Œæµ‹è¯•å‚èµ›è€…çš„å•†ä¸šå¤´è„‘å’Œå†³ç­–èƒ½åŠ›ã€‚è¿™å¯èƒ½æ˜¯å±•ç¤ºä½ å®åŠ›çš„å¥½æœºä¼šï¼",[$e("å…¨åŠ›å‚èµ›","ä½ å†³å®šå…¨åŠ›ä»¥èµ´å‚åŠ æ¯”èµ›ï¼Œå¸Œæœ›èƒ½è·å¾—å¥½åæ¬¡ã€‚",je({money:e=>{const t=e.player.attributes.businessSkill||0;return t>=8?5e3:t>=5?2e3:t>=3?500:0},attributes:{businessSkill:1,reputation:1}})),$e("éšä¾¿å‚ä¸","ä½ æŠ±ç€å­¦ä¹ çš„æ€åº¦å‚åŠ æ¯”èµ›ï¼Œä¸æœŸæœ›è·å¥–ã€‚",je({money:200,attributes:{businessSkill:.5}})),$e("æ”¾å¼ƒå‚èµ›","ä½ è®¤ä¸ºè‡ªå·±è¿˜æ²¡å‡†å¤‡å¥½ï¼Œå†³å®šæ”¾å¼ƒè¿™æ¬¡æ¯”èµ›æœºä¼šã€‚",je({}))],He({probability:.08,minWeek:25}),!1,Ce,1,"/assets/images/events/business_competition.jpg"),Te("market_insider_info","å†…å¹•æ¶ˆæ¯","ä½ çš„ä¸€ä¸ªæœ‹å‹é€éœ²ç»™ä½ ä¸€ä¸ªå¸‚åœºå†…å¹•æ¶ˆæ¯ï¼Œæš—ç¤ºæŸç±»å•†å“å³å°†å¤§æ¶¨ä»·ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå‘è´¢çš„å¥½æœºä¼šï¼",[$e("ç›¸ä¿¡æ¶ˆæ¯å¹¶è¡ŒåŠ¨","ä½ ç›¸ä¿¡è¿™ä¸ªå†…å¹•æ¶ˆæ¯ï¼Œå†³å®šæŠ•å…¥å¤§é‡èµ„é‡‘è´­ä¹°ç›¸å…³å•†å“ã€‚",je({nextEvent:"insider_info_result"})),$e("å°è§„æ¨¡è¯•æ°´","ä½ ä¸ç¡®å®šæ¶ˆæ¯çš„å¯é æ€§ï¼Œå†³å®šå°è§„æ¨¡æŠ•èµ„ä»¥é™ä½é£é™©ã€‚",je({nextEvent:"insider_info_result_small"})),$e("å¿½ç•¥æ¶ˆæ¯","ä½ å¯¹è¿™ç§å†…å¹•æ¶ˆæ¯æŒæ€€ç–‘æ€åº¦ï¼Œå†³å®šä¸é‡‡å–ä»»ä½•è¡ŒåŠ¨ã€‚",je({}))],He({probability:.1,minWeek:15,playerMoney:{min:3e3}}),!1,Ae,1,"/assets/images/events/insider_info.jpg"),Te("insider_info_result","å†…å¹•æ¶ˆæ¯ç»“æœ","ä¸€å‘¨åï¼Œä½ ç­‰å¾…çœ‹åˆ°å†…å¹•æ¶ˆæ¯çš„ç»“æœ...",[$e("æŸ¥çœ‹ç»“æœ","ä½ æ»¡æ€€æœŸå¾…åœ°æŸ¥çœ‹å¸‚åœºå˜åŒ–ã€‚",je({market:Math.random()>.3?{categoryModifier:["LUXURY","ELECTRONICS","CLOTHING"][Math.floor(3*Math.random())],modifier:1.8,duration:2}:{globalPriceModifier:.9,duration:1}}))],He({requiredEvents:["market_insider_info"]}),!1,Ae,1,"/assets/images/events/insider_result.jpg"),Te("insider_info_result_small","å†…å¹•æ¶ˆæ¯å°è§„æ¨¡è¯•æ°´ç»“æœ","ä¸€å‘¨åï¼Œä½ ç­‰å¾…çœ‹åˆ°å†…å¹•æ¶ˆæ¯çš„ç»“æœ...",[$e("æŸ¥çœ‹ç»“æœ","ä½ æŸ¥çœ‹å°è§„æ¨¡æŠ•èµ„çš„ç»“æœã€‚",je({market:Math.random()>.3?{categoryModifier:["LUXURY","ELECTRONICS","CLOTHING"][Math.floor(3*Math.random())],modifier:1.5,duration:1}:{globalPriceModifier:.95,duration:1}}))],He({requiredEvents:["market_insider_info"]}),!1,Ae,1,"/assets/images/events/insider_result.jpg"),Te("real_estate_opportunity","æˆ¿äº§æœºä¼š","ä½ å¶ç„¶å¬è¯´æœ‰ä¸€å¤„æˆ¿äº§å³å°†ä»¥ä½äºå¸‚åœºä»·çš„ä»·æ ¼å‡ºå”®ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªéš¾å¾—çš„ä¹°æˆ¿æœºä¼šã€‚",[$e("ç«‹å³è€ƒå¯Ÿ","ä½ å†³å®šç«‹å³å»è€ƒå¯Ÿè¿™å¤„æˆ¿äº§ï¼Œçœ‹çœ‹æ˜¯å¦å€¼å¾—è´­ä¹°ã€‚",je({nextEvent:"real_estate_inspection"})),$e("å’¨è¯¢ä¸“ä¸šäººå£«","ä½ å†³å®šå…ˆå’¨è¯¢ä¸€ä½æˆ¿äº§ä¸“å®¶ï¼Œè·å–ä¸“ä¸šæ„è§ã€‚",je({money:-500,nextEvent:"real_estate_expert_advice"}),e=>e.player.money>=500),$e("å¿½ç•¥è¿™ä¸ªæ¶ˆæ¯","ä½ è®¤ä¸ºç›®å‰è¿˜æ²¡æœ‰å‡†å¤‡å¥½è´­æˆ¿ï¼Œå†³å®šå¿½ç•¥è¿™ä¸ªæ¶ˆæ¯ã€‚",je({}))],He({probability:.1,minWeek:30,playerMoney:{min:5e4}}),!1,xe,1,"/assets/images/events/real_estate_opportunity.jpg"),Te("real_estate_inspection","æˆ¿äº§è€ƒå¯Ÿ","ä½ ä»”ç»†è€ƒå¯Ÿäº†è¿™å¤„æˆ¿äº§ï¼Œå‘ç°å®ƒç¡®å®ä½äºå¸‚åœºä»·ï¼Œä½†éœ€è¦ä¸€äº›ç»´ä¿®ã€‚",[$e("ä»¥ä¼˜æƒ ä»·è´­ä¹°","ä½ å†³å®šæŠ“ä½è¿™ä¸ªæœºä¼šï¼Œä»¥ä¼˜æƒ ä»·æ ¼è´­ä¹°è¿™å¤„æˆ¿äº§ã€‚",je({money:-6e4,attributes:{housingValue:8e4}}),e=>e.player.money>=6e4),$e("ç»§ç»­ç­‰å¾…æ›´å¥½çš„æœºä¼š","ä½ è®¤ä¸ºè¿™å¤„æˆ¿äº§ä¸å¤Ÿå®Œç¾ï¼Œå†³å®šç»§ç»­ç­‰å¾…æ›´å¥½çš„æœºä¼šã€‚",je({}))],He({requiredEvents:["real_estate_opportunity"]}),!1,xe,1,"/assets/images/events/real_estate_inspection.jpg"),Te("real_estate_expert_advice","ä¸“å®¶å»ºè®®","æˆ¿äº§ä¸“å®¶ä»”ç»†åˆ†æåå‘Šè¯‰ä½ ï¼Œè¿™å¤„æˆ¿äº§ä½ç½®å¾ˆå¥½ï¼Œä½†ç»´ä¿®æˆæœ¬å¯èƒ½æ¯”é¢„æœŸé«˜ã€‚",[$e("æ¥å—å»ºè®®å¹¶è´­ä¹°","ä½ æ¥å—ä¸“å®¶å»ºè®®å¹¶å†³å®šè´­ä¹°è¿™å¤„æˆ¿äº§ï¼ŒåŒæ—¶ä¸ºç»´ä¿®é¢„ç•™èµ„é‡‘ã€‚",je({money:-65e3,attributes:{housingValue:85e3}}),e=>e.player.money>=65e3),$e("æ”¾å¼ƒè¿™æ¬¡æœºä¼š","ä¸“å®¶çš„åˆ†æè®©ä½ æ„è¯†åˆ°é£é™©ï¼Œä½ å†³å®šæ”¾å¼ƒè¿™æ¬¡è´­æˆ¿æœºä¼šã€‚",je({}))],He({requiredEvents:["real_estate_opportunity"]}),!1,xe,1,"/assets/images/events/real_estate_expert.jpg"),Te("housing_market_boom","æˆ¿å¸‚ç¹è£","æœ€è¿‘æˆ¿åœ°äº§å¸‚åœºå¼‚å¸¸ç«çˆ†ï¼Œæˆ¿ä»·æ™®éä¸Šæ¶¨ã€‚ç°åœ¨å¯èƒ½æ˜¯è´­æˆ¿æˆ–å‡ºå”®ç°æœ‰æˆ¿äº§çš„å¥½æ—¶æœºã€‚",[$e("æŠ“ç´§è´­æˆ¿","ä½ è®¤ä¸ºæˆ¿ä»·è¿˜ä¼šç»§ç»­ä¸Šæ¶¨ï¼Œå†³å®šè¶ç°åœ¨æŠ“ç´§è´­æˆ¿ã€‚",je({market:{houseMarketModifier:1.1,duration:4}})),$e("å‡ºå”®ç°æœ‰æˆ¿äº§","ä½ å†³å®šè¶æˆ¿ä»·é«˜ç‚¹å‡ºå”®ç°æœ‰æˆ¿äº§ï¼Œè·å¾—å¯è§‚åˆ©æ¶¦ã€‚",je({money:e=>1.15*(e.player.attributes.housingValue||0),attributes:{housingValue:0}}),e=>e.player.attributes.housingValue>0),$e("è§‚æœ›å¸‚åœº","ä½ è®¤ä¸ºç›®å‰æˆ¿ä»·è¿‡é«˜ï¼Œå¯èƒ½æ˜¯æ³¡æ²«ï¼Œå†³å®šç»§ç»­è§‚æœ›ã€‚",je({}))],He({probability:.1,minWeek:35}),!0,Ae,1,"/assets/images/events/housing_boom.jpg"),Te("housing_market_crash","æˆ¿å¸‚å´©ç›˜","çªå‘ç»æµå±æœºå¯¼è‡´æˆ¿åœ°äº§å¸‚åœºæ€¥å‰§é™æ¸©ï¼Œæˆ¿ä»·å¼€å§‹ä¸‹è·Œã€‚è¿™å¯èƒ½æ˜¯ä½ä»·è´­å…¥çš„æœºä¼šï¼Œä¹Ÿå¯èƒ½å¸¦æ¥é£é™©ã€‚",[$e("é€†åŠ¿è´­æˆ¿","ä½ è®¤ä¸ºè¿™æ˜¯éš¾å¾—çš„ä½ä»·è´­æˆ¿æœºä¼šï¼Œå†³å®šé€†åŠ¿è€Œä¸Šã€‚",je({market:{houseMarketModifier:.8,duration:3}})),$e("è§‚æœ›å¸‚åœº","ä½ å†³å®šç­‰å¾…å¸‚åœºè¿›ä¸€æ­¥ç¨³å®šåå†åšå†³å®šã€‚",je({market:{houseMarketModifier:.85,duration:2}}))],He({probability:.08,minWeek:40,excludedEvents:["housing_market_boom"]}),!1,Ae,1,"/assets/images/events/housing_crash.jpg"),Te("business_partner_proposal","å•†ä¸šåˆä½œæè®®","ä¸€ä½ç»éªŒä¸°å¯Œçš„å•†äººæè®®ä¸ä½ åˆä½œå¼€å±•æ›´å¤§è§„æ¨¡çš„è´¸æ˜“ï¼Œä½†éœ€è¦ä½ æŠ•å…¥ä¸€ç¬”èµ„é‡‘ä½œä¸ºå¯åŠ¨èµ„æœ¬ã€‚",[$e("æ¥å—åˆä½œ","ä½ å†³å®šä¸è¿™ä½å•†äººåˆä½œï¼ŒæŠ•å…¥ä¸€ç¬”èµ„é‡‘å¼€å±•å¤§è§„æ¨¡è´¸æ˜“ã€‚",je({money:-1e4,nextEvent:"business_partnership_result"}),e=>e.player.money>=1e4),$e("å°è§„æ¨¡è¯•æ°´","ä½ å¯¹åˆä½œæŒè°¨æ…æ€åº¦ï¼Œå†³å®šå…ˆå°è§„æ¨¡æŠ•èµ„æµ‹è¯•ã€‚",je({money:-3e3,nextEvent:"business_partnership_small_result"}),e=>e.player.money>=3e3),$e("æ‹’ç»åˆä½œ","ä½ å¯¹è¿™ä¸ªåˆä½œæè®®æŒæ€€ç–‘æ€åº¦ï¼Œå†³å®šå©‰æ‹’ã€‚",je({}))],He({probability:.1,minWeek:30,playerMoney:{min:1e4},attributes:{businessSkill:{min:5}}}),!1,xe,1,"/assets/images/events/business_partner.jpg"),Te("business_partnership_result","å•†ä¸šåˆä½œç»“æœ","å‡ å‘¨è¿‡å»äº†ï¼Œä½ ä¸å•†ä¸šä¼™ä¼´çš„åˆä½œé¡¹ç›®æœ‰äº†ç»“æœ...",[$e("æŸ¥çœ‹ç»“æœ","ä½ æœŸå¾…åœ°æŸ¥çœ‹åˆä½œçš„æˆæœã€‚",je({money:e=>15e3+1e3*(e.player.attributes.businessSkill||0),attributes:{businessSkill:2}}))],He({requiredEvents:["business_partner_proposal"]}),!1,xe,1,"/assets/images/events/partnership_result.jpg"),Te("business_partnership_small_result","å°è§„æ¨¡åˆä½œç»“æœ","å‡ å‘¨è¿‡å»äº†ï¼Œä½ çš„å°è§„æ¨¡åˆä½œé¡¹ç›®æœ‰äº†ç»“æœ...",[$e("æŸ¥çœ‹ç»“æœ","ä½ æŸ¥çœ‹å°è§„æ¨¡åˆä½œçš„æˆæœã€‚",je({money:e=>4500+300*(e.player.attributes.businessSkill||0),attributes:{businessSkill:1}}))],He({requiredEvents:["business_partner_proposal"]}),!1,xe,1,"/assets/images/events/partnership_result.jpg"),Te("final_opportunity","æœ€ç»ˆæœºä¼š","æ¸¸æˆæ¥è¿‘å°¾å£°ï¼Œå¸‚åœºå‡ºç°äº†ä¸€æ¬¡éš¾å¾—çš„ä»·æ ¼æ³¢åŠ¨ï¼Œè¿™å¯èƒ½æ˜¯ä½ æœ€åçš„å‘è´¢æœºä¼šï¼",[$e("å…¨åŠ›æŠ•å…¥","ä½ å†³å®šå°†å¤§éƒ¨åˆ†èµ„é‡‘æŠ•å…¥åˆ°è¿™æ¬¡æœºä¼šä¸­ï¼Œå¸Œæœ›èƒ½å®ç°æœ€åçš„ç¿»ç›˜ã€‚",je({market:{globalPriceModifier:.6,duration:1},nextEvent:"final_market_surge"})),$e("è°¨æ…æŠ•èµ„","ä½ å†³å®šè°¨æ…æŠ•èµ„ï¼Œé¿å…åœ¨æœ€åå…³å¤´å†’è¿‡å¤§é£é™©ã€‚",je({market:{globalPriceModifier:.8,duration:1}}))],He({minWeek:45,probability:.5}),!1,xe,2,"/assets/images/events/final_opportunity.jpg"),Te("final_market_surge","æœ€ç»ˆå¸‚åœºå¤§æ¶¨","å°±åœ¨æ¸¸æˆå³å°†ç»“æŸå‰ï¼Œå¸‚åœºå‡ºç°äº†æˆå‰§æ€§çš„ä»·æ ¼ä¸Šæ¶¨ï¼è¿™æ˜¯æœ€åçš„å˜ç°æœºä¼šã€‚",[$e("å…¨éƒ¨å–å‡º","ä½ å†³å®šè¶è¿™æ¬¡ä»·æ ¼ä¸Šæ¶¨å…¨éƒ¨å–å‡ºåº“å­˜ï¼Œæœ€å¤§åŒ–ä½ çš„åˆ©æ¶¦ã€‚",je({market:{globalPriceModifier:2,duration:1}})),$e("éƒ¨åˆ†å–å‡º","ä½ å†³å®šå–å‡ºéƒ¨åˆ†åº“å­˜ï¼Œä¿ç•™ä¸€äº›ä»¥é˜²åå¸‚ç»§ç»­ä¸Šæ¶¨ã€‚",je({market:{globalPriceModifier:1.7,duration:1}}))],He({requiredEvents:["final_opportunity"],minWeek:48}),!1,xe,1,"/assets/images/events/market_surge.jpg"),Te("property_expo","æˆ¿äº§å±•è§ˆä¼š","åŸå¸‚ä¸­å¿ƒæ­£åœ¨ä¸¾åŠä¸€åœºå¤§å‹æˆ¿äº§å±•è§ˆä¼šï¼Œå„ä¸ªå¼€å‘å•†éƒ½å¸¦æ¥äº†ä»–ä»¬æœ€æ–°çš„æ¥¼ç›˜é¡¹ç›®ã€‚è¿™æ˜¯äº†è§£å¸‚åœºåŠ¨æ€å’Œè·å–ä¼˜æƒ ä¿¡æ¯çš„å¥½æœºä¼šã€‚",[$e("å‚è§‚å±•è§ˆä¼š","ä½ å†³å®šèŠ±æ—¶é—´å‚è§‚æˆ¿äº§å±•è§ˆä¼šï¼Œäº†è§£å¸‚åœºæœ€æ–°åŠ¨æ€ã€‚",je({money:-200,nextEvent:"property_expo_discover"}),e=>e.player.money>=200),$e("ä¸ä¸­ä»‹äº¤è°ˆ","ä½ å†³å®šåªä¸å‡ ä½æˆ¿äº§ä¸­ä»‹äº¤è°ˆï¼Œä¸èŠ±å¤ªå¤šæ—¶é—´ã€‚",je({nextEvent:"property_broker_info"})),$e("å¿½ç•¥è¿™ä¸ªæ´»åŠ¨","ä½ ç°åœ¨æ²¡æœ‰è´­æˆ¿è®¡åˆ’ï¼Œå†³å®šå¿½ç•¥è¿™æ¬¡å±•è§ˆä¼šã€‚",je({}))],He({probability:.15,minWeek:15,playerMoney:{min:3e4}}),!1,xe,1,"/assets/images/events/property_expo.jpg"),Te("property_expo_discover","å±•ä¼šå‘ç°","åœ¨å±•è§ˆä¼šä¸Šï¼Œä½ å‘ç°ä¸€ä¸ªæ­£åœ¨é¢„å”®çš„æ–°æ¥¼ç›˜ï¼Œå¼€å‘å•†æä¾›äº†ç‹¬ç‰¹çš„æŠ˜æ‰£æ–¹æ¡ˆã€‚é”€å”®äººå‘˜å‘Šè¯‰ä½ ï¼Œå¦‚æœç°åœ¨é¢„è®¢ï¼Œå¯ä»¥è·å¾—æ¯”å¸‚åœºä»·ä½15%çš„ä¼˜æƒ ã€‚",[$e("é¢„ä»˜å®šé‡‘","ä½ å†³å®šæŠ“ä½è¿™ä¸ªæœºä¼šï¼Œé¢„ä»˜10%çš„å®šé‡‘é”å®šè¿™ä¸ªä¼˜æƒ ã€‚",je({money:e=>-1e4,nextEvent:"property_investment_result"}),e=>e.player.money>=1e4),$e("è®°å½•ä¿¡æ¯","ä½ è®°ä¸‹äº†è¿™ä¸ªæ¥¼ç›˜çš„ä¿¡æ¯ï¼Œä½†å†³å®šå…ˆä¸ä»˜å®šé‡‘ï¼Œå›å»å†è€ƒè™‘ã€‚",je({nextEvent:"property_later_decision"})),$e("å¯»æ‰¾å…¶ä»–æœºä¼š","ä½ å¯¹è¿™ä¸ªæ¥¼ç›˜ä¸å¤ªæ„Ÿå…´è¶£ï¼Œå†³å®šç»§ç»­å¯»æ‰¾å…¶ä»–æœºä¼šã€‚",je({}))],He({requiredEvents:["property_expo"]}),!1,xe,1,"/assets/images/events/property_discover.jpg"),Te("property_investment_result","æˆ¿äº§æŠ•èµ„ç»“æœ","å‡ å‘¨åï¼Œä½ æ”¶åˆ°å¼€å‘å•†çš„é€šçŸ¥ï¼Œä½ é¢„è®¢çš„æ¥¼ç›˜é¡¹ç›®è¿›å±•é¡ºåˆ©ï¼Œå·²ç»å¼€å§‹æ­£å¼å»ºè®¾ã€‚æ ¹æ®æœ€æ–°çš„å¸‚åœºè¯„ä¼°ï¼Œç±»ä¼¼æˆ¿äº§çš„ä»·å€¼å·²ç»ä¸Šæ¶¨äº†ã€‚",[$e("ç»§ç»­æŒæœ‰","ä½ å†³å®šç»§ç»­æŒæœ‰è¿™é¡¹æŠ•èµ„ï¼ŒæœŸå¾…æˆ¿äº§å®Œå·¥åçš„å‡å€¼ã€‚",je({attributes:{housingInvestment:1e4,propertyValue:1e5},nextEvent:"property_completion_notice"})),$e("è½¬è®©æŠ•èµ„","ä½ å†³å®šè¶ç€å¸‚åœºä¸Šæ¶¨ï¼Œå°†ä½ çš„é¢„è´­æƒè½¬è®©ç»™å…¶ä»–ä¹°å®¶ï¼Œè·å–å¿«é€Ÿåˆ©æ¶¦ã€‚",je({money:13e3,attributes:{housingInvestment:0,propertyValue:0}}))],He({requiredEvents:["property_expo_discover"]}),!1,xe,1,"/assets/images/events/property_investment.jpg"),Te("property_completion_notice","æˆ¿äº§å®Œå·¥é€šçŸ¥","ä½ æ”¶åˆ°äº†å¼€å‘å•†çš„é€šçŸ¥ï¼Œä½ æŠ•èµ„çš„æˆ¿äº§é¡¹ç›®å·²ç»å®Œå·¥ï¼Œç°åœ¨ä»·å€¼çº¦120,000å…ƒã€‚ä½ å¯ä»¥é€‰æ‹©æ”¯ä»˜å‰©ä½™çš„è´­æˆ¿æ¬¾å®Œæˆè´­ä¹°ï¼Œæˆ–è€…å‡ºå”®ä½ çš„é¢„è´­æƒã€‚",[$e("å®Œæˆè´­ä¹°","ä½ å†³å®šæ”¯ä»˜å‰©ä½™çš„è´­æˆ¿æ¬¾ï¼Œå®Œæˆè¿™å¤„æˆ¿äº§çš„è´­ä¹°ã€‚",je({money:-9e4,attributes:{housingInvestment:0,propertyValue:12e4,hasHouse:!0},nextEvent:"new_house_celebration"}),e=>e.player.money>=9e4),$e("å‡ºå”®é¢„è´­æƒ","ä½ å†³å®šå‡ºå”®ä½ çš„é¢„è´­æƒï¼Œè·å–æŠ•èµ„å›æŠ¥ã€‚",je({money:25e3,attributes:{housingInvestment:0,propertyValue:0}})),$e("ç»§ç»­ç­‰å¾…","ä½ è®¤ä¸ºæˆ¿äº§ä»·å€¼è¿˜ä¼šä¸Šæ¶¨ï¼Œå†³å®šç»§ç»­æŒæœ‰ï¼Œä½†æš‚ä¸ä»˜æ¬¾ã€‚",je({nextEvent:"property_market_change"}))],He({requiredEvents:["property_investment_result"],minWeek:35}),!1,xe,1,"/assets/images/events/property_completion.jpg"),Te("property_market_change","æˆ¿äº§å¸‚åœºå˜åŒ–","ç”±äºå¸‚åœºæ¡ä»¶å˜åŒ–ï¼Œä½ æŒæœ‰çš„æˆ¿äº§é¢„è´­æƒä»·å€¼å‡ºç°äº†æ³¢åŠ¨ã€‚",[$e("æŸ¥çœ‹å¸‚åœºå˜åŒ–","ä½ å¯†åˆ‡å…³æ³¨å¸‚åœºåŠ¨æ€ï¼ŒæŸ¥çœ‹ä½ çš„æŠ•èµ„å—åˆ°äº†ä»€ä¹ˆå½±å“ã€‚",je({attributes:{propertyValue:Math.random()>.5?13e4:11e4}}))],He({requiredEvents:["property_completion_notice"]}),!1,Ae,1,"/assets/images/events/market_change.jpg"),Te("new_house_celebration","æ–°æˆ¿åº†ç¥","ä½ ç»ˆäºæ‹¥æœ‰äº†è‡ªå·±çš„æˆ¿äº§ï¼è¿™æ˜¯äººç”Ÿçš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚æœ‹å‹ä»¬æè®®ä¸¾åŠä¸€ä¸ªå°å‹èšä¼šæ¥åº†ç¥è¿™ä¸€æ—¶åˆ»ã€‚",[$e("ä¸¾åŠåº†ç¥æ´¾å¯¹","ä½ å†³å®šä¸¾åŠä¸€ä¸ªåº†ç¥æ´¾å¯¹ï¼Œé‚€è¯·æœ‹å‹ä»¬ä¸€èµ·åˆ†äº«è¿™ä¸ªå–œæ‚¦æ—¶åˆ»ã€‚",je({money:-2e3,attributes:{happiness:5,socialNetwork:2}}),e=>e.player.money>=2e3),$e("ç®€å•åº†ç¥","ä½ å†³å®šç®€å•åœ°è¯·å‡ ä¸ªå¥½å‹åƒé¡¿é¥­åº†ç¥ä¸€ä¸‹ã€‚",je({money:-500,attributes:{happiness:3}}),e=>e.player.money>=500),$e("ç‹¬è‡ªæ¬£èµ","ä½ å†³å®šç‹¬è‡ªä¸€äººå¥½å¥½æ¬£èµä½ çš„æ–°å®¶ï¼Œäº«å—è¿™ä»½æˆå°±æ„Ÿã€‚",je({attributes:{happiness:2}}))],He({requiredEvents:["property_completion_notice"]}),!1,Ce,1,"/assets/images/events/house_celebration.jpg"),Te("property_broker_info","æˆ¿äº§ä¸­ä»‹ä¿¡æ¯","ä¸æˆ¿äº§ä¸­ä»‹äº¤è°ˆåï¼Œä½ è·å¾—äº†ä¸€äº›å…³äºå½“å‰æˆ¿å¸‚çš„å†…éƒ¨ä¿¡æ¯ã€‚ä¸­ä»‹è¡¨ç¤ºï¼ŒæŸäº›ç‰¹å®šåŒºåŸŸçš„æˆ¿äº§å¯èƒ½å³å°†å‡å€¼ã€‚",[$e("æ·±å…¥äº†è§£","ä½ å†³å®šä¸ä¸­ä»‹è¿›ä¸€æ­¥äº¤æµï¼Œäº†è§£æ›´å¤šç»†èŠ‚ã€‚",je({money:-500,nextEvent:"property_insider_tip"}),e=>e.player.money>=500),$e("ä¿æŒå…³æ³¨","ä½ å¯¹è¿™äº›ä¿¡æ¯è¡¨ç¤ºæ„Ÿè°¢ï¼Œä½†å†³å®šæš‚æ—¶åªæ˜¯ä¿æŒå…³æ³¨ã€‚",je({}))],He({requiredEvents:["property_expo"]}),!1,xe,1,"/assets/images/events/broker_info.jpg"),Te("property_insider_tip","å†…éƒ¨æ¶ˆæ¯","æ”¯ä»˜å’¨è¯¢è´¹åï¼Œä¸­ä»‹å‘ä½ é€éœ²äº†ä¸€ä¸ªå†…éƒ¨æ¶ˆæ¯ï¼šåŸå¸‚è§„åˆ’éƒ¨é—¨å³å°†å®£å¸ƒåœ¨æŸåŒºåŸŸå»ºè®¾æ–°çš„åœ°é“çº¿ï¼Œè¿™å¾ˆå¯èƒ½å¯¼è‡´è¯¥åŒºåŸŸæˆ¿ä»·ä¸Šæ¶¨ã€‚",[$e("æŠ•èµ„è¯¥åŒºåŸŸæˆ¿äº§","ä½ å†³å®šç›¸ä¿¡è¿™ä¸ªæ¶ˆæ¯ï¼ŒæŠ•èµ„è¯¥åŒºåŸŸçš„æˆ¿äº§ã€‚",je({money:-3e4,nextEvent:"property_insider_result"}),e=>e.player.money>=3e4),$e("è°¨æ…è§‚æœ›","ä½ å¯¹è¿™ä¸ªæ¶ˆæ¯æŒè°¨æ…æ€åº¦ï¼Œå†³å®šå…ˆè§‚å¯Ÿä¸€æ®µæ—¶é—´ã€‚",je({nextEvent:"property_missed_opportunity"}))],He({requiredEvents:["property_broker_info"]}),!1,xe,1,"/assets/images/events/insider_tip.jpg"),Te("property_insider_result","å†…éƒ¨æ¶ˆæ¯ç»“æœ","å‡ å‘¨åï¼ŒåŸå¸‚è§„åˆ’éƒ¨é—¨æœç„¶å®£å¸ƒäº†æ–°åœ°é“çº¿çš„å»ºè®¾è®¡åˆ’ï¼Œä½ æŠ•èµ„çš„åŒºåŸŸæˆ¿äº§ä»·å€¼å¼€å§‹ä¸Šæ¶¨ï¼",[$e("ç»§ç»­æŒæœ‰","ä½ å†³å®šç»§ç»­æŒæœ‰è¿™é¡¹æŠ•èµ„ï¼ŒæœŸå¾…æ›´å¤§çš„å‡å€¼ç©ºé—´ã€‚",je({attributes:{propertyValue:45e3}})),$e("ç«‹å³å‡ºå”®","ä½ å†³å®šè¶ç€æ¶ˆæ¯å…¬å¸ƒåçš„ä»·æ ¼ä¸Šæ¶¨ç«‹å³å‡ºå”®è·åˆ©ã€‚",je({money:4e4,attributes:{propertyValue:0}}))],He({requiredEvents:["property_insider_tip"]}),!1,xe,1,"/assets/images/events/insider_result.jpg"),Te("property_missed_opportunity","é”™å¤±æœºä¼š","åŸå¸‚è§„åˆ’éƒ¨é—¨å®£å¸ƒäº†æ–°åœ°é“çº¿çš„å»ºè®¾è®¡åˆ’ï¼Œä¸­ä»‹æåˆ°çš„åŒºåŸŸæˆ¿ä»·æœç„¶ä¸Šæ¶¨äº†ã€‚ä½ æœ‰äº›é—æ†¾æ²¡æœ‰æŠŠæ¡è¿™ä¸ªæŠ•èµ„æœºä¼šã€‚",[$e("å¯»æ‰¾æ–°æœºä¼š","é”™è¿‡äº†è¿™æ¬¡æœºä¼šï¼Œä½†ä½ å†³å®šç»§ç»­å¯»æ‰¾æ–°çš„æŠ•èµ„æœºä¼šã€‚",je({nextEvent:"property_new_opportunity"})),$e("æ¥å—æ•™è®­","ä½ æ¥å—è¿™ä¸ªæ•™è®­ï¼Œå†³å®šä»¥ååœ¨æœ‰å†…éƒ¨æ¶ˆæ¯æ—¶æ›´åŠ æœæ–­ã€‚",je({attributes:{businessSkill:1}}))],He({requiredEvents:["property_insider_tip"]}),!1,xe,1,"/assets/images/events/missed_opportunity.jpg"),Te("property_new_opportunity","æ–°çš„æˆ¿äº§æœºä¼š","å°½ç®¡é”™è¿‡äº†ä¹‹å‰çš„æœºä¼šï¼Œä½†ä½ å¾ˆå¿«å‘ç°äº†å¦ä¸€ä¸ªæ½œåœ¨çš„æˆ¿äº§æŠ•èµ„æœºä¼šã€‚ä¸€å¤„ä½ç½®è¾ƒå¥½ä½†ç•¥æ˜¾è€æ—§çš„æˆ¿äº§æ­£åœ¨å‡ºå”®ï¼Œä»·æ ¼ç›¸å¯¹è¾ƒä½ã€‚",[$e("è´­ä¹°å¹¶ç¿»æ–°","ä½ å†³å®šè´­ä¹°è¿™å¤„æˆ¿äº§å¹¶è¿›è¡Œç¿»æ–°ï¼Œæå‡å…¶ä»·å€¼ã€‚",je({money:-4e4,attributes:{propertyValue:4e4},nextEvent:"property_renovation_results"}),e=>e.player.money>=4e4),$e("ä»…è´­ä¹°ä¸ç¿»æ–°","ä½ å†³å®šè´­ä¹°è¿™å¤„æˆ¿äº§ï¼Œä½†æš‚ä¸è¿›è¡Œç¿»æ–°ã€‚",je({money:-35e3,attributes:{propertyValue:35e3}}),e=>e.player.money>=35e3),$e("æ”¾å¼ƒè¿™ä¸ªæœºä¼š","ç»è¿‡è¯„ä¼°ï¼Œä½ è®¤ä¸ºè¿™ä¸ªæœºä¼šé£é™©å¤ªå¤§ï¼Œå†³å®šæ”¾å¼ƒã€‚",je({}))],He({requiredEvents:["property_missed_opportunity"]}),!1,xe,1,"/assets/images/events/new_opportunity.jpg"),Te("property_renovation_results","æˆ¿äº§ç¿»æ–°ç»“æœ","ç»è¿‡ä¸€æ®µæ—¶é—´çš„ç¿»æ–°ï¼Œä½ çš„æˆ¿äº§ç„•ç„¶ä¸€æ–°ã€‚å‘¨è¾¹é‚»å±…å’Œæˆ¿äº§è¯„ä¼°å¸ˆéƒ½å¯¹ä½ çš„ç¿»æ–°å·¥ä½œè¡¨ç¤ºèµèµã€‚",[$e("æŸ¥çœ‹æˆ¿äº§ä¼°å€¼","ä½ è¯·æˆ¿äº§è¯„ä¼°å¸ˆå¯¹ç¿»æ–°åçš„æˆ¿äº§è¿›è¡Œæ­£å¼ä¼°å€¼ã€‚",je({money:-500,attributes:{propertyValue:55e3}}),e=>e.player.money>=500),$e("æŒ‚ç‰Œå‡ºå”®","ä½ å†³å®šå°†ç¿»æ–°åçš„æˆ¿äº§ç«‹å³æŒ‚ç‰Œå‡ºå”®ã€‚",je({nextEvent:"property_sale_result"})),$e("ç»§ç»­æŒæœ‰","ä½ å†³å®šæš‚æ—¶ç»§ç»­æŒæœ‰è¿™å¤„æˆ¿äº§ï¼Œè§‚å¯Ÿå¸‚åœºå˜åŒ–ã€‚",je({}))],He({requiredEvents:["property_new_opportunity"]}),!1,xe,1,"/assets/images/events/renovation_results.jpg"),Te("property_sale_result","æˆ¿äº§å‡ºå”®ç»“æœ","ç»è¿‡å‡ å‘¨çš„æŒ‚ç‰Œï¼Œä½ çš„æˆ¿äº§ç»ˆäºæ‰¾åˆ°äº†ä¹°å®¶ã€‚ä¹°å®¶å¯¹æˆ¿å­çš„çŠ¶å†µéå¸¸æ»¡æ„ï¼Œæ„¿æ„æ”¯ä»˜ä¸€ä¸ªä¸é”™çš„ä»·æ ¼ã€‚",[$e("æ¥å—æŠ¥ä»·","ä½ å†³å®šæ¥å—ä¹°å®¶çš„æŠ¥ä»·ï¼Œå®Œæˆæˆ¿äº§äº¤æ˜“ã€‚",je({money:6e4,attributes:{propertyValue:0,businessSkill:2}})),$e("ç»§ç»­ç­‰å¾…æ›´é«˜æŠ¥ä»·","ä½ è®¤ä¸ºæˆ¿äº§ä»·å€¼æ›´é«˜ï¼Œå†³å®šæ‹’ç»å½“å‰æŠ¥ä»·ï¼Œç»§ç»­ç­‰å¾…ã€‚",je({nextEvent:"property_price_negotiation"}))],He({requiredEvents:["property_renovation_results"]}),!1,xe,1,"/assets/images/events/sale_result.jpg"),Te("property_price_negotiation","æˆ¿ä»·è°ˆåˆ¤","åœ¨æ‹’ç»äº†ç¬¬ä¸€ä½ä¹°å®¶çš„æŠ¥ä»·åï¼Œåˆæœ‰æ–°ä¹°å®¶å¯¹ä½ çš„æˆ¿äº§è¡¨ç¤ºäº†å…´è¶£ï¼ŒåŒæ–¹å¼€å§‹äº†ä»·æ ¼è°ˆåˆ¤ã€‚",[$e("åšæŒè¦ä»·","ä½ åšæŒè‡ªå·±çš„å®šä»·ï¼Œè¡¨ç¤ºè¿™æ˜¯æœ€ç»ˆä»·æ ¼ã€‚",je({money:Math.random()>.5?65e3:0,attributes:Math.random()>.5?{propertyValue:0,businessSkill:3}:{businessSkill:1}})),$e("é€‚å½“è®©æ­¥","ä½ å†³å®šåœ¨ä»·æ ¼ä¸Šé€‚å½“è®©æ­¥ï¼Œä»¥ç¡®ä¿äº¤æ˜“æˆåŠŸã€‚",je({money:58e3,attributes:{propertyValue:0,businessSkill:1}}))],He({requiredEvents:["property_sale_result"]}),!1,xe,1,"/assets/images/events/price_negotiation.jpg"),Te("property_later_decision","å»¶è¿Ÿè´­æˆ¿å†³å®š","åœ¨è®°å½•äº†æ¥¼ç›˜ä¿¡æ¯åï¼Œä½ ä¸€ç›´åœ¨è€ƒè™‘æ˜¯å¦åº”è¯¥æŠ•èµ„è¿™ä¸ªé¡¹ç›®ã€‚æœ€è¿‘ï¼Œä½ æ³¨æ„åˆ°è¯¥é¡¹ç›®çš„å¸‚åœºåå“å¾ˆå¥½ï¼Œé”€å”®è¿›å±•è¿…é€Ÿã€‚",[$e("ç°åœ¨æŠ•èµ„","ä½ å†³å®šä¸å†çŠ¹è±«ï¼Œç«‹å³æŠ•èµ„è¿™ä¸ªé¡¹ç›®ï¼Œå°½ç®¡ä»·æ ¼å·²ç»ç•¥æœ‰ä¸Šæ¶¨ã€‚",je({money:-12e3,nextEvent:"property_investment_result"}),e=>e.player.money>=12e3),$e("æ”¾å¼ƒè¿™ä¸ªé¡¹ç›®","ä½ å†³å®šæ”¾å¼ƒè¿™ä¸ªé¡¹ç›®ï¼Œç»§ç»­å¯»æ‰¾å…¶ä»–æŠ•èµ„æœºä¼šã€‚",je({}))],He({requiredEvents:["property_expo_discover"]}),!1,xe,1,"/assets/images/events/later_decision.jpg"),Te("bag_expansion_opportunity","èƒŒåŒ…æ‰©å±•æœºä¼š","ä½ é‡åˆ°ä¸€ä¸ªæ—…è¡Œç”¨å“åº—ï¼Œåº—ä¸»æ­£åœ¨å‡ºå”®ä¸€æ¬¾ç‰¹åˆ¶çš„é«˜å®¹é‡èƒŒåŒ…ï¼Œçœ‹èµ·æ¥å¾ˆå®ç”¨ã€‚",[$e("è´­ä¹°é«˜çº§èƒŒåŒ…","ä½ è´­ä¹°äº†é«˜çº§èƒŒåŒ…ï¼Œç°åœ¨ä½ å¯ä»¥æºå¸¦æ›´å¤šç‰©å“äº†ã€‚",je({money:-5e3,capacity:20}),e=>e.player.money>=5e3),$e("è´­ä¹°æ™®é€šèƒŒåŒ…","ä½ è´­ä¹°äº†ä¸€ä¸ªæ™®é€šèƒŒåŒ…ï¼Œç•¥å¾®å¢åŠ äº†æºå¸¦å®¹é‡ã€‚",je({money:-2e3,capacity:10}),e=>e.player.money>=2e3),$e("æ”¾å¼ƒè´­ä¹°","ä½ å†³å®šæš‚æ—¶ä¸è´­ä¹°æ–°èƒŒåŒ…ã€‚",je({}))],He({probability:.8,playerMoney:{min:3e3}}),!1,Ie,2,"/assets/images/events/bag_expansion.jpg"),Te("market_price_surge","å¥¢ä¾ˆå“ä¸æ”¶è—å“ä»·æ ¼é£™å‡","æœ€æ–°è´¢ç»æŠ¥é“ï¼šéšç€å¯Œè£•é˜¶å±‚æ¶ˆè´¹å›æš–ï¼Œé«˜ç«¯å•†åŸçš„å¥¢ä¾ˆå“å’Œåœ°ä¸‹é»‘å¸‚çš„ç¨€æœ‰æ”¶è—å“ä»·æ ¼å¤§å¹…ä¸Šæ¶¨ï¼Œå…¶ä¸­å°¤ä»¥åè¡¨å’Œå¤è‘£æ¶¨å¹…æœ€å¤§ã€‚",[$e("è°ƒæ•´æŠ•èµ„ç­–ç•¥","ä½ ä»”ç»†åˆ†æäº†ä»·æ ¼æ³¢åŠ¨è¶‹åŠ¿ï¼Œå†³å®šè°ƒæ•´ä½ çš„äº¤æ˜“ç­–ç•¥ï¼Œé‡ç‚¹å…³æ³¨é«˜ç«¯å•†å“ã€‚",je({market:{globalPriceModifier:1.05,locationModifiers:{premium_mall:1.15,black_market:1.2},locationProductModifiers:{premium_mall:{401:1.5},black_market:{503:1.6}},duration:2}})),$e("å‰å¾€é«˜ç«¯å¸‚åœº","ä½ å†³å®šç«‹å³å‰å¾€é«˜ç«¯å•†åŸå’Œåœ°ä¸‹é»‘å¸‚ï¼Œå¸Œæœ›èƒ½åœ¨ä»·æ ¼è¿›ä¸€æ­¥ä¸Šæ¶¨å‰é‡‡è´­ä¸€äº›æ½œåŠ›å•†å“ã€‚",je({forceLocationChange:!0,targetLocation:"premium_mall",market:{locationProductModifiers:{premium_mall:{401:1.3},black_market:{503:1.4}},duration:1}}))],He({probability:.3,minWeek:8}),!0,Ae,1,"/assets/images/events/price_surge.jpg"),Te("market_price_drop","å¸‚åœºä»·æ ¼ä¸‹è·Œ","å…¨çƒç»æµå‡ºç°æ³¢åŠ¨ï¼Œå¯¼è‡´å¤šä¸ªå¸‚åœºçš„å•†å“ä»·æ ¼å‡ºç°ä¸‹è·Œè¶‹åŠ¿ã€‚",[$e("è§‚å¯Ÿå¸‚åœº","ä½ å†³å®šè§‚å¯Ÿå¸‚åœºåŠ¨å‘ï¼Œå¯»æ‰¾ä½ä»·è´­å…¥çš„æœºä¼šã€‚",je({market:{globalPriceModifier:.85,duration:1}}))],He({probability:.7}),!0,Ae,1,"/assets/images/events/price_drop.jpg"),Te("property_investment_chance","æˆ¿äº§æŠ•èµ„æœºä¼š","ä½ å¬è¯´ä¸€ä¸ªæ–°å…´åŒºåŸŸæ­£åœ¨å¼€å‘ï¼Œç°åœ¨è´­ä¹°æˆ¿äº§å¯èƒ½ä¼šæœ‰ä¸é”™çš„å‡å€¼ç©ºé—´ã€‚",[$e("æŠ•èµ„æˆ¿äº§","ä½ å†³å®šæŠ•èµ„è¿™ä¸ªæ–°å…´åŒºåŸŸçš„æˆ¿äº§é¡¹ç›®ã€‚",je({money:-3e4,attributes:{housingInvestment:3e4,propertyValue:3e4},nextEvent:"property_investment_result"}),e=>e.player.money>=3e4),$e("è°¨æ…è§‚æœ›","ä½ è§‰å¾—ç›®å‰æ—¶æœºä¸æˆç†Ÿï¼Œå†³å®šç»§ç»­è§‚æœ›ã€‚",je({}))],He({minWeek:10,playerMoney:{min:3e4}}),!1,xe,1,"/assets/images/events/property_investment.jpg"),Te("financial_advisor","ç†è´¢é¡¾é—®","ä½ é‡åˆ°äº†ä¸€ä½ä¸“ä¸šçš„ç†è´¢é¡¾é—®ï¼Œä»–æ„¿æ„ä¸ºä½ æä¾›ä¸€äº›æŠ•èµ„å»ºè®®ã€‚",[$e("å’¨è¯¢å»ºè®®","ä½ æ”¯ä»˜å’¨è¯¢è´¹ï¼Œè·å¾—äº†ä¸€äº›å…³äºå½“å‰å¸‚åœºçš„ä¸“ä¸šå»ºè®®ã€‚",je({money:-1e3,market:{productModifiers:{house_a:1.05,house_b:.95,land_a:1.1},duration:604800}}),e=>e.player.money>=1e3),$e("å§”æ‰˜æŠ•èµ„","ä½ å†³å®šå§”æ‰˜ä»–è¿›è¡Œä¸€äº›å°é¢æŠ•èµ„ã€‚",je({money:-3e3,nextEvent:"financial_advisor_result"}),e=>e.player.money>=3e3),$e("å©‰æ‹’","ä½ ç¤¼è²Œåœ°æ‹’ç»äº†ä»–çš„å»ºè®®ã€‚",je({}))],He({probability:.6,minWeek:5}),!0,Ie,1,"/assets/images/events/financial_advisor.jpg"),Te("financial_advisor_result","æŠ•èµ„ç»“æœ","ä½ ä¹‹å‰å§”æ‰˜ç†è´¢é¡¾é—®è¿›è¡Œçš„æŠ•èµ„æœ‰äº†ç»“æœã€‚",[$e("æŸ¥çœ‹ç»“æœ",Math.random()<.7?"ä½ çš„æŠ•èµ„å–å¾—äº†ä¸é”™çš„å›æŠ¥ï¼Œè·å¾—äº†4000å…ƒã€‚":"å¾ˆé—æ†¾ï¼Œç”±äºå¸‚åœºæ³¢åŠ¨ï¼Œä½ çš„æŠ•èµ„å‡ºç°äº†äºæŸï¼Œåªæ”¶å›äº†2000å…ƒã€‚",je({money:Math.random()<.7?4e3:2e3}))],He({requiredEvents:["financial_advisor"]}),!1,xe,1,"/assets/images/events/investment_result.jpg"),Te({id:"supply_chain_disruption",title:"å…¨çƒä¾›åº”é“¾ä¸­æ–­å±æœº",description:"çªå‘æ–°é—»ï¼šå…¨çƒè´¸æ˜“é­é‡ä¸¥é‡ä¾›åº”é“¾ä¸­æ–­ï¼å„åœ°åŒºä¸åŒå•†å“ä»·æ ¼å‡ºç°å‰§çƒˆæ³¢åŠ¨ï¼Œéƒ¨åˆ†å•†å“çŸ­ç¼ºæ¶¨ä»·ï¼Œéƒ¨åˆ†å•†å“ç§¯å‹é™ä»·ã€‚æ­¤æ¬¡å±æœºé¢„è®¡å°†å¯¹å¸‚åœºäº§ç”Ÿæ·±è¿œå½±å“ã€‚",type:Ae,options:[$e("åœ¨å¤§å®—å¸‚åœºå›¤ç§¯åŸºæœ¬ç‰©èµ„","ä½ é¢„åˆ¤åˆ°åŸºæœ¬ç”Ÿæ´»ç‰©èµ„å°†ä¼šçŸ­ç¼ºï¼Œå†³å®šå‰å¾€å¤§å®—å•†å“äº¤æ˜“æ‰€å›¤ç§¯å¿…éœ€å“ã€‚",{market:{globalPriceModifier:1.05,locationProductModifiers:{commodity_market:{202:1.6,203:1.5,101:1.4},electronics_hub:{301:.7,305:.75},premium_mall:{404:.8}},duration:4},forceLocationChange:!0,targetLocation:"commodity_market"}),$e("æŠ•èµ„å—å½±å“å•†å“","ä½ è®¤ä¸ºè¿™æ˜¯æŠ•èµ„ä½ä»·ç”µå­äº§å“çš„å¥½æœºä¼šï¼Œå†³å®šå‰å¾€ç”µå­ç§‘æŠ€åŸå¤§é‡è´­å…¥ã€‚",{market:{locationModifiers:{electronics_hub:.85},locationProductModifiers:{electronics_hub:{301:.6,305:.65},commodity_market:{202:1.45,203:1.4}},duration:3},forceLocationChange:!0,targetLocation:"electronics_hub"}),$e("å¯»æ‰¾é»‘å¸‚ç¨€ç¼ºèµ„æº","ä½ çŒœæµ‹æŸäº›ç‰¹æ®Šå•†å“å¯èƒ½åœ¨é»‘å¸‚å˜å¾—æ›´åŠ ç¨€ç¼ºä¸”ä»·å€¼ä¸Šå‡ï¼Œå†³å®šå‰å¾€åœ°ä¸‹é»‘å¸‚æ¢ç´¢æœºä¼šã€‚",{market:{locationModifiers:{black_market:1.2},locationProductModifiers:{black_market:{502:1.8,503:1.9},second_hand_market:{107:.7,106:.75}},duration:3},forceLocationChange:!0,targetLocation:"black_market"}),$e("ä¿æŒè§‚æœ›","ä½ å†³å®šæš‚æ—¶ä¸ä»‹å…¥è¿™æ¬¡æ··ä¹±çš„å¸‚åœºæ³¢åŠ¨ï¼Œç­‰å¾…å½¢åŠ¿æ›´åŠ æ˜æœ—ã€‚",{market:{globalPriceModifier:1.02,duration:2}})],conditions:{probability:.15,minWeek:15},repeatable:!1,weight:3}),Te({id:"market_contrast_event",title:"åŸå¸‚åŒºåŸŸå‘å±•ä¸å‡",description:"æœ€æ–°åŸå¸‚è§„åˆ’è°ƒæ•´å¯¼è‡´ç”µå­ç§‘æŠ€åŸè·å¾—å¤§é‡æŠ•èµ„å’Œå®¢æµï¼Œè€Œåœ°ä¸‹é»‘å¸‚å´å› ç®¡æ§åŠ å¼ºè€Œå®¢æµé”å‡ã€‚è¿™ç§å‘å±•ä¸å‡è¡¡å¼•å‘äº†æ˜æ˜¾çš„å¸‚åœºå·®å¼‚ã€‚",type:Ae,options:[$e("åˆ†æå¸‚åœºæœºä¼š","ä½ ä»”ç»†åˆ†æäº†åŸå¸‚ä¸åŒåŒºåŸŸçš„å‘å±•å˜åŒ–ï¼Œå¯»æ‰¾å…¶ä¸­çš„äº¤æ˜“æœºä¼šã€‚",{market:{locationModifiers:{electronics_hub:.8,black_market:1.4},duration:5}})],conditions:{probability:.2,minWeek:12},repeatable:!0,weight:2})];let Ue=[];const qe=[],Ve=[],ze=[],Be=[],Je=[],Ke=[];function Ye(){if(qe.length>0||Fe.forEach(e=>{const t=e.options.map(e=>e instanceof Ne?e:new Ne(e)),i=new Re({...e,options:t,imageUrl:e.imageUrl||("string"==typeof e[8]?e[8]:null)});switch(i.type){case Oe:qe.push(i);break;case Ie:Ve.push(i);break;case We:ze.push(i);break;case Ae:Be.push(i);break;case Ce:Je.push(i);break;case xe:Ke.push(i);break;default:Ve.push(i)}}),Ue.length>0)return Ue;const e=[];return e.push(...qe),e.push(...Ve),e.push(...ze),e.push(...Be),e.push(...Je),e.push(...Ke),e.push(Te({id:"location_inflation_electronics_hub",title:"ç”µå­ç§‘æŠ€åŸèŠ¯ç‰‡çŸ­ç¼º",description:"æœ€æ–°æ¶ˆæ¯ï¼šç”µå­ç§‘æŠ€åŸçš„ä¸»è¦èŠ¯ç‰‡ä¾›åº”å•†å·¥å‚åœäº§ï¼Œå¯¼è‡´è¯¥åœ°åŒºç”µå­äº§å“æ•´ä½“æ¶¨ä»·ã€‚åˆ†æå¸ˆé¢„è®¡è¿™ç§æƒ…å†µå°†æŒç»­æ•°å‘¨ã€‚",type:Ae,options:[$e("äº†è§£æƒ…å†µ","ä½ è®°ä¸‹äº†è¿™ä¸ªä¿¡æ¯ï¼Œè¿™å¯èƒ½å½±å“ä½ åœ¨ç”µå­ç§‘æŠ€åŸçš„äº¤æ˜“ç­–ç•¥ã€‚",{market:{locationModifiers:{electronics_hub:1.3},duration:4}})],conditions:{probability:.3,minWeek:5},repeatable:!0,weight:2}),Te({id:"premium_mall_luxury_watch_discount",title:"é«˜ç«¯å•†åŸåè¡¨ä¿ƒé”€",description:"é«˜ç«¯å•†åŸçš„åè¡¨ä¸“æŸœå¼€å§‹å¤§è§„æ¨¡ä¿ƒé”€æ´»åŠ¨ï¼Œæ‰€æœ‰å“ç‰Œæ‰‹è¡¨éƒ½æœ‰ç‰¹åˆ«æŠ˜æ‰£ã€‚è¿™æ˜¯è´­ä¹°å¥¢ä¾ˆæ‰‹è¡¨çš„å¥½æœºä¼šï¼",type:Ae,options:[$e("è®°ä¸‹ä¿¡æ¯","ä½ è®°ä¸‹äº†è¿™ä¸ªä¿ƒé”€ä¿¡æ¯ï¼Œå¯ä»¥è€ƒè™‘å»é«˜ç«¯å•†åŸè´­ä¹°æ‰‹è¡¨ã€‚",{market:{locationProductModifiers:{premium_mall:{401:.6}},duration:2}})],conditions:{probability:.3,minWeek:3},repeatable:!0,weight:1}),Te({id:"nationwide_paper_shortage",title:"å…¨å›½æ€§çº¸å¼ çŸ­ç¼º",description:"ç”±äºç¯ä¿æ”¿ç­–æ”¶ç´§å’ŒåŸæ–™ä»·æ ¼ä¸Šæ¶¨ï¼Œå…¨å›½èŒƒå›´å†…å‡ºç°çº¸å¼ çŸ­ç¼ºç°è±¡ã€‚å¤§å®—å•†å“äº¤æ˜“æ‰€å’ŒäºŒæ‰‹å¸‚åœºçš„å«ç”Ÿçº¸ä»·æ ¼é£™å‡ï¼Œè€Œå…¶ä»–åœ°åŒºå—å½±å“è¾ƒå°ã€‚",type:Ae,options:[$e("åˆ†æå½±å“","ä½ åˆ†æäº†è¿™æ¬¡çº¸å¼ çŸ­ç¼ºå¯¹å„ä¸ªå¸‚åœºçš„å½±å“ï¼Œå¹¶è°ƒæ•´äº†ä½ çš„äº¤æ˜“ç­–ç•¥ã€‚",{market:{locationProductModifiers:{commodity_market:{101:1.7},second_hand_market:{101:1.5}},duration:3}})],conditions:{probability:.25,minWeek:8},repeatable:!0,weight:2}),Te({id:"market_contrast_event",title:"åŸå¸‚åŒºåŸŸå‘å±•ä¸å‡",description:"æœ€æ–°åŸå¸‚è§„åˆ’è°ƒæ•´å¯¼è‡´ç”µå­ç§‘æŠ€åŸè·å¾—å¤§é‡æŠ•èµ„å’Œå®¢æµï¼Œè€Œåœ°ä¸‹é»‘å¸‚å´å› ç®¡æ§åŠ å¼ºè€Œå®¢æµé”å‡ã€‚è¿™ç§å‘å±•ä¸å‡è¡¡å¼•å‘äº†æ˜æ˜¾çš„å¸‚åœºå·®å¼‚ã€‚",type:Ae,options:[$e("åˆ†æå¸‚åœºæœºä¼š","ä½ ä»”ç»†åˆ†æäº†åŸå¸‚ä¸åŒåŒºåŸŸçš„å‘å±•å˜åŒ–ï¼Œå¯»æ‰¾å…¶ä¸­çš„äº¤æ˜“æœºä¼šã€‚",{market:{locationModifiers:{electronics_hub:.8,black_market:1.4},duration:5}})],conditions:{probability:.2,minWeek:12},repeatable:!0,weight:2}),Te({id:"supply_chain_disruption",title:"å…¨çƒä¾›åº”é“¾ä¸­æ–­å±æœº",description:"çªå‘æ–°é—»ï¼šå…¨çƒè´¸æ˜“é­é‡ä¸¥é‡ä¾›åº”é“¾ä¸­æ–­ï¼å„åœ°åŒºä¸åŒå•†å“ä»·æ ¼å‡ºç°å‰§çƒˆæ³¢åŠ¨ï¼Œéƒ¨åˆ†å•†å“çŸ­ç¼ºæ¶¨ä»·ï¼Œéƒ¨åˆ†å•†å“ç§¯å‹é™ä»·ã€‚æ­¤æ¬¡å±æœºé¢„è®¡å°†å¯¹å¸‚åœºäº§ç”Ÿæ·±è¿œå½±å“ã€‚",type:Ae,options:[$e("åœ¨å¤§å®—å¸‚åœºå›¤ç§¯åŸºæœ¬ç‰©èµ„","ä½ é¢„åˆ¤åˆ°åŸºæœ¬ç”Ÿæ´»ç‰©èµ„å°†ä¼šçŸ­ç¼ºï¼Œå†³å®šå‰å¾€å¤§å®—å•†å“äº¤æ˜“æ‰€å›¤ç§¯å¿…éœ€å“ã€‚",{market:{globalPriceModifier:1.05,locationProductModifiers:{commodity_market:{202:1.6,203:1.5,101:1.4},electronics_hub:{301:.7,305:.75},premium_mall:{404:.8}},duration:4},forceLocationChange:!0,targetLocation:"commodity_market"}),$e("æŠ•èµ„å—å½±å“å•†å“","ä½ è®¤ä¸ºè¿™æ˜¯æŠ•èµ„ä½ä»·ç”µå­äº§å“çš„å¥½æœºä¼šï¼Œå†³å®šå‰å¾€ç”µå­ç§‘æŠ€åŸå¤§é‡è´­å…¥ã€‚",{market:{locationModifiers:{electronics_hub:.85},locationProductModifiers:{electronics_hub:{301:.6,305:.65},commodity_market:{202:1.45,203:1.4}},duration:3},forceLocationChange:!0,targetLocation:"electronics_hub"}),$e("å¯»æ‰¾é»‘å¸‚ç¨€ç¼ºèµ„æº","ä½ çŒœæµ‹æŸäº›ç‰¹æ®Šå•†å“å¯èƒ½åœ¨é»‘å¸‚å˜å¾—æ›´åŠ ç¨€ç¼ºä¸”ä»·å€¼ä¸Šå‡ï¼Œå†³å®šå‰å¾€åœ°ä¸‹é»‘å¸‚æ¢ç´¢æœºä¼šã€‚",{market:{locationModifiers:{black_market:1.2},locationProductModifiers:{black_market:{502:1.8,503:1.9},second_hand_market:{107:.7,106:.75}},duration:3},forceLocationChange:!0,targetLocation:"black_market"}),$e("ä¿æŒè§‚æœ›","ä½ å†³å®šæš‚æ—¶ä¸ä»‹å…¥è¿™æ¬¡æ··ä¹±çš„å¸‚åœºæ³¢åŠ¨ï¼Œç­‰å¾…å½¢åŠ¿æ›´åŠ æ˜æœ—ã€‚",{market:{globalPriceModifier:1.02,duration:2}})],conditions:{probability:.15,minWeek:15},repeatable:!1,weight:3})),Ue=e,e}const Qe=new class{constructor(){this.events={},this.onceEvents={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>this.off(e,t)}once(e,t){return this.onceEvents[e]||(this.onceEvents[e]=[]),this.onceEvents[e].push(t),()=>{if(this.onceEvents[e]){const i=this.onceEvents[e].indexOf(t);-1!==i&&this.onceEvents[e].splice(i,1)}}}off(e,t){if(this.events[e]){const i=this.events[e].indexOf(t);-1!==i&&this.events[e].splice(i,1)}}emit(e,t){if(this.events[e]&&this.events[e].forEach(i=>{try{i(t)}catch(r){F(r,`EventEmitter.emit(${e})`,c.SYSTEM,l.WARNING),console.error(`Error in event listener for ${e}:`,r)}}),this.onceEvents[e]){const i=[...this.onceEvents[e]];this.onceEvents[e]=[],i.forEach(i=>{try{i(t)}catch(r){F(r,`EventEmitter.emit.once(${e})`,c.SYSTEM,l.WARNING),console.error(`Error in once event listener for ${e}:`,r)}})}}clear(){this.events={},this.onceEvents={}}clearEvent(e){e&&(this.events[e]=[],this.onceEvents[e]=[])}},Xe="easy",Ze="normal",et="hard",tt={[Xe]:{player:{initialMoney:8e3,initialDebt:1e3,initialCapacity:150,debtInterestRate:.004,debtGracePeriod:4},market:{priceTrendStrength:.8,priceVolatility:.8,specialProductDiscount:.25,trendContinuationChance:.8},events:{positiveEventChance:.7,eventFrequency:.3,earlyGameEventMultiplier:.7,lateGameEventMultiplier:1.1},houses:{housePriceMultipliers:{apartment:.9,house:.9,villa:.85,mansion:.85}},gameGoals:{requiredNetWorth:35e4,targetWeeks:52,debtRatio:.5}},[Ze]:{player:{initialMoney:5e3,initialDebt:2e3,initialCapacity:100,debtInterestRate:.005,debtGracePeriod:3},market:{priceTrendStrength:1,priceVolatility:1,specialProductDiscount:.15,trendContinuationChance:.75},events:{positiveEventChance:.5,eventFrequency:.4,earlyGameEventMultiplier:.8,lateGameEventMultiplier:1.2},houses:{housePriceMultipliers:{apartment:1,house:1,villa:1,mansion:1}},gameGoals:{requiredNetWorth:4e5,targetWeeks:52,debtRatio:.4}},[et]:{player:{initialMoney:3500,initialDebt:3e3,initialCapacity:80,debtInterestRate:.006,debtGracePeriod:2},market:{priceTrendStrength:1.2,priceVolatility:1.3,specialProductDiscount:.1,trendContinuationChance:.7},events:{positiveEventChance:.4,eventFrequency:.5,earlyGameEventMultiplier:.9,lateGameEventMultiplier:1.3},houses:{housePriceMultipliers:{apartment:1.1,house:1.15,villa:1.2,mansion:1.25}},gameGoals:{requiredNetWorth:45e4,targetWeeks:52,debtRatio:.35}}};const it="event:triggered",rt="event:completed",ot="event:effects_applied",st="positive",at="negative",nt="early",ct="mid",lt="late";class ut{constructor(e){this.events=e||[],this.triggeredEvents=new Set,this.activeEvents=[],this.eventHistory=[],this.cooldowns={},this.difficultyLevel="normal"}setDifficulty(e){this.difficultyLevel=e}generateStageAppropriateEvent(e){var t,i,r;console.log("å°è¯•ç”Ÿæˆé˜¶æ®µé€‚å½“çš„äº‹ä»¶ï¼Œå½“å‰å‘¨æ•°:",e.currentWeek);const{currentWeek:o,maxWeeks:s=52}=e,a=o/s;let n;n=a<.3?nt:a<.7?ct:lt,console.log("å½“å‰æ¸¸æˆé˜¶æ®µ:",n,"è¿›åº¦:",a);const c=function(e=Ze){return tt[e]||tt[Ze]}(this.difficultyLevel),l=function(e,t=52){const i=e/t;return i<.2?{phase:"early",eventMultiplier:.8,priceVolatilityMultiplier:.9}:i<.4?{phase:"early_mid",eventMultiplier:.9,priceVolatilityMultiplier:1}:i<.6?{phase:"mid",eventMultiplier:1,priceVolatilityMultiplier:1}:i<.8?{phase:"mid_late",eventMultiplier:1.1,priceVolatilityMultiplier:1.1}:{phase:"late",eventMultiplier:1.2,priceVolatilityMultiplier:1.2}}(o,s),u=1.8*c.events.eventFrequency,d=1.3*l.eventMultiplier,m=Math.min(.95,u*d);console.log("äº‹ä»¶è§¦å‘æ¦‚ç‡è®¡ç®—:",{baseEventChance:u,stageMultiplier:d,finalEventChance:m});const p=Math.random(),h=p<=m;if(console.log(`éšæœºå€¼: ${p}, æ˜¯å¦è§¦å‘äº‹ä»¶: ${h}`),!h)return null;let g=c.events.positiveEventChance;n===nt?g*=1.3:n===lt&&(g*=.8);const y=null==(t=e.currentLocation)?void 0:t.id;if(y){const e=this.eventHistory.filter(e=>{var t,i;const r=this.getEventById(e.id);return null==(i=null==(t=null==r?void 0:r.conditions)?void 0:t.locations)?void 0:i.includes(y)});if(e.length>3){const t=Math.min(.8,Math.pow(.9,e.length-3));eventProbability*=t}}e.player.money<5e3?g*=1.2:e.player.money>1e5&&(g*=.9);let v=1;const f=(null==(i=e.player.attributes)?void 0:i.hasHouse)||!1,b=(null==(r=e.player.attributes)?void 0:r.propertyValue)||0;!f&&b<1e3&&o>20?v=1.5:(f||b>5e4)&&(v=.7);const k=Math.random()<g?st:at;console.log("äº‹ä»¶ç±»å‹ç¡®å®š:",{positiveChance:g,eventEffectType:k});const P=this.events.filter(t=>{if(this.isEventInCooldown(t.id,o))return!1;if(!1===t.repeatable&&this.triggeredEvents.has(t.id))return!1;if(k===st&&t.effectType===at)return!1;if(k===at&&t.effectType===st)return!1;if(t.gameStage){if(t.gameStage===nt&&n!==nt)return!1;if(t.gameStage===ct&&n!==ct)return!1;if(t.gameStage===lt&&n!==lt)return!1}return!(t.id.startsWith("property_")&&Math.random()>v)&&this.checkEventConditions(t,e)});if(console.log(`ç­›é€‰åçš„ç¬¦åˆæ¡ä»¶äº‹ä»¶æ•°é‡: ${P.length}`),0===P.length)return null;const _=this.selectEventByWeight(P,a);return console.log("é€‰æ‹©çš„äº‹ä»¶:",_?_.id:"null"),_}checkForEvents(e,t=null){console.log("äº‹ä»¶ç³»ç»Ÿ - æ£€æŸ¥æ˜¯å¦è§¦å‘äº‹ä»¶, å½“å‰å‘¨æ•°:",e.currentWeek),console.log("äº‹ä»¶ç³»ç»Ÿ - å½“å‰åœ°ç‚¹:",e.currentLocation?e.currentLocation.id:"æœªçŸ¥");let i=.6;e.currentLocation&&e.currentLocation.eventProbability&&(i=1.5*e.currentLocation.eventProbability,console.log(`äº‹ä»¶ç³»ç»Ÿ - å½“å‰åœ°ç‚¹äº‹ä»¶è§¦å‘æ¦‚ç‡: ${i}`));const r=Math.min(1,(e.currentWeek||1)/52);i+=.2*r,i=Math.min(.95,i);const o=Math.random();if(console.log(`äº‹ä»¶ç³»ç»Ÿ - äº‹ä»¶éšæœºæ£€å®š: ${o.toFixed(2)} vs ${i.toFixed(2)} (è§¦å‘é˜ˆå€¼)`),t){const i=this.getEligibleEvents(e,t);if(console.log(`äº‹ä»¶ç³»ç»Ÿ - æ‰¾åˆ° ${i.length} ä¸ªç¬¦åˆæ¡ä»¶çš„ ${t} ç±»å‹äº‹ä»¶`),0===i.length)return null;const o=this.selectEventByWeight(i,r);return o&&(console.log("äº‹ä»¶ç³»ç»Ÿ - å·²é€‰æ‹©äº‹ä»¶:",o.id,o.title),this.recordEvent(o.id,e.currentWeek),Qe.emit(it,{event:o,week:e.currentWeek})),o}let s;if(!(o<i&&this.events.length>0))return console.log("äº‹ä»¶ç³»ç»Ÿ - éšæœºæ£€å®šæœªé€šè¿‡ï¼Œæœ¬å‘¨ä¸è§¦å‘äº‹ä»¶"),null;{const t=this.getEligibleEvents(e);if(console.log(`äº‹ä»¶ç³»ç»Ÿ - æ‰¾åˆ° ${t.length} ä¸ªç¬¦åˆæ¡ä»¶çš„äº‹ä»¶`),!(t.length>0))return console.log("äº‹ä»¶ç³»ç»Ÿ - æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„äº‹ä»¶"),null;s=this.selectEventByWeight(t,r),console.log("äº‹ä»¶ç³»ç»Ÿ - é€‰æ‹©äº‹ä»¶:",s?s.id:"æ— ")}return s?(console.log("äº‹ä»¶ç³»ç»Ÿ - ç”Ÿæˆäº‹ä»¶æˆåŠŸ:",s.id,s.title),this.recordEvent(s.id,e.currentWeek),Qe.emit(it,{event:s,week:e.currentWeek})):console.log("äº‹ä»¶ç³»ç»Ÿ - æ²¡æœ‰ç”Ÿæˆäº‹ä»¶"),s}getEligibleEvents(e,t=null){return this.events.filter(i=>{if(t&&i.type!==t)return!1;if(this.isEventInCooldown(i.id,e.currentWeek))return!1;if(!1===i.repeatable&&this.triggeredEvents.has(i.id))return!1;return!(this.eventHistory.filter(t=>t.id===i.id&&e.currentWeek-t.week<=10).length>=2&&Math.random()>.3)&&this.checkEventConditions(i,e)})}checkEventConditions(e,t){var i;const r=e.conditions||{};if(r.minWeek&&t.currentWeek<r.minWeek)return!1;if(r.maxWeek&&t.currentWeek>r.maxWeek)return!1;if(r.locations&&t.currentLocation&&!r.locations.includes(t.currentLocation.id))return!1;if(r.playerMoney){const{min:e,max:i}=r.playerMoney;if(void 0!==e&&t.player.money<e)return!1;if(void 0!==i&&t.player.money>i)return!1}if(r.playerDebt){const{min:e,max:i}=r.playerDebt;if(void 0!==e&&t.player.debt<e)return!1;if(void 0!==i&&t.player.debt>i)return!1}if(r.inventoryItems)for(const o of r.inventoryItems){const e=t.player.inventory.find(e=>e.productId===o.productId),i=e?e.quantity:0;if(void 0!==o.minQuantity&&i<o.minQuantity)return!1;if(void 0!==o.maxQuantity&&i>o.maxQuantity)return!1}if(r.attributes)for(const[o,{min:s,max:a}]of Object.entries(r.attributes)){const e=(null==(i=t.player.attributes)?void 0:i[o])||0;if(void 0!==s&&e<s)return!1;if(void 0!==a&&e>a)return!1}if(r.requiredEvents)for(const o of r.requiredEvents)if(!this.triggeredEvents.has(o))return!1;if(r.excludedEvents)for(const o of r.excludedEvents)if(this.triggeredEvents.has(o))return!1;if(r.customCondition&&!r.customCondition(t))return!1;if(void 0!==r.probability){let t=r.probability;if(this.triggeredEvents.has(e.id)||(t=Math.min(.95,1.5*t)),Math.random()>t)return!1}return!0}isEventInCooldown(e,t){return!!this.cooldowns[e]&&this.cooldowns[e]>t}setEventCooldown(e,t,i=5){this.cooldowns[e]=t+i}recordEvent(e,t){this.triggeredEvents.add(e),this.eventHistory.push({id:e,week:t,timestamp:(new Date).toISOString()});const i=this.getEventById(e);let r;switch(null==i?void 0:i.type){case Ce:r=6;break;case Ae:r=3;break;case We:r=2;break;default:r=4}i&&!i.repeatable&&(r=999),this.setEventCooldown(e,t,r)}selectEventByWeight(e,t=.5){if(!e||0===e.length)return null;let i=0;const r=e.map(e=>{let r=e.weight||1;if(e.type===xe?r*=1.2:e.type===Ae&&(r*=1.1),e.id.startsWith("property_")&&t>.4&&(r*=1+t),e.options&&e.options.some(e=>e.effects&&e.effects.nextEvent)&&(r*=1.3),"meet_mucs"===e.id)return 0;this.triggeredEvents.has(e.id)?r*=.2:r*=2;const o=this.eventHistory.filter(t=>t.id===e.id).length;if(o>0){if(!e.repeatable)return 0;const t=.5,i=.2;r*=Math.max(i,Math.pow(t,o))}return console.log(`äº‹ä»¶æƒé‡è®¡ç®— - ${e.id}: ${r.toFixed(2)}`),i+=r,r});if(i<=0)return null;let o=Math.random()*i;for(let s=0;s<e.length;s++)if(o-=r[s],o<=0)return e[s];return e[0]}getEventById(e){const t=this.events.find(t=>t.id===e);return t?this.prepareEvent(t):null}triggerSpecificEvent(e,t){const i=this.getEventById(e);return i?(this.recordEvent(e,t.currentWeek),Qe.emit(it,{event:i,week:t.currentWeek,isSpecific:!0}),i):null}prepareEvent(e){if(!e)return null;const t={...e};return t.options&&(t.options=t.options.map(e=>("function"==typeof e.text?e.displayText=e.text():e.displayText=e.text,e))),t}updateActiveEvents(){this.activeEvents=this.activeEvents.filter(e=>!e.expired);const e=Date.now();return this.activeEvents.forEach(t=>{t.expiryTime&&e>t.expiryTime&&(t.expired=!0)}),this.activeEvents}getActiveMarketModifiers(){this.updateActiveEvents();const e={globalPriceModifier:1,categoryModifiers:{},productModifiers:{},specialProducts:[]};return this.activeEvents.forEach(t=>{t.expired||(t.globalPriceModifier&&(e.globalPriceModifier*=t.globalPriceModifier),t.categoryModifiers&&Object.entries(t.categoryModifiers).forEach(([t,i])=>{e.categoryModifiers[t]=(e.categoryModifiers[t]||1)*i}),t.productModifiers&&Object.entries(t.productModifiers).forEach(([t,i])=>{e.productModifiers[t]=(e.productModifiers[t]||1)*i}),t.specialProducts&&(e.specialProducts=[...e.specialProducts,...t.specialProducts]))}),e}applyEventEffects(e,t){var i;const r={appliedEffects:[],failedEffects:[]};if(console.log("åº”ç”¨äº‹ä»¶æ•ˆæœ:",t),void 0!==t.money){const i=t.money;i>0?(e.player.money+=i,r.appliedEffects.push({type:"money",value:i,success:!0})):i<0&&(e.player.money+i<0?(console.warn("EventSystem - é‡‘é’±ä¸è¶³ï¼Œæ— æ³•æ‰£æ¬¾",{required:Math.abs(i),available:e.player.money}),r.failedEffects.push({type:"money",value:i,reason:"insufficient_funds"})):(e.player.money+=i,r.appliedEffects.push({type:"money",value:i,success:!0})))}if(void 0!==t.debt){const i=t.debt;if(i>0)e.player.debt+=i,r.appliedEffects.push({type:"debt",value:i,success:!0});else if(i<0){const t=Math.min(e.player.debt,Math.abs(i));e.player.debt-=t,r.appliedEffects.push({type:"debt",value:-t,success:!0})}}if(t.items&&t.items.forEach(t=>{if(t.quantity>0){const i=e.products.find(e=>e.id===t.productId);if(i){const o=i.size*t.quantity;if(e.player.inventoryUsed+o<=e.player.capacity){const s=e.player.inventory.find(e=>e.productId===t.productId&&e.purchasePrice===(t.price||0));s?s.quantity+=t.quantity:e.player.inventory.push({productId:t.productId,name:i.name,quantity:t.quantity,purchasePrice:t.price||0,size:i.size}),e.player.inventoryUsed+=o,r.appliedEffects.push({type:"item_add",productId:t.productId,quantity:t.quantity,success:!0})}else r.failedEffects.push({type:"item_add",productId:t.productId,quantity:t.quantity,reason:"inventory_full"})}else r.failedEffects.push({type:"item_add",productId:t.productId,quantity:t.quantity,reason:"product_not_found"})}else if(t.quantity<0){const i=e.player.inventory.find(e=>e.productId===t.productId);if(i&&i.quantity>=Math.abs(t.quantity)){const o=Math.abs(t.quantity),s=i.size*o;if(i.quantity-=o,e.player.inventoryUsed-=s,i.quantity<=0){const t=e.player.inventory.indexOf(i);e.player.inventory.splice(t,1)}r.appliedEffects.push({type:"item_remove",productId:t.productId,quantity:o,success:!0})}else r.failedEffects.push({type:"item_remove",productId:t.productId,quantity:Math.abs(t.quantity),reason:"insufficient_items"})}}),t.capacity&&(e.player.capacity+=t.capacity,r.appliedEffects.push({type:"capacity",value:t.capacity,success:!0})),t.attributes&&Object.keys(t.attributes).length>0){e.player.attributes||(e.player.attributes={});for(const[i,o]of Object.entries(t.attributes)){const t=e.player.attributes[i]||0;e.player.attributes[i]=o,r.appliedEffects.push({type:"attribute",attribute:i,oldValue:t,newValue:o,success:!0})}}if(t.market){const o={...t.market,startTime:Date.now(),expiryTime:t.market.duration?Date.now()+7*t.market.duration*24*60*60*1e3:Date.now()+12096e5,expired:!1};if(this.activeEvents.push(o),e.market&&e.market.productPrices){if(o.globalPriceModifier){console.log(`åº”ç”¨å…¨å±€ä»·æ ¼ä¿®æ­£: ${o.globalPriceModifier}`);for(const[t,i]of Object.entries(e.market.productPrices))e.market.productPrices[t]*=o.globalPriceModifier}if(o.categoryModifiers)for(const[t,r]of Object.entries(o.categoryModifiers)){console.log(`åº”ç”¨ç±»åˆ« ${t} ä»·æ ¼ä¿®æ­£: ${r}`);const o=(null==(i=e.products)?void 0:i.filter(e=>e.category===t))||[];for(const t of o)e.market.productPrices[t.id]&&(e.market.productPrices[t.id]*=r)}if(o.productModifiers)for(const[t,i]of Object.entries(o.productModifiers))console.log(`åº”ç”¨äº§å“ ${t} ä»·æ ¼ä¿®æ­£: ${i}`),e.market.productPrices[t]&&(e.market.productPrices[t]*=i)}r.appliedEffects.some(e=>"market"===e.type)||r.appliedEffects.push({type:"market",effect:{globalPriceModifier:o.globalPriceModifier,categoryModifiers:o.categoryModifiers,productModifiers:o.productModifiers,locationModifiers:o.locationModifiers,locationProductModifiers:o.locationProductModifiers,duration:o.duration},success:!0})}return t.nextEvent&&r.appliedEffects.push({type:"next_event",eventId:t.nextEvent,success:!0}),t.locationChange&&r.appliedEffects.push({type:"location_change",locationId:t.locationChange,success:!0}),Qe.emit(ot,{effects:r.appliedEffects,failedEffects:r.failedEffects}),r}reset(){this.triggeredEvents.clear(),this.activeEvents=[],this.eventHistory=[],this.cooldowns={}}getSaveState(){return{triggeredEvents:Array.from(this.triggeredEvents),activeEvents:this.activeEvents,eventHistory:this.eventHistory,cooldowns:this.cooldowns}}loadFromSaveState(e){e&&(this.triggeredEvents=new Set(e.triggeredEvents||[]),this.activeEvents=e.activeEvents||[],this.eventHistory=e.eventHistory||[],this.cooldowns=e.cooldowns||{})}}const dt=r("event",{state:()=>({activeEvents:[],activeEvent:null,forceLocationChange:!1,targetLocation:null,nextEventId:null,triggeredEvents:[],eventSystem:null}),actions:{initializeEvents(){return console.log("EventStore - åˆå§‹åŒ–äº‹ä»¶ç³»ç»Ÿ"),new Promise(e=>{setTimeout(()=>{this.initEventSystem(),console.log("EventStore - äº‹ä»¶ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ"),e()},300)})},initEventSystem(){this.eventSystem=new ut(Ye()),this.activeEvents=[],this.activeEvent=null,this.forceLocationChange=!1,this.targetLocation=null,this.nextEventId=null,this.triggeredEvents=[],this.setupEventListeners()},setupEventListeners(){Qe.on(it,e=>{this.activeEvent=e.event}),Qe.on(rt,e=>{this.activeEvent=null,e.nextEventId&&(this.nextEventId=e.nextEventId)}),Qe.on(ot,e=>{const t=e.effects.find(e=>"location_change"===e.type);t&&(this.forceLocationChange=!0,this.targetLocation=t.locationId);const i=e.effects.find(e=>"next_event"===e.type);i&&(this.nextEventId=i.eventId)})},resetEvents(){this.eventSystem?this.eventSystem.reset():this.initEventSystem(),this.activeEvents=[],this.activeEvent=null,this.forceLocationChange=!1,this.targetLocation=null,this.nextEventId=null,this.triggeredEvents=[]},generateRandomEvent(e,t,i){if(console.log("EventStore - å°è¯•ç”Ÿæˆéšæœºäº‹ä»¶, å½“å‰å‘¨æ•°:",e),null!==this.activeEvent)return console.log("EventStore - å·²æœ‰å¾…å¤„ç†äº‹ä»¶ï¼Œè·³è¿‡ç”Ÿæˆ:",this.activeEvent.id),null;if(this.nextEventId){console.log("EventStore - æ£€æµ‹åˆ°é¢„è®¾çš„ä¸‹ä¸€ä¸ªäº‹ä»¶:",this.nextEventId);const t=this.eventSystem.getEventById(this.nextEventId);if(this.nextEventId=null,t)return console.log("EventStore - è§¦å‘é¢„è®¾äº‹ä»¶:",t.id,t.title),this.triggeredEvents.push({id:t.id,week:e}),this.activeEvent=t,t}console.log("EventStore - åˆ›å»ºæ¸¸æˆçŠ¶æ€å¯¹è±¡"),console.log("EventStore - playerData:",t?"å·²æä¾›":"æœªæä¾›"),console.log("EventStore - marketData:",i?"å·²æä¾›":"æœªæä¾›");try{const r={currentWeek:e,player:t,market:i,currentLocation:i.currentLocation};console.log("EventStore - æ¸¸æˆçŠ¶æ€å¯¹è±¡åˆ›å»ºæˆåŠŸ"),console.log("EventStore - å½“å‰åœ°ç‚¹:",r.currentLocation?r.currentLocation.id:"æœªçŸ¥");const o=Math.random();if(o<.15){console.log("EventStore - å°è¯•è§¦å‘å½©è›‹äº‹ä»¶");const t=this.eventSystem.getEventById("meet_mucs");if(t&&this.eventSystem.checkEventConditions(t,r))return console.log("EventStore - æˆåŠŸè§¦å‘å½©è›‹äº‹ä»¶:",t.id,t.title),this.triggeredEvents.push({id:t.id,week:e}),this.activeEvent=t,t}const s=Math.min(.3,.01*e);console.log("EventStore - è°ƒç”¨äº‹ä»¶ç³»ç»Ÿæ£€æŸ¥äº‹ä»¶ï¼Œé¢å¤–æ¦‚ç‡:",s);let a=this.eventSystem.checkForEvents(r);return!a&&Math.random()<s&&(console.log("EventStore - åº”ç”¨é¢å¤–æ¦‚ç‡ï¼Œå¼ºåˆ¶å°è¯•ç”Ÿæˆäº‹ä»¶"),a=this.eventSystem.generateStageAppropriateEvent(r)),a?(console.log("EventStore - æˆåŠŸç”Ÿæˆäº‹ä»¶:",a.id,a.title),this.triggeredEvents.push({id:a.id,week:e}),this.activeEvent=a,a):(console.log("EventStore - æ²¡æœ‰ç”Ÿæˆäº‹ä»¶"),null)}catch(r){return F(r,"EventState.generateRandomEvent",c.GAME_LOGIC,l.ERROR),console.error("EventStore - ç”Ÿæˆéšæœºäº‹ä»¶æ—¶å‡ºé”™:",r),null}},triggerSpecificEvent(e,t,i){const r={currentWeek:t.statistics.weekCount,player:t,market:i,currentLocation:i.currentLocation},o=this.eventSystem.triggerSpecificEvent(e,r);return o?(this.triggeredEvents.push({id:o.id,week:t.statistics.weekCount}),o):null},triggerTutorialEvent(e){const t=e.startsWith("tutorial_")?e:`tutorial_${e}`,i=this.eventSystem.getEventById(t);return i?(this.activeEvent=i,i):null},triggerEvent(e){var t;try{if(e.startsWith("tutorial_")){return!!this.triggerTutorialEvent(e)}{const i=null==(t=this.eventSystem)?void 0:t.getEventById(e);if(i)return this.activeEvent=i,!0}return!1}catch(i){return F(i,"EventState.triggerEvent",c.GAME_LOGIC,l.WARNING),console.error("è§¦å‘äº‹ä»¶å¤±è´¥:",i),!1}},handleEventOption(e,t,i){if(!this.activeEvent||!e)return{success:!1,message:"æ— æ•ˆçš„äº‹ä»¶æˆ–é€‰é¡¹",appliedEffects:[]};console.log("EventState - å¤„ç†äº‹ä»¶é€‰é¡¹:",e),console.log("EventState - å½“å‰äº‹ä»¶:",this.activeEvent.id);const r={currentWeek:t.statistics.weekCount,player:t,market:i,currentLocation:i.currentLocation,products:i.products};let o;try{o=this.eventSystem.applyEventEffects(r,e.effects),console.log("EventState - äº‹ä»¶æ•ˆæœåº”ç”¨ç»“æœ:",o)}catch(a){console.error("EventState - åº”ç”¨äº‹ä»¶æ•ˆæœæ—¶å‡ºé”™:",a),F(a,"EventState.handleEventOption",c.GAME_LOGIC,l.ERROR),o={success:!1,message:"åº”ç”¨äº‹ä»¶æ•ˆæœæ—¶å‡ºé”™",appliedEffects:[]}}const s=o||{success:!0,appliedEffects:[]};if(void 0===s.success&&(s.success=!0),s.appliedEffects||(s.appliedEffects=[]),e.effects&&e.effects.nextEvent&&(this.nextEventId=e.effects.nextEvent,console.log("EventState - è®¾ç½®ä¸‹ä¸€ä¸ªäº‹ä»¶:",this.nextEventId)),e.effects&&e.effects.forceLocationChange&&(this.forceLocationChange=!0,this.targetLocation=e.effects.targetLocation,console.log("EventState - è®¾ç½®å¼ºåˆ¶åœ°ç‚¹å˜æ›´:",this.targetLocation)),e.effects&&e.effects.capacity&&e.effects.capacity>0&&(console.log("EventState - èƒŒåŒ…å®¹é‡å¢åŠ :",e.effects.capacity),t.capacity+=e.effects.capacity,s.appliedEffects.some(e=>"capacity"===e.type)||s.appliedEffects.push({type:"capacity",value:e.effects.capacity,success:!0})),e.effects&&e.effects.attributes){console.log("EventState - ç©å®¶å±æ€§å˜åŒ–:",e.effects.attributes),t.attributes||(t.attributes={});for(const[i,r]of Object.entries(e.effects.attributes)){const e=t.attributes[i];t.attributes[i]=r,s.appliedEffects.push({type:"attribute",attribute:i,oldValue:e,newValue:r,success:!0})}}if(i&&s.appliedEffects){s.appliedEffects.filter(e=>"market"===e.type).length>0&&(console.log("EventState - åº”ç”¨å¸‚åœºæ•ˆæœåˆ°å¸‚åœºæ•°æ®"),"function"==typeof i.calculateAllPrices?i.calculateAllPrices():"function"==typeof i.updatePrices&&i.updatePrices())}return Qe.emit(rt,{eventId:this.activeEvent.id,optionId:e.id,nextEventId:this.nextEventId,effects:s.appliedEffects}),this.activeEvent=null,s},getActiveMarketModifiers(){return this.eventSystem?this.eventSystem.getActiveMarketModifiers():{}},clearForceLocationChange(){this.forceLocationChange=!1,this.targetLocation=null},clearNextEvent(){this.nextEventId=null}},getters:{currentEvent:e=>e.activeEvent,needsLocationChange:e=>e.forceLocationChange,targetLocationId:e=>e.targetLocation,eventStatistics(e){if(!e.eventSystem)return{total:0,byType:{}};const t=e.triggeredEvents.length,i={};return e.triggeredEvents.forEach(t=>{const r=e.eventSystem.getEventById(t.id);if(r){const e=r.type||"unknown";i[e]=(i[e]||0)+1}}),{total:t,byType:i}}}}),mt=()=>{const e=dt(),t=te(),i=Le(),r=e=>({commodity_market:"å¤§å®—å•†å“å¸‚åœº",second_hand_market:"äºŒæ‰‹å¸‚åœº",premium_mall:"é«˜ç«¯å•†åœº",electronics_hub:"ç”µå­äº§å“ä¸­å¿ƒ",black_market:"é»‘å¸‚"}[e]||e);return{generateRandomEvent:r=>{const o={money:t.money,debt:t.debt,inventory:t.inventory,statistics:t.statistics,purchasedHouses:t.purchasedHouses},s={marketModifiers:i.marketModifiers,currentLocation:i.currentLocation?i.currentLocation.id:null,productPrices:i.productPrices};return e.generateRandomEvent(r,o,s)},handleEventOption:o=>{const s=e.currentEvent;if(!s)return{success:!1,message:"æ²¡æœ‰æ´»è·ƒäº‹ä»¶"};let a=o;if("number"==typeof o){if(o<0||o>=s.options.length)return{success:!1,message:"æ— æ•ˆçš„é€‰é¡¹ç´¢å¼•"};a=s.options[o]}if(!a)return console.warn("EventActions - æ— æ³•å¤„ç†ç©ºé€‰é¡¹"),{success:!1,message:"æ— æ•ˆçš„é€‰é¡¹"};try{console.log("EventActions - å¤„ç†é€‰é¡¹:",a);const o=a.effects||{},s=t,n=i,c={money:t.money,debt:t.debt,capacity:t.capacity,inventoryUsed:t.inventoryUsed,inventoryCount:t.inventory.length};console.log("EventActions - å¤„ç†é€‰é¡¹å‰çŠ¶æ€:",c);const l=e.handleEventOption(a,s,n),u={money:t.money,debt:t.debt,capacity:t.capacity,inventoryUsed:t.inventoryUsed,inventoryCount:t.inventory.length};console.log("EventActions - å¤„ç†é€‰é¡¹åçŠ¶æ€:",u);const d={money:u.money-c.money,debt:u.debt-c.debt,capacity:u.capacity-c.capacity,inventoryUsed:u.inventoryUsed-c.inventoryUsed,inventoryCount:u.inventoryCount-c.inventoryCount};console.log("EventActions - çŠ¶æ€å˜åŒ–:",d);const m=l||{success:!0};if(!1!==m.success){if(m.success=!0,m.appliedEffects||(m.appliedEffects=[]),0===d.money||m.appliedEffects.some(e=>"money"===e.type)||m.appliedEffects.push({type:"money",value:d.money,success:!0}),0===d.debt||m.appliedEffects.some(e=>"debt"===e.type)||m.appliedEffects.push({type:"debt",value:d.debt,success:!0}),0===d.capacity||m.appliedEffects.some(e=>"capacity"===e.type)||m.appliedEffects.push({type:"capacity",value:d.capacity,success:!0}),o.market&&!m.appliedEffects.some(e=>"market"===e.type)){const e={type:"market",effect:{...o.market},success:!0};(o.market.globalPriceModifier||o.market.categoryModifiers||o.market.productModifiers||o.market.locationModifiers||o.market.locationProductModifiers)&&m.appliedEffects.push(e)}if(m.effects&&m.effects.locationChanged&&e.needsLocationChange){const t=e.targetLocationId;t&&(i.changeLocation(t),e.clearForceLocationChange(),m.appliedEffects.push({type:"info",description:`å·²å‰å¾€${r(t)}`,success:!0}))}0===m.appliedEffects.length&&m.appliedEffects.push({type:"info",description:"é€‰é¡¹å·²æ‰§è¡Œï¼Œä½†æ²¡æœ‰äº§ç”Ÿç›´æ¥æ•ˆæœ",success:!0})}return m}catch(n){return console.error("EventActions - å¤„ç†é€‰é¡¹å‡ºé”™:",n),{success:!1,message:"å¤„ç†é€‰é¡¹æ—¶å‡ºé”™: "+(n.message||"æœªçŸ¥é”™è¯¯"),appliedEffects:[{type:"error",description:"å¤„ç†é€‰é¡¹å¤±è´¥: "+(n.message||"æœªçŸ¥é”™è¯¯"),success:!1}]}}},triggerSpecificEvent:r=>{const o={money:t.money,debt:t.debt,inventory:t.inventory,statistics:t.statistics,purchasedHouses:t.purchasedHouses},s={marketModifiers:i.marketModifiers,currentLocation:i.currentLocation?i.currentLocation.id:null,productPrices:i.productPrices};return e.triggerSpecificEvent(r,o,s)},triggerTutorialEvent:t=>e.triggerTutorialEvent(t),getCurrentEvent:()=>e.currentEvent,hasPendingEvent:()=>null!==e.currentEvent,getEventStatistics:()=>e.eventStatistics}},pt=r("gameCore",{state:()=>({currentWeek:1,maxWeeks:52,gameStarted:!1,gamePaused:!1,gameOver:!1,victoryAchieved:!1,gameResult:null,notifications:[],initialized:!1,gameGoals:{requiredNetWorth:4e5,targetWeeks:30}}),actions:{async startNewGame(e){console.log("GameCore - å¼€å§‹æ–°æ¸¸æˆ:",e),this.currentWeek=1,this.gameStarted=!0,this.gamePaused=!1,this.gameOver=!1,this.victoryAchieved=!1,this.gameResult=null;try{const t=te(),i=Le(),r=dt();await t.initializePlayer(e),!t.name&&e&&(t.name=e),i.initializeMarket().then(()=>{i.updateLocationProducts(),console.log("GameCore - å¸‚åœºå•†å“å·²æ›´æ–°")}),r.resetEvents(),localStorage.setItem("lastPlayerName",e),console.log("GameCore - æ¸¸æˆåˆå§‹åŒ–å®Œæˆ")}catch(t){throw F(t,"gameState (gameCore)",c.UNKNOWN,l.ERROR),console.error("GameCore - åˆå§‹åŒ–æ¸¸æˆæ¨¡å—æ—¶å‡ºé”™:",t),t}},advanceWeek(){if(this.currentWeek<=this.maxWeeks&&!this.gameOver){this.currentWeek++,console.log(`GameCore - è¿›å…¥ç¬¬ ${this.currentWeek} å‘¨`);const e=te(),t=Le(),i=dt();console.log("GameCore - æ›´æ–°ç©å®¶çŠ¶æ€"),e.updateWeeklyPlayerState(this.currentWeek),console.log("GameCore - æ›´æ–°å¸‚åœºçŠ¶æ€"),t.updateMarketState(this.currentWeek),console.log("GameCore - å‡†å¤‡ç”Ÿæˆéšæœºäº‹ä»¶");const r={money:e.money,debt:e.debt,inventory:e.inventory,statistics:e.statistics,purchasedHouses:e.purchasedHouses,name:e.name,capacity:e.capacity,inventoryUsed:e.inventoryUsed};console.log("GameCore - å·²å‡†å¤‡ç©å®¶æ•°æ®:",{money:r.money,debt:r.debt,inventoryCount:r.inventory.length});const o={marketModifiers:t.marketModifiers,currentLocation:t.currentLocation,productPrices:t.productPrices,products:t.products,locations:t.locations};console.log("GameCore - å·²å‡†å¤‡å¸‚åœºæ•°æ®:",{currentLocationId:o.currentLocation?o.currentLocation.id:"æœªè®¾ç½®",productCount:o.products.length,locationCount:o.locations.length}),console.log("GameCore - è°ƒç”¨äº‹ä»¶ç”Ÿæˆå‡½æ•°");let s=i.generateRandomEvent(this.currentWeek,r,o);return s||this.currentWeek%3!=0||(console.log("GameCore - ç¬¬ä¸€æ¬¡æœªç”Ÿæˆäº‹ä»¶ï¼Œå°è¯•ç¬¬äºŒæ¬¡ç”Ÿæˆ"),s=i.generateRandomEvent(this.currentWeek,r,o)),s?(console.log("GameCore - æˆåŠŸç”Ÿæˆéšæœºäº‹ä»¶:",s.id,s.title),i.activeEvents.includes(s)||(i.activeEvents.push(s),console.log("GameCore - äº‹ä»¶å·²åŠ å…¥æ´»è·ƒé˜Ÿåˆ—, å½“å‰é˜Ÿåˆ—é•¿åº¦:",i.activeEvents.length))):console.log("GameCore - æœ¬å‘¨æœªè§¦å‘äº‹ä»¶"),this.checkGameEnd(),!0}if(!(52===this.maxWeeks&&this.currentWeek>this.maxWeeks)){this.currentWeek++;const e=te(),t=Le(),i=dt();e.updateWeeklyPlayerState(this.currentWeek),t.updateMarketState(this.currentWeek);const r={money:e.money,debt:e.debt,inventory:e.inventory,statistics:e.statistics,purchasedHouses:e.purchasedHouses,name:e.name,capacity:e.capacity,inventoryUsed:e.inventoryUsed},o={marketModifiers:t.marketModifiers,currentLocation:t.currentLocation,productPrices:t.productPrices,products:t.products,locations:t.locations};let s=i.generateRandomEvent(this.currentWeek,r,o);return s||this.currentWeek%3!=0||(s=i.generateRandomEvent(this.currentWeek,r,o)),s&&(i.activeEvents.includes(s)||i.activeEvents.push(s)),this.checkGameEnd(),!0}return this.gameOver=!0,!1},hasAffordableProducts(e=!0){const t=te(),i=Le(),r=e?t.money+t.bankDeposit:t.money;if(t.inventoryUsed>0)return!0;for(const o of i.locations){const e=i.getLocationAvailableProducts(o);for(const t of e){if(!i.products.find(e=>e.id===t))continue;if(i.getCurrentProductPrice(t)<=r)return!0}}return!1},checkGameEnd(){if(this.gameOver)return;if(this.currentWeek>this.maxWeeks)return void this.endGameWithTimeLimit();const e=te().netWorth;e>=1e6&&!this.victoryAchieved?this.achieveVictory():this.currentWeek>1&&e<0&&!this.hasAffordableProducts(!0)&&this.endGame("bankruptcy")},endGameWithTimeLimit(){var e,t,i,r,o,s,a;const n=te(),c=n.purchasedHouses&&n.purchasedHouses.length>0;if(console.log("æ¸¸æˆæ—¶é—´é™åˆ¶è¾¾åˆ° - endGameWithTimeLimit",{victoryAchieved:this.victoryAchieved,hasHouses:c,purchasedHouses:null==(e=n.purchasedHouses)?void 0:e.length,netWorth:n.netWorth}),this.victoryAchieved||c){const e=this.calculateGameScore("victoryTimeLimit"),c=this.calculateRank(e),l=this.calculateScoreDetails("victoryTimeLimit");if(console.log("æ—¶é—´é™åˆ¶èƒœåˆ© - ç›´æ¥è®¡ç®—å¾—åˆ†",{finalScore:e,rank:c}),this.gameResult={reason:"victoryTimeLimit",week:this.currentWeek,weeksPassed:this.currentWeek,score:e,achievementName:null,victoryAchieved:!0,firstVictoryWeek:(null==(t=this.gameResult)?void 0:t.firstVictoryWeek)||this.currentWeek,firstVictoryHouse:(null==(i=this.gameResult)?void 0:i.firstVictoryHouse)||null,finalMoney:n.money,finalAssets:n.netWorth,debt:n.debt,tradeStats:{totalTrades:(null==(r=n.statistics)?void 0:r.transactionCount)||0,totalProfit:(null==(o=n.statistics)?void 0:o.totalProfit)||0,averageProfit:(null==(s=n.statistics)?void 0:s.transactionCount)>0?((null==(a=n.statistics)?void 0:a.totalProfit)||0)/n.statistics.transactionCount:0},scoreDetails:{score:e,rank:c,details:l},endReason:"victoryTimeLimit"},this.gameOver=!0,n.purchasedHouses.length>0){this.gameResult.allPurchasedHouses=n.purchasedHouses,this.gameResult.houseCount=n.purchasedHouses.length;let e=n.purchasedHouses[0],t=n.purchasedHouses[0];n.purchasedHouses.forEach(i=>{i.purchasePrice>e.purchasePrice&&(e=i),(i.level>t.level||i.level===t.level&&i.purchasePrice>t.purchasePrice)&&(t=i)}),this.gameResult.mostExpensiveHouse=e,this.gameResult.highestLevelHouse=t}console.log("æ—¶é—´é™åˆ¶èƒœåˆ© - æ¸¸æˆç»“æœå¯¹è±¡å·²åˆ›å»º",{score:this.gameResult.score,scoreDetails:this.gameResult.scoreDetails})}else this.endGame("timeLimit")},achieveVictory(){const e=te();this.gameResult={reason:"victory",week:this.currentWeek,score:this.calculateGameScore("victory"),continuedPlay:!0,firstVictoryWeek:this.currentWeek,firstVictoryHouse:e.mostExpensiveHouse},e.addMoney(5e4),this.addNotification("reward","ä½œä¸ºè´­ä¹°è±ªå®…çš„å¥–åŠ±ï¼Œæ‚¨è·å¾—äº†é¢å¤–çš„50,000å…ƒï¼")},achieveVictoryWithHouse(e){var t,i,r,o;this.victoryAchieved=!0;const s=te();console.log("è´­æˆ¿èƒœåˆ© - å¼€å§‹è®¡ç®—ç»“æœ",{houseCount:s.purchasedHouses.length,netWorth:s.netWorth}),e&&(e.image?e.image.startsWith("./")?e.image=e.image.replace("./","/"):e.image.startsWith("/")||(e.image=`/${e.image}`):e.image="/resources/assets/images/house_1.jpeg");s.purchasedHouses.some(t=>t.houseId===e.id||t.id===e.id)||console.warn("æˆ¿å±‹è´­ä¹°è®°å½•ä¸ä¸€è‡´ï¼Œè¿™ç§æƒ…å†µä¸åº”è¯¥å‡ºç°");const a=this.calculateGameScore("houseVictory"),n=this.calculateRank(a),c=this.calculateScoreDetails("houseVictory");console.log("è´­æˆ¿èƒœåˆ© - è®¡ç®—å¾—åˆ†ç»“æœ",{finalScore:a,scoreRank:n,details:c});const l={...e};l.image&&!l.image.includes("NaN")||(console.warn("æˆ¿å±‹å›¾ç‰‡è·¯å¾„æ— æ•ˆï¼Œä½¿ç”¨é»˜è®¤å€¼"),l.image="/resources/assets/images/house_1.jpeg"),this.gameResult={reason:"houseVictory",week:this.currentWeek,weeksPassed:this.currentWeek,score:a,victoryAchieved:!0,firstVictoryWeek:this.currentWeek,firstVictoryHouse:l,canContinue:!0,finalMoney:s.money,finalAssets:s.netWorth,debt:s.debt,purchasedHouse:l,tradeStats:{totalTrades:(null==(t=s.statistics)?void 0:t.transactionCount)||0,totalProfit:(null==(i=s.statistics)?void 0:i.totalProfit)||0,averageProfit:(null==(r=s.statistics)?void 0:r.transactionCount)>0?((null==(o=s.statistics)?void 0:o.totalProfit)||0)/s.statistics.transactionCount:0},scoreDetails:{score:a,rank:n,details:c},endReason:"houseVictory"},this.gameOver=!0,console.log("è´­æˆ¿èƒœåˆ© - æ¸¸æˆç»“æœå¯¹è±¡åˆ›å»ºå®Œæˆ",{score:this.gameResult.score,scoreDetails:this.gameResult.scoreDetails})},continueGame(){this.gameOver=!1,this.victoryAchieved=!0},endGame(e,t=null){var i,r,o,s,a,n,c,l;this.gameOver=!0,this.victoryAchieved&&"victory"!==e&&"victoryTimeLimit"!==e&&(e="victoryOther");const u=te();console.log("æ¸¸æˆç»“æŸ - endGame",{reason:e,week:this.currentWeek,netWorth:u.netWorth,houseCount:(null==(i=u.purchasedHouses)?void 0:i.length)||0});const d=this.calculateGameScore(e),m=this.calculateRank(d),p=this.calculateScoreDetails(e);console.log("endGameå¾—åˆ†è®¡ç®—å®Œæˆ",{score:d,rank:m,details:p}),this.gameResult={reason:e,week:this.currentWeek,weeksPassed:this.currentWeek,score:d,achievementName:t,victoryAchieved:this.victoryAchieved,firstVictoryWeek:(null==(r=this.gameResult)?void 0:r.firstVictoryWeek)||null,firstVictoryHouse:(null==(o=this.gameResult)?void 0:o.firstVictoryHouse)||null,finalMoney:u.money,finalAssets:u.netWorth,debt:u.debt,tradeStats:{totalTrades:(null==(s=u.statistics)?void 0:s.transactionCount)||0,totalProfit:(null==(a=u.statistics)?void 0:a.totalProfit)||0,averageProfit:(null==(n=u.statistics)?void 0:n.transactionCount)>0?((null==(c=u.statistics)?void 0:c.totalProfit)||0)/u.statistics.transactionCount:0},scoreDetails:{score:d,rank:m,details:p},endReason:e,data:{debt:u.debt,firstVictoryWeek:(null==(l=this.gameResult)?void 0:l.firstVictoryWeek)||this.currentWeek}},console.log("æ¸¸æˆç»“æœå¯¹è±¡å·²åˆ›å»º",{score:this.gameResult.score,scoreInDetails:this.gameResult.scoreDetails.score})},calculateGameScore(e){var t,i;const r=te();try{console.log("è®¡ç®—æ¸¸æˆå¾—åˆ† - åŸå§‹æ•°æ®",{netWorth:r.netWorth,money:r.money,debt:r.debt,week:this.currentWeek,endReason:e,purchasedHouses:(null==(t=r.purchasedHouses)?void 0:t.length)||0});let o=r.netWorth;(isNaN(o)||void 0===o)&&(console.warn("è®¡ç®—æ¸¸æˆå¾—åˆ† - å‡€èµ„äº§æ— æ•ˆï¼Œä½¿ç”¨å¤‡ç”¨è®¡ç®—"),o=(r.money||0)-(r.debt||0)),o=Math.max(1e3,o);const s=o/1e3;let a=1;switch(e){case"victory":case"houseVictory":a=1.5;break;case"victoryTimeLimit":a=2;break;case"bankruptcy":a=.5;break;case"achievement":a=1.2;break;default:a=1}let n=1;if(e.includes("victory")){const e=Math.max(1,this.currentWeek);n=Math.max(.5,1+10/e)}let c=1;const l=(null==(i=r.purchasedHouses)?void 0:i.length)||0;l>0&&(c=1+.2*l);let u=s*a*n*c;return u=Math.max(1,Math.floor(u)),console.log("è®¡ç®—æ¸¸æˆå¾—åˆ† - æœ€ç»ˆç»“æœ",{baseScore:s,multiplier:a,speedMultiplier:n,houseBonus:c,totalScore:u}),u}catch(o){return console.error("è®¡ç®—æ¸¸æˆå¾—åˆ†æ—¶å‘ç”Ÿé”™è¯¯:",o),Math.max(1,Math.floor(r.netWorth/1e3))}},calculateRank:e=>e>=1e6?"S":e>=5e5?"A":e>=2e5?"B":e>=1e5?"C":"D",calculateScoreDetails(e){var t,i,r;try{const s=te();console.log("è®¡ç®—å¾—åˆ†æ˜ç»† - å¼€å§‹",{endReason:e,playerNetWorth:s.netWorth});let a=0;try{a=Math.max(0,Math.floor(s.netWorth/800)),console.log("èµ„äº§å¾—åˆ†è®¡ç®—",{netWorth:s.netWorth,assetsScore:a})}catch(o){console.error("èµ„äº§å¾—åˆ†è®¡ç®—é”™è¯¯:",o),a=100}let n=0;try{if(e.includes("victory")){const e=Math.max(1,this.currentWeek);n=Math.round(5e5/e),console.log("æ—¶é—´æ•ˆç‡å¾—åˆ†è®¡ç®—",{week:e,timeScore:n})}}catch(o){console.error("æ—¶é—´æ•ˆç‡å¾—åˆ†è®¡ç®—é”™è¯¯:",o),n=50}let c=0;try{if(s.purchasedHouses&&s.purchasedHouses.length>0){let e=0;s.purchasedHouses.forEach(t=>{const i=t.purchasePrice||t.price||0;e+=i}),c=Math.floor(e/5e3),s.purchasedHouses.length>1&&(c*=1+.2*(s.purchasedHouses.length-1)),console.log("æˆ¿äº§å¾—åˆ†è®¡ç®—",{houseCount:s.purchasedHouses.length,totalHouseValue:e,houseScore:c})}}catch(o){console.error("æˆ¿äº§å¾—åˆ†è®¡ç®—é”™è¯¯:",o),c=100}let l=0;try{const e=(null==(t=s.statistics)?void 0:t.totalProfit)||0,r=(null==(i=s.statistics)?void 0:i.transactionCount)||0;r>0&&(l=Math.floor(e/1e3),r>10&&(l*=1+.02*(r-10))),console.log("äº¤æ˜“å¾—åˆ†è®¡ç®—",{tradeCount:r,totalProfit:e,tradeScore:l})}catch(o){console.error("äº¤æ˜“å¾—åˆ†è®¡ç®—é”™è¯¯:",o),l=50}let u=0;try{const e=(null==(r=s.statistics)?void 0:r.totalInterestEarned)||0;u=e>0?Math.floor(e/500):Math.floor(s.bankDeposit/1e4),console.log("é“¶è¡Œå¾—åˆ†è®¡ç®—",{totalInterest:e,bankDeposit:s.bankDeposit,bankScore:u})}catch(o){console.error("é“¶è¡Œå¾—åˆ†è®¡ç®—é”™è¯¯:",o),u=10}const d=a+n+c+l+u;return console.log("å¾—åˆ†æ˜ç»†æ€»ç»“",{assetsScore:a,timeScore:n,houseScore:c,tradeScore:l,bankScore:u,totalScore:d}),{assetsScore:a,timeScore:n,houseScore:c,tradeScore:l,bankScore:u,totalScore:d}}catch(s){return console.error("è®¡ç®—å¾—åˆ†æ˜ç»†æ—¶å‡ºé”™:",s),{assetsScore:100,timeScore:50,houseScore:100,tradeScore:50,bankScore:10,totalScore:310}}},addNotification(e,t){this.notifications.push({id:Date.now(),type:e,message:t,timestamp:(new Date).toISOString()}),this.notifications.length>10&&this.notifications.shift()},pauseGame(){this.gameStarted&&!this.gameOver&&(this.gamePaused=!0)},resumeGame(){this.gamePaused=!1},manualEndGame(){const e=te();let t="playerChoice";e.purchasedHouses&&e.purchasedHouses.length>0&&(t="victory",this.victoryAchieved||(this.victoryAchieved=!0,this.gameResult={firstVictoryWeek:this.currentWeek,firstVictoryHouse:e.purchasedHouses[e.purchasedHouses.length-1]})),this.endGame(t)},triggerSpecificEvent(e){console.log("GameCore - å°è¯•è§¦å‘ç‰¹å®šäº‹ä»¶:",e);try{const t=dt(),i=te(),r=Le(),o={money:i.money,debt:i.debt,inventory:i.inventory,statistics:i.statistics,purchasedHouses:i.purchasedHouses,name:i.name,capacity:i.capacity,inventoryUsed:i.inventoryUsed},s={marketModifiers:r.marketModifiers,currentLocation:r.currentLocation,productPrices:r.productPrices,products:r.products,locations:r.locations},a=t.triggerSpecificEvent(e,o,s);return a?(console.log("GameCore - æˆåŠŸè§¦å‘ç‰¹å®šäº‹ä»¶:",a.id,a.title),this.activeEvents.includes(a)||(this.activeEvents.push(a),console.log("GameCore - äº‹ä»¶å·²æ·»åŠ åˆ°æ´»è·ƒé˜Ÿåˆ—, å½“å‰é˜Ÿåˆ—é•¿åº¦:",this.activeEvents.length)),a):(console.warn("GameCore - è§¦å‘ç‰¹å®šäº‹ä»¶å¤±è´¥:",e),null)}catch(t){return F(t,"gameState.triggerSpecificEvent",c.GAME_LOGIC,l.ERROR),console.error("GameCore - è§¦å‘ç‰¹å®šäº‹ä»¶æ—¶å‡ºé”™:",t),null}},initializeGameCore(){return new Promise(e=>{console.log("GameCore - åˆå§‹åŒ–æ¸¸æˆæ ¸å¿ƒ"),setTimeout(()=>{this.initialized=!0,console.log("GameCore - æ¸¸æˆæ ¸å¿ƒåˆå§‹åŒ–å®Œæˆ"),e()},300)})},updateGameState(){console.log("GameCore - æ›´æ–°æ¸¸æˆçŠ¶æ€"),this.gameStarted&&!this.gameOver&&this.checkGameEnd(),this.notifications.length>10&&(this.notifications=this.notifications.slice(-10))}},getters:{gameProgress(){if(this.maxWeeks>52)return Math.min(5,this.currentWeek/1e3*100);const e=(this.currentWeek-1)/this.maxWeeks*100;return Math.max(0,Math.min(100,e))},isGameActive(){return this.gameStarted&&!this.gameOver&&!this.gamePaused},remainingWeeks(){if(this.maxWeeks>52)return"âˆ";const e=this.maxWeeks-this.currentWeek+1;return Math.max(0,e)},isEndlessMode(){return this.maxWeeks>52}}}),ht=Object.freeze(Object.defineProperty({__proto__:null,useGameCoreStore:pt},Symbol.toStringTag,{value:"Module"}));function gt(e){const t=[];if(!e||"object"!=typeof e)return{isValid:!1,issues:["å­˜æ¡£æ•°æ®æ— æ•ˆæˆ–å·²æŸå"]};e.version||t.push("ç¼ºå°‘ç‰ˆæœ¬ä¿¡æ¯");const i=["gameCore","player","market","event"];for(const r of i)e[r]||t.push(`ç¼ºå°‘${r}éƒ¨åˆ†`);if(e.gameCore&&("number"!=typeof e.gameCore.currentWeek&&t.push("æ¸¸æˆå‘¨æ•°æ— æ•ˆ"),"number"!=typeof e.gameCore.maxWeeks&&t.push("æœ€å¤§å‘¨æ•°æ— æ•ˆ"),e.gameCore.currentWeek>e.gameCore.maxWeeks&&t.push("æ¸¸æˆå‘¨æ•°è¶…è¿‡æœ€å¤§å‘¨æ•°")),e.player)if("string"!=typeof e.player.name&&t.push("ç©å®¶åç§°æ— æ•ˆ"),"number"!=typeof e.player.money&&t.push("ç©å®¶é‡‘é’±æ— æ•ˆ"),e.player.money<0&&t.push("ç©å®¶é‡‘é’±ä¸ºè´Ÿæ•°"),Array.isArray(e.player.inventory)||t.push("åº“å­˜æ•°æ®æ— æ•ˆ"),Array.isArray(e.player.purchasedHouses)||t.push("æˆ¿äº§æ•°æ®æ— æ•ˆ"),e.player.statistics&&"object"==typeof e.player.statistics){const i=["weekCount","transactionCount","totalProfit","maxMoney"];for(const r of i)"number"!=typeof e.player.statistics[r]&&t.push(`ç»Ÿè®¡æ•°æ® ${r} æ— æ•ˆæˆ–ç¼ºå¤±`)}else t.push("ç©å®¶ç»Ÿè®¡æ•°æ®æ— æ•ˆ");if(e.market&&(Array.isArray(e.market.locations)||t.push("åœ°ç‚¹æ•°æ®æ— æ•ˆ"),e.market.productPrices&&"object"==typeof e.market.productPrices||t.push("ä»·æ ¼æ•°æ®æ— æ•ˆ"),Array.isArray(e.market.products))){e.market.products.length!==new Set(e.market.products).size&&t.push("äº§å“æ•°æ®åŒ…å«é‡å¤é¡¹")}return e.event&&(e.event.activeEvent&&"object"!=typeof e.event.activeEvent&&t.push("æ´»åŠ¨äº‹ä»¶æ•°æ®æ— æ•ˆ"),Array.isArray(e.event.triggeredEvents)||t.push("è§¦å‘äº‹ä»¶è®°å½•æ— æ•ˆ")),{isValid:0===t.length,issues:t}}function yt(e,t=null){const i=e||{};let r=[];t||(t={version:"0.1.0",gameCore:{currentWeek:1,maxWeeks:52,gameStarted:!0,gamePaused:!1,gameOver:!1},player:{name:"ç©å®¶",money:5e3,debt:2e3,capacity:100,inventory:[],purchasedHouses:[]},market:{locations:[{id:"location1",name:"å¸‚ä¸­å¿ƒ",specialProducts:["product1","product2"]},{id:"location2",name:"éƒŠåŒº",specialProducts:["product3","product4"]},{id:"location3",name:"å•†ä¸šåŒº",specialProducts:["product5","product6"]},{id:"location4",name:"ä½å®…åŒº",specialProducts:["product7","product8"]},{id:"location5",name:"å·¥ä¸šåŒº",specialProducts:["product9","product10"]}],productPrices:{}},event:{activeEvent:null,triggeredEvents:[]}},r.push("ä½¿ç”¨é»˜è®¤æ¨¡æ¿æ•°æ®")),i.version=i.version||"0.1.1",i.timestamp=i.timestamp||(new Date).toISOString(),r.push(`è®¾ç½®ç‰ˆæœ¬ä¸º: ${i.version}`),i.gameCore=i.gameCore||{},i.player=i.player||{},i.market=i.market||{},i.event=i.event||{},i.gameCore.currentWeek=vt(i.gameCore.currentWeek,1),i.gameCore.maxWeeks=vt(i.gameCore.maxWeeks,52),i.gameCore.gameStarted=ft(i.gameCore.gameStarted,!0),i.gameCore.gamePaused=ft(i.gameCore.gamePaused,!1),i.gameCore.gameOver=ft(i.gameCore.gameOver,!1),i.gameCore.notifications=Array.isArray(i.gameCore.notifications)?i.gameCore.notifications:[],i.gameCore.gameGoals=i.gameCore.gameGoals||{requiredNetWorth:4e5,targetWeeks:30,debtRatio:.4},i.gameCore.currentWeek>i.gameCore.maxWeeks&&(i.gameCore.currentWeek=i.gameCore.maxWeeks,r.push("ä¿®å¤: è°ƒæ•´å½“å‰å‘¨æ•°ä¸è¶…è¿‡æœ€å¤§å‘¨æ•°")),i.player.name=i.player.name||"ç©å®¶",i.player.money=vt(i.player.money,5e3),i.player.money<0&&(i.player.money=0,r.push("ä¿®å¤: é‡ç½®è´Ÿæ•°é‡‘é’±ä¸º0")),i.player.debt=vt(i.player.debt,2e3),i.player.capacity=vt(i.player.capacity,100),i.player.inventoryUsed=vt(i.player.inventoryUsed,0),i.player.inventory=Array.isArray(i.player.inventory)?i.player.inventory:[],i.player.purchasedHouses=Array.isArray(i.player.purchasedHouses)?i.player.purchasedHouses:[];const o=i.player.inventory.reduce((e,t)=>e+(t.quantity||0),0);if(i.player.inventoryUsed!==o&&(i.player.inventoryUsed=o,r.push("ä¿®å¤: è°ƒæ•´åº“å­˜ä½¿ç”¨é‡ä»¥åŒ¹é…å®é™…åº“å­˜")),i.player.statistics=i.player.statistics||{},i.player.statistics.weekCount=vt(i.player.statistics.weekCount,i.gameCore.currentWeek),i.player.statistics.transactionCount=vt(i.player.statistics.transactionCount,0),i.player.statistics.totalProfit=vt(i.player.statistics.totalProfit,0),i.player.statistics.maxMoney=vt(i.player.statistics.maxMoney,Math.max(i.player.money,5e3)),i.player.purchasedHouses.length>0&&(!i.player.statistics.housePurchases||0===i.player.statistics.housePurchases.length)?(i.player.statistics.housePurchases=i.player.purchasedHouses.map(e=>({houseId:e.houseId,name:e.name||`${e.level}çº§æˆ¿äº§`,level:e.level||1,price:e.purchasePrice,week:e.purchaseWeek||i.gameCore.currentWeek})),r.push("ä¿®å¤: é‡å»ºæˆ¿å±‹è´­ä¹°è®°å½•")):i.player.statistics.housePurchases||(i.player.statistics.housePurchases=[]),i.player.purchasedHouses.length>0&&null===i.player.statistics.firstHousePurchaseWeek){const e=[...i.player.purchasedHouses].sort((e,t)=>(e.purchaseWeek||1/0)-(t.purchaseWeek||1/0))[0];i.player.statistics.firstHousePurchaseWeek=e.purchaseWeek||Math.max(1,i.gameCore.currentWeek-1),r.push("ä¿®å¤: è®¾ç½®é¦–æ¬¡è´­æˆ¿å‘¨æ•°")}if(Array.isArray(i.market.locations)&&0!==i.market.locations.length||(i.market.locations=t.market&&Array.isArray(t.market.locations)?[...t.market.locations]:[],i.market.locations.length>0&&r.push("ä¿®å¤: ä»æ¨¡æ¿æ¢å¤åœ°ç‚¹æ•°æ®")),i.market.productPrices=i.market.productPrices||{},t&&t.market&&t.market.productPrices){let e=0;for(const r in t.market.productPrices)i.market.productPrices[r]||(i.market.productPrices[r]=t.market.productPrices[r],e++);e>0&&r.push(`ä¿®å¤: ä»æ¨¡æ¿æ¢å¤${e}ä¸ªäº§å“ä»·æ ¼æ•°æ®`)}return Array.isArray(i.event.triggeredEvents)||(i.event.triggeredEvents=[],r.push("ä¿®å¤: åˆå§‹åŒ–è§¦å‘äº‹ä»¶è®°å½•")),console.log("å­˜æ¡£ä¿®å¤æ—¥å¿—:",r),{data:i,repairLog:r}}function vt(e,t){const i=Number(e);return isNaN(i)?t:i}function ft(e,t){return"boolean"==typeof e?e:t}class bt{async getData(e){throw new Error("StorageService.getData must be implemented by subclass")}async setData(e,t){throw new Error("StorageService.setData must be implemented by subclass")}async removeData(e){throw new Error("StorageService.removeData must be implemented by subclass")}async clearAll(){throw new Error("StorageService.clearAll must be implemented by subclass")}}class kt extends bt{constructor(e="game_"){super(),this.prefix=e}getFullKey(e){return`${this.prefix}${e}`}async getData(e){try{const t=this.getFullKey(e),i=localStorage.getItem(t);return i?JSON.parse(i):null}catch(t){throw F(t,"storageService (persistence)",c.STORAGE,l.ERROR),u(`Failed to get data for key ${e}`,{originalError:t.message})}}_safeStringify(e){try{return JSON.stringify(e)}catch(t){if(console.warn("æ ‡å‡†åºåˆ—åŒ–å¤±è´¥ï¼Œå°è¯•æ‰‹åŠ¨åºåˆ—åŒ–"),null==e)return JSON.stringify(null);if("object"!=typeof e)return JSON.stringify(e);if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)try{const i=e[r];"object"==typeof i&&null!==i?t.push(JSON.parse(this._safeStringify(i))):t.push(i)}catch(i){t.push(null)}return JSON.stringify(t)}const r={};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o))try{const t=e[o];r[o]="object"==typeof t&&null!==t?JSON.parse(this._safeStringify(t)):"function"==typeof t?"[å‡½æ•°]":t}catch(i){console.warn(`æ— æ³•åºåˆ—åŒ–å±æ€§ ${o}`),r[o]=null}return JSON.stringify(r)}}async setData(e,t){try{console.log(`LocalStorage: ä¿å­˜æ•°æ®åˆ° ${e}`);const r=this.getFullKey(e);let o;try{o=this._safeStringify(t)}catch(i){console.warn("åºåˆ—åŒ–å¤±è´¥ï¼Œä½¿ç”¨åŸºæœ¬æ•°æ®",i),o=JSON.stringify({_simplified:!0,timestamp:(new Date).toISOString(),key:e})}return localStorage.setItem(r,o),!0}catch(r){return F(r,"storageService (persistence)",c.STORAGE,l.ERROR),console.error(`ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨å¤±è´¥: ${e}`,r),!1}}async removeData(e){try{const t=this.getFullKey(e);return localStorage.removeItem(t),!0}catch(t){throw F(t,"storageService (persistence)",c.STORAGE,l.ERROR),u(`Failed to remove data for key ${e}`,{originalError:t.message})}}async clearAll(){try{return Object.keys(localStorage).forEach(e=>{e.startsWith(this.prefix)&&localStorage.removeItem(e)}),!0}catch(e){throw F(e,"storageService (persistence)",c.STORAGE,l.ERROR),u("Failed to clear all data",{originalError:e.message})}}}class Pt extends bt{constructor(e="game_"){super(),this.prefix=e,this.isInitialized=!1,this.fallbackStorage=new kt,this.initializeElectronAPI()}async initializeElectronAPI(){try{window.electronAPI&&window.electronAPI.getConfig?(await window.electronAPI.getConfig(),this.isInitialized=!0,console.log("ElectronStorageServiceåˆå§‹åŒ–æˆåŠŸ")):console.warn("Electron APIä¸å¯ç”¨ï¼Œå°†ä½¿ç”¨LocalStorageä½œä¸ºå¤‡ç”¨")}catch(e){F(e,"storageService (persistence)",c.STORAGE,l.ERROR),console.error("åˆå§‹åŒ–ElectronStorageServiceå¤±è´¥:",e)}return this.isInitialized}async getData(e){try{if(!this.isInitialized)return await this.fallbackStorage.getData(e);if(!window.electronAPI||!window.electronAPI.getConfig)throw new Error("Electron APIä¸å¯ç”¨");const t=this.prefix+e,i=await window.electronAPI.getConfig();return i&&void 0!==i[t]?i[t]:null}catch(t){return F(t,"storageService (persistence)",c.UNKNOWN,l.ERROR),console.error(`è·å–æ•°æ®å¤±è´¥ [${e}]:`,t),await this.fallbackStorage.getData(e)}}_safeSerialize(e){try{return console.log("å°è¯•å®‰å…¨åºåˆ—åŒ–æ•°æ®"),JSON.parse(JSON.stringify(e))}catch(t){if(console.warn("æ ‡å‡†JSONåºåˆ—åŒ–å¤±è´¥ï¼Œå°è¯•æ‰‹åŠ¨åºåˆ—åŒ–",t),null==e)return e;if("object"!=typeof e)return e;if(Array.isArray(e))return e.map(e=>this._safeSerialize(e));const r={};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o))try{r[o]=this._safeSerialize(e[o])}catch(i){console.warn(`æ— æ³•åºåˆ—åŒ–å±æ€§ ${o}:`,i),"function"==typeof e[o]?r[o]="[å‡½æ•°]":"object"==typeof e[o]?r[o]="[å¤æ‚å¯¹è±¡]":r[o]=null}return r}}async setData(e,t){try{console.log(`æ­£åœ¨ä¿å­˜æ•°æ® [${e}]...`);const i=await this.fallbackStorage.setData(e,t);if(console.log("å¤‡ç”¨å­˜å‚¨ä¿å­˜"+(i?"æˆåŠŸ":"å¤±è´¥")),!this.isInitialized)return console.log("ElectronAPIæœªåˆå§‹åŒ–ï¼Œä»…ä½¿ç”¨å¤‡ç”¨å­˜å‚¨"),i;if(!window.electronAPI||!window.electronAPI.setConfig)throw new Error("Electron APIä¸å¯ç”¨");const r=this._safeSerialize(t);console.log("æ•°æ®å·²å®‰å…¨åºåˆ—åŒ–");const o=this.prefix+e,s={[o]:r};return await window.electronAPI.setConfig(s),console.log(`æ•°æ®æˆåŠŸä¿å­˜åˆ° [${e}]`),!0}catch(i){if(F(i,"storageService (persistence)",c.UNKNOWN,l.ERROR),console.error(`è®¾ç½®æ•°æ®å¤±è´¥ [${e}]:`,i),e.includes("Save_")&&window.electronAPI&&window.electronAPI.saveGame)try{console.log("å°è¯•ä½¿ç”¨saveGame APIä¿å­˜...");const i=e.replace(this.prefix,"").replace("Save_",""),r=await window.electronAPI.saveGame({name:i,gameState:t});if(r&&r.success)return console.log("ä½¿ç”¨saveGame APIä¿å­˜æˆåŠŸ"),!0}catch(r){console.error("saveGame APIä¿å­˜å¤±è´¥",r)}return await this.fallbackStorage.setData(e,t)}}async removeData(e){try{if(!this.isInitialized)return await this.fallbackStorage.removeData(e);if(!window.electronAPI||!window.electronAPI.setConfig)throw new Error("Electron APIä¸å¯ç”¨");const t=this.prefix+e,i={[t]:void 0};return await window.electronAPI.setConfig(i),!0}catch(t){return F(t,"storageService (persistence)",c.UNKNOWN,l.ERROR),console.error(`åˆ é™¤æ•°æ®å¤±è´¥ [${e}]:`,t),await this.fallbackStorage.removeData(e)}}async clearAll(){try{if(!this.isInitialized)return await this.fallbackStorage.clearAll();if(!window.electronAPI||!window.electronAPI.clearConfig)throw new Error("Electron APIä¸å¯ç”¨");const e=await window.electronAPI.getConfig(),t=Object.keys(e).filter(e=>e.startsWith(this.prefix));if(0===t.length)return!0;const i={};return t.forEach(e=>{i[e]=void 0}),await window.electronAPI.setConfig(i),!0}catch(e){return F(e,"storageService (persistence)",c.UNKNOWN,l.ERROR),console.error("æ¸…é™¤æ‰€æœ‰æ•°æ®å¤±è´¥:",e),await this.fallbackStorage.clearAll()}}}const _t=new Pt,Et="saveList",St="houseJourneySave_",Mt="0.1.1",wt=r("save",{state:()=>({saveList:[],isLoading:!1,lastAutoSaveWeek:0,autoSaveEnabled:!0,saveTemplate:null,lastValidatedSave:null}),actions:{async init(){try{await this.loadSaveList(),this.createSaveTemplate(),this.autoSaveEnabled&&setInterval(()=>{const e=pt();!e.gameStarted||e.gameOver||e.gamePaused||this.checkAutoSave(e.currentWeek)},6e4)}catch(e){F(e,"saveSystem (persistence)",c.UNKNOWN,l.ERROR),console.error("åˆå§‹åŒ–å­˜æ¡£ç³»ç»Ÿå¤±è´¥",e)}},createSaveTemplate(){pt(),te();const e=Le();dt(),this.saveTemplate={version:Mt,timestamp:(new Date).toISOString(),gameCore:{currentWeek:1,maxWeeks:52,gameStarted:!0,gamePaused:!1,gameOver:!1,gameResult:null,notifications:[],gameGoals:{requiredNetWorth:4e5,targetWeeks:30,debtRatio:.4}},player:{name:"ç©å®¶",money:5e3,debt:2e3,capacity:100,inventoryUsed:0,inventory:[],purchasedHouses:[],statistics:{weekCount:1,transactionCount:0,totalProfit:0,maxMoney:5e3,visitedLocations:[]}},market:{locations:e.locations||[],currentLocation:null,productPrices:{},products:[],houses:[],marketModifiers:{}},event:{activeEvent:null,forceLocationChange:!1,targetLocation:null,nextEventId:null,triggeredEvents:[]}}},async loadSaveList(){try{console.log("å°è¯•åŠ è½½å­˜æ¡£åˆ—è¡¨...");const t=await _t.getData(Et);if(t&&Array.isArray(t)&&0!==t.length)console.log("æˆåŠŸä»å­˜å‚¨ä¸­åŠ è½½å­˜æ¡£åˆ—è¡¨ï¼Œæ•°é‡:",t.length),this.saveList=t;else{console.log("å­˜æ¡£åˆ—è¡¨ä¸ºç©ºæˆ–æ— æ•ˆï¼Œå°è¯•ä»æ–‡ä»¶ç³»ç»Ÿè·å–...");try{if(window.electronAPI&&window.electronAPI.listSaves){const e=await window.electronAPI.listSaves();if(e&&e.success&&Array.isArray(e.saves)){console.log("ä»Electron APIè·å–åˆ°",e.saves.length,"ä¸ªå­˜æ¡£");const t=e.saves.map(e=>({id:e.name,name:e.name,isAuto:e.name.startsWith("autosave_")||e.name.includes("è‡ªåŠ¨å­˜æ¡£"),timestamp:e.lastModified?new Date(e.lastModified).getTime():Date.now(),lastModified:e.lastModified}));return this.saveList=t,await _t.setData(Et,t),t}}}catch(e){console.error("ä»Electron APIè·å–å­˜æ¡£åˆ—è¡¨å¤±è´¥",e)}this.saveList=[]}}catch(t){F(t,"saveSystem (persistence)",c.UNKNOWN,l.ERROR),console.error("åŠ è½½å­˜æ¡£åˆ—è¡¨å¤±è´¥",t),this.saveList=[]}return this.saveList},async validateSave(e){try{const t=e||this.lastValidatedSave;if(!t)return{success:!1,message:"æœªæŒ‡å®šå­˜æ¡£ID"};const i=await _t.getData(`${St}${t}`);if(!i)return{success:!1,message:"å­˜æ¡£ä¸å­˜åœ¨æˆ–å·²æŸå"};const r=gt(i);return{success:r.isValid,issues:r.issues,saveData:i,canRepair:r.issues.length>0}}catch(t){return F(t,"saveSystem (persistence)",c.UNKNOWN,l.ERROR),console.error("éªŒè¯å­˜æ¡£å¤±è´¥",t),{success:!1,message:`éªŒè¯å¤±è´¥: ${t.message}`,error:t}}},async saveGame(e,t=!1){return V(async()=>{const i=pt(),r=te(),o=Le(),s=dt(),a=Q();let n={version:Mt,timestamp:(new Date).toISOString()};try{console.log("å‡†å¤‡å­˜æ¡£æ•°æ®...");const e=i.gameResult?JSON.parse(JSON.stringify({reason:i.gameResult.reason,week:i.gameResult.week,score:i.gameResult.score,endReason:i.gameResult.endReason,victoryAchieved:i.gameResult.victoryAchieved,firstVictoryWeek:i.gameResult.firstVictoryWeek})):null,t=i.notifications?i.notifications.map(e=>({id:e.id,type:e.type,message:e.message,timestamp:e.timestamp})):[],a=r.inventory?r.inventory.map(e=>({productId:e.productId,name:e.name,quantity:e.quantity,purchasePrice:e.purchasePrice,purchaseWeek:e.purchaseWeek})):[],c=r.purchasedHouses?r.purchasedHouses.map(e=>({houseId:e.houseId,name:e.name,level:e.level,purchasePrice:e.purchasePrice,purchaseWeek:e.purchaseWeek,location:"string"==typeof e.location?e.location:null})):[];let l=null;s.activeEvent&&(l={id:s.activeEvent.id,title:s.activeEvent.title,type:s.activeEvent.type}),n={version:Mt,timestamp:(new Date).toISOString(),gameCore:{currentWeek:i.currentWeek,maxWeeks:i.maxWeeks,gameStarted:i.gameStarted,gamePaused:i.gamePaused,gameOver:i.gameOver,gameResult:e,notifications:t,gameGoals:JSON.parse(JSON.stringify(i.gameGoals||{}))},player:{name:r.name,money:r.money,debt:r.debt,capacity:r.capacity,inventoryUsed:r.inventoryUsed,inventory:a,purchasedHouses:c,statistics:JSON.parse(JSON.stringify(r.statistics||{}))},market:{locations:JSON.parse(JSON.stringify(o.locations||[])),currentLocation:o.currentLocation?o.currentLocation.id:null,productPrices:JSON.parse(JSON.stringify(o.productPrices||{})),products:o.products?o.products.map(e=>"object"==typeof e?e.id:e):[],houses:o.houses?o.houses.map(e=>"object"==typeof e?e.id:e):[],marketModifiers:JSON.parse(JSON.stringify(o.marketModifiers||{}))},event:{activeEvent:l,forceLocationChange:s.forceLocationChange,targetLocation:s.targetLocation,nextEventId:s.nextEventId,triggeredEvents:JSON.parse(JSON.stringify(s.triggeredEvents||[]))}},console.log("å­˜æ¡£æ•°æ®å‡†å¤‡å®Œæˆ")}catch(h){F(h,"saveSystem (persistence)",c.UNKNOWN,l.ERROR),console.error("å‡†å¤‡å­˜æ¡£æ•°æ®æ—¶å‡ºé”™:",h),n={version:Mt,timestamp:(new Date).toISOString(),gameCore:{currentWeek:i.currentWeek,maxWeeks:i.maxWeeks,gameStarted:!0,gamePaused:!1,gameOver:i.gameOver},player:{name:r.name,money:r.money,debt:r.debt,capacity:100,inventoryUsed:0,inventory:[],purchasedHouses:[]},market:{currentLocation:null,productPrices:{},products:[],houses:[],marketModifiers:{}},event:{triggeredEvents:[]}},t||a.showToast({type:"warning",message:"å­˜æ¡£æ•°æ®å¤„ç†å‡ºé”™ï¼Œä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬",duration:3e3})}const u=gt(n);if(!u.isValid){console.warn("ç”Ÿæˆçš„å­˜æ¡£æ•°æ®æœ‰é—®é¢˜ï¼Œå°è¯•ä¿®å¤...",u.issues),t||a.showToast({type:"warning",message:"å­˜æ¡£æ•°æ®æœ‰é—®é¢˜ï¼Œæ­£åœ¨ä¿®å¤...",duration:3e3});const e=yt(n,this.saveTemplate);n=e.data,!t&&e.repairLog.length>0&&(console.info("å­˜æ¡£ä¿®å¤å®Œæˆ",e.repairLog),a.showToast({type:"info",message:`å­˜æ¡£å·²ä¿®å¤ (${e.repairLog.length}é¡¹é—®é¢˜)`,duration:3e3}))}let d,m=!0;if(t){const t=`auto_${Date.now()}`;d=t,e=`è‡ªåŠ¨å­˜æ¡£ - ç¬¬${i.currentWeek}å‘¨ - ${(new Date).toLocaleString()}`}else{const t=this.saveList.find(t=>t.name===e);t?(d=t.id,m=!1):d=`save_${Date.now()}`}const p={id:d,name:e,isAuto:t,timestamp:Date.now(),week:i.currentWeek,playerMoney:r.money,playerDebt:r.debt,location:o.currentLocation?o.currentLocation.name:"æœªçŸ¥ä½ç½®",version:Mt};try{if(console.log("æ­£åœ¨ä¿å­˜æ¸¸æˆæ•°æ®åˆ°å­˜å‚¨..."),await _t.setData(`${St}${d}`,n),console.log("æ¸¸æˆæ•°æ®å·²ä¿å­˜åˆ°å­˜å‚¨"),window.electronAPI&&window.electronAPI.saveGame){console.log("å°è¯•ä½¿ç”¨Electron APIä¿å­˜æ¸¸æˆ...");const t=await window.electronAPI.saveGame({name:e,gameState:n});t&&t.success?console.log("æ¸¸æˆå·²æˆåŠŸä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ:",t.path):console.warn("Electronä¿å­˜å¯èƒ½å¤±è´¥:",(null==t?void 0:t.error)||"æœªçŸ¥é”™è¯¯")}if(console.log("æ›´æ–°å­˜æ¡£åˆ—è¡¨..."),m)this.saveList.unshift(p);else{const e=this.saveList.findIndex(e=>e.id===d);-1!==e&&(this.saveList[e]=p)}}catch(g){if(F(g,"saveSystem (persistence)",c.STORAGE,l.ERROR),console.error("ä¿å­˜æ¸¸æˆæ•°æ®æ—¶å‡ºé”™:",g),!window.electronAPI||!window.electronAPI.saveGame)throw g;{console.log("å°è¯•ä½¿ç”¨å¤‡ç”¨æ–¹æ³•ä¿å­˜æ¸¸æˆ...");const t=await window.electronAPI.saveGame({name:e,gameState:n});if(!t||!t.success)throw g;console.log("å·²ä½¿ç”¨å¤‡ç”¨æ–¹æ³•ä¿å­˜æ¸¸æˆ")}}if(t){const e=this.saveList.filter(e=>e.isAuto);if(e.length>3){const t=e.sort((e,t)=>e.timestamp-t.timestamp).slice(0,e.length-3);for(const e of t)await this.deleteSave(e.id,!0)}}return await _t.setData(Et,this.saveList),t||a.showToast({type:"success",message:m?"æ¸¸æˆå·²ä¿å­˜":"å­˜æ¡£å·²æ›´æ–°",duration:2e3}),t&&(this.lastAutoSaveWeek=i.currentWeek),{success:!0,saveId:d,isNewSave:m}},"saveGame",c.STORAGE,l.ERROR)},async loadGame(e){return V(async()=>{pt();const t=te(),i=(Le(),dt(),Q());try{this.lastValidatedSave=e;const r=await this.validateSave(e);if(r.success)await this.loadStoresFromSaveData(r.saveData);else{i.showToast({type:"warning",message:"å­˜æ¡£å¯èƒ½å·²æŸåï¼Œæ­£åœ¨å°è¯•ä¿®å¤...",duration:3e3});const t=await _t.getData(`${St}${e}`);if(!t)return i.showToast({type:"error",message:"å­˜æ¡£æ•°æ®æ— æ³•è¯»å–ï¼Œæ— æ³•ä¿®å¤",duration:5e3}),this.isLoading=!1,{success:!1,message:"å­˜æ¡£æ•°æ®æ— æ³•è¯»å–"};const r=yt(t,this.saveTemplate),o=r.data;if(!gt(o).isValid)return i.showToast({type:"error",message:"å­˜æ¡£æŸåä¸¥é‡ï¼Œæ— æ³•ä¿®å¤",duration:5e3}),this.isLoading=!1,{success:!1,message:"å­˜æ¡£æ— æ³•ä¿®å¤"};i.showToast({type:"success",message:`å­˜æ¡£å·²æˆåŠŸä¿®å¤ (${r.repairLog.length}é¡¹é—®é¢˜)`,duration:5e3}),await _t.setData(`${St}${e}`,o),console.info("å·²ä¿å­˜ä¿®å¤åçš„å­˜æ¡£",o),await this.loadStoresFromSaveData(o)}const o=this.saveList.find(t=>t.id===e);return o&&(o.previewData={purchasedHouses:t.purchasedHouses.length,debt:t.debt,inventory:t.inventory.length,netWorth:t.netWorth},await _t.setData(Et,this.saveList)),this.isLoading=!1,{success:!0,message:"åŠ è½½æˆåŠŸ"}}catch(r){return F(r,"saveSystem (persistence)",c.UNKNOWN,l.ERROR),console.error("åŠ è½½æ¸¸æˆå¤±è´¥",r),this.isLoading=!1,i.showToast({type:"error",message:"åŠ è½½å­˜æ¡£å¤±è´¥: "+r.message,duration:5e3}),{success:!1,error:r,message:"åŠ è½½å¤±è´¥: "+r.message}}},"loadGame",c.STORAGE,l.ERROR)},async loadStoresFromSaveData(e){const t=pt(),i=te(),r=Le(),o=dt();(e=function(e,t="0.1.1"){if(!e)return null;if(e.version||(e.version="0.1.0"),e.version===t)return e;let i={...e};return"0.1.0"===e.version&&"0.1.1"===t&&(i.gameState||(i.gameState={})),i.version=t,i}(e,Mt)).gameCore&&(t.currentWeek=e.gameCore.currentWeek||1,t.maxWeeks=e.gameCore.maxWeeks||52,t.gameStarted=Boolean(e.gameCore.gameStarted),t.gamePaused=Boolean(e.gameCore.gamePaused),t.gameOver=Boolean(e.gameCore.gameOver),t.gameResult=e.gameCore.gameResult||null,t.notifications=Array.isArray(e.gameCore.notifications)?e.gameCore.notifications:[],t.gameGoals=e.gameCore.gameGoals||{requiredNetWorth:4e5,targetWeeks:30,debtRatio:.4}),e.player&&(i.name=e.player.name||"ç©å®¶",i.money=e.player.money||5e3,i.debt=e.player.debt||2e3,i.capacity=e.player.capacity||100,i.inventoryUsed=e.player.inventoryUsed||0,i.inventory=Array.isArray(e.player.inventory)?e.player.inventory:[],i.purchasedHouses=Array.isArray(e.player.purchasedHouses)?e.player.purchasedHouses:[],i.statistics=e.player.statistics||{weekCount:e.gameCore.currentWeek||1,transactionCount:0,totalProfit:0,maxMoney:i.money,visitedLocations:[],housePurchases:[],firstHousePurchaseWeek:null}),e.market&&(r.locations=Array.isArray(e.market.locations)?e.market.locations:[],r.productPrices=e.market.productPrices||{},e.market.currentLocation&&r.locations.length>0?r.currentLocation=r.locations.find(t=>t.id===e.market.currentLocation)||r.locations[0]:r.locations.length>0&&(r.currentLocation=r.locations[0]),r.loadProducts(e.market.products||[]),r.loadHouses(e.market.houses||[]),r.marketModifiers=e.market.marketModifiers||{}),e.event&&(o.activeEvent=e.event.activeEvent||null,o.forceLocationChange=Boolean(e.event.forceLocationChange),o.targetLocation=e.event.targetLocation||null,o.nextEventId=e.event.nextEventId||null,o.triggeredEvents=Array.isArray(e.event.triggeredEvents)?e.event.triggeredEvents:[])},async deleteSave(e,t=!1){return V(async()=>{const i=this.saveList.findIndex(t=>t.id===e);try{if(await _t.removeData(`${St}${e}`),-1!==i&&this.saveList.splice(i,1),await _t.setData(Et,this.saveList),!t){Q().showToast({type:"success",message:"å­˜æ¡£å·²åˆ é™¤",duration:2e3})}return!0}catch(r){if(F(r,"saveSystem (persistence)",c.UNKNOWN,l.ERROR),console.error("åˆ é™¤å­˜æ¡£å¤±è´¥",r),!t){Q().showToast({type:"error",message:"åˆ é™¤å­˜æ¡£å¤±è´¥: "+r.message,duration:5e3})}return!1}},"deleteSave",c.STORAGE,l.WARNING)},async cleanupOldAutoSaves(){const e=this.saveList.filter(e=>e.isAuto);if(e.length>3){e.sort((e,t)=>t.timestamp-e.timestamp);for(let t=3;t<e.length;t++)await this.deleteSave(e[t].id,!0)}},async checkAutoSave(e){if(!this.autoSaveEnabled)return;const t=pt();t.gameStarted&&!t.gameOver&&e>this.lastAutoSaveWeek&&e%5==0&&await this.autoSave()},async autoSave(){const e=pt();te();const t=`è‡ªåŠ¨å­˜æ¡£ (ç¬¬${e.currentWeek}å‘¨)`;await this.saveGame(t,!0),console.log(`è‡ªåŠ¨å­˜æ¡£å®Œæˆ: ${t}`)},async triggerImportantActionAutoSave(e){if(!this.autoSaveEnabled)return;const t=pt();if(!t.gameStarted||t.gameOver)return;let i="";switch(e){case"house_purchase":i=`è´­æˆ¿å­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;case"major_transaction":i=`å¤§é¢äº¤æ˜“å­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;case"event_completed":i=`äº‹ä»¶å®Œæˆå­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;case"debt_repaid":i=`è¿˜æ¸…å€ºåŠ¡å­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;default:i=`é‡è¦æ“ä½œå­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`}await this.saveGame(i,!0),console.log(`é‡è¦æ“ä½œè‡ªåŠ¨å­˜æ¡£å®Œæˆ: ${i}`)}},getters:{autoSaves:e=>e.saveList.filter(e=>e.isAuto).sort((e,t)=>t.timestamp-e.timestamp),manualSaves:e=>e.saveList.filter(e=>!e.isAuto).sort((e,t)=>t.timestamp-e.timestamp),latestSave:e=>0===e.saveList.length?null:e.saveList.sort((e,t)=>t.timestamp-e.timestamp)[0]}}),Lt=r("gameCompat",()=>{const e=pt(),t=te(),i=Le(),r=dt(),s=wt(),a=ie();return{currentWeek:o(()=>e.currentWeek),maxWeeks:o(()=>e.maxWeeks),gameStarted:o(()=>e.gameStarted),gamePaused:o(()=>e.gamePaused),gameOver:o(()=>e.gameOver),gameResult:o(()=>e.gameResult),notifications:o(()=>e.notifications),gameGoals:o(()=>e.gameGoals),gameProgress:o(()=>e.gameProgress),isGameActive:o(()=>e.isGameActive),player:o(()=>t),locations:o(()=>i.locations),currentLocation:o(()=>i.currentLocation),productPrices:o(()=>i.productPrices),products:o(()=>i.products),availableProducts:o(()=>i.availableProducts),houses:o(()=>i.houses),marketModifiers:o(()=>i.marketModifiers),currentEvent:o(()=>r.currentEvent),eventHistory:o(()=>r.eventHistory),startNewGame:function(t){e.startNewGame(t)},advanceWeek:function(){return e.advanceWeek()},changeLocation:function(e){return i.changeLocation(e)},updateProductPrices:function(){i.updateProductPrices(e.currentWeek)},updateLocationProducts:function(){i.updateLocationProducts(e.currentWeek)},generateRandomEvent:function(){r.generateRandomEvent(e.currentWeek)},buyProduct:function(e,r){var o;const s=String(e),n=i.availableProducts.find(e=>String(e.id)===s);if(!n)return console.log("å•†å“ä¸å­˜åœ¨:",e,"å¯ç”¨å•†å“IDs:",i.availableProducts.map(e=>e.id)),{success:!1,message:"å•†å“ä¸å­˜åœ¨"};const c=null==(o=i.productPrices[s])?void 0:o.price;if(!c){console.log("ä»·æ ¼æœªå®šä¹‰:",e,"ä»·æ ¼åˆ—è¡¨keys:",Object.keys(i.productPrices));const o=n.basePrice||0;return o>0?(console.log("ä½¿ç”¨å•†å“åŸºæœ¬ä»·æ ¼:",o),function(e,i,r){const o=i*r;if(t.money<o)return{success:!1,message:"èµ„é‡‘ä¸è¶³"};const s=a.addToInventory(e,r,i);if(!s.success)return s;return t.money-=o,t.statistics.transactionCount+=1,{success:!0}}(n,o,r)):{success:!1,message:"ä»·æ ¼æœªå®šä¹‰"}}const l=c*r;if(t.money<l)return{success:!1,message:"èµ„é‡‘ä¸è¶³"};const u=a.addToInventory(n,r,c);return u.success?(t.money-=l,t.statistics.transactionCount+=1,{success:!0}):u},sellProduct:function(e,r){var o;if(!e||r<=0)return{success:!1,message:"æ— æ•ˆçš„å‚æ•°"};const s=String(e),n=t.inventory.find(e=>String(e.productId)===s);if(!n)return console.log("ç‰©å“ä¸å­˜åœ¨äºåº“å­˜ä¸­:",e,"åº“å­˜ç‰©å“IDs:",t.inventory.map(e=>e.productId)),{success:!1,message:"ç‰©å“ä¸å­˜åœ¨"};if(n.quantity<r)return{success:!1,message:"æ•°é‡ä¸è¶³"};const c=(null==(o=i.productPrices[s])?void 0:o.price)||0;if(c<=0){console.log("å½“å‰å¸‚åœºä¸æ”¶è´­æ­¤ç‰©å“:",e,"ä»·æ ¼:",c);const o=i.products.find(e=>String(e.id)===s);return o&&o.basePrice>0?(console.log("ä½¿ç”¨å•†å“åŸºæœ¬ä»·æ ¼å‡ºå”®:",o.basePrice),function(e,i,r){const o=i*r,s=t.inventory.indexOf(e),n=e.purchasePrice,c=n*r,l=a.removeFromInventory(s,r);if(!l.success)return{success:!1,message:"å‡ºå”®å¤±è´¥ï¼š"+l.message};const u=o-c;return t.money+=o,t.statistics.totalProfit+=u,t.statistics.transactionCount+=1,{success:!0,income:o,profit:u,profitPercent:c>0?(u/c*100).toFixed(1):0}}(n,o.basePrice,r)):{success:!1,message:"å½“å‰å¸‚åœºä¸æ”¶è´­æ­¤ç‰©å“"}}const l=c*r,u=t.inventory.indexOf(n),d=n.purchasePrice*r,m=a.removeFromInventory(u,r);if(!m.success)return{success:!1,message:"å‡ºå”®å¤±è´¥ï¼š"+m.message};const p=l-d;return t.money+=l,t.statistics.totalProfit+=p,t.statistics.transactionCount+=1,{success:!0,income:l,profit:p,profitPercent:d>0?(p/d*100).toFixed(1):0}},saveGame:function(e,t=!1){return s.saveGame(e,t)},loadGame:function(e){return s.loadGame(e)},getSaves:function(){return s.getSaves()},checkGameEnd:function(){e.checkGameEnd()},getCurrentProductPrice:function(e){var t;if(!e)return 0;const r=String(e),o=null==(t=i.productPrices[r])?void 0:t.price;if(null!=o)return o;const s=i.products.find(e=>String(e.id)===r);return s&&s.basePrice?s.basePrice:0},getProductPriceTrend:function(e){return i.getProductPriceTrend(e)},repayDebt:function(e){return e<=0||e>t.money?{success:!1,message:"æ— æ•ˆçš„è¿˜æ¬¾é‡‘é¢"}:(e>t.debt&&(e=t.debt),t.money-=e,t.debt-=e,{success:!0,amountRepaid:e})},buyHouse:function(r){const o=i.houses.find(e=>e.id===r);return o?t.money<o.price?{success:!1,message:"èµ„é‡‘ä¸è¶³"}:t.purchasedHouses.some(e=>e.houseId===r)?{success:!1,message:"å·²æ‹¥æœ‰æ­¤æˆ¿å±‹"}:(t.money-=o.price,t.purchasedHouses.push({houseId:o.id,name:o.name,purchasePrice:o.price,purchaseDate:(new Date).toISOString()}),e.checkGameEnd(),{success:!0}):{success:!1,message:"æˆ¿å±‹ä¸å­˜åœ¨"}},addNotification:function(t,i){e.addNotification(t,i)}}});export{J as A,X as B,ee as C,ht as D,l as E,ve as P,n as _,c as a,Z as b,g as c,Lt as d,dt as e,ie as f,y as g,F as h,p as i,pt as j,te as k,mt as l,Le as m,Pt as n,Qe as o,Ee as p,ye as q,Y as r,wt as s,h as t,Q as u,_e as v,U as w,z as x,K as y,B as z};
//# sourceMappingURL=stores-6a84416e.js.map
