import{c as ut,d as ce}from"./vue-core-cd9800c2.js";import{a as ie,b6 as dt,e as D}from"./vendor-e7c44fa3.js";const mt="modulepreload",pt=function(e,t){return new URL(e,t).href},Qe={},ft=function(t,r,i){if(!r||r.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=pt(s,i),s in Qe)return;Qe[s]=!0;const n=s.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(!!i)for(let h=o.length-1;h>=0;h--){const m=o[h];if(m.href===s&&(!n||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const d=document.createElement("link");if(d.rel=n?"stylesheet":mt,n||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),n)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=s,window.dispatchEvent(n),!n.defaultPrevented)throw s})},S={VALIDATION:"validation",NETWORK:"network",STORAGE:"storage",GAME_LOGIC:"gameLogic",SYSTEM:"system",UNKNOWN:"unknown"},P={FATAL:"fatal",ERROR:"error",WARNING:"warning",INFO:"info"};function ht(e,t=S.UNKNOWN,r=P.ERROR,i={}){const o=new Error(e);return o.type=t,o.severity=r,o.metadata=i,o.timestamp=new Date().toISOString(),o}function Ge(e,t={}){return ht(e,S.STORAGE,P.ERROR,t)}const gt={common:{confirm:"ç¡®è®¤",cancel:"å–æ¶ˆ",back:"è¿”å›",save:"ä¿å­˜",delete:"åˆ é™¤",loading:"åŠ è½½ä¸­...",yes:"æ˜¯",no:"å¦",ok:"ç¡®å®š",next:"ä¸‹ä¸€æ­¥",previous:"ä¸Šä¸€æ­¥",close:"å…³é—­",edit:"ç¼–è¾‘",create:"åˆ›å»º",update:"æ›´æ–°",remove:"ç§»é™¤",search:"æœç´¢",filter:"ç­›é€‰",sort:"æ’åº",refresh:"åˆ·æ–°",retry:"é‡è¯•",more:"æ›´å¤š"},time:{week:"ç¬¬{week}å‘¨",weeks:"{count}å‘¨",of:"/",remaining:"å‰©ä½™: {weeks}å‘¨",day:"å¤©",hour:"å°æ—¶",minute:"åˆ†é’Ÿ",second:"ç§’"},system:{defaultPlayerName:"ç©å®¶",autoSave:"è‡ªåŠ¨å­˜æ¡£",unknownError:"å‘ç”ŸæœªçŸ¥é”™è¯¯",criticalError:"å‘ç”Ÿä¸¥é‡é”™è¯¯",componentError:"ç»„ä»¶é”™è¯¯",retry:"é‡è¯•",errorLogs:"é”™è¯¯æ—¥å¿—",exportLogs:"å¯¼å‡ºæ—¥å¿—",clearLogs:"æ¸…ç©ºæ—¥å¿—",severity:"ä¸¥é‡ç¨‹åº¦",type:"ç±»å‹",search:"æœç´¢"},currency:"å…ƒ",settings:{title:"æ¸¸æˆè®¾ç½®",game:"æ¸¸æˆè®¾ç½®",display:"æ˜¾ç¤ºè®¾ç½®",audio:"éŸ³é¢‘è®¾ç½®",language:"è¯­è¨€",difficulty:"æ¸¸æˆéš¾åº¦",difficulties:{easy:"ç®€å•",standard:"æ ‡å‡†",hard:"å›°éš¾"},autoSaveInterval:"è‡ªåŠ¨ä¿å­˜é—´éš”",autoSaveIntervals:{1:"æ¯å‘¨",2:"æ¯2å‘¨",5:"æ¯5å‘¨",10:"æ¯10å‘¨"},soundEnabled:"æ¸¸æˆéŸ³æ•ˆ",fullScreen:"å…¨å±æ¨¡å¼",textSpeed:"æ–‡æœ¬é€Ÿåº¦",textSpeeds:{slow:"æ…¢é€Ÿ",normal:"æ­£å¸¸",fast:"å¿«é€Ÿ"},reset:"æ¢å¤é»˜è®¤è®¾ç½®",saveSuccess:"è®¾ç½®å·²ä¿å­˜",resetSuccess:"è®¾ç½®å·²é‡ç½®",description:{difficulty:"è°ƒæ•´æ¸¸æˆçš„æ•´ä½“éš¾åº¦ï¼Œå½±å“ä»·æ ¼æ³¢åŠ¨ã€äº‹ä»¶è§¦å‘æ¦‚ç‡ç­‰",autoSave:"è®¾ç½®æ¸¸æˆè‡ªåŠ¨ä¿å­˜çš„é¢‘ç‡",sound:"å¯ç”¨æˆ–ç¦ç”¨æ¸¸æˆéŸ³æ•ˆ",fullScreen:"ä»¥å…¨å±æ¨¡å¼è¿è¡Œæ¸¸æˆ",textSpeed:"è°ƒæ•´å¯¹è¯å’Œæç¤ºæ–‡æœ¬çš„æ˜¾ç¤ºé€Ÿåº¦",language:"é€‰æ‹©æ¸¸æˆç•Œé¢è¯­è¨€"}},game:{title:"ä¹°æˆ¿è®°",week:"å‘¨æ•°",menu:"èœå•",nextWeek:"è¿›å…¥ä¸‹ä¸€å‘¨",tabs:{market:"å¸‚åœº",inventory:"èƒŒåŒ…",houses:"æˆ¿å±‹"},marketStatus:{bull:"ä¸Šæ¶¨(ç‰›å¸‚)",bear:"ä¸‹è·Œ(ç†Šå¸‚)",stable:"ç¨³å®š",mixed:"æ··åˆ"}},gameMenu:{title:"æ¸¸æˆèœå•",save:"ä¿å­˜æ¸¸æˆ",load:"è¯»å–æ¸¸æˆ",mainMenu:"è¿”å›ä¸»èœå•",settings:"è®¾ç½®",continue:"ç»§ç»­æ¸¸æˆ"},saveDialog:{title:"ä¿å­˜æ¸¸æˆ",namePlaceholder:"è¾“å…¥å­˜æ¡£åç§°"},gameOver:{title:"æ¸¸æˆç»“æŸ",victory:"æ­å–œï¼ä½ æˆåŠŸè´­ä¹°äº†è±ªå®…ï¼",houseVictory:"æ­å–œï¼ä½ å·²è´­ä¹°æˆ¿äº§ï¼Œå®Œæˆæ¸¸æˆä¸»è¦ç›®æ ‡ï¼",timeLimit:"æ—¶é—´å·²åˆ°ï¼",weeksPlayed:"æ¸¸æˆå‘¨æ•°",finalMoney:"æœ€ç»ˆèµ„é‡‘",netWorth:"å‡€èµ„äº§",purchasedHouses:"å·²è´­æˆ¿å±‹",backToMenu:"è¿”å›ä¸»èœå•",continueGame:"ç»§ç»­æ¸¸æˆ",continueDescription:"ä½ å¯ä»¥é€‰æ‹©ç»§ç»­æ¸¸æˆï¼Œç›´åˆ°ç¬¬52å‘¨ç»“æŸï¼Œæˆ–æŸ¥çœ‹å½“å‰æˆç»©",restartGame:"é‡æ–°å¼€å§‹"},recovery:{title:"æ¸¸æˆæ¢å¤",defaultMessage:"æ£€æµ‹åˆ°æ¸¸æˆæ„å¤–ä¸­æ–­ã€‚æˆ‘ä»¬æ‰¾åˆ°äº†æ‚¨çš„æ¸¸æˆè¿›åº¦ï¼Œæ˜¯å¦æ¢å¤ï¼Ÿ",date:"æ—¥æœŸ",gameWeek:"æ¸¸æˆå‘¨",weekNumber:"ç¬¬ {week} å‘¨",playerName:"ç©å®¶åç§°",money:"èµ„é‡‘",recover:"æ¢å¤æ¸¸æˆ",cancel:"æ”¾å¼ƒæ¢å¤",success:"æ¸¸æˆçŠ¶æ€å·²æˆåŠŸæ¢å¤",failed:"æ— æ³•æ¢å¤æ¸¸æˆçŠ¶æ€",noSnapshot:"æ²¡æœ‰å¯ç”¨çš„æ¢å¤ç‚¹",automaticRecovery:"æ¸¸æˆå°†å°è¯•è‡ªåŠ¨æ¢å¤æ‚¨çš„è¿›åº¦",currency:"å…ƒ"},inventory:{title:"èƒŒåŒ…",capacityUsed:"å®¹é‡: {used}/{total}",productName:"å•†å“åç§°",quantity:"æ•°é‡",purchasePrice:"è´­ä¹°ä»·",currentPrice:"å½“å‰ä»·",trend:"è¶‹åŠ¿",profit:"ç›ˆäº",action:"æ“ä½œ",sell:"å‡ºå”®",empty:"èƒŒåŒ…ç©ºç©ºå¦‚ä¹Ÿ",full:"èƒŒåŒ…å·²æ»¡",almostFull:"èƒŒåŒ…å³å°†è£…æ»¡"}},yt={market:{title:"{location}",selectLocation:"é€‰æ‹©åœ°ç‚¹",productName:"å•†å“åç§°",price:"ä»·æ ¼",trend:"è¶‹åŠ¿",change:"æ¶¨è·Œ",action:"æ“ä½œ",buy:"è´­ä¹°",noProducts:"å½“å‰åœ°ç‚¹æ²¡æœ‰å¯è´­ä¹°çš„å•†å“",special:"ç‰¹ä»·å•†å“",viewMode:{table:"è¡¨æ ¼è§†å›¾",card:"å¡ç‰‡è§†å›¾"},priceHistory:"ä»·æ ¼å†å²",priceChart:{title:"ä»·æ ¼èµ°åŠ¿å›¾",weeks:"å‘¨æ•°",price:"ä»·æ ¼",high:"æœ€é«˜ä»·",low:"æœ€ä½ä»·",average:"å¹³å‡ä»·",currentPrice:"å½“å‰ä»·æ ¼",historicalPrices:"å†å²ä»·æ ¼",priceRange:"ä»·æ ¼åŒºé—´",weekRange:"å‘¨æ•°åŒºé—´",noData:"æš‚æ— ä»·æ ¼æ•°æ®"},filter:{all:"å…¨éƒ¨å•†å“",special:"ç‰¹ä»·å•†å“",rising:"ä¸Šæ¶¨å•†å“",falling:"ä¸‹è·Œå•†å“",stable:"ç¨³å®šå•†å“"},sort:{default:"é»˜è®¤æ’åº",priceAsc:"ä»·æ ¼ä»ä½åˆ°é«˜",priceDesc:"ä»·æ ¼ä»é«˜åˆ°ä½",changeAsc:"æ¶¨å¹…ä»ä½åˆ°é«˜",changeDesc:"æ¶¨å¹…ä»é«˜åˆ°ä½",nameAsc:"åç§°æ­£åº",nameDesc:"åç§°å€’åº"},location:{travel:"å‰å¾€",currentLocation:"å½“å‰åœ°ç‚¹",travelCost:"æ—…è¡Œè´¹ç”¨",travelTime:"æ—…è¡Œæ—¶é—´",travelConfirm:"ç¡®è®¤å‰å¾€{location}å—ï¼Ÿ",travelSuccess:"ä½ å·²åˆ°è¾¾{location}",second_hand_market:"äºŒæ‰‹å¸‚åœº",premium_mall:"é«˜ç«¯å•†åŸ",electronics_hub:"ç”µå­ç§‘æŠ€åŸ",black_market:"åœ°ä¸‹é»‘å¸‚",commodity_market:"å¤§å®—å•†å“äº¤æ˜“æ‰€",second_hand_market_desc:"å„ç±»äºŒæ‰‹ç‰©å“å’Œä½ä»·ç”Ÿæ´»å¿…éœ€å“çš„é›†æ•£åœ°ï¼Œä»·æ ¼ä¾¿å®œä½†å“è´¨å‚å·®ä¸é½",premium_mall_desc:"æ±‡èšå„ç±»é«˜ç«¯å“ç‰Œå’Œå¥¢ä¾ˆå“çš„è´­ç‰©ä¸­å¿ƒï¼Œä»·æ ¼æ˜‚è´µä½†å“è´¨ä¼˜è‰¯",electronics_hub_desc:"å„ç±»ç”µå­äº§å“å’Œæ•°ç è®¾å¤‡çš„ä¸“ä¸šäº¤æ˜“å¸‚åœºï¼Œä»·æ ¼é€‚ä¸­ä¸”å“ç§é½å…¨",black_market_desc:"éšè”½çš„éæ³•äº¤æ˜“åœºæ‰€ï¼Œå„ç±»çç¨€æ”¶è—å“å’Œå¥‡ç‰¹å•†å“äº‘é›†ï¼Œé£é™©ä¸æœºé‡å¹¶å­˜",commodity_market_desc:"æ‰¹å‘å¸‚åœºå’Œå¤§å®—å•†å“äº¤æ˜“çš„é›†ä¸­åœ°ï¼Œä»·æ ¼ä½å»‰ä½†éœ€è¦å¤§é‡é‡‡è´­"},houseMarket:{title:"æˆ¿äº§å¸‚åœº",affordable:"å¯è´­ä¹°",purchased:"å·²è´­ä¹°",alreadyOwned:"å·²æ‹¥æœ‰",price:"ä»·æ ¼",level:"ç­‰çº§",size:"é¢ç§¯",location:"ä½ç½®",buyButton:"è´­ä¹°",noHouses:"æ²¡æœ‰å¯è´­ä¹°çš„æˆ¿å±‹",notEnoughMoney:"èµ„é‡‘ä¸è¶³ï¼æ‚¨éœ€è¦Â¥{price}ï¼Œä½†åªæœ‰Â¥{money}ï¼Œè¿˜å·®Â¥{shortfall}",fundsChanged:"æ‚¨çš„èµ„é‡‘å·²å‘ç”Ÿå˜åŒ–ï¼éœ€è¦Â¥{price}ï¼Œä½†åªæœ‰Â¥{money}ï¼Œè¿˜å·®Â¥{shortfall}",significantConfirm:"è¿™ç¬”äº¤æ˜“å°†èŠ±è´¹æ‚¨{percent}%çš„èµ„é‡‘ï¼Œç¡®å®šè¦è´­ä¹°å—ï¼Ÿ",purchaseSuccess:"æ­å–œï¼æ‚¨å·²æˆåŠŸè´­ä¹°{house}",purchaseFailed:"è´­ä¹°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",confirmTitle:"ç¡®è®¤è´­ä¹°æˆ¿äº§",confirmMessage:'æ‚¨ç¡®å®šè¦è´­ä¹°"{house}"å—ï¼Ÿ',yourMoney:"æ‚¨çš„èµ„é‡‘",remaining:"è´­ä¹°åå‰©ä½™",significantWarning:"æ³¨æ„ï¼šè¿™æ˜¯ä¸€ç¬”å¤§é¢äº¤æ˜“ï¼Œå°†è€—è´¹æ‚¨å¤§éƒ¨åˆ†èµ„é‡‘ï¼",victoryPurchase:"æ­å–œï¼æ‚¨å·²æˆåŠŸè´­ä¹°æˆ¿äº§",victoryMessage:`æ­å–œæ‚¨è´­ä¹°äº†æˆ¿äº§ï¼š{house}ï¼

æ‚¨å½“å‰å¤„äºç¬¬{week}å‘¨ï¼Œæ¸¸æˆæ€»å…±æœ‰{maxWeek}å‘¨ã€‚`,continuePrompt:"æ‚¨æƒ³è¦ç»“æŸæ¸¸æˆå¹¶æŸ¥çœ‹ç»“æœï¼Œè¿˜æ˜¯ç»§ç»­æ¸¸æˆäº‰å–æ›´é«˜åˆ†æ•°ï¼Ÿ",continuePlaying:"æ‚¨é€‰æ‹©äº†ç»§ç»­æ¸¸æˆï¼Œäº‰å–æ›´é«˜åˆ†æ•°ï¼æ¸¸æˆå°†ç»§ç»­è¿›è¡Œåˆ°ç¬¬52å‘¨ã€‚",endGameNow:"ç»“æŸæ¸¸æˆå¹¶æŸ¥çœ‹æˆç»©",continueGame:"ç»§ç»­æ¸¸æˆ",details:{title:"æˆ¿å±‹è¯¦æƒ…",price:"ä»·æ ¼",size:"é¢ç§¯",location:"ä½ç½®",type:"ç±»å‹",features:"ç‰¹è‰²",description:"æè¿°"},types:{apartment:"å…¬å¯“",house:"ç‹¬æ ‹åˆ«å¢…",villa:"è±ªååˆ«å¢…",mansion:"è±ªå®…",penthouse:"é¡¶å±‚å…¬å¯“"},features:{garden:"èŠ±å›­",pool:"æ¸¸æ³³æ± ",garage:"è½¦åº“",security:"å®‰ä¿ç³»ç»Ÿ",view:"æ™¯è§‚è§†é‡",central:"ä¸­å¿ƒä½ç½®",quiet:"å®‰é™ç¤¾åŒº",modern:"ç°ä»£è£…ä¿®",classic:"ç»å…¸é£æ ¼",luxury:"è±ªåè£…ä¿®"}}},houses:{small:{name:"å•èº«å…¬å¯“",description:"é€‚åˆå•èº«äººå£«å±…ä½çš„å°å‹å…¬å¯“ï¼Œä½ç½®ä¾¿åˆ©ä½†ç©ºé—´æœ‰é™ã€‚"},medium:{name:"äºŒæ‰‹æ—§æˆ¿",description:"å¹´ä»£è¾ƒä¹…çš„äºŒæ‰‹ä½å®…ï¼Œä»·æ ¼é€‚ä¸­ä½†å¯èƒ½éœ€è¦è£…ä¿®ã€‚ç©ºé—´è¾ƒå¤§ï¼Œéå¸¸é€‚åˆæ”¹é€ æˆç†æƒ³çš„å®¶ã€‚"},large:{name:"é«˜æ¡£å°åŒº",description:"ç°ä»£åŒ–é«˜æ¡£ä½å®…å°åŒºï¼Œç¯å¢ƒä¼˜ç¾ï¼Œé…å¥—è®¾æ–½é½å…¨ã€‚ç¤¾åŒºç¯å¢ƒå®‰å…¨ï¼Œæ˜¯å®¶åº­å±…ä½çš„ç»ä½³é€‰æ‹©ã€‚"},luxury:{name:"ç°ä»£åˆ«å¢…",description:"ç‹¬æ ‹ç°ä»£åˆ«å¢…ï¼Œæ‹¥æœ‰ç§å®¶èŠ±å›­å’Œè½¦åº“ã€‚å®½æ•çš„ç©ºé—´å’Œç²¾è‡´çš„è®¾è®¡ï¼Œå½°æ˜¾ä¸»äººçš„å“å‘³ä¸åœ°ä½ã€‚"},mansion:{name:"ç§äººåº„å›­",description:"å¤§å‹ç§äººåº„å›­ï¼Œå¸¦æœ‰å¤§ç‰‡ç»¿åœ°å’Œå¤šåŠŸèƒ½åŒºåŸŸã€‚æ‹¥æœ‰è¿™æ ·çš„æˆ¿äº§ï¼Œä»£è¡¨ä½ å·²è¾¾åˆ°äººç”Ÿå·…å³°ï¼"}},buyModal:{title:"è´­ä¹° {product}",price:"å•ä»·",availableMoney:"å¯ç”¨èµ„é‡‘",availableSpace:"å¯ç”¨ç©ºé—´",quantity:"è´­ä¹°æ•°é‡",totalCost:"æ€»èŠ±è´¹",maxQuantity:"æœ€å¤§",confirm:"ç¡®è®¤è´­ä¹°",cancel:"å–æ¶ˆ"},sellModal:{title:"å‡ºå”® {product}",purchasePrice:"ä¹°å…¥ä»·",currentPrice:"å½“å‰ä»·",quantity:"æŒæœ‰æ•°é‡",sellQuantity:"å‡ºå”®æ•°é‡",potentialProfit:"é¢„è®¡ç›ˆäº",totalIncome:"æ€»æ”¶å…¥",maxQuantity:"å…¨éƒ¨",confirm:"ç¡®è®¤å‡ºå”®",cancel:"å–æ¶ˆ"},houseModal:{title:"è´­ä¹° {house}",confirmPurchase:"ç¡®è®¤è´­ä¹°æ­¤æˆ¿å±‹å—ï¼Ÿ",price:"æˆ¿å±‹ä»·æ ¼",availableMoney:"å¯ç”¨èµ„é‡‘",remainingMoney:"è´­ä¹°åå‰©ä½™",confirm:"ç¡®è®¤è´­ä¹°",cancel:"å–æ¶ˆ",endGame:"è´­ä¹°æ­¤æˆ¿å±‹å°†ç»“æŸæ¸¸æˆ"},trends:{rising_strong:"ä»·æ ¼æ€¥å‰§ä¸Šæ¶¨",rising:"ä»·æ ¼ä¸Šæ¶¨ä¸­",stable_high:"é«˜ä½ç¨³å®š",stable:"ä»·æ ¼ç¨³å®š",stable_low:"ä½ä½ç¨³å®š",falling:"ä»·æ ¼ä¸‹è·Œä¸­",falling_strong:"ä»·æ ¼æ€¥å‰§ä¸‹è·Œ",volatile:"ä»·æ ¼å‰§çƒˆæ³¢åŠ¨",trendAnalysis:{title:"è¶‹åŠ¿åˆ†æ",shortTerm:"çŸ­æœŸè¶‹åŠ¿",midTerm:"ä¸­æœŸè¶‹åŠ¿",longTerm:"é•¿æœŸè¶‹åŠ¿",prediction:"é¢„æµ‹",confidence:"ç½®ä¿¡åº¦",high:"é«˜",medium:"ä¸­",low:"ä½"}}},vt={playerInfo:{title:"ç©å®¶ä¿¡æ¯",name:"å§“å",money:"èµ„é‡‘",debt:"å€ºåŠ¡",capacity:"èƒŒåŒ…å®¹é‡",week:"å‘¨æ•°",repayDebt:"è¿˜æ¬¾",bank:"é“¶è¡Œ",stats:{title:"ç©å®¶ç»Ÿè®¡",totalProfit:"æ€»åˆ©æ¶¦",transactions:"äº¤æ˜“æ¬¡æ•°",visitedLocations:"å·²è®¿é—®åœ°ç‚¹",eventsTriggered:"è§¦å‘äº‹ä»¶æ•°",highestSingleProfit:"å•ç¬”æœ€é«˜åˆ©æ¶¦",mostProfitableProduct:"æœ€èµšé’±å•†å“",mostVisitedLocation:"æœ€å¸¸å»åœ°ç‚¹"}},inventory:{title:"èƒŒåŒ…",capacityUsed:"å®¹é‡: {used}/{total}",productName:"å•†å“åç§°",quantity:"æ•°é‡",purchasePrice:"ä¹°å…¥ä»·",currentPrice:"å½“å‰ä»·",trend:"è¶‹åŠ¿",profit:"ç›ˆäº",action:"æ“ä½œ",sell:"å‡ºå”®",empty:"èƒŒåŒ…æ˜¯ç©ºçš„",sort:{default:"é»˜è®¤æ’åº",profitDesc:"åˆ©æ¶¦ä»é«˜åˆ°ä½",profitAsc:"åˆ©æ¶¦ä»ä½åˆ°é«˜",quantityDesc:"æ•°é‡ä»å¤šåˆ°å°‘",quantityAsc:"æ•°é‡ä»å°‘åˆ°å¤š",nameAsc:"åç§°æ­£åº",nameDesc:"åç§°å€’åº"},filter:{all:"å…¨éƒ¨å•†å“",profitable:"ç›ˆåˆ©å•†å“",unprofitable:"äºæŸå•†å“"},details:{title:"å•†å“è¯¦æƒ…",purchaseInfo:"è´­ä¹°ä¿¡æ¯",purchaseDate:"è´­ä¹°æ—¥æœŸ",purchaseLocation:"è´­ä¹°åœ°ç‚¹",currentInfo:"å½“å‰ä¿¡æ¯",potentialProfit:"æ½œåœ¨åˆ©æ¶¦",profitPercentage:"åˆ©æ¶¦ç‡"}},repayModal:{title:"å¿è¿˜å€ºåŠ¡",currentDebt:"å½“å‰å€ºåŠ¡",availableMoney:"å¯ç”¨èµ„é‡‘",repayAmount:"è¿˜æ¬¾é‡‘é¢",remainingDebt:"å‰©ä½™å€ºåŠ¡",remainingMoney:"å‰©ä½™èµ„é‡‘",fullRepay:"å…¨éƒ¨è¿˜æ¸…",confirm:"ç¡®è®¤è¿˜æ¬¾",cancel:"å–æ¶ˆ"},debtSystem:{title:"å€ºåŠ¡ç³»ç»Ÿ",currentDebt:"å½“å‰å€ºåŠ¡",interestRate:"åˆ©ç‡",nextInterest:"ä¸‹æ¬¡åˆ©æ¯",paymentDue:"åº”ä»˜é‡‘é¢",warning:{high:"è­¦å‘Šï¼šå€ºåŠ¡è¿‡é«˜",critical:"å±é™©ï¼šå€ºåŠ¡å³å°†è§¦å‘ç ´äº§",bankrupt:"æ‚¨å·²ç ´äº§ï¼"},interestApplied:"å·²æ”¶å–{amount}å…ƒåˆ©æ¯"},bank:{title:"é“¶è¡ŒæœåŠ¡",deposit:"å­˜æ¬¾",withdraw:"å–æ¬¾",loan:"è´·æ¬¾",repay:"è¿˜æ¬¾",currentDeposit:"å½“å‰å­˜æ¬¾",currentLoan:"å½“å‰è´·æ¬¾",interestRate:"åˆ©ç‡",depositInterest:"å­˜æ¬¾åˆ©ç‡",loanInterest:"è´·æ¬¾åˆ©ç‡",maxLoan:"æœ€å¤§è´·æ¬¾é¢åº¦",availableLoan:"å¯è´·æ¬¾é¢åº¦",amountToDeposit:"å­˜æ¬¾é‡‘é¢",amountToWithdraw:"å–æ¬¾é‡‘é¢",amountToLoan:"è´·æ¬¾é‡‘é¢",amountToRepay:"è¿˜æ¬¾é‡‘é¢",confirmDeposit:"ç¡®è®¤å­˜æ¬¾",confirmWithdraw:"ç¡®è®¤å–æ¬¾",confirmLoan:"ç¡®è®¤è´·æ¬¾",confirmRepay:"ç¡®è®¤è¿˜æ¬¾",interestInfo:"æ¯å‘¨ç»“ç®—ä¸€æ¬¡åˆ©æ¯",notEnoughMoney:"èµ„é‡‘ä¸è¶³",depositSuccess:"å­˜æ¬¾æˆåŠŸ",withdrawSuccess:"å–æ¬¾æˆåŠŸ",loanSuccess:"è´·æ¬¾æˆåŠŸ",repaySuccess:"è¿˜æ¬¾æˆåŠŸ",weeklyInterest:"æ¯å‘¨åˆ©æ¯",remainingMoney:"å‰©ä½™èµ„é‡‘",remainingDeposit:"å‰©ä½™å­˜æ¬¾",remainingLoan:"å‰©ä½™è´·æ¬¾",remainingDebt:"å‰©ä½™å€ºåŠ¡"},tutorial:{tips:{welcome:{title:"æ¬¢è¿æ¥åˆ°ã€Šä¹°æˆ¿è®°ã€‹",content:"åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä½ çš„ç›®æ ‡æ˜¯é€šè¿‡ä¹°å–å•†å“èµšå–å·®ä»·ï¼Œæœ€ç»ˆç§¯ç´¯è¶³å¤Ÿçš„èµ„é‡‘è´­ä¹°æˆ¿äº§ã€‚<br><br>ä½ æœ‰52å‘¨çš„æ—¶é—´æ¥å®ç°è¿™ä¸ªç›®æ ‡ï¼Œç¥ä½ å¥½è¿ï¼"},market_intro:{title:"å¸‚åœºäº¤æ˜“",content:"åœ¨å¸‚åœºæ ‡ç­¾é¡µä¸­ï¼Œä½ å¯ä»¥è´­ä¹°å„ç§å•†å“ã€‚ä¸åŒåœ°ç‚¹æä¾›çš„å•†å“å’Œä»·æ ¼å„ä¸ç›¸åŒã€‚<br><br>å…³æ³¨ä»·æ ¼è¶‹åŠ¿ï¼Œåœ¨ä»·æ ¼ä½æ—¶è´­ä¹°ï¼Œä»·æ ¼é«˜æ—¶å–å‡ºï¼Œèµšå–å·®ä»·ã€‚"},inventory_intro:{title:"åº“å­˜ç®¡ç†",content:"åœ¨åº“å­˜æ ‡ç­¾é¡µä¸­ï¼Œä½ å¯ä»¥æŸ¥çœ‹å·²è´­ä¹°çš„å•†å“ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶æœºå–å‡ºã€‚<br><br>æ³¨æ„èƒŒåŒ…å®¹é‡æœ‰é™ï¼Œåˆç†è§„åˆ’è´­ä¹°çš„å•†å“æ•°é‡ã€‚"},location_change:{title:"åˆ‡æ¢åœ°ç‚¹",content:"ä½ å¯ä»¥åœ¨ä¸åŒåœ°ç‚¹ä¹‹é—´åˆ‡æ¢ï¼Œæ¯ä¸ªåœ°ç‚¹éƒ½æœ‰ä¸åŒçš„å•†å“å’Œä»·æ ¼ã€‚<br><br>åˆ©ç”¨ä¸åŒåœ°ç‚¹ä¹‹é—´çš„ä»·æ ¼å·®å¼‚ï¼Œå¯ä»¥èµšå–æ›´å¤šåˆ©æ¶¦ã€‚"},price_trends:{title:"ä»·æ ¼è¶‹åŠ¿",content:"å•†å“ä»·æ ¼ä¼šéšæ—¶é—´æ³¢åŠ¨ï¼Œå…³æ³¨ä»·æ ¼è¶‹åŠ¿æ˜¯è·åˆ©çš„å…³é”®ã€‚<br><br>ä¸Šæ¶¨è¶‹åŠ¿è¡¨ç¤ºä»·æ ¼å¯èƒ½ç»§ç»­ä¸Šæ¶¨ï¼Œä¸‹è·Œè¶‹åŠ¿è¡¨ç¤ºä»·æ ¼å¯èƒ½ç»§ç»­ä¸‹è·Œã€‚"},special_products:{title:"ç‰¹è‰²å•†å“",content:"æ¯ä¸ªåœ°ç‚¹éƒ½æœ‰ç‰¹è‰²å•†å“ï¼Œä»·æ ¼æ›´ä¼˜æƒ ã€‚ç‰¹è‰²å•†å“åœ¨å•†å“åˆ—è¡¨ä¸­ä¼šæœ‰ç‰¹æ®Šæ ‡è®°ã€‚<br><br>å…³æ³¨ç‰¹è‰²å•†å“å¯ä»¥æé«˜äº¤æ˜“åˆ©æ¶¦ã€‚"},houses:{title:"æˆ¿äº§è´­ä¹°",content:"å½“ä½ ç§¯ç´¯äº†è¶³å¤Ÿçš„èµ„é‡‘åï¼Œå¯ä»¥åœ¨æˆ¿äº§æ ‡ç­¾é¡µä¸­è´­ä¹°æˆ¿å±‹ã€‚<br><br>ä¸åŒæˆ¿å±‹æœ‰ä¸åŒçš„ä»·æ ¼ï¼Œè´­ä¹°ä»»æ„æˆ¿å±‹éƒ½ä¼šç»“æŸæ¸¸æˆã€‚"},mid_game:{title:"æ¸¸æˆè¿›å±•",content:"ä½ å·²ç»å®Œæˆäº†æ¸¸æˆçš„å››åˆ†ä¹‹ä¸€ï¼ç°åœ¨æ˜¯æ—¶å€™åˆ¶å®šæ›´é•¿è¿œçš„è®¡åˆ’äº†ã€‚<br><br>è€ƒè™‘ç§¯ç´¯æ›´å¤šèµ„é‡‘ï¼Œä¸ºè´­ä¹°æˆ¿äº§åšå‡†å¤‡ã€‚"},late_game:{title:"æ¸¸æˆåæœŸ",content:"æ¸¸æˆå·²ç»è¿‡åŠï¼Œç¡®ä¿ä½ çš„èµ„é‡‘å¢é•¿è¶³å¤Ÿå¿«ï¼Œä»¥ä¾¿åœ¨æ¸¸æˆç»“æŸå‰è´­ä¹°ç†æƒ³çš„æˆ¿äº§ã€‚<br><br>å¦‚æœèµ„é‡‘å¢é•¿ç¼“æ…¢ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´äº¤æ˜“ç­–ç•¥æˆ–æ‰¿æ‹…æ›´å¤šé£é™©ã€‚"}},help:{title:"æ¸¸æˆå¸®åŠ©",basics:"æ¸¸æˆåŸºç¡€",trading:"äº¤æ˜“æŠ€å·§",events:"äº‹ä»¶ç³»ç»Ÿ",settings:"æ¸¸æˆè®¾ç½®",gotIt:"çŸ¥é“äº†",dontShowAgain:"ä¸å†æ˜¾ç¤ºæ­¤æç¤º",prev:"ä¸Šä¸€æ¡",next:"ä¸‹ä¸€æ¡",shortcuts:{title:"é”®ç›˜å¿«æ·é”®",space:"è¿›å…¥ä¸‹ä¸€å‘¨",tab:"åˆ‡æ¢æ ‡ç­¾é¡µ",esc:"æ‰“å¼€/å…³é—­èœå•",h:"æ‰“å¼€å¸®åŠ©é¢æ¿"}}}},bt={event:{title:"äº‹ä»¶",debtIncrease:"å€ºåŠ¡å¢åŠ ",debtDecrease:"å€ºåŠ¡å‡å°‘",gainProduct:"è·å¾—ç‰©å“",loseProduct:"å¤±å»ç‰©å“",moneyGain:"è·å¾—èµ„é‡‘",moneyLoss:"å¤±å»èµ„é‡‘",priceChange:"ä»·æ ¼å˜åŠ¨",capacityChange:"èƒŒåŒ…å®¹é‡å˜åŒ–",specialEvent:"ç‰¹æ®Šäº‹ä»¶",types:{positive:"æ­£é¢äº‹ä»¶",negative:"è´Ÿé¢äº‹ä»¶",neutral:"ä¸­æ€§äº‹ä»¶",mixed:"å¤åˆäº‹ä»¶"},effects:{money:"èµ„é‡‘ {change}",debt:"å€ºåŠ¡ {change}",capacity:"èƒŒåŒ…å®¹é‡ {change}",product:"å•†å“: {product} x {quantity}",price:"{product} ä»·æ ¼ {change}",location:"è§£é”åœ°ç‚¹: {location}"},choices:{accept:"æ¥å—",decline:"æ‹’ç»",option1:"é€‰é¡¹1",option2:"é€‰é¡¹2",option3:"é€‰é¡¹3",continue:"ç»§ç»­"},notifications:{triggered:"è§¦å‘äº‹ä»¶: {name}",completed:"äº‹ä»¶å®Œæˆ: {name}",reward:"è·å¾—å¥–åŠ±: {reward}",penalty:"å—åˆ°æƒ©ç½š: {penalty}",choiceMade:"å·²é€‰æ‹©: {choice}"},common:{marketCrash:"å¸‚åœºå´©ç›˜",marketBoom:"å¸‚åœºç¹è£",robbery:"é­é‡æŠ¢åŠ«",lottery:"ä¸­å½©ç¥¨",backpackUpgrade:"èƒŒåŒ…å‡çº§",backpackDamage:"èƒŒåŒ…æŸå",investmentSuccess:"æŠ•èµ„æˆåŠŸ",investmentFailure:"æŠ•èµ„å¤±è´¥",taxAudit:"ç¨åŠ¡å®¡è®¡",inheritance:"æ„å¤–ç»§æ‰¿",donation:"æ…ˆå–„ææ¬¾",discount:"ç‰¹åˆ«æŠ˜æ‰£",priceHike:"ä»·æ ¼ä¸Šæ¶¨",specialOffer:"ç‰¹åˆ«ä¼˜æƒ ",blackMarket:"é»‘å¸‚äº¤æ˜“"},descriptions:{marketCrash:"å¸‚åœºçªç„¶å´©ç›˜ï¼æ‰€æœ‰å•†å“ä»·æ ¼å¤§å¹…ä¸‹è·Œã€‚",marketBoom:"å¸‚åœºçªç„¶ç¹è£ï¼æ‰€æœ‰å•†å“ä»·æ ¼å¤§å¹…ä¸Šæ¶¨ã€‚",robbery:"ä½ è¢«æŠ¢åŠ«äº†ï¼å¤±å»äº†ä¸€äº›èµ„é‡‘å’Œå•†å“ã€‚",lottery:"æ­å–œä½ ä¸­äº†å½©ç¥¨ï¼è·å¾—é¢å¤–èµ„é‡‘ã€‚",backpackUpgrade:"ä½ æ‰¾åˆ°äº†ä¸€ä¸ªæ›´å¤§çš„èƒŒåŒ…ï¼Œå®¹é‡å¢åŠ ï¼",backpackDamage:"ä½ çš„èƒŒåŒ…ç ´æŸäº†ï¼Œå®¹é‡å‡å°‘ï¼",investmentSuccess:"ä½ çš„æŠ•èµ„è·å¾—äº†æˆåŠŸï¼Œè·å¾—é¢å¤–æ”¶ç›Šã€‚",investmentFailure:"ä½ çš„æŠ•èµ„å¤±è´¥äº†ï¼ŒæŸå¤±äº†ä¸€äº›èµ„é‡‘ã€‚",taxAudit:"ç¨åŠ¡éƒ¨é—¨å¯¹ä½ è¿›è¡Œäº†å®¡è®¡ï¼Œä½ éœ€è¦æ”¯ä»˜ä¸€äº›ç¨æ¬¾ã€‚",inheritance:"ä½ æ„å¤–ç»§æ‰¿äº†ä¸€ç¬”è´¢äº§ï¼Œè·å¾—é¢å¤–èµ„é‡‘ã€‚",donation:"ä½ å†³å®šä¸ºæ…ˆå–„äº‹ä¸šææ¬¾ï¼Œå¤±å»ä¸€äº›èµ„é‡‘ä½†è·å¾—äº†å¥½è¯„ã€‚",discount:"å•†åº—æ¨å‡ºäº†ç‰¹åˆ«æŠ˜æ‰£ï¼ŒæŸäº›å•†å“ä»·æ ¼ä¸‹é™ã€‚",priceHike:"ç”±äºä¾›åº”çŸ­ç¼ºï¼ŒæŸäº›å•†å“ä»·æ ¼ä¸Šæ¶¨ã€‚",specialOffer:"ä½ æ”¶åˆ°äº†ä¸€ä¸ªç‰¹åˆ«ä¼˜æƒ ï¼Œå¯ä»¥ä½ä»·è´­ä¹°æŸäº›å•†å“ã€‚",blackMarket:"ä½ å‘ç°äº†ä¸€ä¸ªé»‘å¸‚äº¤æ˜“æœºä¼šï¼Œå¯ä»¥é«˜ä»·å‡ºå”®æŸäº›å•†å“ã€‚"}},notifications:{error:{inventoryFull:"èƒŒåŒ…ç©ºé—´ä¸è¶³",insufficientStock:"åº“å­˜æ•°é‡ä¸è¶³",houseNotFound:"æ‰¾ä¸åˆ°æŒ‡å®šçš„æˆ¿å±‹",alreadyOwned:"å·²ç»æ‹¥æœ‰æ­¤æˆ¿å±‹",invalidRepayment:"è¿˜æ¬¾é‡‘é¢æ— æ•ˆ",saveFailed:"ä¿å­˜æ¸¸æˆå¤±è´¥",loadFailed:"æ‰¾ä¸åˆ°å­˜æ¡£æˆ–å­˜æ¡£å·²æŸå",insufficientFunds:"èµ„é‡‘ä¸è¶³ï¼Œæ— æ³•è´­ä¹°",autoSaveFailed:"è‡ªåŠ¨ä¿å­˜å¤±è´¥",autoSaveError:"è‡ªåŠ¨ä¿å­˜è¿‡ç¨‹å‡ºé”™"},success:{purchased:"æˆåŠŸè´­ä¹°",sold:"æˆåŠŸå‡ºå”®",housePurchased:"æˆåŠŸè´­ä¹°æˆ¿å±‹",repaid:"æˆåŠŸè¿˜æ¬¾",gameSaved:"æ¸¸æˆå·²ä¿å­˜",gameLoaded:"å·²åŠ è½½æ¸¸æˆ",autoSaved:"è‡ªåŠ¨ä¿å­˜æˆåŠŸ"},info:{endGame:"ä½ é€‰æ‹©äº†ç»“æŸæ¸¸æˆ",timeUp:"æ—¶é—´å·²åˆ°ï¼æ¸¸æˆç»“æŸ",bankrupt:"ä½ å·²ç ´äº§ï¼æ¸¸æˆç»“æŸ",weekProgress:"è¿›å…¥ç¬¬ {week} å‘¨",locationChange:"ä½ å·²åˆ°è¾¾ {location}"},achievement:{earlyGoal:"æå‰è¾¾æˆç›®æ ‡",noDebtHouse:"é›¶è´Ÿå€ºè´­æˆ¿",victory:"æ­å–œï¼ä½ æˆåŠŸè´­ä¹°äº†æœ€è´µçš„æˆ¿äº§ï¼",achieved:"ä½ è¾¾æˆäº†æˆå°±: {name}"}}},Et={ui:{mainMenu:{title:"ä¹°æˆ¿è®°",newGame:"æ–°æ¸¸æˆ",loadGame:"åŠ è½½æ¸¸æˆ",settings:"è®¾ç½®",exit:"é€€å‡º",version:"ç‰ˆæœ¬ {version}",credits:"åˆ¶ä½œå›¢é˜Ÿ"},saveMenu:{title:"å­˜æ¡£ç®¡ç†",newSave:"æ–°å»ºå­˜æ¡£",loadSave:"åŠ è½½å­˜æ¡£",deleteSave:"åˆ é™¤å­˜æ¡£",back:"è¿”å›",noSaves:"æ²¡æœ‰æ‰¾åˆ°å­˜æ¡£",saveDate:"ä¿å­˜æ—¥æœŸ: {date}",saveWeek:"æ¸¸æˆå‘¨: {week}",playerName:"ç©å®¶: {name}",playerMoney:"èµ„é‡‘: {money}",confirmDelete:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­˜æ¡£å—ï¼Ÿ",overwriteConfirm:"å­˜æ¡£å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ",invalidSave:"æ— æ•ˆçš„å­˜æ¡£æ–‡ä»¶"},gameView:{nextWeek:"ä¸‹ä¸€å‘¨",menu:"èœå•",tabs:{market:"å¸‚åœº",inventory:"èƒŒåŒ…",houses:"æˆ¿å±‹"},weekDisplay:"ç¬¬ {current}/{total} å‘¨",moneyDisplay:"{amount} å…ƒ",debtDisplay:"å€ºåŠ¡: {amount} å…ƒ",loading:"åŠ è½½ä¸­...",saving:"ä¿å­˜ä¸­..."},dialogs:{confirm:{title:"ç¡®è®¤",ok:"ç¡®å®š",cancel:"å–æ¶ˆ"},alert:{title:"æç¤º",ok:"ç¡®å®š"},input:{title:"è¾“å…¥",ok:"ç¡®å®š",cancel:"å–æ¶ˆ"},error:{title:"é”™è¯¯",ok:"ç¡®å®š",details:"è¯¦ç»†ä¿¡æ¯"}},toast:{success:"æˆåŠŸ",error:"é”™è¯¯",info:"æç¤º",warning:"è­¦å‘Š"},loading:{initializing:"åˆå§‹åŒ–æ¸¸æˆ...",loadingAssets:"åŠ è½½èµ„æº...",loadingGame:"åŠ è½½æ¸¸æˆ...",savingGame:"ä¿å­˜æ¸¸æˆ...",processingTurn:"å¤„ç†æ¸¸æˆå›åˆ...",generatingWorld:"ç”Ÿæˆæ¸¸æˆä¸–ç•Œ...",ready:"å‡†å¤‡å°±ç»ª"},devTools:{title:"å¼€å‘å·¥å…·",addMoney:"æ·»åŠ èµ„é‡‘",removeMoney:"å‡å°‘èµ„é‡‘",addDebt:"æ·»åŠ å€ºåŠ¡",removeDebt:"å‡å°‘å€ºåŠ¡",skipWeek:"è·³è¿‡å‘¨æ•°",unlockAllLocations:"è§£é”æ‰€æœ‰åœ°ç‚¹",resetPrices:"é‡ç½®ä»·æ ¼",triggerEvent:"è§¦å‘äº‹ä»¶",amount:"æ•°é‡",apply:"åº”ç”¨",cancel:"å–æ¶ˆ",eventType:"äº‹ä»¶ç±»å‹",warning:"è­¦å‘Šï¼šä½¿ç”¨å¼€å‘å·¥å…·å¯èƒ½ä¼šå½±å“æ¸¸æˆå¹³è¡¡å’Œä½“éªŒ"},charts:{title:"å›¾è¡¨",priceHistory:"ä»·æ ¼å†å²",playerNetWorth:"ç©å®¶å‡€èµ„äº§",weeklyProfit:"æ¯å‘¨åˆ©æ¶¦",zoom:"ç¼©æ”¾",period:"å‘¨æœŸ",showAll:"æ˜¾ç¤ºå…¨éƒ¨",last10Weeks:"æœ€è¿‘10å‘¨",last20Weeks:"æœ€è¿‘20å‘¨",custom:"è‡ªå®šä¹‰",noData:"æš‚æ— æ•°æ®",exportData:"å¯¼å‡ºæ•°æ®",importData:"å¯¼å…¥æ•°æ®"},errorHandling:{title:"é”™è¯¯å¤„ç†",message:"å‘ç”Ÿé”™è¯¯",details:"è¯¦ç»†ä¿¡æ¯",stackTrace:"å †æ ˆè·Ÿè¸ª",retry:"é‡è¯•",ignore:"å¿½ç•¥",report:"æŠ¥å‘Šé—®é¢˜",close:"å…³é—­",errorBoundary:{title:"ç»„ä»¶é”™è¯¯",message:"ç»„ä»¶æ¸²æŸ“å‡ºé”™",reset:"é‡ç½®ç»„ä»¶"}}}},kt={errors:{defaultError:"å‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯",severity:{fatal:"è‡´å‘½é”™è¯¯",error:"é”™è¯¯",warning:"è­¦å‘Š",info:"æç¤º"},type:{validation:{default:"æ•°æ®éªŒè¯é”™è¯¯: {message}",specific:{required_field:"å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º",invalid_format:"æ•°æ®æ ¼å¼ä¸æ­£ç¡®",out_of_range:"æ•°å€¼è¶…å‡ºå…è®¸èŒƒå›´",invalid_type:"æ•°æ®ç±»å‹ä¸æ­£ç¡®",duplicate_entry:"æ•°æ®å·²å­˜åœ¨",too_short:"è¾“å…¥å†…å®¹è¿‡çŸ­",too_long:"è¾“å…¥å†…å®¹è¿‡é•¿"}},network:{default:"ç½‘ç»œé”™è¯¯: {message}",specific:{connection_failed:"è¿æ¥æœåŠ¡å™¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥",timeout:"è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•",server_error:"æœåŠ¡å™¨é”™è¯¯",api_error:"APIé”™è¯¯",invalid_response:"æ— æ•ˆçš„æœåŠ¡å™¨å“åº”",offline:"æ‚¨å½“å‰å¤„äºç¦»çº¿çŠ¶æ€"}},storage:{default:"å­˜å‚¨é”™è¯¯: {message}",specific:{file_not_found:"æ‰¾ä¸åˆ°æ–‡ä»¶",permission_denied:"æ²¡æœ‰è¶³å¤Ÿæƒé™",quota_exceeded:"å­˜å‚¨ç©ºé—´ä¸è¶³",data_corrupt:"æ•°æ®å·²æŸå",unknown:"æœªçŸ¥å­˜å‚¨é”™è¯¯",save_failed:"ä¿å­˜æ¸¸æˆå¤±è´¥",load_failed:"åŠ è½½æ¸¸æˆå¤±è´¥",file_io_error:"æ–‡ä»¶è¯»å†™é”™è¯¯",invalid_format:"æ— æ•ˆçš„æ–‡ä»¶æ ¼å¼",version_mismatch:"ç‰ˆæœ¬ä¸å…¼å®¹"}},game_logic:{default:"æ¸¸æˆé€»è¾‘é”™è¯¯: {message}",specific:{invalid_operation:"æ— æ•ˆçš„æ“ä½œ",insufficient_funds:"èµ„é‡‘ä¸è¶³",inventory_full:"èƒŒåŒ…å·²æ»¡",invalid_state:"æ— æ•ˆçš„æ¸¸æˆçŠ¶æ€",invalid_transition:"æ— æ•ˆçš„çŠ¶æ€è½¬æ¢",out_of_bounds:"è¶…å‡ºè¾¹ç•Œ",dependency_missing:"ç¼ºå°‘ä¾èµ–é¡¹",invalid_parameter:"æ— æ•ˆçš„å‚æ•°",calculation_error:"è®¡ç®—é”™è¯¯",rule_violation:"è¿åæ¸¸æˆè§„åˆ™"}},system:{default:"ç³»ç»Ÿé”™è¯¯: {message}",specific:{initialization_failed:"åˆå§‹åŒ–æ¸¸æˆå¤±è´¥",resource_not_found:"æ‰¾ä¸åˆ°éœ€è¦çš„èµ„æº",memory_error:"å†…å­˜é”™è¯¯",performance_issue:"æ€§èƒ½é—®é¢˜",render_error:"æ¸²æŸ“é”™è¯¯",audio_error:"éŸ³é¢‘é”™è¯¯",plugin_error:"æ’ä»¶é”™è¯¯",compatibility_issue:"å…¼å®¹æ€§é—®é¢˜",unexpected_state:"æ„å¤–çš„ç³»ç»ŸçŠ¶æ€",critical_failure:"ä¸¥é‡æ•…éšœ"}},unknown:{default:"{message}"}},recovery:{title:"é”™è¯¯æ¢å¤",message:"æ¸¸æˆé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ­£åœ¨å°è¯•æ¢å¤...",success:"æ¢å¤æˆåŠŸ",failed:"æ¢å¤å¤±è´¥",options:{retry:"é‡è¯•",reload:"é‡æ–°åŠ è½½",reset:"é‡ç½®æ¸¸æˆ",ignore:"å¿½ç•¥å¹¶ç»§ç»­",report:"æŠ¥å‘Šé—®é¢˜"},autoSave:{corrupted:"è‡ªåŠ¨å­˜æ¡£å·²æŸå",notFound:"æ‰¾ä¸åˆ°è‡ªåŠ¨å­˜æ¡£",incompatible:"è‡ªåŠ¨å­˜æ¡£ä¸å½“å‰ç‰ˆæœ¬ä¸å…¼å®¹",loadFailed:"åŠ è½½è‡ªåŠ¨å­˜æ¡£å¤±è´¥"},stateSnapshot:{restoring:"æ­£åœ¨æ¢å¤æ¸¸æˆçŠ¶æ€...",noValidSnapshot:"æ²¡æœ‰å¯ç”¨çš„æ¸¸æˆçŠ¶æ€å¿«ç…§",partialRestore:"éƒ¨åˆ†æ¸¸æˆçŠ¶æ€å·²æ¢å¤",fullRestore:"æ¸¸æˆçŠ¶æ€å·²å®Œå…¨æ¢å¤"}},errorLog:{title:"é”™è¯¯æ—¥å¿—",empty:"æ²¡æœ‰è®°å½•çš„é”™è¯¯",timestamp:"æ—¶é—´",message:"æ¶ˆæ¯",type:"ç±»å‹",severity:"ä¸¥é‡ç¨‹åº¦",details:"è¯¦ç»†ä¿¡æ¯",actions:{clear:"æ¸…ç©ºæ—¥å¿—",export:"å¯¼å‡ºæ—¥å¿—",filter:"ç­›é€‰æ—¥å¿—",search:"æœç´¢",showDetails:"æ˜¾ç¤ºè¯¦æƒ…",hideDetails:"éšè—è¯¦æƒ…"}}}},Pt={...gt,...yt,...vt,...bt,...Et,...kt};function _t(){return(navigator.language||navigator.userLanguage).startsWith("zh"),"zh-CN"}function St(){try{const e=localStorage.getItem("userLanguage");if(e)return e}catch(e){L(e,"i18n.getUserLanguage",S.STORAGE,P.INFO),console.warn("æ— æ³•ä»æœ¬åœ°å­˜å‚¨è¯»å–è¯­è¨€è®¾ç½®:",e)}return _t()}function Mt(){const e=ut({legacy:!1,locale:St(),fallbackLocale:"zh-CN",messages:{"zh-CN":Pt},datetimeFormats:{"zh-CN":{short:{year:"numeric",month:"2-digit",day:"2-digit"},long:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}}},numberFormats:{"zh-CN":{currency:{style:"currency",currency:"CNY",notation:"standard"},decimal:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2},percent:{style:"percent",useGrouping:!1}}}});return e.global.setLanguage=t=>{e.global.availableLocales.includes(t)||(console.warn(`è¯­è¨€ ${t} ä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤è¯­è¨€`),t=e.global.fallbackLocale.value),e.global.locale.value=t,document.querySelector("html").setAttribute("lang",t);try{localStorage.setItem("userLanguage",t)}catch(r){L(r,"i18n.setLanguage",S.STORAGE,P.INFO),console.warn("æ— æ³•ä¿å­˜è¯­è¨€è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨:",r)}},e.global.getSupportedLanguages=()=>[{code:"zh-CN",name:"ç®€ä½“ä¸­æ–‡",flag:"ğŸ‡¨ğŸ‡³"}],e.global.formatCurrency=t=>e.global.n(t,"currency"),e.global.formatDate=(t,r="long")=>e.global.d(t,r),e.global.formatNumber=t=>e.global.n(t,"decimal"),e.global.formatPercent=t=>e.global.n(t,"percent"),e}const $=Mt();$.global.t;$.global.d;$.global.n;$.global.setLanguage;const Er=$.global.getSupportedLanguages;$.global.formatCurrency;$.global.formatDate;$.global.formatNumber;$.global.formatPercent;const Q=ie([]),Ce=200,Ke="gameRunning",rt="lastGameActivity",Lt=3e5;let He=null;async function it(){if(He)return He;const e=3,t=300,r=async(i=0)=>{try{const o=await ft(()=>Promise.resolve().then(()=>Ct),void 0,import.meta.url);if(o&&typeof o.useUiStore=="function"){const s=o.useUiStore();if(s&&typeof s=="object")return He=s,s;throw new Error("Invalid uiStore instance")}else throw new Error("useUiStore function not found")}catch(o){return console.error(`Failed to import uiStore (attempt ${i+1}/${e}):`,o),i<e-1?(console.log(`Retrying in ${t}ms...`),await new Promise(s=>setTimeout(s,t)),r(i+1)):null}};return r()}function L(e,t,r=S.UNKNOWN,i=P.ERROR){const o={message:e.message||"æœªçŸ¥é”™è¯¯",context:t,type:r,severity:i,timestamp:new Date().toISOString(),stack:e.stack,metadata:e.metadata||{}};return wt(o),i===P.FATAL||i===P.ERROR?At(o):i===P.WARNING&&It(o),window.electronAPI&&window.electronAPI.logError?window.electronAPI.logError(o):dt.error(`[${r}][${t}]`,e),o}function wt(e){Q.value.unshift(e),Q.value.length>Ce&&(Q.value=Q.value.slice(0,Ce));try{const t=JSON.stringify(Q.value);localStorage.setItem("errorLogs",t)}catch(t){console.error("Failed to save error logs to localStorage:",t)}}function Rt(){return new Promise(e=>{try{const t=localStorage.getItem("errorLogs");if(t){const r=JSON.parse(t);Q.value=r,Q.value.length>Ce&&(Q.value=Q.value.slice(0,Ce))}e([...Q.value])}catch(t){console.error("Failed to load error logs from localStorage:",t),e([])}})}function Pe(e){try{const t=`errors.${e.type}.specific.${e.message.toLowerCase().replace(/\s+/g,"_").replace(/[^\w]/g,"")}`,r=`errors.${e.type}.default`,i="å‘ç”Ÿé”™è¯¯";return $.global&&$.global.te&&$.global.te(t)?$.global.t(t):$.global&&$.global.te&&$.global.te(r)?$.global.t(r,{message:e.message}):e.message||i}catch(t){return console.error("Error getting localized error message:",t),e.message||"å‘ç”Ÿé”™è¯¯"}}async function At(e){try{const t=await it();t&&typeof t.showErrorDialog=="function"?t.showErrorDialog({title:e.severity===P.FATAL?"ä¸¥é‡é”™è¯¯":"é”™è¯¯",message:Pe(e),details:void 0,timestamp:e.timestamp,context:e.context}):(console.error("UI Storeä¸å¯ç”¨ï¼Œä½¿ç”¨å¤‡ç”¨é”™è¯¯æç¤º"),alert(Pe(e)))}catch(t){console.error("Error showing error dialog:",t),alert(Pe(e))}}async function It(e){try{const t=await it();t&&typeof t.showToast=="function"?t.showToast({type:"error",message:Pe(e),duration:5e3}):console.warn(Pe(e))}catch(t){console.warn("Error showing toast:",t)}}async function De(e,t,r=S.UNKNOWN,i=P.ERROR){try{return await e()}catch(o){throw L(o,t,r,i),o}}function kr(e){if(!e||!e.config){console.warn("æ— æ³•è®¾ç½®å…¨å±€é”™è¯¯å¤„ç†ï¼šappå®ä¾‹æ— æ•ˆ");return}e.config.errorHandler=(t,r,i)=>{let o="Unknown";try{r&&r.$options&&r.$options.name?o=r.$options.name:r&&r.$root&&(o="Root Component")}catch{o="Error getting component name"}L(t,`Vueç»„ä»¶: ${o}`,S.COMPONENT,P.ERROR)},window.addEventListener("unhandledrejection",t=>{L(t.reason||new Error("æœªå¤„ç†çš„Promiseå¼‚å¸¸"),"Promise",S.ASYNC,P.ERROR)}),window.addEventListener("error",t=>{t.error&&L(t.error,"å…¨å±€å¼‚å¸¸",S.RUNTIME,P.ERROR)}),Rt(),window.addEventListener("beforeunload",()=>{Ot()})}function Pr(){try{localStorage.setItem(Ke,"true"),xt()}catch(e){console.warn("Failed to set game running flag:",e)}}function Ot(){try{localStorage.removeItem(Ke)}catch(e){console.warn("Failed to clear game running flag:",e)}}function _r(){try{if(!(localStorage.getItem(Ke)==="true"))return!1;const t=localStorage.getItem(rt);if(t){const r=parseInt(t,10);if(Date.now()-r<Lt)return!0}return!1}catch(e){return console.warn("Failed to check game running flag:",e),!1}}function xt(){try{localStorage.setItem(rt,Date.now().toString())}catch(e){console.warn("Failed to update game activity timestamp:",e)}}function Tt(e){if(!e||e==="undefined"||e==="null")return"/resources/assets/images/house_1.jpeg";const t={apartment:"/resources/assets/images/house_1.jpeg",second_hand:"/resources/assets/images/house_2.jpeg",highend:"/resources/assets/images/house_3.jpeg",villa:"/resources/assets/images/house_4.jpeg",mansion:"/resources/assets/images/house_5.jpeg"};if(!isNaN(parseInt(e))){const r=parseInt(e);return`/resources/assets/images/house_${r?Math.max(1,Math.min(5,r%5||1)):1}.jpeg`}return t[e]||"/resources/assets/images/house_1.jpeg"}const ke=ce("ui",()=>{const e=ie(!1),t=ie(null),r=ie([]),i=ie({}),o=ie(!1),s=ie(null),n=ie(!1),a=ie(null);function l(M){t.value=M,e.value=!0}function d(){e.value=!1,setTimeout(()=>{t.value=null},300)}function h({type:M="info",message:I="",duration:x=3e3,action:w=null,actionText:O="ç¡®å®š",actionCallback:U=null}){const W=r.value.find(q=>q.message===I);W&&m(W.id);const V=Date.now()+Math.random().toString(36).substring(2,10),ee={id:V,type:M,message:I,action:w,actionText:O,actionCallback:U};if(r.value.unshift(ee),r.value.length>5){const q=r.value.pop();i.value[q.id]&&(clearTimeout(i.value[q.id]),delete i.value[q.id])}return i.value[V]=setTimeout(()=>{m(V)},3e3),V}function m(M){const I=r.value.findIndex(x=>x.id===M);I!==-1&&(r.value.splice(I,1),i.value[M]&&(clearTimeout(i.value[M]),delete i.value[M]))}function p({snapshot:M,message:I,title:x,allowCancel:w=!0,onRecover:O,onCancel:U}){s.value={snapshot:M,message:I||"æ£€æµ‹åˆ°æ¸¸æˆæ„å¤–ä¸­æ–­ã€‚æ˜¯å¦æ¢å¤ä¸Šæ¬¡ä¿å­˜çš„æ¸¸æˆçŠ¶æ€ï¼Ÿ",title:x||"æ¸¸æˆæ¢å¤",allowCancel:w,onRecover:O||(()=>y()),onCancel:U||(()=>y())},o.value=!0}function y(){o.value=!1,setTimeout(()=>{s.value=null},300)}function k(M){a.value=M,n.value=!0}function C(){n.value=!1,setTimeout(()=>{a.value=null},300)}function N({type:M="info",message:I="",duration:x=3e3}){return h({type:M,message:I,duration:x})}function b(){r.value.forEach(M=>{m(M.id)})}return{errorDialogVisible:e,errorDialogData:t,showErrorDialog:l,closeErrorDialog:d,toasts:r,addToast:h,removeToast:m,showToast:N,closeToast:b,recoveryDialogVisible:o,recoveryDialogData:s,showRecoveryDialog:p,closeRecoveryDialog:y,dialogVisible:n,dialogData:a,showDialog:k,closeDialog:C}}),Ct=Object.freeze(Object.defineProperty({__proto__:null,useUiStore:ke},Symbol.toStringTag,{value:"Module"})),Wt=ce("settings",{state:()=>({difficulty:"normal",tutorialEnabled:!0,autoSave:!0,autoSaveInterval:5,soundEnabled:!0,soundVolume:.7,musicEnabled:!0,musicVolume:.5,language:"zh-CN",theme:"light",uiScale:1,animationsEnabled:!0,graphicsQuality:"medium",currentScene:"menu"}),actions:{updateSetting(e,t){e in this.$state&&(this[e]=t,this.saveSettings())},updateSettings(e){Object.entries(e).forEach(([t,r])=>{t in this.$state&&(this[t]=r)}),this.saveSettings()},resetSettings(){this.$reset(),this.saveSettings()},saveSettings(){try{const e=JSON.stringify(this.$state);localStorage.setItem("house-journey-settings",e)}catch(e){L(e,"SettingsStore",S.STORAGE,P.WARNING),console.error("ä¿å­˜è®¾ç½®å¤±è´¥:",e)}},loadSettings(){try{const e=localStorage.getItem("house-journey-settings");if(e){const t=JSON.parse(e);this.updateSettings(t)}}catch(e){L(e,"SettingsStore",S.STORAGE,P.WARNING),console.error("åŠ è½½è®¾ç½®å¤±è´¥:",e)}},setCurrentScene(e){this.currentScene=e,window.gameAudio&&this.musicEnabled&&window.gameAudio.playBGM(e)}}}),Sr=Object.freeze(Object.defineProperty({__proto__:null,useSettingsStore:Wt},Symbol.toStringTag,{value:"Module"})),H=ce("player",{state:()=>({name:"",money:2e3,debt:5e3,loanPrincipal:5e3,capacity:100,inventoryUsed:0,inventory:[],purchasedHouses:[],initialized:!1,bankDeposit:0,maxLoanAmount:2e4,statistics:{weekCount:1,transactionCount:0,totalProfit:0,maxMoney:2e3,visitedLocations:[],housePurchases:[],firstHousePurchaseWeek:null,mostExpensiveHouse:null,highestLevelHouse:null}}),actions:{initializePlayer(e){return console.log("PlayerStore - åˆå§‹åŒ–ç©å®¶:",e),new Promise(t=>{setTimeout(()=>{this.name=e||$.global.t("system.defaultPlayerName"),this.money=2e3,this.debt=5e3,this.loanPrincipal=5e3,this.capacity=100,this.inventoryUsed=0,this.inventory=[],this.purchasedHouses=[],this.initialized=!0,this.bankDeposit=0,this.maxLoanAmount=2e4,this.statistics={weekCount:1,transactionCount:0,totalProfit:0,maxMoney:2e3,visitedLocations:[],housePurchases:[],firstHousePurchaseWeek:null,mostExpensiveHouse:null,highestLevelHouse:null},console.log("PlayerStore - ç©å®¶åˆå§‹åŒ–å®Œæˆ"),t()},400)})},updateWeeklyPlayerState(e){if(this.statistics.weekCount=e,this.debt>0){const t=Math.floor(this.debt*.005);this.debt+=t}if(this.bankDeposit>0){const t=Math.floor(this.bankDeposit*.003);this.bankDeposit+=t}this.money>this.statistics.maxMoney&&(this.statistics.maxMoney=this.money)},addMoney(e){return e<=0?!1:(this.money+=e,this.money>this.statistics.maxMoney&&(this.statistics.maxMoney=this.money),!0)},spendMoney(e){return e<=0||e>this.money?!1:(this.money-=e,!0)},repayDebt(e){return e<=0||e>this.money?!1:(e>this.debt&&(e=this.debt),this.money-=e,this.debt-=e,e<=this.loanPrincipal?this.loanPrincipal-=e:this.loanPrincipal=0,!0)},addVisitedLocation(e){return this.statistics.visitedLocations.includes(e)?!1:(this.statistics.visitedLocations.push(e),!0)},purchaseHouse(e){if(!e||typeof e!="object")return console.error("æ— æ•ˆçš„æˆ¿å±‹å¯¹è±¡ä¼ é€’ç»™purchaseHouse"),!1;const t=["id","name","level","price"];for(const s of t)if(!(s in e))return console.error(`è´­ä¹°æˆ¿å±‹å¤±è´¥ï¼šæˆ¿å±‹å¯¹è±¡ç¼ºå°‘å¿…éœ€å±æ€§ ${s}`),!1;if(e.price>this.money)return console.warn(`è´­ä¹°å¤±è´¥ï¼šèµ„é‡‘ä¸è¶³ (æ‹¥æœ‰: ${this.money}, éœ€è¦: ${e.price}, å·®é¢: ${e.price-this.money})`),!1;if(this.purchasedHouses.some(s=>s.houseId===e.id))return console.warn(`è´­ä¹°å¤±è´¥ï¼šå·²æ‹¥æœ‰IDä¸º ${e.id} çš„æˆ¿å±‹`),!1;this.money-=e.price;const i=K().currentWeek,o={houseId:e.id,name:e.name,level:e.level,purchasePrice:e.price,purchaseWeek:i,description:e.description||`${e.level}çº§æˆ¿äº§`,purchaseDate:new Date().toISOString()};return this.purchasedHouses.push(o),this.statistics.housePurchases||(this.statistics.housePurchases=[]),this.statistics.housePurchases.push({houseId:e.id,name:e.name,level:e.level,price:e.price,week:i}),this.statistics.firstHousePurchaseWeek===null&&(this.statistics.firstHousePurchaseWeek=i),(!this.statistics.mostExpensiveHouse||e.price>this.statistics.mostExpensiveHouse.price)&&(this.statistics.mostExpensiveHouse={id:e.id,name:e.name,price:e.price,level:e.level,week:i}),(!this.statistics.highestLevelHouse||e.level>this.statistics.highestLevelHouse.level)&&(this.statistics.highestLevelHouse={id:e.id,name:e.name,price:e.price,level:e.level,week:i}),console.log(`æˆåŠŸè´­ä¹°æˆ¿äº§: ${e.name} - Â¥${e.price} (ç¬¬${i}å‘¨)`),!0},depositToBank(e){return e<=0||e>this.money?!1:(this.money-=e,this.bankDeposit+=e,!0)},withdrawFromBank(e){return e<=0||e>this.bankDeposit?!1:(this.bankDeposit-=e,this.money+=e,!0)},takeLoan(e){const t=this.availableLoanAmount;return e<=0||e>t?!1:(this.debt+=e,this.loanPrincipal+=e,this.money+=e,!0)}},getters:{netWorth:e=>{const t=e.inventory.reduce((i,o)=>i+o.quantity*o.purchasePrice,0),r=e.purchasedHouses.reduce((i,o)=>i+o.purchasePrice,0);return e.money+e.bankDeposit+t+r-e.debt},totalMoney:e=>{const t=e.inventory.reduce((r,i)=>r+i.quantity*i.purchasePrice,0);return e.money+t},hasHighestHouse:e=>e.purchasedHouses.some(t=>t.level>=5),mostExpensiveHouse:e=>e.purchasedHouses.length===0?null:e.purchasedHouses.reduce((t,r)=>r.purchasePrice>t.purchasePrice?r:t,e.purchasedHouses[0]),availableCapacity:e=>e.capacity-e.inventoryUsed,availableLoanAmount:e=>{e.loanPrincipal===void 0&&(e.loanPrincipal=e.debt);const t=e.maxLoanAmount;return Math.max(0,Math.floor(t-e.loanPrincipal))},depositInterestRate:()=>.003,loanInterestRate:()=>.005}}),Nt=()=>{const e=H();return{addToInventory:(a,l,d)=>{if(!a||l<=0||d<0)return{success:!1,message:"æ— æ•ˆçš„äº§å“æ•°æ®"};const h=l;if(e.inventoryUsed+h>e.capacity)return{success:!1,message:"èƒŒåŒ…å®¹é‡ä¸è¶³"};const m=e.inventory.findIndex(y=>y.productId===a.id),p=d*l;if(m!==-1){const y=e.inventory[m],k=y.totalValue||y.purchasePrice*y.quantity,C=y.quantity+l,N=k+d*l,b=Math.round(N/C);e.inventory[m].quantity=C,e.inventory[m].purchasePrice=b,e.inventory[m].totalValue=N}else e.inventory.push({productId:a.id,name:a.name,quantity:l,purchasePrice:d,totalValue:p,size:1});return e.inventoryUsed+=h,{success:!0}},removeFromInventory:(a,l)=>{if(a<0||a>=e.inventory.length)return{success:!1,message:"æ— æ•ˆçš„ç‰©å“ç´¢å¼•"};const d=e.inventory[a];if(l<=0||l>d.quantity)return{success:!1,message:"æ— æ•ˆçš„ç§»é™¤æ•°é‡"};const h=l,m={...d,quantity:l};return d.quantity-=l,d.quantity<=0&&e.inventory.splice(a,1),e.inventoryUsed-=h,{success:!0,product:m}},findByProductId:a=>e.inventory.filter(l=>l.productId===a),getTotalQuantity:a=>e.inventory.filter(l=>l.productId===a).reduce((l,d)=>l+d.quantity,0),getTotalValue:()=>e.inventory.reduce((a,l)=>a+l.quantity*l.purchasePrice,0),clearInventory:()=>{e.inventory=[],e.inventoryUsed=0}}},A={DAILY:"DAILY",FOOD:"FOOD",ELECTRONICS:"ELECTRONICS",LUXURY:"LUXURY",COLLECTIBLE:"COLLECTIBLE"};class Gt{constructor({id:t,name:r,description:i="",basePrice:o,minPrice:s,maxPrice:n,volatility:a=5,category:l=A.DAILY,size:d=1,icon:h="box",availableAt:m=[]}){this.id=t,this.name=r,this.description=i,this.basePrice=o,this.minPrice=s,this.maxPrice=n,this.volatility=Math.min(Math.max(a,1),10),this.category=l,this.size=d,this.icon=h,this.availableAt=m}getPriceRange(){return{min:this.minPrice,max:this.maxPrice,range:this.maxPrice-this.minPrice}}isValidPrice(t){return t>=this.minPrice&&t<=this.maxPrice}adjustPriceToRange(t){return Math.max(this.minPrice,Math.min(t,this.maxPrice))}}function Ht(e){return new Gt(e)}const Dt=[{id:101,name:"å«ç”Ÿçº¸",description:"æ—¥å¸¸å¿…å¤‡ç”¨å“",basePrice:15,minPrice:10,maxPrice:30,volatility:2,category:A.DAILY,size:3,icon:"paper",availableAt:["second_hand_market","commodity_market"]},{id:102,name:"æ´—å‘æ°´",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:35,minPrice:20,maxPrice:50,volatility:2,category:A.DAILY,size:1,icon:"bottle",availableAt:["second_hand_market","commodity_market"]},{id:103,name:"ç‰™è†",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:8,minPrice:5,maxPrice:15,volatility:2,category:A.DAILY,size:1,icon:"hygiene",availableAt:["second_hand_market","commodity_market"]},{id:104,name:"è‚¥çš‚",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:6,minPrice:3,maxPrice:12,volatility:2,category:A.DAILY,size:1,icon:"soap",availableAt:["second_hand_market","commodity_market"]},{id:105,name:"æ¯›å·¾",description:"æ—¥å¸¸æ´—æŠ¤ç”¨å“",basePrice:25,minPrice:15,maxPrice:40,volatility:2,category:A.DAILY,size:2,icon:"towel",availableAt:["second_hand_market","commodity_market"]},{id:106,name:"äºŒæ‰‹è¡£ç‰©",description:"äºŒæ‰‹æœè£…ï¼Œä»·æ ¼ä¾¿å®œä½†å“è´¨ä¸€èˆ¬",basePrice:40,minPrice:20,maxPrice:80,volatility:3,category:A.DAILY,size:4,icon:"clothes",availableAt:["second_hand_market"]},{id:107,name:"äºŒæ‰‹å®¶å…·",description:"äºŒæ‰‹å®¶å…·ï¼Œä»·æ ¼å®æƒ ",basePrice:200,minPrice:100,maxPrice:500,volatility:4,category:A.DAILY,size:10,icon:"furniture",availableAt:["second_hand_market"]},{id:201,name:"é¸¡è›‹",description:"æ–°é²œé£Ÿå“ï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:15,minPrice:8,maxPrice:25,volatility:4,category:A.FOOD,size:2,icon:"egg",availableAt:["commodity_market"]},{id:202,name:"å¤§ç±³",description:"ä¸»é£Ÿï¼Œä»·æ ¼ç›¸å¯¹ç¨³å®š",basePrice:50,minPrice:30,maxPrice:80,volatility:4,category:A.FOOD,size:5,icon:"rice",availableAt:["commodity_market"]},{id:203,name:"é£Ÿç”¨æ²¹",description:"çƒ¹é¥ªå¿…å¤‡ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:70,minPrice:40,maxPrice:120,volatility:4,category:A.FOOD,size:3,icon:"oil",availableAt:["commodity_market"]},{id:204,name:"æ–°é²œè”¬èœ",description:"æ—¶ä»¤è”¬èœï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:30,minPrice:15,maxPrice:50,volatility:4,category:A.FOOD,size:4,icon:"vegetable",availableAt:["commodity_market"]},{id:205,name:"æ°´æœ",description:"æ—¶ä»¤æ°´æœï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:35,minPrice:20,maxPrice:60,volatility:4,category:A.FOOD,size:4,icon:"fruit",availableAt:["commodity_market"]},{id:301,name:"æ‰‹æœº",description:"æ™ºèƒ½æ‰‹æœºï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:1800,minPrice:1e3,maxPrice:3e3,volatility:6,category:A.ELECTRONICS,size:1,icon:"phone",availableAt:["electronics_hub","premium_mall"]},{id:302,name:"ç”µè§†",description:"å®¶ç”¨ç”µè§†ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:3500,minPrice:2e3,maxPrice:6e3,volatility:6,category:A.ELECTRONICS,size:15,icon:"tv",availableAt:["electronics_hub"]},{id:303,name:"ç¬”è®°æœ¬ç”µè„‘",description:"ä¾¿æºå¼ç”µè„‘ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:4500,minPrice:3e3,maxPrice:8e3,volatility:6,category:A.ELECTRONICS,size:5,icon:"laptop",availableAt:["electronics_hub"]},{id:304,name:"å¹³æ¿ç”µè„‘",description:"è§¦å±å¹³æ¿è®¾å¤‡ï¼Œä»·æ ¼æ³¢åŠ¨é€‚ä¸­",basePrice:2e3,minPrice:1200,maxPrice:3500,volatility:6,category:A.ELECTRONICS,size:3,icon:"tablet",availableAt:["electronics_hub"]},{id:305,name:"æ™ºèƒ½æ‰‹è¡¨",description:"å¯ç©¿æˆ´è®¾å¤‡ï¼Œä»·æ ¼æ³¢åŠ¨è¾ƒå¤§",basePrice:1500,minPrice:800,maxPrice:2500,volatility:7,category:A.ELECTRONICS,size:1,icon:"watch",availableAt:["electronics_hub","premium_mall"]},{id:401,name:"åç‰Œæ‰‹è¡¨",description:"å¥¢ä¾ˆå“ï¼Œä»·æ ¼æ˜‚è´µä½†ä¿å€¼",basePrice:12e3,minPrice:8e3,maxPrice:2e4,volatility:8,category:A.LUXURY,size:1,icon:"luxury-watch",availableAt:["premium_mall"]},{id:402,name:"é’»çŸ³é¡¹é“¾",description:"å¥¢ä¾ˆå“ï¼Œä»·æ ¼æ˜‚è´µä¸”æ³¢åŠ¨è¾ƒå¤§",basePrice:15e3,minPrice:1e4,maxPrice:25e3,volatility:8,category:A.LUXURY,size:1,icon:"diamond",availableAt:["premium_mall"]},{id:403,name:"è®¾è®¡å¸ˆåŒ…åŒ…",description:"é«˜æ¡£æ‰‹è¢‹ï¼Œæœ‰ä¸€å®šä¿å€¼èƒ½åŠ›",basePrice:8e3,minPrice:5e3,maxPrice:15e3,volatility:7,category:A.LUXURY,size:2,icon:"bag",availableAt:["premium_mall"]},{id:404,name:"é«˜çº§é¦™æ°´",description:"çŸ¥åå“ç‰Œé¦™æ°´ï¼Œä»·æ ¼é€‚ä¸­",basePrice:1200,minPrice:800,maxPrice:2e3,volatility:5,category:A.LUXURY,size:1,icon:"perfume",availableAt:["premium_mall"]},{id:501,name:"å¤è‘£èŠ±ç“¶",description:"æ”¶è—å“ï¼Œä»·æ ¼æ³¢åŠ¨éå¸¸å¤§",basePrice:9e3,minPrice:4e3,maxPrice:2e4,volatility:9,category:A.COLLECTIBLE,size:4,icon:"vase",availableAt:["black_market"]},{id:502,name:"é‚®ç¥¨",description:"æ”¶è—é‚®ç¥¨ï¼Œä»·æ ¼æ³¢åŠ¨æå¤§",basePrice:3e3,minPrice:1e3,maxPrice:1e4,volatility:10,category:A.COLLECTIBLE,size:1,icon:"stamp",availableAt:["black_market"]},{id:503,name:"å¤ç”»",description:"è‰ºæœ¯æ”¶è—å“ï¼Œä»·æ ¼æ³¢åŠ¨æå¤§",basePrice:2e4,minPrice:1e4,maxPrice:5e4,volatility:10,category:A.COLLECTIBLE,size:8,icon:"painting",availableAt:["black_market"]},{id:504,name:"è€å¼ç›¸æœº",description:"å¤è‘£ç›¸æœºï¼Œæ”¶è—ä»·å€¼é«˜",basePrice:4500,minPrice:2e3,maxPrice:1e4,volatility:8,category:A.COLLECTIBLE,size:3,icon:"camera",availableAt:["black_market","electronics_hub"]},{id:505,name:"çºªå¿µå¸",description:"é™é‡å‘è¡Œçš„çºªå¿µå¸ï¼Œæ”¶è—ä»·å€¼é«˜",basePrice:2500,minPrice:1e3,maxPrice:8e3,volatility:9,category:A.COLLECTIBLE,size:1,icon:"coin",availableAt:["black_market"]}];function $e(){return Dt.map(e=>Ht(e))}class $t{constructor({id:t,name:r,description:i="",availableProducts:o=[],specialProducts:s=[],modifiers:n={priceFactor:1},icon:a="map-marker",image:l="",eventProbability:d=.3}){this.id=t,this.name=r,this.description=i,this.availableProducts=o,this.specialProducts=s,this.modifiers=n,this.icon=a,this.image=l,this.eventProbability=d}getPriceFactor(){return this.modifiers.priceFactor||1}isSpecialProduct(t){return this.specialProducts.includes(t)}hasProduct(t){return this.availableProducts.includes(t)||this.specialProducts.includes(t)}applyPriceModifiers(t,r){let i=t*this.getPriceFactor();return this.isSpecialProduct(r)&&(i*=.85),Math.round(i)}}function jt(e){return new $t(e)}const Ft=[{id:"commodity_market",name:"å¤§å®—å•†å“äº¤æ˜“æ‰€",description:"æ‰¹å‘å¸‚åœºå’Œå¤§å®—å•†å“äº¤æ˜“çš„é›†ä¸­åœ°ï¼Œä»·æ ¼ä½å»‰ä½†éœ€è¦å¤§é‡é‡‡è´­ã€‚è¿™é‡Œé€‚åˆå¤§é‡è¿›è´§è·å–æ›´å¥½çš„ä»·æ ¼ä¼˜åŠ¿ã€‚",modifiers:{priceFactor:.75},specialProducts:[202,203],availableProducts:["bulk_rice","bulk_goods","industrial_materials"],eventProbability:.2,icon:"commodity.png",image:"commodity_market.jpg"},{id:"second_hand_market",name:"äºŒæ‰‹å¸‚åœº",description:"å„ç±»äºŒæ‰‹ç‰©å“å’Œä½ä»·ç”Ÿæ´»å¿…éœ€å“çš„é›†æ•£åœ°ï¼Œä»·æ ¼ä¾¿å®œä½†å“è´¨å‚å·®ä¸é½ã€‚è¿™é‡Œæ˜¯æ·˜å®å’Œå›¤ç§¯æ—¥å¸¸ç”¨å“çš„å¥½åœ°æ–¹ã€‚",modifiers:{priceFactor:.8},specialProducts:[101,104,106,107],availableProducts:["clothes","toiletries","used_items","furniture"],eventProbability:.3,icon:"second-hand.png",image:"second_hand_market.jpg"},{id:"premium_mall",name:"é«˜ç«¯å•†åŸ",description:"æ±‡èšå„ç±»é«˜ç«¯å“ç‰Œå’Œå¥¢ä¾ˆå“çš„è´­ç‰©ä¸­å¿ƒï¼Œä»·æ ¼æ˜‚è´µä½†å“è´¨ä¼˜è‰¯ã€‚è¿™é‡Œæ˜¯è´­ä¹°ç å®ã€æ‰‹è¡¨ç­‰é«˜ç«¯å•†å“çš„åœ°æ–¹ã€‚",modifiers:{priceFactor:1.3},specialProducts:[401,404],availableProducts:["jewelry","watch","designer_clothes"],eventProbability:.25,icon:"premium.png",image:"premium_mall.jpg"},{id:"electronics_hub",name:"ç”µå­ç§‘æŠ€åŸ",description:"å„ç±»ç”µå­äº§å“å’Œæ•°ç è®¾å¤‡çš„ä¸“ä¸šäº¤æ˜“å¸‚åœºï¼Œä»·æ ¼é€‚ä¸­ä¸”å“ç§é½å…¨ã€‚è¿™é‡Œæ˜¯è´­ä¹°æ‰‹æœºã€ç”µè„‘ç­‰ç”µå­äº§å“çš„ç†æƒ³ä¹‹åœ°ã€‚",modifiers:{priceFactor:.95},specialProducts:[301,305],availableProducts:["phone","laptop","tablet","camera"],eventProbability:.3,icon:"electronics.png",image:"electronics_hub.jpg"},{id:"black_market",name:"åœ°ä¸‹é»‘å¸‚",description:"éšè”½çš„éæ³•äº¤æ˜“åœºæ‰€ï¼Œå„ç±»çç¨€æ”¶è—å“å’Œå¥‡ç‰¹å•†å“äº‘é›†ã€‚é£é™©ä¸æœºé‡å¹¶å­˜ï¼Œæ˜¯å¯»æ‰¾ç¨€æœ‰ç‰©å“çš„ç»ä½³åœ°ç‚¹ã€‚",modifiers:{priceFactor:1.1},specialProducts:[502,503],availableProducts:["stamp","antique","artwork","rare_coin"],eventProbability:.35,icon:"black-market.png",image:"black_market.jpg"}];function Ut(){return Ft.map(e=>jt(e))}class Vt{constructor({id:t,name:r,price:i,level:o=1,description:s="",specialFeature:n="",purchaseCondition:a="",image:l=""}){this.id=t,this.name=r,this.price=i,this.level=o,this.description=s,this.specialFeature=n,this.purchaseCondition=a||`éœ€è¦${i}å…ƒç°é‡‘`,this.image=l||zt(t)}canBePurchasedWith(t){return t>=this.price}getValueRating(){return this.price<4e5?7:this.price<8e5?6:this.price<15e5?5:this.price<25e5?4:3}}function qt(e){return new Vt(e)}function zt(e){try{return!e||e==="undefined"||e==="null"?"/resources/assets/images/house_1.jpeg":Tt(e)}catch(t){console.warn("è·å–æˆ¿å±‹å›¾ç‰‡è·¯å¾„æ—¶å‡ºé”™:",t);const r={apartment:"/resources/assets/images/house_1.jpeg",second_hand:"/resources/assets/images/house_2.jpeg",highend:"/resources/assets/images/house_3.jpeg",villa:"/resources/assets/images/house_4.jpeg",mansion:"/resources/assets/images/house_5.jpeg"};if(!isNaN(parseInt(e))){const i=parseInt(e);return`/resources/assets/images/house_${i?Math.max(1,Math.min(5,i%5||1)):1}.jpeg`}return r[e]||"/resources/assets/images/house_1.jpeg"}}const Bt=[{id:"apartment",name:"å•èº«å…¬å¯“",price:35e4,level:1,description:"é€‚åˆå•èº«äººå£«å±…ä½çš„å°å‹å…¬å¯“ï¼Œä½ç½®ä¾¿åˆ©ä½†ç©ºé—´æœ‰é™ã€‚è¿™æ˜¯è¿ˆå‘æˆ¿äº§é˜¶æ¢¯çš„ç¬¬ä¸€æ­¥ï¼",specialFeature:"äº¤é€šä¾¿åˆ©ï¼Œæœˆä¾›è¾ƒä½ï¼Œé¦–æ¬¡ç½®ä¸šçš„ç†æƒ³é€‰æ‹©",image:"/resources/assets/images/house_1.jpeg"},{id:"second_hand",name:"äºŒæ‰‹æ—§æˆ¿",price:58e4,level:2,description:"å¹´ä»£è¾ƒä¹…çš„äºŒæ‰‹ä½å®…ï¼Œä»·æ ¼é€‚ä¸­ä½†å¯èƒ½éœ€è¦è£…ä¿®ã€‚ç©ºé—´è¾ƒå¤§ï¼Œéå¸¸é€‚åˆæ”¹é€ æˆç†æƒ³çš„å®¶ã€‚",specialFeature:"ç©ºé—´è¾ƒå¤§ï¼Œå‘¨è¾¹é…å¥—å®Œå–„ï¼Œæ€§ä»·æ¯”è¾ƒé«˜",image:"/resources/assets/images/house_2.jpeg"},{id:"highend",name:"é«˜æ¡£å°åŒº",price:8e5,level:3,description:"ç°ä»£åŒ–é«˜æ¡£ä½å®…å°åŒºï¼Œç¯å¢ƒä¼˜ç¾ï¼Œé…å¥—è®¾æ–½é½å…¨ã€‚ç¤¾åŒºç¯å¢ƒå®‰å…¨ï¼Œæ˜¯å®¶åº­å±…ä½çš„ç»ä½³é€‰æ‹©ã€‚",specialFeature:"ç¯å¢ƒä¼˜ç¾ï¼Œç‰©ä¸šç®¡ç†å®Œå–„ï¼Œç¤¾åŒºæ´»åŠ¨ä¸°å¯Œ",image:"/resources/assets/images/house_3.jpeg"},{id:"villa",name:"ç°ä»£åˆ«å¢…",price:15e5,level:4,description:"ç‹¬æ ‹ç°ä»£åˆ«å¢…ï¼Œæ‹¥æœ‰ç§å®¶èŠ±å›­å’Œè½¦åº“ã€‚å®½æ•çš„ç©ºé—´å’Œç²¾è‡´çš„è®¾è®¡ï¼Œå½°æ˜¾ä¸»äººçš„å“å‘³ä¸åœ°ä½ã€‚",specialFeature:"ç‹¬ç«‹ç©ºé—´ï¼Œå±…ä½å“è´¨é«˜ï¼Œæ˜¯æˆåŠŸäººå£«çš„æ ‡å¿—",image:"/resources/assets/images/house_4.jpeg"},{id:"mansion",name:"ç§äººåº„å›­",price:3e6,level:5,description:"å¤§å‹ç§äººåº„å›­ï¼Œå¸¦æœ‰å¤§ç‰‡ç»¿åœ°å’Œå¤šåŠŸèƒ½åŒºåŸŸã€‚æ‹¥æœ‰è¿™æ ·çš„æˆ¿äº§ï¼Œä»£è¡¨ä½ å·²è¾¾åˆ°äººç”Ÿå·…å³°ï¼",specialFeature:"ç»ˆæè±ªå®…ï¼Œç§å¯†æ€§æä½³ï¼Œç¤¾ä¼šåœ°ä½çš„è±¡å¾",image:"/resources/assets/images/house_5.jpeg"}];function je(){return Bt.map(e=>qt(e))}const E={RISING_STRONG:"rising_strong",RISING:"rising",STABLE_HIGH:"stable_high",STABLE:"stable",STABLE_LOW:"stable_low",FALLING:"falling",FALLING_STRONG:"falling_strong",VOLATILE:"volatile"},Te=new Map;function fe(e){if(e=e%(2*Math.PI),e===0||e===Math.PI)return 0;if(e===Math.PI/2)return 1;if(e===3*Math.PI/2)return-1;const t=e*e,r=t*e,i=r*t,o=i*t;return e-r/6+i/120-o/5040}function Yt(e,t,r,i,o){const s=`${e.id}_${t}_${(r==null?void 0:r.price)||0}_${i}_${JSON.stringify(o)}`;if(Te.has(s))return Te.get(s);const n=Kt(e,t,r,i,o);return Te.set(s,n),n}function Ze(){Te.clear(),console.log("ä»·æ ¼è®¡ç®—ç¼“å­˜å·²æ¸…é™¤")}function Kt(e,t,r=null,i=1,o={}){var Le,we,Re,Ae,Ie,Oe;const s=(r==null?void 0:r.price)||e.basePrice,n=(r==null?void 0:r.trend)||E.STABLE,a=e.id,l=e.minPrice,d=e.maxPrice,h=e.volatility,m=e.category,p=t&1023,y=.6+h*.15,k={[E.RISING]:.05,[E.RISING_STRONG]:.08,[E.FALLING]:-.12,[E.FALLING_STRONG]:-.15,[E.STABLE]:-.01,[E.STABLE_HIGH]:-.04,[E.STABLE_LOW]:.02,[E.VOLATILE]:-.02},N=(a*1e3+t)%997/997,b=Math.random();let M;N<.3?M=b<.75?k[n]||0:(Math.random()-.35)*.08:M=b<.75?k[n]||0:(Math.random()-.65)*.08;const I=(()=>{console.log("è®¡ç®—ç±»åˆ«å‘¨æœŸå› å­:",{category:m,weekMod:p});let z=0;switch(m){case"DAILY":z=fe(p*.077)*.1-.03;break;case"FOOD":z=fe(p*.167)*.2-.05;break;case"ELECTRONICS":z=fe(p*.1)*.15-.08;break;case"LUXURY":z=fe(p*.067)*.25-.03;break;case"COLLECTIBLE":const R=fe(p*.125)*.3-.04,T=Math.cos(p*.2)*.15-.02;z=R+T;break;default:z=0}const _=(a%10-5)*.01;return z+=_,console.log("ç±»åˆ«å‘¨æœŸå› å­ç»“æœ:",z),z})(),x=a%10*.1,w=fe((p+x)*.1+(a&15)*.01)*.12-.03,O=i||1,U=(Le=o.specialProducts)!=null&&Le.includes(a)?.8:1,V=.9+(Math.sin(a*t*.01)*.5+.5)*.16,ee=o.globalPriceModifier||1,q=((we=o.categoryModifiers)==null?void 0:we[m])||1,ue=((Re=o.productModifiers)==null?void 0:Re[a])||1,le=o.currentLocationId;let de=1,me=1;le&&(de=((Ae=o.locationModifiers)==null?void 0:Ae[le])||1,(Oe=(Ie=o.locationProductModifiers)==null?void 0:Ie[le])!=null&&Oe[a]&&(me=o.locationProductModifiers[le][a]),(de!==1||me!==1)&&console.log(`åº”ç”¨åœ°åŒºä»·æ ¼ä¿®æ­£ - åœ°åŒº: ${le}, å•†å“: ${a}, åœ°åŒºä¿®æ­£: ${de.toFixed(2)}, åœ°åŒºå•†å“ä¿®æ­£: ${me.toFixed(2)}`));const Se=y*(1+M)*(1+I)*(1+w)*O*U*V*ee*q*ue*de*me,Me=.005;let ye=Se;Math.abs(Se-1)<Me&&(ye=1+(a*t%2===0?1:-1)*(Me+Math.random()*.01),console.log(`å•†å“ ${a} ä»·æ ¼å˜åŒ–å¤ªå°ï¼Œå¼ºåˆ¶è°ƒæ•´ä¸º ${((ye-1)*100).toFixed(2)}%`));let te=s*ye;te=Jt(te,s,e,o),te=Math.max(l,Math.min(te,d));const ve=(te-e.basePrice)/e.basePrice,We=Xt(ve,te,l,d);return{price:Math.round(te),trend:We,changePercent:parseFloat((ve*100).toFixed(1)),originalPricePercent:ve}}function Jt(e,t,r,i){const o=r.volatility/10,s=i.volatilityMultiplier||1,a=.2*(1+o)*s,l=t*(1+a),d=t*(1-a),h=t*.005;if(Math.abs(e-t)<h){const k=r.id%2===0?1:-1;e=t*(1+k*(.005+Math.random()*.01))}let m=Math.max(d,Math.min(e,l));const p=r.minPrice+(r.maxPrice-r.minPrice)*.5,y=Math.abs(m-p)/(r.maxPrice-r.minPrice);if(y>.4){const k=(y-.4)*.05,C=m>p?-1:1,N=k*(r.maxPrice-r.minPrice)*C;m+=N}return m}function Xt(e,t,r,i){if(e>.15)return E.RISING_STRONG;if(e>.05)return E.RISING;if(e<-.15)return E.FALLING_STRONG;if(e<-.05)return E.FALLING;const l=i-r;if(l<=0)return E.STABLE;const d=(t-r)/l;return d>.8?E.STABLE_HIGH:d<.2?E.STABLE_LOW:E.STABLE}function Qt(e,t,r={},i={}){console.time("BatchPriceUpdate"),i.currentLocation&&(i.currentLocationId=i.currentLocation.id);const o={},s=e.length;console.log(`æ‰¹é‡æ›´æ–°ä»·æ ¼ - å•†å“æ€»æ•°: ${s}, å½“å‰å‘¨æ•°: ${t}, å¸‚åœºä¿®æ­£å› å­:`,{global:i.globalPriceModifier||1,categories:Object.keys(i.categoryModifiers||{}).length,products:Object.keys(i.productModifiers||{}).length,locations:Object.keys(i.locationModifiers||{}).length,locationProducts:Object.keys(i.locationProductModifiers||{}).reduce((n,a)=>n+Object.keys(i.locationProductModifiers[a]||{}).length,0),currentLocationId:i.currentLocationId});for(let n=0;n<s;n++){const a=e[n],l=a.id,d=r[l]||null;try{o[l]=Yt(a,t,d,1,i)}catch(h){console.error(`æ›´æ–°å•†å“ ${l} ä»·æ ¼æ—¶å‡ºé”™:`,h),o[l]={price:a.basePrice,trend:"stable",changePercent:0}}}return console.timeEnd("BatchPriceUpdate"),o}function Zt(e){return{[E.RISING_STRONG]:"å¤§å¹…ä¸Šæ¶¨",[E.RISING]:"ä¸Šæ¶¨",[E.STABLE_HIGH]:"é«˜ä½ç¨³å®š",[E.STABLE]:"ç¨³å®š",[E.STABLE_LOW]:"ä½ä½ç¨³å®š",[E.FALLING]:"ä¸‹è·Œ",[E.FALLING_STRONG]:"å¤§å¹…ä¸‹è·Œ",[E.VOLATILE]:"å‰§çƒˆæ³¢åŠ¨"}[e]||"æœªçŸ¥"}function er(e){return{[E.RISING_STRONG]:"â†‘â†‘",[E.RISING]:"â†‘",[E.STABLE_HIGH]:"â†—",[E.STABLE]:"â†’",[E.STABLE_LOW]:"â†˜",[E.FALLING]:"â†“",[E.FALLING_STRONG]:"â†“â†“",[E.VOLATILE]:"â†•"}[e]||"â†’"}function tr(e){return{[E.RISING_STRONG]:"#e53935",[E.RISING]:"#f44336",[E.STABLE_HIGH]:"#ff9800",[E.STABLE]:"#9e9e9e",[E.STABLE_LOW]:"#8bc34a",[E.FALLING]:"#4caf50",[E.FALLING_STRONG]:"#2e7d32",[E.VOLATILE]:"#9c27b0"}[e]||"#9e9e9e"}const rr=()=>{const e=B();return{updateProductPrices:s=>{console.log("å¼€å§‹æ›´æ–°äº§å“ä»·æ ¼ï¼Œå½“å‰å‘¨æ•°:",s);const n=e.products;console.log("äº§å“æ€»æ•°:",n.length);const a={...e.productPrices},l=e.marketModifiers;console.log("å¸‚åœºä¿®æ­£å› å­:",l),Ze();const d=Qt(n,s,a,l);console.log("æ‰¹é‡æ›´æ–°åçš„æ–°ä»·æ ¼æ•°é‡:",Object.keys(d).length),Object.keys(d).forEach(h=>{var C,N;const m=a[h]||{price:0,history:[]},p=d[h],y=m.price||((C=n.find(b=>b.id===Number(h)))==null?void 0:C.basePrice)||0;if(!(Math.abs(p.price-y)>=1)||Math.abs(p.changePercent)<1){const M=parseInt(h)||0,I=s||0,x=(M*31+I)%100,w=x<30?1:-1,O=Math.abs(Math.sin(x*.1))*12,U=Math.max(3,O),W=1+w*U/100;p.price=Math.round(y*W),console.log(`å¼ºåˆ¶ä»·æ ¼æ³¢åŠ¨ - å•†å“ID: ${h}, åŸä»·: ${y}, æ–°ä»·: ${p.price}, æ–¹å‘: ${w>0?"ä¸Šæ¶¨":"ä¸‹è·Œ"}, å˜åŒ–å¹…åº¦: ${U.toFixed(1)}%`)}if(p.changePercent===0&&y>0){const b=((N=n.find(M=>M.id===Number(h)))==null?void 0:N.basePrice)||y;p.changePercent=(p.price-b)/b*100,p.changePercent=parseFloat(p.changePercent.toFixed(1))}e.productPrices[h]={price:p.price,prevPrice:y,trend:p.trend,changePercent:p.changePercent,originalPricePercent:p.originalPricePercent,history:[...m.history||[],p.price].slice(-20)};const k=n.find(b=>b.id===Number(h));if(k){console.log(`å•†å“ ${k.name}(ID:${h}) ä»·æ ¼æ›´æ–° - åŸºç¡€ä»·æ ¼: ${k.basePrice}, å½“å‰ä»·æ ¼: ${p.price}, å†å²: [${e.productPrices[h].history.join(", ")}]`);const{trend:b,changePercent:M}=e.calculateLongTermTrend(h,k.basePrice);e.productPrices[h].trend=b,e.productPrices[h].changePercent=M,console.log(`å•†å“ ${k.name}(ID:${h}) è¶‹åŠ¿æ›´æ–° - è¶‹åŠ¿: ${b}, å˜åŒ–ç™¾åˆ†æ¯”: ${M}%`)}}),e.updateLocationProducts(),console.log("ä»·æ ¼æ›´æ–°å®Œæˆ")},getProductTrendInfo:s=>{const n=e.getProductPriceTrend(s);return{text:Zt(n),icon:er(n),color:tr(n)}},getPriceChangeText:s=>{const n=e.productPrices[s];if(!n||n.changePercent===void 0)return"0%";const a=n.changePercent;return`${a>0?"+":""}${a.toFixed(1)}%`},measurePricePerformance:(s,n)=>null,clearPriceCache:Ze}},B=ce("market",{state:()=>({locations:[],currentLocation:null,productPrices:{},products:[],availableProducts:[],houses:[],marketModifiers:{globalPriceModifier:1,categoryModifiers:{},productModifiers:{},locationModifiers:{},locationProductModifiers:{},weeksSinceLastGlobalChange:0,categoryUnchangedWeeks:{},productUnchangedWeeks:{},locationUnchangedWeeks:{},locationProductUnchangedWeeks:{}},initialized:!1}),actions:{initializeMarket(){return new Promise((e,t)=>{try{setTimeout(()=>{this.locations=Ut(),this.products=$e(),this.houses=je(),this.initializeProductPrices(),this.marketModifiers={globalPriceModifier:1,categoryModifiers:{},productModifiers:{},locationModifiers:{},locationProductModifiers:{},weeksSinceLastGlobalChange:0,categoryUnchangedWeeks:{},productUnchangedWeeks:{},locationUnchangedWeeks:{},locationProductUnchangedWeeks:{}},this.locations.length>0&&(this.changeLocation(this.locations[0].id),this.updateLocationProducts()),this.initialized=!0,console.log("MarketStore - å¸‚åœºåˆå§‹åŒ–å®Œæˆ"),console.log("å¯ç”¨å•†å“æ•°é‡:",this.availableProducts.length),e()},500)}catch(r){L(r,"marketState (market)",S.UNKNOWN,P.ERROR),console.error("MarketStore - åˆå§‹åŒ–å¸‚åœºå¤±è´¥:",r),t(r)}})},initializeProductPrices(){this.productPrices={},this.products.forEach(e=>{const t=Math.floor(Math.random()*(e.maxPrice-e.minPrice)+e.minPrice);this.productPrices[e.id]={price:t,trend:E.STABLE,history:[t],changePercent:0}})},updateMarketState(e){console.log("MarketStore - æ›´æ–°å¸‚åœºçŠ¶æ€, å½“å‰å‘¨æ•°:",e),this.updateMarketModifiers();try{const{updateProductPrices:t}=rr();if(typeof t!="function"){console.error("MarketStore - updateProductPrices ä¸æ˜¯ä¸€ä¸ªå‡½æ•°");return}this.currentLocation&&(this.marketModifiers.currentLocation=this.currentLocation),t(e),console.log("MarketStore - å•†å“ä»·æ ¼å·²æ›´æ–°")}catch(t){console.error("MarketStore - æ›´æ–°å•†å“ä»·æ ¼æ—¶å‡ºé”™:",t)}this.updateLocationProducts()},updateMarketModifiers(){const e=this.marketModifiers;if(console.log("MarketStore - æ›´æ–°å¸‚åœºè°ƒæ•´å› å­"),e.weeksSinceLastGlobalChange++,e.weeksSinceLastGlobalChange>=Math.max(4,Math.floor(Math.random()*5)+4)&&(e.weeksSinceLastGlobalChange=0,Math.random()<.7)){const r=e.globalPriceModifier,i=(Math.random()-.5)*.2;e.globalPriceModifier=Math.max(.8,Math.min(1.2,r+i)),console.log(`MarketStore - å…¨å±€ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${r.toFixed(2)} -> ${e.globalPriceModifier.toFixed(2)}`)}if(["food","electronics","luxury","daily","collectible"].forEach(r=>{if(e.categoryUnchangedWeeks[r]=(e.categoryUnchangedWeeks[r]||0)+1,e.categoryUnchangedWeeks[r]>=4||Math.random()<.3){e.categoryUnchangedWeeks[r]=0;const i=e.categoryModifiers[r]||1,o=(Math.random()-.5)*.3;e.categoryModifiers[r]=Math.max(.7,Math.min(1.3,i+o)),console.log(`MarketStore - ${r}ç±»åˆ«ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${i.toFixed(2)} -> ${e.categoryModifiers[r].toFixed(2)}`)}}),Math.random()<.15){const r=Math.floor(Math.random()*3)+1,i=Object.keys(this.productPrices);for(let o=0;o<r&&i.length>0;o++){const s=Math.floor(Math.random()*i.length),n=i[s];e.productUnchangedWeeks[n]=0;const a=e.productModifiers[n]||1,l=(Math.random()-.5)*.6;e.productModifiers[n]=Math.max(.5,Math.min(1.5,a+l));const d=this.products.find(h=>h.id===Number(n));console.log(`MarketStore - å•†å“ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${(d==null?void 0:d.name)||n} ${a.toFixed(2)} -> ${e.productModifiers[n].toFixed(2)}`)}}if(Math.random()<.2){const r=Math.floor(Math.random()*2)+1,i=this.locations.map(o=>o.id);for(let o=0;o<r&&i.length>0;o++){const s=Math.floor(Math.random()*i.length),n=i[s];e.locationUnchangedWeeks[n]=0;const a=e.locationModifiers[n]||1,l=(Math.random()-.5)*.4;e.locationModifiers[n]=Math.max(.6,Math.min(1.4,a+l));const d=this.locations.find(h=>h.id===n);console.log(`MarketStore - åœ°åŒºä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${(d==null?void 0:d.name)||n} ${a.toFixed(2)} -> ${e.locationModifiers[n].toFixed(2)}`)}}if(Math.random()<.1){const r=this.locations.map(a=>a.id),i=Math.floor(Math.random()*r.length),o=r[i],s=Math.floor(Math.random()*3)+1,n=Object.keys(this.productPrices);e.locationProductModifiers[o]||(e.locationProductModifiers[o]={}),e.locationProductUnchangedWeeks[o]||(e.locationProductUnchangedWeeks[o]={});for(let a=0;a<s&&n.length>0;a++){const l=Math.floor(Math.random()*n.length),d=n[l];e.locationProductUnchangedWeeks[o][d]=0;const h=e.locationProductModifiers[o][d]||1,m=(Math.random()-.5)*.8;e.locationProductModifiers[o][d]=Math.max(.4,Math.min(1.6,h+m));const p=this.products.find(k=>k.id===Number(d)),y=this.locations.find(k=>k.id===o);console.log(`MarketStore - åœ°åŒºå†…å•†å“ä»·æ ¼ä¿®æ­£å› å­å·²æ›´æ–°: ${(y==null?void 0:y.name)||o} çš„ ${(p==null?void 0:p.name)||d} ${h.toFixed(2)} -> ${e.locationProductModifiers[o][d].toFixed(2)}`)}}(e.globalPriceModifier<.8||e.globalPriceModifier>1.2)&&(e.globalPriceModifier=1)},changeLocation(e){const t=this.locations.find(r=>r.id===e);return t?(this.currentLocation=t,this.updateLocationProducts(),!0):!1},updateLocationProducts(){if(console.log("MarketStore - æ›´æ–°å½“å‰åœ°ç‚¹å¯ç”¨å•†å“"),!this.currentLocation){console.warn("MarketStore - æ›´æ–°å¯ç”¨å•†å“å¤±è´¥: å½“å‰åœ°ç‚¹æœªè®¾ç½®"),this.availableProducts=[];return}try{const e=this.getLocationAvailableProducts(this.currentLocation);console.log("MarketStore - å½“å‰åœ°ç‚¹å¯ç”¨å•†å“ID:",e),this.availableProducts=this.products.filter(t=>e.includes(t.id)).map(t=>{const r=this.getCurrentProductPrice(t.id),i=this.isSpecialProduct(t.id),{trend:o,changePercent:s}=this.calculateLongTermTrend(t.id,t.basePrice);return this.productPrices[t.id]&&(this.productPrices[t.id].trend=o,this.productPrices[t.id].changePercent=s),console.log(`å•†å“ ${t.name} - ä»·æ ¼: ${r}, è¶‹åŠ¿: ${o}, å˜åŒ–ç™¾åˆ†æ¯”: ${s}%`),{...t,currentPrice:r,trend:o,changePercent:s,isSpecial:i}}),console.log(`MarketStore - æ›´æ–°å®Œæˆï¼Œå¯ç”¨å•†å“æ•°é‡: ${this.availableProducts.length}`)}catch(e){L(e,"marketState (market)",S.UNKNOWN,P.ERROR),console.error("MarketStore - æ›´æ–°å½“å‰åœ°ç‚¹å¯ç”¨å•†å“æ—¶å‡ºé”™:",e),this.availableProducts=[]}},calculateLongTermTrend(e,t){const r=this.productPrices[e];if(!r||!r.history||r.history.length===0)return console.log(`å•†å“ ${e} æ²¡æœ‰ä»·æ ¼å†å²æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤è¶‹åŠ¿`),{trend:E.STABLE,changePercent:0};const i=r.history,o=i[i.length-1],s=(o-t)/t*100;console.log(`å•†å“ ${e} è¶‹åŠ¿è®¡ç®— - åŸºç¡€ä»·æ ¼: ${t}, å½“å‰ä»·æ ¼: ${o}, å†å²è®°å½•: [${i.join(", ")}], å˜åŒ–ç™¾åˆ†æ¯”: ${s.toFixed(1)}%`);let n;if(s>15)n=E.RISING_STRONG;else if(s>5)n=E.RISING;else if(s<-15)n=E.FALLING_STRONG;else if(s<-5)n=E.FALLING;else{const a=this.products.find(l=>l.id===Number(e));if(!a)console.log(`å•†å“ ${e} æœªæ‰¾åˆ°äº§å“ä¿¡æ¯ï¼Œä½¿ç”¨é»˜è®¤è¶‹åŠ¿`),n=E.STABLE;else{const l=a.minPrice,d=a.maxPrice,h=d-l;if(h<=0)console.log(`å•†å“ ${e} ä»·æ ¼èŒƒå›´ä¸º0ï¼Œä½¿ç”¨é»˜è®¤è¶‹åŠ¿`),n=E.STABLE;else{const m=(o-l)/h;console.log(`å•†å“ ${e} ç›¸å¯¹ä½ç½®è®¡ç®— - æœ€ä½ä»·: ${l}, æœ€é«˜ä»·: ${d}, ç›¸å¯¹ä½ç½®: ${(m*100).toFixed(1)}%`),m>.8?n=E.STABLE_HIGH:m<.2?n=E.STABLE_LOW:n=E.STABLE}}}if(i.length>=3){const a=i.slice(-3),l=this.calculateVolatility(a);console.log(`å•†å“ ${e} æ³¢åŠ¨æ€§è®¡ç®— - æœ€è¿‘ä»·æ ¼: [${a.join(", ")}], æ³¢åŠ¨æ€§: ${l.toFixed(3)}`),l>.1&&(n=E.VOLATILE)}return console.log(`å•†å“ ${e} æœ€ç»ˆè¶‹åŠ¿: ${n}, å˜åŒ–ç™¾åˆ†æ¯”: ${s.toFixed(1)}%`),{trend:n,changePercent:parseFloat(s.toFixed(1))}},calculateVolatility(e){if(!e||e.length<2)return 0;let t=0;for(let r=1;r<e.length;r++){const i=e[r-1],o=e[r];if(i>0){const s=Math.abs((o-i)/i);t+=s}}return t/(e.length-1)},getLocationAvailableProducts(e){if(!e)return[];try{const t=this.products.filter(r=>r.availableAt&&r.availableAt.includes(e.id)).map(r=>r.id);return e.specialProducts&&e.specialProducts.length>0&&e.specialProducts.forEach(r=>{t.includes(r)||t.push(r)}),t}catch(t){return console.error("è·å–åœ°ç‚¹å¯ç”¨å•†å“åˆ—è¡¨å‡ºé”™:",t),[]}},isSpecialProduct(e){return!this.currentLocation||!this.currentLocation.specialProducts?!1:this.currentLocation.specialProducts.includes(e)},getCurrentProductPrice(e){if(!e)return console.warn(`MarketStore - getCurrentProductPrice: æ— æ•ˆçš„å•†å“ID: ${e}`),0;const t=String(e);if(!this.productPrices||!this.productPrices[t]){console.warn(`MarketStore - getCurrentProductPrice: æ‰¾ä¸åˆ°å•†å“ä»·æ ¼ (ID: ${t})`);const r=this.products.find(i=>String(i.id)===t);return r?(console.log(`MarketStore - ä½¿ç”¨å•†å“åŸºç¡€ä»·æ ¼: ${r.basePrice}`),r.basePrice||0):0}return this.productPrices[t].price||0},getProductPriceHistory(e){var t;return((t=this.productPrices[e])==null?void 0:t.history)||[]},getProductPriceTrend(e){var t;return((t=this.productPrices[e])==null?void 0:t.trend)||E.STABLE},addMarketModifier(e,t){switch(e){case"global":this.marketModifiers.globalPriceModifier=t.value;break;case"category":this.marketModifiers.categoryModifiers[t.category]=t.value;break;case"product":this.marketModifiers.productModifiers[t.productId]=t.value;break;case"location":this.marketModifiers.locationModifiers[t.locationId]=t.value;break;case"locationProduct":this.marketModifiers.locationProductModifiers[t.locationId]||(this.marketModifiers.locationProductModifiers[t.locationId]={}),this.marketModifiers.locationProductModifiers[t.locationId][t.productId]=t.value;break}},loadProducts(e){if(console.log("MarketStore - åŠ è½½äº§å“æ•°æ®:",e),!Array.isArray(e)){console.warn("MarketStore - åŠ è½½äº§å“æ•°æ®æ—¶ä¼ å…¥çš„ä¸æ˜¯æ•°ç»„:",e);return}if(this.products.length===0&&(this.products=$e()),e.length>0&&typeof e[0]=="string"){const t=$e();this.products=t.filter(r=>e.includes(r.id)),console.log("MarketStore - å·²åŠ è½½æŒ‡å®šäº§å“:",this.products.length)}this.updateLocationProducts()},loadHouses(e){if(console.log("MarketStore - åŠ è½½æˆ¿å±‹æ•°æ®:",e),!Array.isArray(e)){console.warn("MarketStore - åŠ è½½æˆ¿å±‹æ•°æ®æ—¶ä¼ å…¥çš„ä¸æ˜¯æ•°ç»„:",e);return}if(this.houses.length===0&&(this.houses=je()),e.length>0&&typeof e[0]=="string"){const t=je();this.houses=t.filter(r=>e.includes(r.id)),console.log("MarketStore - å·²åŠ è½½æŒ‡å®šæˆ¿å±‹:",this.houses.length)}}},getters:{availableHouses(e){return e.houses},currentLocationInfo(e){return e.currentLocation?{id:e.currentLocation.id,name:e.currentLocation.name,description:e.currentLocation.description,modifiers:e.currentLocation.modifiers,hasSpecialProducts:e.currentLocation.specialProducts&&e.currentLocation.specialProducts.length>0}:null},marketStatus(e){const t=e.marketModifiers.globalPriceModifier;let r="neutral";t>1.1?r="bull":t<.9&&(r="bear");const i=e.products.filter(n=>e.productPrices[n.id]),o=i.filter(n=>(e.productPrices[n.id].price-n.minPrice)/(n.maxPrice-n.minPrice)>.7),s=i.filter(n=>(e.productPrices[n.id].price-n.minPrice)/(n.maxPrice-n.minPrice)<.3);return{status:r,globalModifier:t,highPriceProductsRatio:i.length>0?o.length/i.length:0,lowPriceProductsRatio:i.length>0?s.length/i.length:0,activeModifiersCount:Object.keys(e.marketModifiers.categoryModifiers).length+Object.keys(e.marketModifiers.productModifiers).length}}}}),f={RANDOM:"random",STORY:"story",LOCATION:"location",MARKET:"market",PERSONAL:"personal",TUTORIAL:"tutorial"};let qe=class{constructor({id:t,title:r,description:i,options:o=[],conditions:s={},repeatable:n=!1,type:a=f.RANDOM,weight:l=1,imageUrl:d=null}){this.id=t,this.title=r,this.description=i,this.options=o,this.conditions=s,this.repeatable=n,this.type=a,this.weight=l,this.imageUrl=null}canTrigger(t,r=[]){var o,s;const i=this.conditions;if(!this.repeatable&&r.includes(this.id)||i.minWeek!==null&&t.currentWeek<i.minWeek||i.maxWeek!==null&&t.currentWeek>i.maxWeek||i.locations!==null&&!i.locations.includes((o=t.currentLocation)==null?void 0:o.id))return!1;if(i.playerMoney!==null){const n=t.player.money;if(i.playerMoney.min!==void 0&&n<i.playerMoney.min||i.playerMoney.max!==void 0&&n>i.playerMoney.max)return!1}if(i.playerDebt!==null){const n=t.player.debt;if(i.playerDebt.min!==void 0&&n<i.playerDebt.min||i.playerDebt.max!==void 0&&n>i.playerDebt.max)return!1}if(i.inventoryItems!==null)for(const n of i.inventoryItems){const a=t.player.inventory.find(d=>d.productId===n.productId),l=a?a.quantity:0;if(n.minQuantity!==void 0&&l<n.minQuantity||n.maxQuantity!==void 0&&l>n.maxQuantity)return!1}if(i.attributes!==null)for(const[n,a]of Object.entries(i.attributes)){const l=((s=t.player.attributes)==null?void 0:s[n])||0;if(a.min!==void 0&&l<a.min||a.max!==void 0&&l>a.max)return!1}if(i.requiredEvents!==null){for(const n of i.requiredEvents)if(!r.includes(n))return!1}if(i.excludedEvents!==null){for(const n of i.excludedEvents)if(r.includes(n))return!1}return i.customCondition!==null&&!i.customCondition(t)?!1:Math.random()<=(i.probability||1)}getAvailableOptions(t){return this.options.filter(r=>r.condition===null||r.condition(t))}};class ze{constructor({text:t,result:r,effects:i,condition:o=null}){this.text=t,this.result=r,this.effects=i,this.condition=o}isAvailable(t){return this.condition===null||this.condition(t)}}class ir{constructor({money:t=0,debt:r=0,inventory:i=[],attributes:o={},market:s=null,forceLocationChange:n=!1,targetLocation:a=null,capacity:l=0,nextEvent:d=null,gameState:h=null}){this.money=t,this.debt=r,this.inventory=i,this.attributes=o,this.market=s,this.forceLocationChange=n,this.targetLocation=a,this.capacity=l,this.nextEvent=d,this.gameState=h}}class sr{constructor({minWeek:t=null,maxWeek:r=null,locations:i=null,probability:o=1,playerMoney:s=null,playerDebt:n=null,inventoryItems:a=null,attributes:l=null,requiredEvents:d=null,excludedEvents:h=null,customCondition:m=null}){this.minWeek=t,this.maxWeek=r,this.locations=i,this.probability=o,this.playerMoney=s,this.playerDebt=n,this.inventoryItems=a,this.attributes=l,this.requiredEvents=d,this.excludedEvents=h,this.customCondition=m}}function g(e){if(typeof e=="object"&&!Array.isArray(e))return new qe(e);{const[t,r,i,o,s,n,a,l,d]=arguments;return new qe({id:t,title:r,description:i,options:o,conditions:s,repeatable:n,type:a,weight:l,imageUrl:d})}}const c=(e,t,r,i=null)=>new ze({text:e,result:t,effects:r,condition:i}),u=e=>new ir(e),v=e=>new sr(e),or=[g("market_boom","å±€éƒ¨å¸‚åœºç¹è£","æœ€æ–°ç»æµæŠ¥é“ï¼šé«˜ç«¯å•†åŸå’Œç”µå­ç§‘æŠ€åŸè¿æ¥æ¶ˆè´¹çƒ­æ½®ï¼Œå•†å“ä»·æ ¼æ™®éä¸Šæ¶¨ï¼è¿™å¯èƒ½æ˜¯è°ƒæ•´è´­ä¹°ç­–ç•¥çš„å¥½æ—¶æœºã€‚",[c("æŠ“ä½æœºä¼šåœ¨çƒ­é—¨åœ°åŒºé‡‡è´­","ä½ å†³å®šå‰å¾€è¿™äº›ç¹è£åœ°åŒºé‡‡è´­æ›´å¤šå•†å“ï¼Œå¸Œæœ›èƒ½ä»ä»·æ ¼æ³¢åŠ¨ä¸­è·ç›Šã€‚",u({market:{locationModifiers:{premium_mall:1.25,electronics_hub:1.15},duration:2}})),c("è§‚æœ›å¸‚åœºèµ°åŠ¿","ä½ å†³å®šä¿æŒè§‚æœ›æ€åº¦ï¼Œä¸åšä»»ä½•ç‰¹åˆ«çš„æ“ä½œã€‚",u({})),c("è¶é«˜ä»·å‡ºå”®ç›¸å…³åº“å­˜å•†å“","ä½ å†³å®šåˆ©ç”¨è¿™äº›åœ°åŒºä»·æ ¼ä¸Šæ¶¨çš„æœºä¼šå‡ºå”®ä¸€äº›åº“å­˜å•†å“ã€‚",u({market:{locationModifiers:{premium_mall:1.2,electronics_hub:1.1},duration:1}}),e=>e.player.inventoryUsed>0)],v({minWeek:5,probability:.2}),!0,f.MARKET,1.5,"/assets/images/events/market_boom.jpg"),g("market_crash","å±€éƒ¨å¸‚åœºå´©ç›˜","çªå‘æ¶ˆæ¯ï¼šäºŒæ‰‹å¸‚åœºå’Œåœ°ä¸‹é»‘å¸‚çˆ†å‘å®‰å…¨äº‹ä»¶ï¼Œå¯¼è‡´è¿™äº›åœ°åŒºäº¤æ˜“èç¼©ï¼Œå•†å“ä»·æ ¼å¤§å¹…ä¸‹è·Œï¼ä½ éœ€è¦å†³å®šæ˜¯å¦åˆ©ç”¨è¿™æ¬¡ä½ä»·æœºä¼šã€‚",[c("æŠ„åº•è´­ä¹°","ä½ å†³å®šè¶ä½ä»·å‰å¾€å—å½±å“åœ°åŒºå¤§é‡è´­å…¥å•†å“ï¼Œå¸Œæœ›èƒ½åœ¨ä»·æ ¼å›å‡æ—¶è·åˆ©ã€‚",u({market:{locationModifiers:{second_hand_market:.65,black_market:.7},duration:3}})),c("ç­‰å¾…å¸‚åœºç¨³å®š","ä½ å†³å®šç­‰å¾…å¸‚åœºç¨³å®šåå†è¡ŒåŠ¨ï¼Œé¿å…åœ¨åŠ¨è¡æ—¶æœŸå†’é™©ã€‚",u({})),c("æå‰å–å‡ºæŒæœ‰å•†å“","ä½ æ‹…å¿ƒå…¶ä»–åœ°åŒºä¹Ÿä¼šå—å½±å“ï¼Œå†³å®šç«‹å³å‡ºå”®éƒ¨åˆ†å•†å“å‡å°‘å¯èƒ½çš„æŸå¤±ã€‚",u({market:{locationModifiers:{second_hand_market:.75,black_market:.8},duration:1}}),e=>e.player.inventoryUsed>0)],v({minWeek:10,probability:.15}),!0,f.MARKET,1.5,"/assets/images/events/market_crash.jpg"),g("lucky_money","æ„å¤–ä¹‹è´¢","ä½ åœ¨è·¯ä¸Šæ¡åˆ°äº†ä¸€ä¸ªé’±åŒ…ï¼Œé‡Œé¢æœ‰ä¸€äº›ç°é‡‘å’Œå¤±ä¸»çš„è”ç³»æ–¹å¼ã€‚è¿™æ˜¯ä¸ªè€ƒéªŒä½ è¯šä¿¡çš„æ—¶åˆ»ã€‚",[c("å½’è¿˜é’±åŒ…","ä½ è”ç³»äº†å¤±ä¸»å¹¶å½’è¿˜äº†é’±åŒ…ï¼Œå¯¹æ–¹éå¸¸æ„Ÿè°¢å¹¶ç»™äº†ä½ 500å…ƒé…¬é‡‘ã€‚",u({money:500,attributes:{creditRating:1,reputation:1}})),c("æ®ä¸ºå·±æœ‰","ä½ å†³å®šæŠŠé’±åŒ…é‡Œçš„é’±æ®ä¸ºå·±æœ‰ï¼Œè·å¾—äº†2000å…ƒï¼Œä½†æ„Ÿåˆ°æœ‰äº›æ„§ç–šã€‚",u({money:2e3,attributes:{creditRating:-2,reputation:-2}}))],v({probability:.1,minWeek:3}),!1,f.PERSONAL,1,"/assets/images/events/lucky_money.jpg"),g("health_problem","å¥åº·é—®é¢˜","ä½ çªç„¶æ„Ÿåˆ°èº«ä½“ä¸é€‚ï¼ŒåŒ»ç”Ÿå»ºè®®ä½ åŠæ—¶å°±åŒ»ã€‚ä¸åŠæ—¶å¤„ç†å¯èƒ½ä¼šå½±å“åˆ°ä½ çš„æ—¥å¸¸å·¥ä½œå’Œç”Ÿæ´»ã€‚",[c("ç«‹å³å°±åŒ»","ä½ é€‰æ‹©ç«‹å³å»åŒ»é™¢æ£€æŸ¥æ²»ç–—ï¼ŒèŠ±è´¹äº†ä¸€äº›åŒ»ç–—è´¹ï¼Œä½†è¿…é€Ÿæ¢å¤äº†å¥åº·ã€‚",u({money:-800,attributes:{health:1}})),c("æš‚æ—¶å¿è€","ä½ å†³å®šå…ˆå¿ç€ï¼Œå¸Œæœ›ç—‡çŠ¶ä¼šè‡ªè¡Œå¥½è½¬ï¼Œçœä¸‹åŒ»ç–—è´¹ç”¨ã€‚ä½†è¿™å¯¼è‡´ä½ çš„å¥åº·çŠ¶å†µæœ‰æ‰€ä¸‹é™ã€‚",u({attributes:{health:-1}})),c("å¯»æ±‚ä¸­è¯è°ƒç†","ä½ é€‰æ‹©è´­ä¹°ä¸€äº›ä¸­è¯è¿›è¡Œè°ƒç†ï¼ŒèŠ±è´¹è¾ƒå°‘ä½†æ•ˆæœæ¸©å’Œã€‚",u({money:-300,attributes:{health:.5}}))],v({probability:.15,minWeek:8}),!0,f.PERSONAL,1,"/assets/images/events/health_problem.jpg"),g("market_raid","é»‘å¸‚çªè¢­","è­¦æ–¹çªç„¶çªè¢­äº†åœ°ä¸‹é»‘å¸‚ï¼æ‰€æœ‰äººéƒ½åœ¨æ…Œä¹±ä¸­é€ƒçªœï¼Œä½ éœ€è¦å¿«é€Ÿåšå‡ºå†³å®šã€‚",[c("è¿…é€Ÿç¦»å¼€","ä½ è¿…é€Ÿé€ƒç¦»äº†ç°åœºï¼Œè™½ç„¶æ²¡èƒ½å®Œæˆäº¤æ˜“ï¼Œä½†é¿å…äº†ä¸å¿…è¦çš„éº»çƒ¦ã€‚",u({forceLocationChange:!0,targetLocation:"commodity_market"})),c("å†’é™©å®Œæˆäº¤æ˜“","ä½ å†’é™©ç•™ä¸‹æ¥å®Œæˆäº¤æ˜“ï¼Œè·å¾—äº†ä½ä»·å•†å“ï¼Œä½†å·®ç‚¹è¢«æ‰§æ³•äººå‘˜æŠ“ä½ã€‚",u({market:{globalPriceModifier:.6,duration:1},attributes:{businessSkill:1,risk_tolerance:1}}))],v({locations:["black_market"],probability:.25}),!0,f.LOCATION,1.5,"/assets/images/events/market_raid.jpg"),g("celebrity_appearance","åäººç°èº«","ä¸€ä½çŸ¥åæ˜æ˜Ÿåœ¨é«˜ç«¯å•†åŸç°èº«è´­ç‰©ï¼Œå¼•èµ·ä¸€é˜µè½°åŠ¨ã€‚äººæµæ¿€å¢ï¼Œå•†å®¶çº·çº·è°ƒé«˜ä»·æ ¼ã€‚",[c("è¶æœºæé«˜å”®ä»·","ä½ æŠ“ä½æœºä¼šåœ¨é™„è¿‘è®¾æ‘Šï¼Œä»¥ç•¥é«˜çš„ä»·æ ¼å‡ºå”®å•†å“ï¼Œèµšäº†ä¸€ç¬”ã€‚",u({money:1500,market:{globalPriceModifier:1.2,duration:1}})),c("å°è¯•æ¥è¿‘åäºº","ä½ è¯•å›¾æ¥è¿‘åäººè·å–åˆå½±ï¼Œç»“æœä¸å°å¿ƒè¢«ä¿å®‰æ¨æ¡ï¼Œæ‰‹æœºæ‘”åäº†ã€‚",u({money:-500}))],v({locations:["premium_mall"],probability:.2}),!0,f.LOCATION,1,"/assets/images/events/celebrity.jpg"),g("debt_relief","å€ºåŠ¡å‡å…","é“¶è¡Œæ¨å‡ºäº†å€ºåŠ¡é‡ç»„è®¡åˆ’ï¼Œä½ æ”¶åˆ°äº†å‚ä¸æœºä¼šã€‚è¿™å¯èƒ½æ˜¯å‡è½»å€ºåŠ¡è´Ÿæ‹…çš„å¥½æœºä¼šã€‚",[c("ç”³è¯·å‚ä¸","ä½ æˆåŠŸç”³è¯·äº†å€ºåŠ¡å‡å…è®¡åˆ’ï¼Œå€ºåŠ¡å‡å°‘äº†20%ã€‚",u({debt:-.2})),c("æ”¾å¼ƒæœºä¼š","ä½ è®¤ä¸ºè¿™å¯èƒ½æœ‰éšè—æ¡æ¬¾ï¼Œå†³å®šæ”¾å¼ƒè¿™ä¸ªæœºä¼šã€‚",u({}))],v({minWeek:15,playerDebt:{min:5e3},probability:.3}),!1,f.PERSONAL,1,"/assets/images/events/debt_relief.jpg"),g("electronics_discount","ç”µå­äº§å“ä¿ƒé”€","ç”µå­äº§å“å¸‚åœºæ¨å‡ºå¤§è§„æ¨¡ä¿ƒé”€æ´»åŠ¨ï¼Œä»·æ ¼å¤§å¹…ä¸‹é™ï¼è¿™æ˜¯å›¤ç§¯ç”µå­äº§å“çš„å¥½æ—¶æœºã€‚",[c("è´­ä¹°ç”µå­äº§å“","ä½ è¶æœºè´­ä¹°äº†ä¸€äº›ç”µå­äº§å“ï¼Œä»·æ ¼æ¯”å¹³æ—¶ä¾¿å®œå¾ˆå¤šã€‚",u({market:{categoryModifier:"ELECTRONICS",modifier:.7,duration:2}})),c("ä¸æ„Ÿå…´è¶£","ä½ å¯¹ç”µå­äº§å“ä¸æ„Ÿå…´è¶£ï¼Œå†³å®šå¿½ç•¥è¿™æ¬¡ä¿ƒé”€ã€‚",u({}))],v({probability:.15,minWeek:5}),!0,f.MARKET,1,"/assets/images/events/electronics_sale.jpg"),g("luxury_tax","å¥¢ä¾ˆå“å¾ç¨","æ”¿åºœå®£å¸ƒå¯¹å¥¢ä¾ˆå“å¾æ”¶é¢å¤–ç¨è´¹ï¼Œå¯¼è‡´å¥¢ä¾ˆå“ä»·æ ¼å…¨é¢ä¸Šæ¶¨ã€‚",[c("æå‰å›¤è´§","ä½ å†³å®šåœ¨ç¨æ”¶æ”¿ç­–å®æ–½å‰å›¤ç§¯ä¸€äº›å¥¢ä¾ˆå“ï¼Œä»¥å¤‡åç»­é«˜ä»·å‡ºå”®ã€‚",u({market:{categoryModifier:"LUXURY",modifier:1.1,duration:1},nextEvent:"luxury_tax_aftermath"})),c("è§‚æœ›å¸‚åœº","ä½ å†³å®šç­‰å¾…çœ‹çœ‹å¸‚åœºå¦‚ä½•ååº”ï¼Œé¿å…åšå‡ºå†’é™©å†³ç­–ã€‚",u({market:{categoryModifier:"LUXURY",modifier:1.3,duration:4}}))],v({probability:.1,minWeek:12,excludedEvents:["luxury_tax","luxury_tax_aftermath"]}),!1,f.MARKET,1,"/assets/images/events/luxury_tax.jpg"),g("luxury_tax_aftermath","å¥¢ä¾ˆå“ä»·æ ¼é£™å‡","å¥¢ä¾ˆå“å¾ç¨æ”¿ç­–æ­£å¼å®æ–½ï¼Œå¸‚åœºä»·æ ¼å¦‚é¢„æœŸèˆ¬å¤§å¹…ä¸Šæ¶¨ã€‚ä½ ä¹‹å‰çš„å‡†å¤‡æ˜¯å¦å……åˆ†ï¼Ÿ",[c("é«˜ä»·å‡ºå”®å›¤è´§","ä½ å°†ä¹‹å‰å›¤ç§¯çš„å¥¢ä¾ˆå“ä»¥é«˜ä»·å‡ºå”®ï¼Œè·å¾—äº†å¯è§‚åˆ©æ¶¦ã€‚",u({money:3e3,market:{categoryModifier:"LUXURY",modifier:1.4,duration:3}}),e=>e.player.inventory.some(t=>{const r=e.products.find(i=>i.id===t.productId);return r&&r.category==="LUXURY"})),c("ç»§ç»­æŒæœ‰","ä½ è®¤ä¸ºä»·æ ¼è¿˜ä¼šè¿›ä¸€æ­¥ä¸Šæ¶¨ï¼Œå†³å®šç»§ç»­æŒæœ‰å›¤ç§¯çš„å•†å“ã€‚",u({market:{categoryModifier:"LUXURY",modifier:1.3,duration:3}}))],v({requiredEvents:["luxury_tax"]}),!1,f.MARKET,1,"/assets/images/events/luxury_price_rise.jpg"),g("storage_expansion","å­˜å‚¨ç©ºé—´æ‰©å±•","ä½ å‘ç°ä¸€ä¸ªå¯ä»¥æ‰©å±•èƒŒåŒ…å®¹é‡çš„å¥½æœºä¼šï¼Œä½†éœ€è¦æŠ•å…¥ä¸€äº›èµ„é‡‘ã€‚",[c("è´­ä¹°æ–°èƒŒåŒ…","ä½ èŠ±é’±è´­ä¹°äº†ä¸€ä¸ªæ›´å¤§çš„èƒŒåŒ…ï¼Œæå‡äº†å­˜å‚¨å®¹é‡ã€‚",u({money:-1500,capacity:20})),c("ç§Ÿç”¨ä»“åº“ç©ºé—´","ä½ ç§Ÿäº†ä¸€ä¸ªå°å‹ä»“åº“ç©ºé—´ï¼ŒèŠ±è´¹è¾ƒä½ä½†å®¹é‡æå‡æœ‰é™ã€‚",u({money:-500,capacity:10})),c("æ”¾å¼ƒæœºä¼š","ä½ è®¤ä¸ºå½“å‰å®¹é‡å¤Ÿç”¨ï¼Œå†³å®šèŠ‚çº¦èµ„é‡‘ä¸è¿›è¡Œæ‰©å±•ã€‚",u({}))],v({probability:.15,minWeek:10,playerMoney:{min:500},inventoryUsed:{min:.7}}),!0,f.PERSONAL,1,"/assets/images/events/storage_expansion.jpg"),g("tutorial_trading","äº¤æ˜“å…¥é—¨","æ¬¢è¿æ¥åˆ°ã€Šä¹°æˆ¿è®°ã€‹ï¼åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä½ çš„ç›®æ ‡æ˜¯é€šè¿‡ä¹°å–å•†å“èµšå–å·®ä»·ï¼Œæœ€ç»ˆç§¯ç´¯è¶³å¤Ÿçš„èµ„é‡‘è´­ä¹°ç†æƒ³çš„æˆ¿äº§ã€‚",[c("äº†è§£åŸºæœ¬äº¤æ˜“","ä½ å­¦ä¹ äº†åŸºæœ¬çš„äº¤æ˜“çŸ¥è¯†ï¼Œæ˜ç™½äº†å¦‚ä½•åœ¨ä¸åŒåœ°ç‚¹ä¹‹é—´ä¹°å–å•†å“èµšå–å·®ä»·ã€‚",u({nextEvent:"tutorial_market"}))],v({minWeek:1,maxWeek:1}),!1,f.TUTORIAL,1,"/assets/images/events/tutorial.jpg"),g("tutorial_market","å¸‚åœºè§£æ","ä¸åŒåœ°ç‚¹çš„å•†å“ä»·æ ¼ä¼šæœ‰å·®å¼‚ï¼ŒåŒæ—¶è¿˜ä¼šéšæ—¶é—´æ³¢åŠ¨ã€‚å…³æ³¨ä»·æ ¼è¶‹åŠ¿æ˜¯è·åˆ©çš„å…³é”®ï¼",[c("ç»§ç»­å­¦ä¹ ","ä½ äº†è§£äº†ä»·æ ¼è¶‹åŠ¿ç³»ç»Ÿï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ä»·æ ¼æ³¢åŠ¨è·åˆ©ã€‚",u({nextEvent:"tutorial_goal"}))],v({requiredEvents:["tutorial_trading"]}),!1,f.TUTORIAL,1,"/assets/images/events/tutorial_market.jpg"),g("tutorial_goal","æ¸¸æˆç›®æ ‡","æ¸¸æˆä¸­ä½ æœ‰52å‘¨çš„æ—¶é—´æ¥ç§¯ç´¯è´¢å¯Œã€‚æœ€ç»ˆç›®æ ‡æ˜¯è´­ä¹°ä¸€å¥—ç†æƒ³ä½æˆ¿ï¼Œæˆ¿å±‹ç§ç±»ä»ä¾¿å®œçš„å°å…¬å¯“åˆ°è±ªååˆ«å¢…ä¸ç­‰ã€‚ç¥ä½ å¥½è¿ï¼",[c("å¼€å§‹æ¸¸æˆ","ä½ å·²ç»äº†è§£äº†æ¸¸æˆçš„åŸºæœ¬è§„åˆ™ï¼Œç°åœ¨å¯ä»¥å¼€å§‹ä½ çš„ä¹°æˆ¿ä¹‹æ—…äº†ï¼",u({attributes:{businessSkill:1}}))],v({requiredEvents:["tutorial_market"]}),!1,f.TUTORIAL,1,"/assets/images/events/tutorial_goal.jpg"),g("unexpected_inheritance","æ„å¤–ç»§æ‰¿","ä½ æ”¶åˆ°ä¸€ä»½å¾‹å¸ˆå‡½ï¼Œä¸€ä½è¿œæˆ¿äº²æˆšå»ä¸–åå°†ä¸€ç¬”èµ„é‡‘ç•™ç»™äº†ä½ ã€‚è¿™æ˜¯ä¸ªæ„å¤–ä¹‹å–œï¼",[c("æ¥å—ç»§æ‰¿","ä½ æ¥å—äº†è¿™ç¬”æ„å¤–ä¹‹è´¢ï¼Œè·å¾—äº†ä¸€ç¬”å¯è§‚çš„èµ„é‡‘ã€‚",u({money:5e3,attributes:{happiness:1}})),c("æèµ ä¸€éƒ¨åˆ†","ä½ å†³å®šå°†ä¸€éƒ¨åˆ†ç»§æ‰¿çš„é’±æç»™æ…ˆå–„æœºæ„ï¼Œæ„Ÿè§‰å¿ƒæƒ…èˆ’ç•…ã€‚",u({money:3500,attributes:{happiness:2,reputation:2}}))],v({probability:.05,minWeek:15}),!1,f.PERSONAL,.8,"/assets/images/events/inheritance.jpg"),g("business_training","å•†ä¸šåŸ¹è®­","ä½ å‘ç°ä¸€ä¸ªå•†ä¸šæŠ€èƒ½åŸ¹è®­ç­çš„å¹¿å‘Šï¼Œå‚åŠ å¯èƒ½ä¼šæå‡ä½ çš„äº¤æ˜“èƒ½åŠ›ï¼Œä½†éœ€è¦ä»˜å‡ºä¸€å®šè´¹ç”¨å’Œæ—¶é—´ã€‚",[c("å‚åŠ åŸ¹è®­","ä½ æŠ•å…¥æ—¶é—´å’Œé‡‘é’±å‚åŠ äº†åŸ¹è®­ï¼Œå•†ä¸šæŠ€èƒ½å¾—åˆ°äº†æå‡ã€‚",u({money:-1e3,attributes:{businessSkill:2}})),c("è‡ªå­¦å•†ä¸šçŸ¥è¯†","ä½ å†³å®šé€šè¿‡ä¹¦ç±å’Œç½‘ç»œè‡ªå­¦å•†ä¸šçŸ¥è¯†ï¼ŒèŠ±è´¹è¾ƒå°‘ä½†æ•ˆæœæœ‰é™ã€‚",u({money:-200,attributes:{businessSkill:1}})),c("å¿½ç•¥è¿™ä¸ªæœºä¼š","ä½ è®¤ä¸ºå®è·µå‡ºçœŸçŸ¥ï¼Œå†³å®šæŠŠæ—¶é—´å’Œé‡‘é’±ç”¨åœ¨å®é™…äº¤æ˜“ä¸Šã€‚",u({}))],v({probability:.15,minWeek:4,playerMoney:{min:1e3}}),!0,f.PERSONAL,1,"/assets/images/events/business_training.jpg"),g("social_networking","ç¤¾äº¤æœºä¼š","ä½ è¢«é‚€è¯·å‚åŠ ä¸€ä¸ªå•†ä¸šäººå£«çš„ç¤¾äº¤èšä¼šï¼Œè¿™å¯èƒ½æ˜¯ç»“è¯†äººè„‰ã€è·å–ä¿¡æ¯çš„å¥½æœºä¼šã€‚",[c("ç§¯æå‚ä¸","ä½ åœ¨èšä¼šä¸Šç§¯æç¤¾äº¤ï¼Œç»“è¯†äº†å‡ ä½æœ‰ä»·å€¼çš„å•†ä¸šä¼™ä¼´ï¼Œè·å¾—äº†ä¸€äº›å¸‚åœºå†…å¹•ã€‚",u({money:-300,attributes:{socialSkill:1,businessSkill:.5},market:{insiderInfo:!0,duration:2}})),c("ç®€å•å‡ºå¸­","ä½ ä½è°ƒåœ°å‚åŠ äº†èšä¼šï¼Œæ²¡æœ‰ç‰¹åˆ«çš„æ”¶è·ï¼Œä½†ä¹Ÿå¼€é˜”äº†çœ¼ç•Œã€‚",u({money:-300,attributes:{socialSkill:.5}})),c("å©‰æ‹’é‚€è¯·","ä½ å› ä¸ºå¿™äºå…¶ä»–äº‹åŠ¡å©‰æ‹’äº†é‚€è¯·ï¼Œé”™è¿‡äº†è¿™æ¬¡ç¤¾äº¤æœºä¼šã€‚",u({}))],v({probability:.12,minWeek:8,playerMoney:{min:300}}),!0,f.PERSONAL,1,"/assets/images/events/social_networking.jpg"),g("investment_opportunity","æŠ•èµ„æœºä¼š","ä¸€ä¸ªæœ‹å‹å‘ä½ æ¨èäº†ä¸€ä¸ªå°å‹åˆ›ä¸šå…¬å¸çš„æŠ•èµ„æœºä¼šï¼Œå£°ç§°æœ‰é«˜å›æŠ¥ï¼Œä½†é£é™©æœªçŸ¥ã€‚",[c("å¤§ç¬”æŠ•èµ„","ä½ å†³å®šæŠ•å…¥ä¸€å¤§ç¬”èµ„é‡‘ï¼Œå¸Œæœ›è·å¾—é«˜å›æŠ¥ã€‚",u({money:-4e3,nextEvent:"investment_result_big"})),c("å°é¢æŠ•èµ„","ä½ è°¨æ…åœ°æŠ•å…¥ä¸€å°ç¬”èµ„é‡‘ï¼Œé™ä½å¯èƒ½çš„é£é™©ã€‚",u({money:-1500,nextEvent:"investment_result_small"})),c("æ‹’ç»æŠ•èµ„","ä½ å¯¹è¿™ä¸ªæœºä¼šæŒæ€€ç–‘æ€åº¦ï¼Œå†³å®šä¸å†’é™©æŠ•èµ„ã€‚",u({}))],v({probability:.1,minWeek:20,playerMoney:{min:4e3}}),!1,f.PERSONAL,1,"/assets/images/events/investment_opportunity.jpg"),g("investment_result_big","æŠ•èµ„ç»“æœ","å‡ å‘¨åï¼Œä½ æŠ•èµ„çš„åˆ›ä¸šå…¬å¸æœ‰äº†æ–°è¿›å±•...",[c("æŸ¥çœ‹ç»“æœ","ä½ æ»¡æ€€æœŸå¾…åœ°æŸ¥çœ‹æŠ•èµ„ç»“æœ...",u({money:Math.random()>.3?8e3:-2e3,attributes:{businessSkill:1}}))],v({requiredEvents:["investment_opportunity"]}),!1,f.PERSONAL,1,"/assets/images/events/investment_result.jpg"),g("investment_result_small","æŠ•èµ„ç»“æœ","å‡ å‘¨åï¼Œä½ æŠ•èµ„çš„åˆ›ä¸šå…¬å¸æœ‰äº†æ–°è¿›å±•...",[c("æŸ¥çœ‹ç»“æœ","ä½ æ»¡æ€€æœŸå¾…åœ°æŸ¥çœ‹æŠ•èµ„ç»“æœ...",u({money:Math.random()>.2?2500:-500,attributes:{businessSkill:.5}}))],v({requiredEvents:["investment_opportunity"]}),!1,f.PERSONAL,1,"/assets/images/events/investment_result.jpg"),g("clothing_fashion_trend","æ—¶å°šæ½®æµ","ä¸€è‚¡æ–°çš„æ—¶å°šæ½®æµå¸­å·å…¨åŸï¼Œæœè£…ç±»äº§å“çš„éœ€æ±‚çªç„¶å¢åŠ ï¼",[c("å›¤ç§¯æœè£…ç±»å•†å“","ä½ é¢„è§åˆ°è¿™æ˜¯ä¸€ä¸ªå•†æœºï¼Œå†³å®šå¤§é‡è´­å…¥æœè£…ç±»å•†å“ã€‚",u({market:{categoryModifier:"CLOTHING",modifier:1.3,duration:3}})),c("è§‚æœ›å¸‚åœºå˜åŒ–","ä½ å¯¹æ—¶å°šæ½®æµæŒè§‚æœ›æ€åº¦ï¼Œå†³å®šç»§ç»­å…³æ³¨å¸‚åœºå˜åŒ–å†åšå†³å®šã€‚",u({})),c("å‡ºå”®ç°æœ‰æœè£…åº“å­˜","ä½ å†³å®šè¶æœºå‡ºå”®æ‰‹ä¸­çš„æœè£…ç±»å•†å“ï¼Œè·å¾—ä¸€å®šåˆ©æ¶¦ã€‚",u({money:800}),e=>e.player.inventory.some(t=>{const r=e.products.find(i=>i.id===t.productId);return r&&r.category==="CLOTHING"}))],v({probability:.15,minWeek:4}),!0,f.MARKET,1,"/assets/images/events/fashion_trend.jpg"),g("food_shortage","é£Ÿå“çŸ­ç¼º","ç”±äºæ¶åŠ£å¤©æ°”å½±å“ï¼Œå¸‚åœºä¸Šå‡ºç°äº†é£Ÿå“çŸ­ç¼ºçš„æƒ…å†µï¼Œä»·æ ¼å¼€å§‹ä¸Šæ¶¨ã€‚",[c("å¤§é‡è´­å…¥é£Ÿå“","ä½ é¢„è®¡ä»·æ ¼ä¼šè¿›ä¸€æ­¥ä¸Šæ¶¨ï¼Œå†³å®šè¶ç°åœ¨å¤§é‡è´­å…¥é£Ÿå“ç±»å•†å“ã€‚",u({market:{categoryModifiers:{FOOD:1.4},productModifiers:{201:1.6,202:1.5,204:1.7},duration:4}})),c("å¯»æ‰¾æ›¿ä»£é£Ÿå“æ¥æº","ä½ å¼€å§‹å¯»æ‰¾æ›¿ä»£çš„é£Ÿå“æ¥æºï¼Œé¿å…å—åˆ°ä»·æ ¼æ³¢åŠ¨çš„å½±å“ã€‚",u({market:{categoryModifiers:{FOOD:1.2},productModifiers:{201:1.3,202:1.25},duration:2}}))],v({probability:.12,minWeek:8,excludedEvents:["food_shortage"]}),!0,f.MARKET,1,"/assets/images/events/food_shortage.jpg"),g("tech_innovation","ç§‘æŠ€åˆ›æ–°","ä¸€é¡¹çªç ´æ€§çš„ç§‘æŠ€åˆ›æ–°å¼•èµ·äº†å¸‚åœºå…³æ³¨ï¼Œç›¸å…³ç”µå­äº§å“éœ€æ±‚æ¿€å¢ã€‚",[c("æŠ•èµ„ç§‘æŠ€äº§å“","ä½ å†³å®šè´­å…¥ä¸€æ‰¹æœ€æ–°çš„ç§‘æŠ€äº§å“ï¼Œå¸Œæœ›èƒ½å¤Ÿè·å¾—é«˜é¢åˆ©æ¶¦ã€‚",u({market:{categoryModifiers:{ELECTRONICS:1.25},productModifiers:{301:1.4,303:1.35,305:1.45},locationModifiers:{electronics_hub:1.15},duration:3}})),c("ç»§ç»­å…³æ³¨ä¼ ç»Ÿäº§å“","ä½ è®¤ä¸ºç§‘æŠ€åˆ›æ–°åªæ˜¯çŸ­æœŸæ•ˆåº”ï¼Œå†³å®šç»§ç»­ä¸“æ³¨äºä¼ ç»Ÿäº§å“ã€‚",u({market:{productModifiers:{301:1.2,305:1.25},duration:2}}))],v({probability:.15,minWeek:6}),!0,f.MARKET,1,"/assets/images/events/tech_innovation.jpg"),g("supply_chain_disruption","ä¾›åº”é“¾ä¸­æ–­","å…¨çƒä¾›åº”é“¾å‡ºç°ä¸¥é‡ä¸­æ–­ï¼Œå¤šç§å•†å“çš„ä¾›åº”å—åˆ°å½±å“ï¼Œä»·æ ¼å¼€å§‹æ³¢åŠ¨ã€‚",[c("å›¤ç§¯å—å½±å“å•†å“","ä½ å†³å®šè¶ä»·æ ¼è¿˜æœªå¤§å¹…ä¸Šæ¶¨å‰ï¼Œå›¤ç§¯ä¸€æ‰¹å—å½±å“çš„å•†å“ã€‚",u({market:{globalPriceModifier:1.15,duration:5}})),c("è½¬å‘æœ¬åœ°äº§å“","ä½ å†³å®šè½¬å‘é‡‡è´­æœ¬åœ°ç”Ÿäº§çš„å•†å“ï¼Œå‡å°‘å¯¹å…¨çƒä¾›åº”é“¾çš„ä¾èµ–ã€‚",u({market:{globalPriceModifier:1.1,duration:3}})),c("å»¶è¿Ÿé‡‡è´­è®¡åˆ’","ä½ å†³å®šæš‚æ—¶å»¶è¿Ÿé‡‡è´­è®¡åˆ’ï¼Œç­‰å¾…ä¾›åº”é“¾æ¢å¤æ­£å¸¸ã€‚",u({nextEvent:"supply_chain_recovery"}))],v({probability:.1,minWeek:15}),!1,f.MARKET,1.2,"/assets/images/events/supply_chain.jpg"),g("supply_chain_recovery","å…¨çƒä¾›åº”é“¾é€æ­¥æ¢å¤","ç»è¿‡ä¸€æ®µæ—¶é—´çš„è°ƒæ•´ï¼Œå…¨çƒä¾›åº”é“¾å¼€å§‹é€æ­¥æ¢å¤ï¼Œä½†ä¸åŒåœ°åŒºå’Œå•†å“çš„æ¢å¤é€Ÿåº¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚",[c("æŠŠæ¡æ¢å¤æœºä¼š","ä½ åˆ†æäº†å¸‚åœºæ¢å¤è¶‹åŠ¿ï¼Œå†³å®šæœ‰é€‰æ‹©åœ°æŠ•èµ„äºä»·æ ¼å¼€å§‹æ¢å¤æ­£å¸¸çš„å•†å“ã€‚",u({market:{globalPriceModifier:.95,locationModifiers:{commodity_market:.9,electronics_hub:1.1,black_market:.85},locationProductModifiers:{commodity_market:{202:.85,203:.9},electronics_hub:{301:1.2,305:1.15},black_market:{502:.7,503:.75}},duration:3}})),c("ç¨³å¥ç­–ç•¥","ä½ å†³å®šé‡‡å–ç¨³å¥ç­–ç•¥ï¼Œå¹³è¡¡è°ƒæ•´ä½ çš„åº“å­˜å’Œäº¤æ˜“è®¡åˆ’ã€‚",u({market:{globalPriceModifier:.98,locationModifiers:{commodity_market:.95,premium_mall:.95,second_hand_market:.95},duration:2}}))],v({requiredEvents:["supply_chain_disruption","old_supply_chain_disruption"]}),!1,f.MARKET,1,"/assets/images/events/supply_recovery.jpg"),g("seasonal_sales","å­£èŠ‚æ€§ä¿ƒé”€","å¹´åº¦å¤§ä¿ƒé”€æ´»åŠ¨å¼€å§‹äº†ï¼Œå„å¤§å•†å®¶çº·çº·é™ä»·å¸å¼•é¡¾å®¢ã€‚è¿™æ˜¯å›¤è´§çš„å¥½æ—¶æœºï¼",[c("å¤§é‡é‡‡è´­","ä½ å†³å®šåˆ©ç”¨ä¿ƒé”€æ´»åŠ¨å¤§é‡é‡‡è´­å„ç±»å•†å“ï¼Œä¸ºæœªæ¥çš„é”€å”®åšå‡†å¤‡ã€‚",u({market:{globalPriceModifier:.75,duration:2}})),c("é€‰æ‹©æ€§é‡‡è´­","ä½ æœ‰é€‰æ‹©åœ°è´­ä¹°ä¸€äº›ç‰¹ä»·å•†å“ï¼Œé¿å…èµ„é‡‘è¿‡åº¦å ç”¨ã€‚",u({market:{globalPriceModifier:.85,duration:1}})),c("è·³è¿‡ä¿ƒé”€","ä½ è®¤ä¸ºä¿ƒé”€å•†å“è´¨é‡å¯èƒ½ä¸é«˜ï¼Œå†³å®šè·³è¿‡è¿™æ¬¡æ´»åŠ¨ã€‚",u({}))],v({probability:.2,minWeek:12,maxWeek:40}),!0,f.MARKET,1,"/assets/images/events/seasonal_sales.jpg"),g("market_discount","å¤§å®—äº¤æ˜“ä¼˜æƒ ","å¤§å®—å•†å“äº¤æ˜“æ‰€ä»Šå¤©æ¨å‡ºç‰¹åˆ«ä¼˜æƒ ï¼Œæ‰€æœ‰å•†å“éƒ½æœ‰é¢å¤–æŠ˜æ‰£ï¼",[c("å¤§é‡é‡‡è´­","ä½ å†³å®šåˆ©ç”¨è¿™ä¸ªæœºä¼šå¤§é‡é‡‡è´­å„ç±»å•†å“ï¼Œä¸ºæœªæ¥çš„é”€å”®åšå‡†å¤‡ã€‚",u({market:{locationModifiers:{commodity_market:.8},categoryModifiers:{FOOD:.75,DAILY:.7},productModifiers:{201:.6,202:.65,101:.6},duration:1},forceLocationChange:!0,targetLocation:"commodity_market"})),c("æœ‰é€‰æ‹©åœ°è´­ä¹°","ä½ ä»”ç»†æŒ‘é€‰ï¼Œåªè´­ä¹°é‚£äº›çœŸæ­£åˆ’ç®—çš„å•†å“ã€‚",u({market:{locationModifiers:{commodity_market:.9},productModifiers:{202:.7,203:.75},duration:1},forceLocationChange:!0,targetLocation:"commodity_market"})),c("æ”¾å¼ƒæ­¤æ¬¡æœºä¼š","ä½ è§‰å¾—ä»·æ ¼ä¼˜æƒ å¹…åº¦ä¸å¤Ÿå¤§ï¼Œå†³å®šä¸å‚ä¸æ­¤æ¬¡ä¼˜æƒ æ´»åŠ¨ã€‚",u({market:{locationModifiers:{commodity_market:.95},duration:1}}))],v({locations:["commodity_market"],probability:.25}),!0,f.LOCATION,1,"/assets/images/events/wholesale_discount.jpg"),g("mall_event","å•†åŸåäººæ´»åŠ¨","é«˜ç«¯å•†åŸä¸¾åŠäº†ä¸€åœºåäººè§é¢ä¼šï¼Œå¸å¼•äº†å¤§é‡äººæµã€‚å•†åœºå†…çš„å•†å“ä»·æ ¼ä¸´æ—¶ä¸Šè°ƒã€‚",[c("è¶æœºè®¾æ‘Šé”€å”®","ä½ åœ¨å•†åŸå¤–è®¾ç½®ä¸´æ—¶æ‘Šä½ï¼Œåˆ©ç”¨äººæµé‡å¢åŠ é”€å”®é¢ã€‚",u({money:1200,inventory:[{productId:"random",quantity:-5}]}),e=>e.player.inventoryUsed>=5),c("é¿å¼€äººç¾¤","ä½ å†³å®šé¿å¼€æ‹¥æŒ¤çš„äººç¾¤ï¼Œæ”¹å¤©å†æ¥è´­ç‰©ã€‚",u({forceLocationChange:!0}))],v({locations:["premium_mall"],probability:.2}),!0,f.LOCATION,1,"/assets/images/events/mall_celebrity.jpg"),g("electronics_expo","ç”µå­ç§‘æŠ€åŸå±•é”€ä¼š","ç”µå­ç§‘æŠ€åŸä¸¾åŠå¤§å‹æ•°ç äº§å“å±•é”€ä¼šï¼Œæœ€æ–°æ¬¾æ‰‹æœºå’Œæ™ºèƒ½æ‰‹è¡¨éƒ½æœ‰ç‰¹åˆ«ä¼˜æƒ ï¼è¿™æ˜¯é‡‡è´­ç”µå­äº§å“çš„ç»ä½³æ—¶æœºã€‚",[c("å‚è§‚å±•ä¼š","ä½ èŠ±è´¹ä¸€äº›æ—¶é—´å‚è§‚å±•é”€ä¼šï¼Œäº†è§£æœ€æ–°çš„ç§‘æŠ€è¶‹åŠ¿ã€‚",u({money:-100,market:{locationModifiers:{electronics_hub:.95},duration:1}})),c("é‡‡è´­ç‰¹ä»·ç”µå­äº§å“","ä½ å†³å®šæŠ•èµ„è´­ä¹°å±•ä¼šä¸Šçš„ç‰¹ä»·æ‰‹æœºå’Œæ™ºèƒ½æ‰‹è¡¨ï¼ŒæœŸæœ›èƒ½åœ¨ä»·æ ¼ä¸Šæ¶¨å‰è½¬å”®è·åˆ©ã€‚",u({money:-2e3,market:{locationProductModifiers:{electronics_hub:{301:.7,305:.75}},duration:2}}),e=>e.player.money>=2e3)],v({locations:["electronics_hub"],probability:.3}),!0,f.LOCATION,1,"/assets/images/events/electronics_expo.jpg"),g("market_inspection","å¸‚åœºæ£€æŸ¥","å¸‚åœºç®¡ç†äººå‘˜çªç„¶æ¥åˆ°æŠ˜æ‰£å¸‚åœºè¿›è¡Œæ£€æŸ¥ï¼ŒæŸ¥éªŒæ‘Šä½åˆè§„æ€§ï¼ä½ éœ€è¦å¿«é€Ÿå†³å®šå¦‚ä½•åº”å¯¹ã€‚",[c("é…åˆæ£€æŸ¥","ä½ ä¸»åŠ¨é…åˆæ£€æŸ¥ï¼Œå±•ç¤ºè‡ªå·±çš„åˆè§„ç»è¥ï¼Œè·å¾—äº†ç®¡ç†äººå‘˜çš„å¥½æ„Ÿã€‚",u({money:-50,attributes:{businessSkill:1}})),c("æš‚æ—¶ç¦»åœº","ä½ å†³å®šæš‚æ—¶æ”¶æ‘Šç¦»åœºï¼Œé¿å¼€è¿™æ¬¡æ£€æŸ¥ï¼Œä½†æŸå¤±äº†ä¸€å¤©çš„ç”Ÿæ„ã€‚",u({money:-300,attributes:{businessSkill:-1}}))],v({locations:["discount_market"],probability:.25}),!0,f.LOCATION,1,"/assets/images/events/market_inspection.jpg"),g("business_competition","å•†ä¸šç«èµ›","å½“åœ°ä¸¾åŠäº†ä¸€åœºå•†ä¸šæŠ€èƒ½ç«èµ›ï¼Œæµ‹è¯•å‚èµ›è€…çš„å•†ä¸šå¤´è„‘å’Œå†³ç­–èƒ½åŠ›ã€‚è¿™å¯èƒ½æ˜¯å±•ç¤ºä½ å®åŠ›çš„å¥½æœºä¼šï¼",[c("å…¨åŠ›å‚èµ›","ä½ å†³å®šå…¨åŠ›ä»¥èµ´å‚åŠ æ¯”èµ›ï¼Œå¸Œæœ›èƒ½è·å¾—å¥½åæ¬¡ã€‚",u({money:e=>{const t=e.player.attributes.businessSkill||0;return t>=8?5e3:t>=5?2e3:t>=3?500:0},attributes:{businessSkill:1,reputation:1}})),c("éšä¾¿å‚ä¸","ä½ æŠ±ç€å­¦ä¹ çš„æ€åº¦å‚åŠ æ¯”èµ›ï¼Œä¸æœŸæœ›è·å¥–ã€‚",u({money:200,attributes:{businessSkill:.5}})),c("æ”¾å¼ƒå‚èµ›","ä½ è®¤ä¸ºè‡ªå·±è¿˜æ²¡å‡†å¤‡å¥½ï¼Œå†³å®šæ”¾å¼ƒè¿™æ¬¡æ¯”èµ›æœºä¼šã€‚",u({}))],v({probability:.08,minWeek:25}),!1,f.PERSONAL,1,"/assets/images/events/business_competition.jpg"),g("market_insider_info","å†…å¹•æ¶ˆæ¯","ä½ çš„ä¸€ä¸ªæœ‹å‹é€éœ²ç»™ä½ ä¸€ä¸ªå¸‚åœºå†…å¹•æ¶ˆæ¯ï¼Œæš—ç¤ºæŸç±»å•†å“å³å°†å¤§æ¶¨ä»·ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå‘è´¢çš„å¥½æœºä¼šï¼",[c("ç›¸ä¿¡æ¶ˆæ¯å¹¶è¡ŒåŠ¨","ä½ ç›¸ä¿¡è¿™ä¸ªå†…å¹•æ¶ˆæ¯ï¼Œå†³å®šæŠ•å…¥å¤§é‡èµ„é‡‘è´­ä¹°ç›¸å…³å•†å“ã€‚",u({nextEvent:"insider_info_result"})),c("å°è§„æ¨¡è¯•æ°´","ä½ ä¸ç¡®å®šæ¶ˆæ¯çš„å¯é æ€§ï¼Œå†³å®šå°è§„æ¨¡æŠ•èµ„ä»¥é™ä½é£é™©ã€‚",u({nextEvent:"insider_info_result_small"})),c("å¿½ç•¥æ¶ˆæ¯","ä½ å¯¹è¿™ç§å†…å¹•æ¶ˆæ¯æŒæ€€ç–‘æ€åº¦ï¼Œå†³å®šä¸é‡‡å–ä»»ä½•è¡ŒåŠ¨ã€‚",u({}))],v({probability:.1,minWeek:15,playerMoney:{min:3e3}}),!1,f.MARKET,1,"/assets/images/events/insider_info.jpg"),g("insider_info_result","å†…å¹•æ¶ˆæ¯ç»“æœ","ä¸€å‘¨åï¼Œä½ ç­‰å¾…çœ‹åˆ°å†…å¹•æ¶ˆæ¯çš„ç»“æœ...",[c("æŸ¥çœ‹ç»“æœ","ä½ æ»¡æ€€æœŸå¾…åœ°æŸ¥çœ‹å¸‚åœºå˜åŒ–ã€‚",u({market:Math.random()>.3?{categoryModifier:["LUXURY","ELECTRONICS","CLOTHING"][Math.floor(Math.random()*3)],modifier:1.8,duration:2}:{globalPriceModifier:.9,duration:1}}))],v({requiredEvents:["market_insider_info"]}),!1,f.MARKET,1,"/assets/images/events/insider_result.jpg"),g("insider_info_result_small","å†…å¹•æ¶ˆæ¯å°è§„æ¨¡è¯•æ°´ç»“æœ","ä¸€å‘¨åï¼Œä½ ç­‰å¾…çœ‹åˆ°å†…å¹•æ¶ˆæ¯çš„ç»“æœ...",[c("æŸ¥çœ‹ç»“æœ","ä½ æŸ¥çœ‹å°è§„æ¨¡æŠ•èµ„çš„ç»“æœã€‚",u({market:Math.random()>.3?{categoryModifier:["LUXURY","ELECTRONICS","CLOTHING"][Math.floor(Math.random()*3)],modifier:1.5,duration:1}:{globalPriceModifier:.95,duration:1}}))],v({requiredEvents:["market_insider_info"]}),!1,f.MARKET,1,"/assets/images/events/insider_result.jpg"),g("real_estate_opportunity","æˆ¿äº§æœºä¼š","ä½ å¶ç„¶å¬è¯´æœ‰ä¸€å¤„æˆ¿äº§å³å°†ä»¥ä½äºå¸‚åœºä»·çš„ä»·æ ¼å‡ºå”®ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªéš¾å¾—çš„ä¹°æˆ¿æœºä¼šã€‚",[c("ç«‹å³è€ƒå¯Ÿ","ä½ å†³å®šç«‹å³å»è€ƒå¯Ÿè¿™å¤„æˆ¿äº§ï¼Œçœ‹çœ‹æ˜¯å¦å€¼å¾—è´­ä¹°ã€‚",u({nextEvent:"real_estate_inspection"})),c("å’¨è¯¢ä¸“ä¸šäººå£«","ä½ å†³å®šå…ˆå’¨è¯¢ä¸€ä½æˆ¿äº§ä¸“å®¶ï¼Œè·å–ä¸“ä¸šæ„è§ã€‚",u({money:-500,nextEvent:"real_estate_expert_advice"}),e=>e.player.money>=500),c("å¿½ç•¥è¿™ä¸ªæ¶ˆæ¯","ä½ è®¤ä¸ºç›®å‰è¿˜æ²¡æœ‰å‡†å¤‡å¥½è´­æˆ¿ï¼Œå†³å®šå¿½ç•¥è¿™ä¸ªæ¶ˆæ¯ã€‚",u({}))],v({probability:.1,minWeek:30,playerMoney:{min:5e4}}),!1,f.STORY,1,"/assets/images/events/real_estate_opportunity.jpg"),g("real_estate_inspection","æˆ¿äº§è€ƒå¯Ÿ","ä½ ä»”ç»†è€ƒå¯Ÿäº†è¿™å¤„æˆ¿äº§ï¼Œå‘ç°å®ƒç¡®å®ä½äºå¸‚åœºä»·ï¼Œä½†éœ€è¦ä¸€äº›ç»´ä¿®ã€‚",[c("ä»¥ä¼˜æƒ ä»·è´­ä¹°","ä½ å†³å®šæŠ“ä½è¿™ä¸ªæœºä¼šï¼Œä»¥ä¼˜æƒ ä»·æ ¼è´­ä¹°è¿™å¤„æˆ¿äº§ã€‚",u({money:-6e4,attributes:{housingValue:8e4}}),e=>e.player.money>=6e4),c("ç»§ç»­ç­‰å¾…æ›´å¥½çš„æœºä¼š","ä½ è®¤ä¸ºè¿™å¤„æˆ¿äº§ä¸å¤Ÿå®Œç¾ï¼Œå†³å®šç»§ç»­ç­‰å¾…æ›´å¥½çš„æœºä¼šã€‚",u({}))],v({requiredEvents:["real_estate_opportunity"]}),!1,f.STORY,1,"/assets/images/events/real_estate_inspection.jpg"),g("real_estate_expert_advice","ä¸“å®¶å»ºè®®","æˆ¿äº§ä¸“å®¶ä»”ç»†åˆ†æåå‘Šè¯‰ä½ ï¼Œè¿™å¤„æˆ¿äº§ä½ç½®å¾ˆå¥½ï¼Œä½†ç»´ä¿®æˆæœ¬å¯èƒ½æ¯”é¢„æœŸé«˜ã€‚",[c("æ¥å—å»ºè®®å¹¶è´­ä¹°","ä½ æ¥å—ä¸“å®¶å»ºè®®å¹¶å†³å®šè´­ä¹°è¿™å¤„æˆ¿äº§ï¼ŒåŒæ—¶ä¸ºç»´ä¿®é¢„ç•™èµ„é‡‘ã€‚",u({money:-65e3,attributes:{housingValue:85e3}}),e=>e.player.money>=65e3),c("æ”¾å¼ƒè¿™æ¬¡æœºä¼š","ä¸“å®¶çš„åˆ†æè®©ä½ æ„è¯†åˆ°é£é™©ï¼Œä½ å†³å®šæ”¾å¼ƒè¿™æ¬¡è´­æˆ¿æœºä¼šã€‚",u({}))],v({requiredEvents:["real_estate_opportunity"]}),!1,f.STORY,1,"/assets/images/events/real_estate_expert.jpg"),g("housing_market_boom","æˆ¿å¸‚ç¹è£","æœ€è¿‘æˆ¿åœ°äº§å¸‚åœºå¼‚å¸¸ç«çˆ†ï¼Œæˆ¿ä»·æ™®éä¸Šæ¶¨ã€‚ç°åœ¨å¯èƒ½æ˜¯è´­æˆ¿æˆ–å‡ºå”®ç°æœ‰æˆ¿äº§çš„å¥½æ—¶æœºã€‚",[c("æŠ“ç´§è´­æˆ¿","ä½ è®¤ä¸ºæˆ¿ä»·è¿˜ä¼šç»§ç»­ä¸Šæ¶¨ï¼Œå†³å®šè¶ç°åœ¨æŠ“ç´§è´­æˆ¿ã€‚",u({market:{houseMarketModifier:1.1,duration:4}})),c("å‡ºå”®ç°æœ‰æˆ¿äº§","ä½ å†³å®šè¶æˆ¿ä»·é«˜ç‚¹å‡ºå”®ç°æœ‰æˆ¿äº§ï¼Œè·å¾—å¯è§‚åˆ©æ¶¦ã€‚",u({money:e=>(e.player.attributes.housingValue||0)*1.15,attributes:{housingValue:0}}),e=>e.player.attributes.housingValue>0),c("è§‚æœ›å¸‚åœº","ä½ è®¤ä¸ºç›®å‰æˆ¿ä»·è¿‡é«˜ï¼Œå¯èƒ½æ˜¯æ³¡æ²«ï¼Œå†³å®šç»§ç»­è§‚æœ›ã€‚",u({}))],v({probability:.1,minWeek:35}),!0,f.MARKET,1,"/assets/images/events/housing_boom.jpg"),g("housing_market_crash","æˆ¿å¸‚å´©ç›˜","çªå‘ç»æµå±æœºå¯¼è‡´æˆ¿åœ°äº§å¸‚åœºæ€¥å‰§é™æ¸©ï¼Œæˆ¿ä»·å¼€å§‹ä¸‹è·Œã€‚è¿™å¯èƒ½æ˜¯ä½ä»·è´­å…¥çš„æœºä¼šï¼Œä¹Ÿå¯èƒ½å¸¦æ¥é£é™©ã€‚",[c("é€†åŠ¿è´­æˆ¿","ä½ è®¤ä¸ºè¿™æ˜¯éš¾å¾—çš„ä½ä»·è´­æˆ¿æœºä¼šï¼Œå†³å®šé€†åŠ¿è€Œä¸Šã€‚",u({market:{houseMarketModifier:.8,duration:3}})),c("è§‚æœ›å¸‚åœº","ä½ å†³å®šç­‰å¾…å¸‚åœºè¿›ä¸€æ­¥ç¨³å®šåå†åšå†³å®šã€‚",u({market:{houseMarketModifier:.85,duration:2}}))],v({probability:.08,minWeek:40,excludedEvents:["housing_market_boom"]}),!1,f.MARKET,1,"/assets/images/events/housing_crash.jpg"),g("business_partner_proposal","å•†ä¸šåˆä½œæè®®","ä¸€ä½ç»éªŒä¸°å¯Œçš„å•†äººæè®®ä¸ä½ åˆä½œå¼€å±•æ›´å¤§è§„æ¨¡çš„è´¸æ˜“ï¼Œä½†éœ€è¦ä½ æŠ•å…¥ä¸€ç¬”èµ„é‡‘ä½œä¸ºå¯åŠ¨èµ„æœ¬ã€‚",[c("æ¥å—åˆä½œ","ä½ å†³å®šä¸è¿™ä½å•†äººåˆä½œï¼ŒæŠ•å…¥ä¸€ç¬”èµ„é‡‘å¼€å±•å¤§è§„æ¨¡è´¸æ˜“ã€‚",u({money:-1e4,nextEvent:"business_partnership_result"}),e=>e.player.money>=1e4),c("å°è§„æ¨¡è¯•æ°´","ä½ å¯¹åˆä½œæŒè°¨æ…æ€åº¦ï¼Œå†³å®šå…ˆå°è§„æ¨¡æŠ•èµ„æµ‹è¯•ã€‚",u({money:-3e3,nextEvent:"business_partnership_small_result"}),e=>e.player.money>=3e3),c("æ‹’ç»åˆä½œ","ä½ å¯¹è¿™ä¸ªåˆä½œæè®®æŒæ€€ç–‘æ€åº¦ï¼Œå†³å®šå©‰æ‹’ã€‚",u({}))],v({probability:.1,minWeek:30,playerMoney:{min:1e4},attributes:{businessSkill:{min:5}}}),!1,f.STORY,1,"/assets/images/events/business_partner.jpg"),g("business_partnership_result","å•†ä¸šåˆä½œç»“æœ","å‡ å‘¨è¿‡å»äº†ï¼Œä½ ä¸å•†ä¸šä¼™ä¼´çš„åˆä½œé¡¹ç›®æœ‰äº†ç»“æœ...",[c("æŸ¥çœ‹ç»“æœ","ä½ æœŸå¾…åœ°æŸ¥çœ‹åˆä½œçš„æˆæœã€‚",u({money:e=>{const t=e.player.attributes.businessSkill||0,r=15e3,i=t*1e3;return r+i},attributes:{businessSkill:2}}))],v({requiredEvents:["business_partner_proposal"]}),!1,f.STORY,1,"/assets/images/events/partnership_result.jpg"),g("business_partnership_small_result","å°è§„æ¨¡åˆä½œç»“æœ","å‡ å‘¨è¿‡å»äº†ï¼Œä½ çš„å°è§„æ¨¡åˆä½œé¡¹ç›®æœ‰äº†ç»“æœ...",[c("æŸ¥çœ‹ç»“æœ","ä½ æŸ¥çœ‹å°è§„æ¨¡åˆä½œçš„æˆæœã€‚",u({money:e=>{const t=e.player.attributes.businessSkill||0,r=4500,i=t*300;return r+i},attributes:{businessSkill:1}}))],v({requiredEvents:["business_partner_proposal"]}),!1,f.STORY,1,"/assets/images/events/partnership_result.jpg"),g("final_opportunity","æœ€ç»ˆæœºä¼š","æ¸¸æˆæ¥è¿‘å°¾å£°ï¼Œå¸‚åœºå‡ºç°äº†ä¸€æ¬¡éš¾å¾—çš„ä»·æ ¼æ³¢åŠ¨ï¼Œè¿™å¯èƒ½æ˜¯ä½ æœ€åçš„å‘è´¢æœºä¼šï¼",[c("å…¨åŠ›æŠ•å…¥","ä½ å†³å®šå°†å¤§éƒ¨åˆ†èµ„é‡‘æŠ•å…¥åˆ°è¿™æ¬¡æœºä¼šä¸­ï¼Œå¸Œæœ›èƒ½å®ç°æœ€åçš„ç¿»ç›˜ã€‚",u({market:{globalPriceModifier:.6,duration:1},nextEvent:"final_market_surge"})),c("è°¨æ…æŠ•èµ„","ä½ å†³å®šè°¨æ…æŠ•èµ„ï¼Œé¿å…åœ¨æœ€åå…³å¤´å†’è¿‡å¤§é£é™©ã€‚",u({market:{globalPriceModifier:.8,duration:1}}))],v({minWeek:45,probability:.5}),!1,f.STORY,2,"/assets/images/events/final_opportunity.jpg"),g("final_market_surge","æœ€ç»ˆå¸‚åœºå¤§æ¶¨","å°±åœ¨æ¸¸æˆå³å°†ç»“æŸå‰ï¼Œå¸‚åœºå‡ºç°äº†æˆå‰§æ€§çš„ä»·æ ¼ä¸Šæ¶¨ï¼è¿™æ˜¯æœ€åçš„å˜ç°æœºä¼šã€‚",[c("å…¨éƒ¨å–å‡º","ä½ å†³å®šè¶è¿™æ¬¡ä»·æ ¼ä¸Šæ¶¨å…¨éƒ¨å–å‡ºåº“å­˜ï¼Œæœ€å¤§åŒ–ä½ çš„åˆ©æ¶¦ã€‚",u({market:{globalPriceModifier:2,duration:1}})),c("éƒ¨åˆ†å–å‡º","ä½ å†³å®šå–å‡ºéƒ¨åˆ†åº“å­˜ï¼Œä¿ç•™ä¸€äº›ä»¥é˜²åå¸‚ç»§ç»­ä¸Šæ¶¨ã€‚",u({market:{globalPriceModifier:1.7,duration:1}}))],v({requiredEvents:["final_opportunity"],minWeek:48}),!1,f.STORY,1,"/assets/images/events/market_surge.jpg"),g("property_expo","æˆ¿äº§å±•è§ˆä¼š","åŸå¸‚ä¸­å¿ƒæ­£åœ¨ä¸¾åŠä¸€åœºå¤§å‹æˆ¿äº§å±•è§ˆä¼šï¼Œå„ä¸ªå¼€å‘å•†éƒ½å¸¦æ¥äº†ä»–ä»¬æœ€æ–°çš„æ¥¼ç›˜é¡¹ç›®ã€‚è¿™æ˜¯äº†è§£å¸‚åœºåŠ¨æ€å’Œè·å–ä¼˜æƒ ä¿¡æ¯çš„å¥½æœºä¼šã€‚",[c("å‚è§‚å±•è§ˆä¼š","ä½ å†³å®šèŠ±æ—¶é—´å‚è§‚æˆ¿äº§å±•è§ˆä¼šï¼Œäº†è§£å¸‚åœºæœ€æ–°åŠ¨æ€ã€‚",u({money:-200,nextEvent:"property_expo_discover"}),e=>e.player.money>=200),c("ä¸ä¸­ä»‹äº¤è°ˆ","ä½ å†³å®šåªä¸å‡ ä½æˆ¿äº§ä¸­ä»‹äº¤è°ˆï¼Œä¸èŠ±å¤ªå¤šæ—¶é—´ã€‚",u({nextEvent:"property_broker_info"})),c("å¿½ç•¥è¿™ä¸ªæ´»åŠ¨","ä½ ç°åœ¨æ²¡æœ‰è´­æˆ¿è®¡åˆ’ï¼Œå†³å®šå¿½ç•¥è¿™æ¬¡å±•è§ˆä¼šã€‚",u({}))],v({probability:.15,minWeek:15,playerMoney:{min:3e4}}),!1,f.STORY,1,"/assets/images/events/property_expo.jpg"),g("property_expo_discover","å±•ä¼šå‘ç°","åœ¨å±•è§ˆä¼šä¸Šï¼Œä½ å‘ç°ä¸€ä¸ªæ­£åœ¨é¢„å”®çš„æ–°æ¥¼ç›˜ï¼Œå¼€å‘å•†æä¾›äº†ç‹¬ç‰¹çš„æŠ˜æ‰£æ–¹æ¡ˆã€‚é”€å”®äººå‘˜å‘Šè¯‰ä½ ï¼Œå¦‚æœç°åœ¨é¢„è®¢ï¼Œå¯ä»¥è·å¾—æ¯”å¸‚åœºä»·ä½15%çš„ä¼˜æƒ ã€‚",[c("é¢„ä»˜å®šé‡‘","ä½ å†³å®šæŠ“ä½è¿™ä¸ªæœºä¼šï¼Œé¢„ä»˜10%çš„å®šé‡‘é”å®šè¿™ä¸ªä¼˜æƒ ã€‚",u({money:e=>-1e4,nextEvent:"property_investment_result"}),e=>e.player.money>=1e4),c("è®°å½•ä¿¡æ¯","ä½ è®°ä¸‹äº†è¿™ä¸ªæ¥¼ç›˜çš„ä¿¡æ¯ï¼Œä½†å†³å®šå…ˆä¸ä»˜å®šé‡‘ï¼Œå›å»å†è€ƒè™‘ã€‚",u({nextEvent:"property_later_decision"})),c("å¯»æ‰¾å…¶ä»–æœºä¼š","ä½ å¯¹è¿™ä¸ªæ¥¼ç›˜ä¸å¤ªæ„Ÿå…´è¶£ï¼Œå†³å®šç»§ç»­å¯»æ‰¾å…¶ä»–æœºä¼šã€‚",u({}))],v({requiredEvents:["property_expo"]}),!1,f.STORY,1,"/assets/images/events/property_discover.jpg"),g("property_investment_result","æˆ¿äº§æŠ•èµ„ç»“æœ","å‡ å‘¨åï¼Œä½ æ”¶åˆ°å¼€å‘å•†çš„é€šçŸ¥ï¼Œä½ é¢„è®¢çš„æ¥¼ç›˜é¡¹ç›®è¿›å±•é¡ºåˆ©ï¼Œå·²ç»å¼€å§‹æ­£å¼å»ºè®¾ã€‚æ ¹æ®æœ€æ–°çš„å¸‚åœºè¯„ä¼°ï¼Œç±»ä¼¼æˆ¿äº§çš„ä»·å€¼å·²ç»ä¸Šæ¶¨äº†ã€‚",[c("ç»§ç»­æŒæœ‰","ä½ å†³å®šç»§ç»­æŒæœ‰è¿™é¡¹æŠ•èµ„ï¼ŒæœŸå¾…æˆ¿äº§å®Œå·¥åçš„å‡å€¼ã€‚",u({attributes:{housingInvestment:1e4,propertyValue:1e5},nextEvent:"property_completion_notice"})),c("è½¬è®©æŠ•èµ„","ä½ å†³å®šè¶ç€å¸‚åœºä¸Šæ¶¨ï¼Œå°†ä½ çš„é¢„è´­æƒè½¬è®©ç»™å…¶ä»–ä¹°å®¶ï¼Œè·å–å¿«é€Ÿåˆ©æ¶¦ã€‚",u({money:13e3,attributes:{housingInvestment:0,propertyValue:0}}))],v({requiredEvents:["property_expo_discover"]}),!1,f.STORY,1,"/assets/images/events/property_investment.jpg"),g("property_completion_notice","æˆ¿äº§å®Œå·¥é€šçŸ¥","ä½ æ”¶åˆ°äº†å¼€å‘å•†çš„é€šçŸ¥ï¼Œä½ æŠ•èµ„çš„æˆ¿äº§é¡¹ç›®å·²ç»å®Œå·¥ï¼Œç°åœ¨ä»·å€¼çº¦120,000å…ƒã€‚ä½ å¯ä»¥é€‰æ‹©æ”¯ä»˜å‰©ä½™çš„è´­æˆ¿æ¬¾å®Œæˆè´­ä¹°ï¼Œæˆ–è€…å‡ºå”®ä½ çš„é¢„è´­æƒã€‚",[c("å®Œæˆè´­ä¹°","ä½ å†³å®šæ”¯ä»˜å‰©ä½™çš„è´­æˆ¿æ¬¾ï¼Œå®Œæˆè¿™å¤„æˆ¿äº§çš„è´­ä¹°ã€‚",u({money:-9e4,attributes:{housingInvestment:0,propertyValue:12e4,hasHouse:!0},nextEvent:"new_house_celebration"}),e=>e.player.money>=9e4),c("å‡ºå”®é¢„è´­æƒ","ä½ å†³å®šå‡ºå”®ä½ çš„é¢„è´­æƒï¼Œè·å–æŠ•èµ„å›æŠ¥ã€‚",u({money:25e3,attributes:{housingInvestment:0,propertyValue:0}})),c("ç»§ç»­ç­‰å¾…","ä½ è®¤ä¸ºæˆ¿äº§ä»·å€¼è¿˜ä¼šä¸Šæ¶¨ï¼Œå†³å®šç»§ç»­æŒæœ‰ï¼Œä½†æš‚ä¸ä»˜æ¬¾ã€‚",u({nextEvent:"property_market_change"}))],v({requiredEvents:["property_investment_result"],minWeek:35}),!1,f.STORY,1,"/assets/images/events/property_completion.jpg"),g("property_market_change","æˆ¿äº§å¸‚åœºå˜åŒ–","ç”±äºå¸‚åœºæ¡ä»¶å˜åŒ–ï¼Œä½ æŒæœ‰çš„æˆ¿äº§é¢„è´­æƒä»·å€¼å‡ºç°äº†æ³¢åŠ¨ã€‚",[c("æŸ¥çœ‹å¸‚åœºå˜åŒ–","ä½ å¯†åˆ‡å…³æ³¨å¸‚åœºåŠ¨æ€ï¼ŒæŸ¥çœ‹ä½ çš„æŠ•èµ„å—åˆ°äº†ä»€ä¹ˆå½±å“ã€‚",u({attributes:{propertyValue:Math.random()>.5?13e4:11e4}}))],v({requiredEvents:["property_completion_notice"]}),!1,f.MARKET,1,"/assets/images/events/market_change.jpg"),g("new_house_celebration","æ–°æˆ¿åº†ç¥","ä½ ç»ˆäºæ‹¥æœ‰äº†è‡ªå·±çš„æˆ¿äº§ï¼è¿™æ˜¯äººç”Ÿçš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚æœ‹å‹ä»¬æè®®ä¸¾åŠä¸€ä¸ªå°å‹èšä¼šæ¥åº†ç¥è¿™ä¸€æ—¶åˆ»ã€‚",[c("ä¸¾åŠåº†ç¥æ´¾å¯¹","ä½ å†³å®šä¸¾åŠä¸€ä¸ªåº†ç¥æ´¾å¯¹ï¼Œé‚€è¯·æœ‹å‹ä»¬ä¸€èµ·åˆ†äº«è¿™ä¸ªå–œæ‚¦æ—¶åˆ»ã€‚",u({money:-2e3,attributes:{happiness:5,socialNetwork:2}}),e=>e.player.money>=2e3),c("ç®€å•åº†ç¥","ä½ å†³å®šç®€å•åœ°è¯·å‡ ä¸ªå¥½å‹åƒé¡¿é¥­åº†ç¥ä¸€ä¸‹ã€‚",u({money:-500,attributes:{happiness:3}}),e=>e.player.money>=500),c("ç‹¬è‡ªæ¬£èµ","ä½ å†³å®šç‹¬è‡ªä¸€äººå¥½å¥½æ¬£èµä½ çš„æ–°å®¶ï¼Œäº«å—è¿™ä»½æˆå°±æ„Ÿã€‚",u({attributes:{happiness:2}}))],v({requiredEvents:["property_completion_notice"]}),!1,f.PERSONAL,1,"/assets/images/events/house_celebration.jpg"),g("property_broker_info","æˆ¿äº§ä¸­ä»‹ä¿¡æ¯","ä¸æˆ¿äº§ä¸­ä»‹äº¤è°ˆåï¼Œä½ è·å¾—äº†ä¸€äº›å…³äºå½“å‰æˆ¿å¸‚çš„å†…éƒ¨ä¿¡æ¯ã€‚ä¸­ä»‹è¡¨ç¤ºï¼ŒæŸäº›ç‰¹å®šåŒºåŸŸçš„æˆ¿äº§å¯èƒ½å³å°†å‡å€¼ã€‚",[c("æ·±å…¥äº†è§£","ä½ å†³å®šä¸ä¸­ä»‹è¿›ä¸€æ­¥äº¤æµï¼Œäº†è§£æ›´å¤šç»†èŠ‚ã€‚",u({money:-500,nextEvent:"property_insider_tip"}),e=>e.player.money>=500),c("ä¿æŒå…³æ³¨","ä½ å¯¹è¿™äº›ä¿¡æ¯è¡¨ç¤ºæ„Ÿè°¢ï¼Œä½†å†³å®šæš‚æ—¶åªæ˜¯ä¿æŒå…³æ³¨ã€‚",u({}))],v({requiredEvents:["property_expo"]}),!1,f.STORY,1,"/assets/images/events/broker_info.jpg"),g("property_insider_tip","å†…éƒ¨æ¶ˆæ¯","æ”¯ä»˜å’¨è¯¢è´¹åï¼Œä¸­ä»‹å‘ä½ é€éœ²äº†ä¸€ä¸ªå†…éƒ¨æ¶ˆæ¯ï¼šåŸå¸‚è§„åˆ’éƒ¨é—¨å³å°†å®£å¸ƒåœ¨æŸåŒºåŸŸå»ºè®¾æ–°çš„åœ°é“çº¿ï¼Œè¿™å¾ˆå¯èƒ½å¯¼è‡´è¯¥åŒºåŸŸæˆ¿ä»·ä¸Šæ¶¨ã€‚",[c("æŠ•èµ„è¯¥åŒºåŸŸæˆ¿äº§","ä½ å†³å®šç›¸ä¿¡è¿™ä¸ªæ¶ˆæ¯ï¼ŒæŠ•èµ„è¯¥åŒºåŸŸçš„æˆ¿äº§ã€‚",u({money:-3e4,nextEvent:"property_insider_result"}),e=>e.player.money>=3e4),c("è°¨æ…è§‚æœ›","ä½ å¯¹è¿™ä¸ªæ¶ˆæ¯æŒè°¨æ…æ€åº¦ï¼Œå†³å®šå…ˆè§‚å¯Ÿä¸€æ®µæ—¶é—´ã€‚",u({nextEvent:"property_missed_opportunity"}))],v({requiredEvents:["property_broker_info"]}),!1,f.STORY,1,"/assets/images/events/insider_tip.jpg"),g("property_insider_result","å†…éƒ¨æ¶ˆæ¯ç»“æœ","å‡ å‘¨åï¼ŒåŸå¸‚è§„åˆ’éƒ¨é—¨æœç„¶å®£å¸ƒäº†æ–°åœ°é“çº¿çš„å»ºè®¾è®¡åˆ’ï¼Œä½ æŠ•èµ„çš„åŒºåŸŸæˆ¿äº§ä»·å€¼å¼€å§‹ä¸Šæ¶¨ï¼",[c("ç»§ç»­æŒæœ‰","ä½ å†³å®šç»§ç»­æŒæœ‰è¿™é¡¹æŠ•èµ„ï¼ŒæœŸå¾…æ›´å¤§çš„å‡å€¼ç©ºé—´ã€‚",u({attributes:{propertyValue:45e3}})),c("ç«‹å³å‡ºå”®","ä½ å†³å®šè¶ç€æ¶ˆæ¯å…¬å¸ƒåçš„ä»·æ ¼ä¸Šæ¶¨ç«‹å³å‡ºå”®è·åˆ©ã€‚",u({money:4e4,attributes:{propertyValue:0}}))],v({requiredEvents:["property_insider_tip"]}),!1,f.STORY,1,"/assets/images/events/insider_result.jpg"),g("property_missed_opportunity","é”™å¤±æœºä¼š","åŸå¸‚è§„åˆ’éƒ¨é—¨å®£å¸ƒäº†æ–°åœ°é“çº¿çš„å»ºè®¾è®¡åˆ’ï¼Œä¸­ä»‹æåˆ°çš„åŒºåŸŸæˆ¿ä»·æœç„¶ä¸Šæ¶¨äº†ã€‚ä½ æœ‰äº›é—æ†¾æ²¡æœ‰æŠŠæ¡è¿™ä¸ªæŠ•èµ„æœºä¼šã€‚",[c("å¯»æ‰¾æ–°æœºä¼š","é”™è¿‡äº†è¿™æ¬¡æœºä¼šï¼Œä½†ä½ å†³å®šç»§ç»­å¯»æ‰¾æ–°çš„æŠ•èµ„æœºä¼šã€‚",u({nextEvent:"property_new_opportunity"})),c("æ¥å—æ•™è®­","ä½ æ¥å—è¿™ä¸ªæ•™è®­ï¼Œå†³å®šä»¥ååœ¨æœ‰å†…éƒ¨æ¶ˆæ¯æ—¶æ›´åŠ æœæ–­ã€‚",u({attributes:{businessSkill:1}}))],v({requiredEvents:["property_insider_tip"]}),!1,f.STORY,1,"/assets/images/events/missed_opportunity.jpg"),g("property_new_opportunity","æ–°çš„æˆ¿äº§æœºä¼š","å°½ç®¡é”™è¿‡äº†ä¹‹å‰çš„æœºä¼šï¼Œä½†ä½ å¾ˆå¿«å‘ç°äº†å¦ä¸€ä¸ªæ½œåœ¨çš„æˆ¿äº§æŠ•èµ„æœºä¼šã€‚ä¸€å¤„ä½ç½®è¾ƒå¥½ä½†ç•¥æ˜¾è€æ—§çš„æˆ¿äº§æ­£åœ¨å‡ºå”®ï¼Œä»·æ ¼ç›¸å¯¹è¾ƒä½ã€‚",[c("è´­ä¹°å¹¶ç¿»æ–°","ä½ å†³å®šè´­ä¹°è¿™å¤„æˆ¿äº§å¹¶è¿›è¡Œç¿»æ–°ï¼Œæå‡å…¶ä»·å€¼ã€‚",u({money:-4e4,attributes:{propertyValue:4e4},nextEvent:"property_renovation_results"}),e=>e.player.money>=4e4),c("ä»…è´­ä¹°ä¸ç¿»æ–°","ä½ å†³å®šè´­ä¹°è¿™å¤„æˆ¿äº§ï¼Œä½†æš‚ä¸è¿›è¡Œç¿»æ–°ã€‚",u({money:-35e3,attributes:{propertyValue:35e3}}),e=>e.player.money>=35e3),c("æ”¾å¼ƒè¿™ä¸ªæœºä¼š","ç»è¿‡è¯„ä¼°ï¼Œä½ è®¤ä¸ºè¿™ä¸ªæœºä¼šé£é™©å¤ªå¤§ï¼Œå†³å®šæ”¾å¼ƒã€‚",u({}))],v({requiredEvents:["property_missed_opportunity"]}),!1,f.STORY,1,"/assets/images/events/new_opportunity.jpg"),g("property_renovation_results","æˆ¿äº§ç¿»æ–°ç»“æœ","ç»è¿‡ä¸€æ®µæ—¶é—´çš„ç¿»æ–°ï¼Œä½ çš„æˆ¿äº§ç„•ç„¶ä¸€æ–°ã€‚å‘¨è¾¹é‚»å±…å’Œæˆ¿äº§è¯„ä¼°å¸ˆéƒ½å¯¹ä½ çš„ç¿»æ–°å·¥ä½œè¡¨ç¤ºèµèµã€‚",[c("æŸ¥çœ‹æˆ¿äº§ä¼°å€¼","ä½ è¯·æˆ¿äº§è¯„ä¼°å¸ˆå¯¹ç¿»æ–°åçš„æˆ¿äº§è¿›è¡Œæ­£å¼ä¼°å€¼ã€‚",u({money:-500,attributes:{propertyValue:55e3}}),e=>e.player.money>=500),c("æŒ‚ç‰Œå‡ºå”®","ä½ å†³å®šå°†ç¿»æ–°åçš„æˆ¿äº§ç«‹å³æŒ‚ç‰Œå‡ºå”®ã€‚",u({nextEvent:"property_sale_result"})),c("ç»§ç»­æŒæœ‰","ä½ å†³å®šæš‚æ—¶ç»§ç»­æŒæœ‰è¿™å¤„æˆ¿äº§ï¼Œè§‚å¯Ÿå¸‚åœºå˜åŒ–ã€‚",u({}))],v({requiredEvents:["property_new_opportunity"]}),!1,f.STORY,1,"/assets/images/events/renovation_results.jpg"),g("property_sale_result","æˆ¿äº§å‡ºå”®ç»“æœ","ç»è¿‡å‡ å‘¨çš„æŒ‚ç‰Œï¼Œä½ çš„æˆ¿äº§ç»ˆäºæ‰¾åˆ°äº†ä¹°å®¶ã€‚ä¹°å®¶å¯¹æˆ¿å­çš„çŠ¶å†µéå¸¸æ»¡æ„ï¼Œæ„¿æ„æ”¯ä»˜ä¸€ä¸ªä¸é”™çš„ä»·æ ¼ã€‚",[c("æ¥å—æŠ¥ä»·","ä½ å†³å®šæ¥å—ä¹°å®¶çš„æŠ¥ä»·ï¼Œå®Œæˆæˆ¿äº§äº¤æ˜“ã€‚",u({money:6e4,attributes:{propertyValue:0,businessSkill:2}})),c("ç»§ç»­ç­‰å¾…æ›´é«˜æŠ¥ä»·","ä½ è®¤ä¸ºæˆ¿äº§ä»·å€¼æ›´é«˜ï¼Œå†³å®šæ‹’ç»å½“å‰æŠ¥ä»·ï¼Œç»§ç»­ç­‰å¾…ã€‚",u({nextEvent:"property_price_negotiation"}))],v({requiredEvents:["property_renovation_results"]}),!1,f.STORY,1,"/assets/images/events/sale_result.jpg"),g("property_price_negotiation","æˆ¿ä»·è°ˆåˆ¤","åœ¨æ‹’ç»äº†ç¬¬ä¸€ä½ä¹°å®¶çš„æŠ¥ä»·åï¼Œåˆæœ‰æ–°ä¹°å®¶å¯¹ä½ çš„æˆ¿äº§è¡¨ç¤ºäº†å…´è¶£ï¼ŒåŒæ–¹å¼€å§‹äº†ä»·æ ¼è°ˆåˆ¤ã€‚",[c("åšæŒè¦ä»·","ä½ åšæŒè‡ªå·±çš„å®šä»·ï¼Œè¡¨ç¤ºè¿™æ˜¯æœ€ç»ˆä»·æ ¼ã€‚",u({money:Math.random()>.5?65e3:0,attributes:Math.random()>.5?{propertyValue:0,businessSkill:3}:{businessSkill:1}})),c("é€‚å½“è®©æ­¥","ä½ å†³å®šåœ¨ä»·æ ¼ä¸Šé€‚å½“è®©æ­¥ï¼Œä»¥ç¡®ä¿äº¤æ˜“æˆåŠŸã€‚",u({money:58e3,attributes:{propertyValue:0,businessSkill:1}}))],v({requiredEvents:["property_sale_result"]}),!1,f.STORY,1,"/assets/images/events/price_negotiation.jpg"),g("property_later_decision","å»¶è¿Ÿè´­æˆ¿å†³å®š","åœ¨è®°å½•äº†æ¥¼ç›˜ä¿¡æ¯åï¼Œä½ ä¸€ç›´åœ¨è€ƒè™‘æ˜¯å¦åº”è¯¥æŠ•èµ„è¿™ä¸ªé¡¹ç›®ã€‚æœ€è¿‘ï¼Œä½ æ³¨æ„åˆ°è¯¥é¡¹ç›®çš„å¸‚åœºåå“å¾ˆå¥½ï¼Œé”€å”®è¿›å±•è¿…é€Ÿã€‚",[c("ç°åœ¨æŠ•èµ„","ä½ å†³å®šä¸å†çŠ¹è±«ï¼Œç«‹å³æŠ•èµ„è¿™ä¸ªé¡¹ç›®ï¼Œå°½ç®¡ä»·æ ¼å·²ç»ç•¥æœ‰ä¸Šæ¶¨ã€‚",u({money:-12e3,nextEvent:"property_investment_result"}),e=>e.player.money>=12e3),c("æ”¾å¼ƒè¿™ä¸ªé¡¹ç›®","ä½ å†³å®šæ”¾å¼ƒè¿™ä¸ªé¡¹ç›®ï¼Œç»§ç»­å¯»æ‰¾å…¶ä»–æŠ•èµ„æœºä¼šã€‚",u({}))],v({requiredEvents:["property_expo_discover"]}),!1,f.STORY,1,"/assets/images/events/later_decision.jpg"),g("bag_expansion_opportunity","èƒŒåŒ…æ‰©å±•æœºä¼š","ä½ é‡åˆ°ä¸€ä¸ªæ—…è¡Œç”¨å“åº—ï¼Œåº—ä¸»æ­£åœ¨å‡ºå”®ä¸€æ¬¾ç‰¹åˆ¶çš„é«˜å®¹é‡èƒŒåŒ…ï¼Œçœ‹èµ·æ¥å¾ˆå®ç”¨ã€‚",[c("è´­ä¹°é«˜çº§èƒŒåŒ…","ä½ è´­ä¹°äº†é«˜çº§èƒŒåŒ…ï¼Œç°åœ¨ä½ å¯ä»¥æºå¸¦æ›´å¤šç‰©å“äº†ã€‚",u({money:-5e3,capacity:20}),e=>e.player.money>=5e3),c("è´­ä¹°æ™®é€šèƒŒåŒ…","ä½ è´­ä¹°äº†ä¸€ä¸ªæ™®é€šèƒŒåŒ…ï¼Œç•¥å¾®å¢åŠ äº†æºå¸¦å®¹é‡ã€‚",u({money:-2e3,capacity:10}),e=>e.player.money>=2e3),c("æ”¾å¼ƒè´­ä¹°","ä½ å†³å®šæš‚æ—¶ä¸è´­ä¹°æ–°èƒŒåŒ…ã€‚",u({}))],v({probability:.8,playerMoney:{min:3e3}}),!1,f.RANDOM,2,"/assets/images/events/bag_expansion.jpg"),g("market_price_surge","å¥¢ä¾ˆå“ä¸æ”¶è—å“ä»·æ ¼é£™å‡","æœ€æ–°è´¢ç»æŠ¥é“ï¼šéšç€å¯Œè£•é˜¶å±‚æ¶ˆè´¹å›æš–ï¼Œé«˜ç«¯å•†åŸçš„å¥¢ä¾ˆå“å’Œåœ°ä¸‹é»‘å¸‚çš„ç¨€æœ‰æ”¶è—å“ä»·æ ¼å¤§å¹…ä¸Šæ¶¨ï¼Œå…¶ä¸­å°¤ä»¥åè¡¨å’Œå¤è‘£æ¶¨å¹…æœ€å¤§ã€‚",[c("è°ƒæ•´æŠ•èµ„ç­–ç•¥","ä½ ä»”ç»†åˆ†æäº†ä»·æ ¼æ³¢åŠ¨è¶‹åŠ¿ï¼Œå†³å®šè°ƒæ•´ä½ çš„äº¤æ˜“ç­–ç•¥ï¼Œé‡ç‚¹å…³æ³¨é«˜ç«¯å•†å“ã€‚",u({market:{globalPriceModifier:1.05,locationModifiers:{premium_mall:1.15,black_market:1.2},locationProductModifiers:{premium_mall:{401:1.5},black_market:{503:1.6}},duration:2}})),c("å‰å¾€é«˜ç«¯å¸‚åœº","ä½ å†³å®šç«‹å³å‰å¾€é«˜ç«¯å•†åŸå’Œåœ°ä¸‹é»‘å¸‚ï¼Œå¸Œæœ›èƒ½åœ¨ä»·æ ¼è¿›ä¸€æ­¥ä¸Šæ¶¨å‰é‡‡è´­ä¸€äº›æ½œåŠ›å•†å“ã€‚",u({forceLocationChange:!0,targetLocation:"premium_mall",market:{locationProductModifiers:{premium_mall:{401:1.3},black_market:{503:1.4}},duration:1}}))],v({probability:.3,minWeek:8}),!0,f.MARKET,1,"/assets/images/events/price_surge.jpg"),g("market_price_drop","å¸‚åœºä»·æ ¼ä¸‹è·Œ","å…¨çƒç»æµå‡ºç°æ³¢åŠ¨ï¼Œå¯¼è‡´å¤šä¸ªå¸‚åœºçš„å•†å“ä»·æ ¼å‡ºç°ä¸‹è·Œè¶‹åŠ¿ã€‚",[c("è§‚å¯Ÿå¸‚åœº","ä½ å†³å®šè§‚å¯Ÿå¸‚åœºåŠ¨å‘ï¼Œå¯»æ‰¾ä½ä»·è´­å…¥çš„æœºä¼šã€‚",u({market:{globalPriceModifier:.85,duration:1}}))],v({probability:.7}),!0,f.MARKET,1,"/assets/images/events/price_drop.jpg"),g("property_investment_chance","æˆ¿äº§æŠ•èµ„æœºä¼š","ä½ å¬è¯´ä¸€ä¸ªæ–°å…´åŒºåŸŸæ­£åœ¨å¼€å‘ï¼Œç°åœ¨è´­ä¹°æˆ¿äº§å¯èƒ½ä¼šæœ‰ä¸é”™çš„å‡å€¼ç©ºé—´ã€‚",[c("æŠ•èµ„æˆ¿äº§","ä½ å†³å®šæŠ•èµ„è¿™ä¸ªæ–°å…´åŒºåŸŸçš„æˆ¿äº§é¡¹ç›®ã€‚",u({money:-3e4,attributes:{housingInvestment:3e4,propertyValue:3e4},nextEvent:"property_investment_result"}),e=>e.player.money>=3e4),c("è°¨æ…è§‚æœ›","ä½ è§‰å¾—ç›®å‰æ—¶æœºä¸æˆç†Ÿï¼Œå†³å®šç»§ç»­è§‚æœ›ã€‚",u({}))],v({minWeek:10,playerMoney:{min:3e4}}),!1,f.STORY,1,"/assets/images/events/property_investment.jpg"),g("financial_advisor","ç†è´¢é¡¾é—®","ä½ é‡åˆ°äº†ä¸€ä½ä¸“ä¸šçš„ç†è´¢é¡¾é—®ï¼Œä»–æ„¿æ„ä¸ºä½ æä¾›ä¸€äº›æŠ•èµ„å»ºè®®ã€‚",[c("å’¨è¯¢å»ºè®®","ä½ æ”¯ä»˜å’¨è¯¢è´¹ï¼Œè·å¾—äº†ä¸€äº›å…³äºå½“å‰å¸‚åœºçš„ä¸“ä¸šå»ºè®®ã€‚",u({money:-1e3,market:{productModifiers:{house_a:1.05,house_b:.95,land_a:1.1},duration:604800}}),e=>e.player.money>=1e3),c("å§”æ‰˜æŠ•èµ„","ä½ å†³å®šå§”æ‰˜ä»–è¿›è¡Œä¸€äº›å°é¢æŠ•èµ„ã€‚",u({money:-3e3,nextEvent:"financial_advisor_result"}),e=>e.player.money>=3e3),c("å©‰æ‹’","ä½ ç¤¼è²Œåœ°æ‹’ç»äº†ä»–çš„å»ºè®®ã€‚",u({}))],v({probability:.6,minWeek:5}),!0,f.RANDOM,1,"/assets/images/events/financial_advisor.jpg"),g("financial_advisor_result","æŠ•èµ„ç»“æœ","ä½ ä¹‹å‰å§”æ‰˜ç†è´¢é¡¾é—®è¿›è¡Œçš„æŠ•èµ„æœ‰äº†ç»“æœã€‚",[c("æŸ¥çœ‹ç»“æœ",Math.random()<.7?"ä½ çš„æŠ•èµ„å–å¾—äº†ä¸é”™çš„å›æŠ¥ï¼Œè·å¾—äº†4000å…ƒã€‚":"å¾ˆé—æ†¾ï¼Œç”±äºå¸‚åœºæ³¢åŠ¨ï¼Œä½ çš„æŠ•èµ„å‡ºç°äº†äºæŸï¼Œåªæ”¶å›äº†2000å…ƒã€‚",u({money:Math.random()<.7?4e3:2e3}))],v({requiredEvents:["financial_advisor"]}),!1,f.STORY,1,"/assets/images/events/investment_result.jpg"),g({id:"supply_chain_disruption",title:"å…¨çƒä¾›åº”é“¾ä¸­æ–­å±æœº",description:"çªå‘æ–°é—»ï¼šå…¨çƒè´¸æ˜“é­é‡ä¸¥é‡ä¾›åº”é“¾ä¸­æ–­ï¼å„åœ°åŒºä¸åŒå•†å“ä»·æ ¼å‡ºç°å‰§çƒˆæ³¢åŠ¨ï¼Œéƒ¨åˆ†å•†å“çŸ­ç¼ºæ¶¨ä»·ï¼Œéƒ¨åˆ†å•†å“ç§¯å‹é™ä»·ã€‚æ­¤æ¬¡å±æœºé¢„è®¡å°†å¯¹å¸‚åœºäº§ç”Ÿæ·±è¿œå½±å“ã€‚",type:f.MARKET,options:[c("åœ¨å¤§å®—å¸‚åœºå›¤ç§¯åŸºæœ¬ç‰©èµ„","ä½ é¢„åˆ¤åˆ°åŸºæœ¬ç”Ÿæ´»ç‰©èµ„å°†ä¼šçŸ­ç¼ºï¼Œå†³å®šå‰å¾€å¤§å®—å•†å“äº¤æ˜“æ‰€å›¤ç§¯å¿…éœ€å“ã€‚",{market:{globalPriceModifier:1.05,locationProductModifiers:{commodity_market:{202:1.6,203:1.5,101:1.4},electronics_hub:{301:.7,305:.75},premium_mall:{404:.8}},duration:4},forceLocationChange:!0,targetLocation:"commodity_market"}),c("æŠ•èµ„å—å½±å“å•†å“","ä½ è®¤ä¸ºè¿™æ˜¯æŠ•èµ„ä½ä»·ç”µå­äº§å“çš„å¥½æœºä¼šï¼Œå†³å®šå‰å¾€ç”µå­ç§‘æŠ€åŸå¤§é‡è´­å…¥ã€‚",{market:{locationModifiers:{electronics_hub:.85},locationProductModifiers:{electronics_hub:{301:.6,305:.65},commodity_market:{202:1.45,203:1.4}},duration:3},forceLocationChange:!0,targetLocation:"electronics_hub"}),c("å¯»æ‰¾é»‘å¸‚ç¨€ç¼ºèµ„æº","ä½ çŒœæµ‹æŸäº›ç‰¹æ®Šå•†å“å¯èƒ½åœ¨é»‘å¸‚å˜å¾—æ›´åŠ ç¨€ç¼ºä¸”ä»·å€¼ä¸Šå‡ï¼Œå†³å®šå‰å¾€åœ°ä¸‹é»‘å¸‚æ¢ç´¢æœºä¼šã€‚",{market:{locationModifiers:{black_market:1.2},locationProductModifiers:{black_market:{502:1.8,503:1.9},second_hand_market:{107:.7,106:.75}},duration:3},forceLocationChange:!0,targetLocation:"black_market"}),c("ä¿æŒè§‚æœ›","ä½ å†³å®šæš‚æ—¶ä¸ä»‹å…¥è¿™æ¬¡æ··ä¹±çš„å¸‚åœºæ³¢åŠ¨ï¼Œç­‰å¾…å½¢åŠ¿æ›´åŠ æ˜æœ—ã€‚",{market:{globalPriceModifier:1.02,duration:2}})],conditions:{probability:.15,minWeek:15},repeatable:!1,weight:3}),g({id:"market_contrast_event",title:"åŸå¸‚åŒºåŸŸå‘å±•ä¸å‡",description:"æœ€æ–°åŸå¸‚è§„åˆ’è°ƒæ•´å¯¼è‡´ç”µå­ç§‘æŠ€åŸè·å¾—å¤§é‡æŠ•èµ„å’Œå®¢æµï¼Œè€Œåœ°ä¸‹é»‘å¸‚å´å› ç®¡æ§åŠ å¼ºè€Œå®¢æµé”å‡ã€‚è¿™ç§å‘å±•ä¸å‡è¡¡å¼•å‘äº†æ˜æ˜¾çš„å¸‚åœºå·®å¼‚ã€‚",type:f.MARKET,options:[c("åˆ†æå¸‚åœºæœºä¼š","ä½ ä»”ç»†åˆ†æäº†åŸå¸‚ä¸åŒåŒºåŸŸçš„å‘å±•å˜åŒ–ï¼Œå¯»æ‰¾å…¶ä¸­çš„äº¤æ˜“æœºä¼šã€‚",{market:{locationModifiers:{electronics_hub:.8,black_market:1.4},duration:5}})],conditions:{probability:.2,minWeek:12},repeatable:!0,weight:2})];let Fe=[];const Be=[],Ye=[],st=[],ot=[],nt=[],at=[];function nr(){Be.length>0||or.forEach(e=>{const t=e.options.map(i=>i instanceof ze?i:new ze(i)),r=new qe({...e,options:t,imageUrl:e.imageUrl||(typeof e[8]=="string"?e[8]:null)});switch(r.type){case f.TUTORIAL:Be.push(r);break;case f.RANDOM:Ye.push(r);break;case f.LOCATION:st.push(r);break;case f.MARKET:ot.push(r);break;case f.PERSONAL:nt.push(r);break;case f.STORY:at.push(r);break;default:Ye.push(r)}})}function ar(){if(nr(),Fe.length>0)return Fe;const e=[];return e.push(...Be),e.push(...Ye),e.push(...st),e.push(...ot),e.push(...nt),e.push(...at),e.push(g({id:"location_inflation_electronics_hub",title:"ç”µå­ç§‘æŠ€åŸèŠ¯ç‰‡çŸ­ç¼º",description:"æœ€æ–°æ¶ˆæ¯ï¼šç”µå­ç§‘æŠ€åŸçš„ä¸»è¦èŠ¯ç‰‡ä¾›åº”å•†å·¥å‚åœäº§ï¼Œå¯¼è‡´è¯¥åœ°åŒºç”µå­äº§å“æ•´ä½“æ¶¨ä»·ã€‚åˆ†æå¸ˆé¢„è®¡è¿™ç§æƒ…å†µå°†æŒç»­æ•°å‘¨ã€‚",type:f.MARKET,options:[c("äº†è§£æƒ…å†µ","ä½ è®°ä¸‹äº†è¿™ä¸ªä¿¡æ¯ï¼Œè¿™å¯èƒ½å½±å“ä½ åœ¨ç”µå­ç§‘æŠ€åŸçš„äº¤æ˜“ç­–ç•¥ã€‚",{market:{locationModifiers:{electronics_hub:1.3},duration:4}})],conditions:{probability:.3,minWeek:5},repeatable:!0,weight:2}),g({id:"premium_mall_luxury_watch_discount",title:"é«˜ç«¯å•†åŸåè¡¨ä¿ƒé”€",description:"é«˜ç«¯å•†åŸçš„åè¡¨ä¸“æŸœå¼€å§‹å¤§è§„æ¨¡ä¿ƒé”€æ´»åŠ¨ï¼Œæ‰€æœ‰å“ç‰Œæ‰‹è¡¨éƒ½æœ‰ç‰¹åˆ«æŠ˜æ‰£ã€‚è¿™æ˜¯è´­ä¹°å¥¢ä¾ˆæ‰‹è¡¨çš„å¥½æœºä¼šï¼",type:f.MARKET,options:[c("è®°ä¸‹ä¿¡æ¯","ä½ è®°ä¸‹äº†è¿™ä¸ªä¿ƒé”€ä¿¡æ¯ï¼Œå¯ä»¥è€ƒè™‘å»é«˜ç«¯å•†åŸè´­ä¹°æ‰‹è¡¨ã€‚",{market:{locationProductModifiers:{premium_mall:{401:.6}},duration:2}})],conditions:{probability:.3,minWeek:3},repeatable:!0,weight:1}),g({id:"nationwide_paper_shortage",title:"å…¨å›½æ€§çº¸å¼ çŸ­ç¼º",description:"ç”±äºç¯ä¿æ”¿ç­–æ”¶ç´§å’ŒåŸæ–™ä»·æ ¼ä¸Šæ¶¨ï¼Œå…¨å›½èŒƒå›´å†…å‡ºç°çº¸å¼ çŸ­ç¼ºç°è±¡ã€‚å¤§å®—å•†å“äº¤æ˜“æ‰€å’ŒäºŒæ‰‹å¸‚åœºçš„å«ç”Ÿçº¸ä»·æ ¼é£™å‡ï¼Œè€Œå…¶ä»–åœ°åŒºå—å½±å“è¾ƒå°ã€‚",type:f.MARKET,options:[c("åˆ†æå½±å“","ä½ åˆ†æäº†è¿™æ¬¡çº¸å¼ çŸ­ç¼ºå¯¹å„ä¸ªå¸‚åœºçš„å½±å“ï¼Œå¹¶è°ƒæ•´äº†ä½ çš„äº¤æ˜“ç­–ç•¥ã€‚",{market:{locationProductModifiers:{commodity_market:{101:1.7},second_hand_market:{101:1.5}},duration:3}})],conditions:{probability:.25,minWeek:8},repeatable:!0,weight:2}),g({id:"market_contrast_event",title:"åŸå¸‚åŒºåŸŸå‘å±•ä¸å‡",description:"æœ€æ–°åŸå¸‚è§„åˆ’è°ƒæ•´å¯¼è‡´ç”µå­ç§‘æŠ€åŸè·å¾—å¤§é‡æŠ•èµ„å’Œå®¢æµï¼Œè€Œåœ°ä¸‹é»‘å¸‚å´å› ç®¡æ§åŠ å¼ºè€Œå®¢æµé”å‡ã€‚è¿™ç§å‘å±•ä¸å‡è¡¡å¼•å‘äº†æ˜æ˜¾çš„å¸‚åœºå·®å¼‚ã€‚",type:f.MARKET,options:[c("åˆ†æå¸‚åœºæœºä¼š","ä½ ä»”ç»†åˆ†æäº†åŸå¸‚ä¸åŒåŒºåŸŸçš„å‘å±•å˜åŒ–ï¼Œå¯»æ‰¾å…¶ä¸­çš„äº¤æ˜“æœºä¼šã€‚",{market:{locationModifiers:{electronics_hub:.8,black_market:1.4},duration:5}})],conditions:{probability:.2,minWeek:12},repeatable:!0,weight:2}),g({id:"supply_chain_disruption",title:"å…¨çƒä¾›åº”é“¾ä¸­æ–­å±æœº",description:"çªå‘æ–°é—»ï¼šå…¨çƒè´¸æ˜“é­é‡ä¸¥é‡ä¾›åº”é“¾ä¸­æ–­ï¼å„åœ°åŒºä¸åŒå•†å“ä»·æ ¼å‡ºç°å‰§çƒˆæ³¢åŠ¨ï¼Œéƒ¨åˆ†å•†å“çŸ­ç¼ºæ¶¨ä»·ï¼Œéƒ¨åˆ†å•†å“ç§¯å‹é™ä»·ã€‚æ­¤æ¬¡å±æœºé¢„è®¡å°†å¯¹å¸‚åœºäº§ç”Ÿæ·±è¿œå½±å“ã€‚",type:f.MARKET,options:[c("åœ¨å¤§å®—å¸‚åœºå›¤ç§¯åŸºæœ¬ç‰©èµ„","ä½ é¢„åˆ¤åˆ°åŸºæœ¬ç”Ÿæ´»ç‰©èµ„å°†ä¼šçŸ­ç¼ºï¼Œå†³å®šå‰å¾€å¤§å®—å•†å“äº¤æ˜“æ‰€å›¤ç§¯å¿…éœ€å“ã€‚",{market:{globalPriceModifier:1.05,locationProductModifiers:{commodity_market:{202:1.6,203:1.5,101:1.4},electronics_hub:{301:.7,305:.75},premium_mall:{404:.8}},duration:4},forceLocationChange:!0,targetLocation:"commodity_market"}),c("æŠ•èµ„å—å½±å“å•†å“","ä½ è®¤ä¸ºè¿™æ˜¯æŠ•èµ„ä½ä»·ç”µå­äº§å“çš„å¥½æœºä¼šï¼Œå†³å®šå‰å¾€ç”µå­ç§‘æŠ€åŸå¤§é‡è´­å…¥ã€‚",{market:{locationModifiers:{electronics_hub:.85},locationProductModifiers:{electronics_hub:{301:.6,305:.65},commodity_market:{202:1.45,203:1.4}},duration:3},forceLocationChange:!0,targetLocation:"electronics_hub"}),c("å¯»æ‰¾é»‘å¸‚ç¨€ç¼ºèµ„æº","ä½ çŒœæµ‹æŸäº›ç‰¹æ®Šå•†å“å¯èƒ½åœ¨é»‘å¸‚å˜å¾—æ›´åŠ ç¨€ç¼ºä¸”ä»·å€¼ä¸Šå‡ï¼Œå†³å®šå‰å¾€åœ°ä¸‹é»‘å¸‚æ¢ç´¢æœºä¼šã€‚",{market:{locationModifiers:{black_market:1.2},locationProductModifiers:{black_market:{502:1.8,503:1.9},second_hand_market:{107:.7,106:.75}},duration:3},forceLocationChange:!0,targetLocation:"black_market"}),c("ä¿æŒè§‚æœ›","ä½ å†³å®šæš‚æ—¶ä¸ä»‹å…¥è¿™æ¬¡æ··ä¹±çš„å¸‚åœºæ³¢åŠ¨ï¼Œç­‰å¾…å½¢åŠ¿æ›´åŠ æ˜æœ—ã€‚",{market:{globalPriceModifier:1.02,duration:2}})],conditions:{probability:.15,minWeek:15},repeatable:!1,weight:3})),Fe=e,e}class cr{constructor(){this.events={},this.onceEvents={}}on(t,r){return this.events[t]||(this.events[t]=[]),this.events[t].push(r),()=>this.off(t,r)}once(t,r){return this.onceEvents[t]||(this.onceEvents[t]=[]),this.onceEvents[t].push(r),()=>{if(this.onceEvents[t]){const i=this.onceEvents[t].indexOf(r);i!==-1&&this.onceEvents[t].splice(i,1)}}}off(t,r){if(this.events[t]){const i=this.events[t].indexOf(r);i!==-1&&this.events[t].splice(i,1)}}emit(t,r){if(this.events[t]&&this.events[t].forEach(i=>{try{i(r)}catch(o){L(o,`EventEmitter.emit(${t})`,S.SYSTEM,P.WARNING),console.error(`Error in event listener for ${t}:`,o)}}),this.onceEvents[t]){const i=[...this.onceEvents[t]];this.onceEvents[t]=[],i.forEach(o=>{try{o(r)}catch(s){L(s,`EventEmitter.emit.once(${t})`,S.SYSTEM,P.WARNING),console.error(`Error in once event listener for ${t}:`,s)}})}}clear(){this.events={},this.onceEvents={}}clearEvent(t){t&&(this.events[t]=[],this.onceEvents[t]=[])}}const ne=new cr,_e={EASY:"easy",NORMAL:"normal",HARD:"hard"},et={[_e.EASY]:{player:{initialMoney:8e3,initialDebt:1e3,initialCapacity:150,debtInterestRate:.004,debtGracePeriod:4},market:{priceTrendStrength:.8,priceVolatility:.8,specialProductDiscount:.25,trendContinuationChance:.8},events:{positiveEventChance:.7,eventFrequency:.3,earlyGameEventMultiplier:.7,lateGameEventMultiplier:1.1},houses:{housePriceMultipliers:{apartment:.9,house:.9,villa:.85,mansion:.85}},gameGoals:{requiredNetWorth:35e4,targetWeeks:52,debtRatio:.5}},[_e.NORMAL]:{player:{initialMoney:5e3,initialDebt:2e3,initialCapacity:100,debtInterestRate:.005,debtGracePeriod:3},market:{priceTrendStrength:1,priceVolatility:1,specialProductDiscount:.15,trendContinuationChance:.75},events:{positiveEventChance:.5,eventFrequency:.4,earlyGameEventMultiplier:.8,lateGameEventMultiplier:1.2},houses:{housePriceMultipliers:{apartment:1,house:1,villa:1,mansion:1}},gameGoals:{requiredNetWorth:4e5,targetWeeks:52,debtRatio:.4}},[_e.HARD]:{player:{initialMoney:3500,initialDebt:3e3,initialCapacity:80,debtInterestRate:.006,debtGracePeriod:2},market:{priceTrendStrength:1.2,priceVolatility:1.3,specialProductDiscount:.1,trendContinuationChance:.7},events:{positiveEventChance:.4,eventFrequency:.5,earlyGameEventMultiplier:.9,lateGameEventMultiplier:1.3},houses:{housePriceMultipliers:{apartment:1.1,house:1.15,villa:1.2,mansion:1.25}},gameGoals:{requiredNetWorth:45e4,targetWeeks:52,debtRatio:.35}}};function lr(e=_e.NORMAL){return et[e]||et[_e.NORMAL]}function ur(e,t=52){const r=e/t;return r<.2?{phase:"early",eventMultiplier:.8,priceVolatilityMultiplier:.9}:r<.4?{phase:"early_mid",eventMultiplier:.9,priceVolatilityMultiplier:1}:r<.6?{phase:"mid",eventMultiplier:1,priceVolatilityMultiplier:1}:r<.8?{phase:"mid_late",eventMultiplier:1.1,priceVolatilityMultiplier:1.1}:{phase:"late",eventMultiplier:1.2,priceVolatilityMultiplier:1.2}}const ae={EVENT_TRIGGERED:"event:triggered",EVENT_COMPLETED:"event:completed",EVENT_OPTION_SELECTED:"event:option_selected",EVENT_EFFECTS_APPLIED:"event:effects_applied"},he={POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral"},Y={EARLY:"early",MID:"mid",LATE:"late"};class dr{constructor(t){this.events=t||[],this.triggeredEvents=new Set,this.activeEvents=[],this.eventHistory=[],this.cooldowns={},this.difficultyLevel="normal"}setDifficulty(t){this.difficultyLevel=t}generateStageAppropriateEvent(t){var w,O,U;console.log("å°è¯•ç”Ÿæˆé˜¶æ®µé€‚å½“çš„äº‹ä»¶ï¼Œå½“å‰å‘¨æ•°:",t.currentWeek);const{currentWeek:r,maxWeeks:i=52}=t,o=r/i;let s;o<.3?s=Y.EARLY:o<.7?s=Y.MID:s=Y.LATE,console.log("å½“å‰æ¸¸æˆé˜¶æ®µ:",s,"è¿›åº¦:",o);const n=lr(this.difficultyLevel),a=ur(r,i),l=n.events.eventFrequency*1.8,d=a.eventMultiplier*1.3,h=Math.min(.95,l*d);console.log("äº‹ä»¶è§¦å‘æ¦‚ç‡è®¡ç®—:",{baseEventChance:l,stageMultiplier:d,finalEventChance:h});const m=Math.random(),p=m<=h;if(console.log(`éšæœºå€¼: ${m}, æ˜¯å¦è§¦å‘äº‹ä»¶: ${p}`),!p)return null;let y=n.events.positiveEventChance;s===Y.EARLY?y*=1.3:s===Y.LATE&&(y*=.8);const k=(w=t.currentLocation)==null?void 0:w.id;if(k){const W=this.eventHistory.filter(V=>{var q,ue;const ee=this.getEventById(V.id);return(ue=(q=ee==null?void 0:ee.conditions)==null?void 0:q.locations)==null?void 0:ue.includes(k)});if(W.length>3){const V=Math.min(.8,Math.pow(.9,W.length-3));eventProbability*=V}}t.player.money<5e3?y*=1.2:t.player.money>1e5&&(y*=.9);let C=1;const N=((O=t.player.attributes)==null?void 0:O.hasHouse)||!1,b=((U=t.player.attributes)==null?void 0:U.propertyValue)||0;!N&&b<1e3&&r>20?C=1.5:(N||b>5e4)&&(C=.7);const M=Math.random()<y?he.POSITIVE:he.NEGATIVE;console.log("äº‹ä»¶ç±»å‹ç¡®å®š:",{positiveChance:y,eventEffectType:M});const I=this.events.filter(W=>this.isEventInCooldown(W.id,r)||W.repeatable===!1&&this.triggeredEvents.has(W.id)||M===he.POSITIVE&&W.effectType===he.NEGATIVE||M===he.NEGATIVE&&W.effectType===he.POSITIVE||W.gameStage&&(W.gameStage===Y.EARLY&&s!==Y.EARLY||W.gameStage===Y.MID&&s!==Y.MID||W.gameStage===Y.LATE&&s!==Y.LATE)||W.id.startsWith("property_")&&Math.random()>C?!1:this.checkEventConditions(W,t));if(console.log(`ç­›é€‰åçš„ç¬¦åˆæ¡ä»¶äº‹ä»¶æ•°é‡: ${I.length}`),I.length===0)return null;const x=this.selectEventByWeight(I,o);return console.log("é€‰æ‹©çš„äº‹ä»¶:",x?x.id:"null"),x}checkForEvents(t,r=null){console.log("äº‹ä»¶ç³»ç»Ÿ - æ£€æŸ¥æ˜¯å¦è§¦å‘äº‹ä»¶, å½“å‰å‘¨æ•°:",t.currentWeek),console.log("äº‹ä»¶ç³»ç»Ÿ - å½“å‰åœ°ç‚¹:",t.currentLocation?t.currentLocation.id:"æœªçŸ¥");let i=.6;t.currentLocation&&t.currentLocation.eventProbability&&(i=t.currentLocation.eventProbability*1.5,console.log(`äº‹ä»¶ç³»ç»Ÿ - å½“å‰åœ°ç‚¹äº‹ä»¶è§¦å‘æ¦‚ç‡: ${i}`));const o=Math.min(1,(t.currentWeek||1)/52),s=o*.2;i+=s,i=Math.min(.95,i);const n=Math.random();if(console.log(`äº‹ä»¶ç³»ç»Ÿ - äº‹ä»¶éšæœºæ£€å®š: ${n.toFixed(2)} vs ${i.toFixed(2)} (è§¦å‘é˜ˆå€¼)`),r){const l=this.getEligibleEvents(t,r);if(console.log(`äº‹ä»¶ç³»ç»Ÿ - æ‰¾åˆ° ${l.length} ä¸ªç¬¦åˆæ¡ä»¶çš„ ${r} ç±»å‹äº‹ä»¶`),l.length===0)return null;const d=this.selectEventByWeight(l,o);return d&&(console.log("äº‹ä»¶ç³»ç»Ÿ - å·²é€‰æ‹©äº‹ä»¶:",d.id,d.title),this.recordEvent(d.id,t.currentWeek),ne.emit(ae.EVENT_TRIGGERED,{event:d,week:t.currentWeek})),d}let a;if(n<i&&this.events.length>0){const l=this.getEligibleEvents(t);if(console.log(`äº‹ä»¶ç³»ç»Ÿ - æ‰¾åˆ° ${l.length} ä¸ªç¬¦åˆæ¡ä»¶çš„äº‹ä»¶`),l.length>0)a=this.selectEventByWeight(l,o),console.log("äº‹ä»¶ç³»ç»Ÿ - é€‰æ‹©äº‹ä»¶:",a?a.id:"æ— ");else return console.log("äº‹ä»¶ç³»ç»Ÿ - æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„äº‹ä»¶"),null}else return console.log("äº‹ä»¶ç³»ç»Ÿ - éšæœºæ£€å®šæœªé€šè¿‡ï¼Œæœ¬å‘¨ä¸è§¦å‘äº‹ä»¶"),null;return a?(console.log("äº‹ä»¶ç³»ç»Ÿ - ç”Ÿæˆäº‹ä»¶æˆåŠŸ:",a.id,a.title),this.recordEvent(a.id,t.currentWeek),ne.emit(ae.EVENT_TRIGGERED,{event:a,week:t.currentWeek})):console.log("äº‹ä»¶ç³»ç»Ÿ - æ²¡æœ‰ç”Ÿæˆäº‹ä»¶"),a}getEligibleEvents(t,r=null){return this.events.filter(i=>r&&i.type!==r||this.isEventInCooldown(i.id,t.currentWeek)||i.repeatable===!1&&this.triggeredEvents.has(i.id)||this.eventHistory.filter(s=>s.id===i.id&&t.currentWeek-s.week<=10).length>=2&&Math.random()>.3?!1:this.checkEventConditions(i,t))}checkEventConditions(t,r){var o;const i=t.conditions||{};if(i.minWeek&&r.currentWeek<i.minWeek||i.maxWeek&&r.currentWeek>i.maxWeek||i.locations&&r.currentLocation&&!i.locations.includes(r.currentLocation.id))return!1;if(i.playerMoney){const{min:s,max:n}=i.playerMoney;if(s!==void 0&&r.player.money<s||n!==void 0&&r.player.money>n)return!1}if(i.playerDebt){const{min:s,max:n}=i.playerDebt;if(s!==void 0&&r.player.debt<s||n!==void 0&&r.player.debt>n)return!1}if(i.inventoryItems)for(const s of i.inventoryItems){const n=r.player.inventory.find(l=>l.productId===s.productId),a=n?n.quantity:0;if(s.minQuantity!==void 0&&a<s.minQuantity||s.maxQuantity!==void 0&&a>s.maxQuantity)return!1}if(i.attributes)for(const[s,{min:n,max:a}]of Object.entries(i.attributes)){const l=((o=r.player.attributes)==null?void 0:o[s])||0;if(n!==void 0&&l<n||a!==void 0&&l>a)return!1}if(i.requiredEvents){for(const s of i.requiredEvents)if(!this.triggeredEvents.has(s))return!1}if(i.excludedEvents){for(const s of i.excludedEvents)if(this.triggeredEvents.has(s))return!1}if(i.customCondition&&!i.customCondition(r))return!1;if(i.probability!==void 0){let s=i.probability;if(this.triggeredEvents.has(t.id)||(s=Math.min(.95,s*1.5)),Math.random()>s)return!1}return!0}isEventInCooldown(t,r){return this.cooldowns[t]?this.cooldowns[t]>r:!1}setEventCooldown(t,r,i=5){this.cooldowns[t]=r+i}recordEvent(t,r){this.triggeredEvents.add(t),this.eventHistory.push({id:t,week:r,timestamp:new Date().toISOString()});const i=this.getEventById(t);let o;switch(i==null?void 0:i.type){case f.PERSONAL:o=6;break;case f.MARKET:o=3;break;case f.LOCATION:o=2;break;default:o=4}i&&!i.repeatable&&(o=999),this.setEventCooldown(t,r,o)}selectEventByWeight(t,r=.5){if(!t||t.length===0)return null;let i=0;const o=t.map(n=>{let a=n.weight||1;if(n.type===f.STORY?a*=1.2:n.type===f.MARKET&&(a*=1.1),n.id.startsWith("property_")&&r>.4&&(a*=1+r),n.options&&n.options.some(d=>d.effects&&d.effects.nextEvent)&&(a*=1.3),n.id==="meet_mucs")return 0;this.triggeredEvents.has(n.id)?a*=.2:a*=2;const l=this.eventHistory.filter(d=>d.id===n.id).length;if(l>0){if(!n.repeatable)return 0;const m=Math.max(.2,Math.pow(.5,l));a*=m}return console.log(`äº‹ä»¶æƒé‡è®¡ç®— - ${n.id}: ${a.toFixed(2)}`),i+=a,a});if(i<=0)return null;let s=Math.random()*i;for(let n=0;n<t.length;n++)if(s-=o[n],s<=0)return t[n];return t[0]}getEventById(t){const r=this.events.find(i=>i.id===t);return r?this.prepareEvent(r):null}triggerSpecificEvent(t,r){const i=this.getEventById(t);return i?(this.recordEvent(t,r.currentWeek),ne.emit(ae.EVENT_TRIGGERED,{event:i,week:r.currentWeek,isSpecific:!0}),i):null}prepareEvent(t){if(!t)return null;const r={...t};return r.options&&(r.options=r.options.map(i=>(typeof i.text=="function"?i.displayText=i.text():i.displayText=i.text,i))),r}updateActiveEvents(){this.activeEvents=this.activeEvents.filter(r=>!r.expired);const t=Date.now();return this.activeEvents.forEach(r=>{r.expiryTime&&t>r.expiryTime&&(r.expired=!0)}),this.activeEvents}getActiveMarketModifiers(){this.updateActiveEvents();const t={globalPriceModifier:1,categoryModifiers:{},productModifiers:{},specialProducts:[]};return this.activeEvents.forEach(r=>{r.expired||(r.globalPriceModifier&&(t.globalPriceModifier*=r.globalPriceModifier),r.categoryModifiers&&Object.entries(r.categoryModifiers).forEach(([i,o])=>{t.categoryModifiers[i]=(t.categoryModifiers[i]||1)*o}),r.productModifiers&&Object.entries(r.productModifiers).forEach(([i,o])=>{t.productModifiers[i]=(t.productModifiers[i]||1)*o}),r.specialProducts&&(t.specialProducts=[...t.specialProducts,...r.specialProducts]))}),t}applyEventEffects(t,r){var o;const i={appliedEffects:[],failedEffects:[]};if(console.log("åº”ç”¨äº‹ä»¶æ•ˆæœ:",r),r.money!==void 0){const s=r.money;s>0?(t.player.money+=s,i.appliedEffects.push({type:"money",value:s,success:!0})):s<0&&(t.player.money+s<0?(console.warn("EventSystem - é‡‘é’±ä¸è¶³ï¼Œæ— æ³•æ‰£æ¬¾",{required:Math.abs(s),available:t.player.money}),i.failedEffects.push({type:"money",value:s,reason:"insufficient_funds"})):(t.player.money+=s,i.appliedEffects.push({type:"money",value:s,success:!0})))}if(r.debt!==void 0){const s=r.debt;if(s>0)t.player.debt+=s,i.appliedEffects.push({type:"debt",value:s,success:!0});else if(s<0){const n=Math.min(t.player.debt,Math.abs(s));t.player.debt-=n,i.appliedEffects.push({type:"debt",value:-n,success:!0})}}if(r.items&&r.items.forEach(s=>{if(s.quantity>0){const n=t.products.find(a=>a.id===s.productId);if(n){const a=n.size*s.quantity;if(t.player.inventoryUsed+a<=t.player.capacity){const l=t.player.inventory.find(d=>d.productId===s.productId&&d.purchasePrice===(s.price||0));l?l.quantity+=s.quantity:t.player.inventory.push({productId:s.productId,name:n.name,quantity:s.quantity,purchasePrice:s.price||0,size:n.size}),t.player.inventoryUsed+=a,i.appliedEffects.push({type:"item_add",productId:s.productId,quantity:s.quantity,success:!0})}else i.failedEffects.push({type:"item_add",productId:s.productId,quantity:s.quantity,reason:"inventory_full"})}else i.failedEffects.push({type:"item_add",productId:s.productId,quantity:s.quantity,reason:"product_not_found"})}else if(s.quantity<0){const n=t.player.inventory.find(a=>a.productId===s.productId);if(n&&n.quantity>=Math.abs(s.quantity)){const a=Math.abs(s.quantity),l=n.size*a;if(n.quantity-=a,t.player.inventoryUsed-=l,n.quantity<=0){const d=t.player.inventory.indexOf(n);t.player.inventory.splice(d,1)}i.appliedEffects.push({type:"item_remove",productId:s.productId,quantity:a,success:!0})}else i.failedEffects.push({type:"item_remove",productId:s.productId,quantity:Math.abs(s.quantity),reason:"insufficient_items"})}}),r.capacity&&(t.player.capacity+=r.capacity,i.appliedEffects.push({type:"capacity",value:r.capacity,success:!0})),r.attributes&&Object.keys(r.attributes).length>0){t.player.attributes||(t.player.attributes={});for(const[s,n]of Object.entries(r.attributes)){const a=t.player.attributes[s]||0;t.player.attributes[s]=n,i.appliedEffects.push({type:"attribute",attribute:s,oldValue:a,newValue:n,success:!0})}}if(r.market){const s={...r.market,startTime:Date.now(),expiryTime:r.market.duration?Date.now()+r.market.duration*7*24*60*60*1e3:Date.now()+12096e5,expired:!1};if(this.activeEvents.push(s),t.market&&t.market.productPrices){if(s.globalPriceModifier){console.log(`åº”ç”¨å…¨å±€ä»·æ ¼ä¿®æ­£: ${s.globalPriceModifier}`);for(const[n,a]of Object.entries(t.market.productPrices))t.market.productPrices[n]*=s.globalPriceModifier}if(s.categoryModifiers)for(const[n,a]of Object.entries(s.categoryModifiers)){console.log(`åº”ç”¨ç±»åˆ« ${n} ä»·æ ¼ä¿®æ­£: ${a}`);const l=((o=t.products)==null?void 0:o.filter(d=>d.category===n))||[];for(const d of l)t.market.productPrices[d.id]&&(t.market.productPrices[d.id]*=a)}if(s.productModifiers)for(const[n,a]of Object.entries(s.productModifiers))console.log(`åº”ç”¨äº§å“ ${n} ä»·æ ¼ä¿®æ­£: ${a}`),t.market.productPrices[n]&&(t.market.productPrices[n]*=a)}i.appliedEffects.some(n=>n.type==="market")||i.appliedEffects.push({type:"market",effect:{globalPriceModifier:s.globalPriceModifier,categoryModifiers:s.categoryModifiers,productModifiers:s.productModifiers,locationModifiers:s.locationModifiers,locationProductModifiers:s.locationProductModifiers,duration:s.duration},success:!0})}return r.nextEvent&&i.appliedEffects.push({type:"next_event",eventId:r.nextEvent,success:!0}),r.locationChange&&i.appliedEffects.push({type:"location_change",locationId:r.locationChange,success:!0}),ne.emit(ae.EVENT_EFFECTS_APPLIED,{effects:i.appliedEffects,failedEffects:i.failedEffects}),i}reset(){this.triggeredEvents.clear(),this.activeEvents=[],this.eventHistory=[],this.cooldowns={}}getSaveState(){return{triggeredEvents:Array.from(this.triggeredEvents),activeEvents:this.activeEvents,eventHistory:this.eventHistory,cooldowns:this.cooldowns}}loadFromSaveState(t){t&&(this.triggeredEvents=new Set(t.triggeredEvents||[]),this.activeEvents=t.activeEvents||[],this.eventHistory=t.eventHistory||[],this.cooldowns=t.cooldowns||{})}}const Z=ce("event",{state:()=>({activeEvents:[],activeEvent:null,forceLocationChange:!1,targetLocation:null,nextEventId:null,triggeredEvents:[],eventSystem:null}),actions:{initializeEvents(){return console.log("EventStore - åˆå§‹åŒ–äº‹ä»¶ç³»ç»Ÿ"),new Promise(e=>{setTimeout(()=>{this.initEventSystem(),console.log("EventStore - äº‹ä»¶ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ"),e()},300)})},initEventSystem(){this.eventSystem=new dr(ar()),this.activeEvents=[],this.activeEvent=null,this.forceLocationChange=!1,this.targetLocation=null,this.nextEventId=null,this.triggeredEvents=[],this.setupEventListeners()},setupEventListeners(){ne.on(ae.EVENT_TRIGGERED,e=>{this.activeEvent=e.event}),ne.on(ae.EVENT_COMPLETED,e=>{this.activeEvent=null,e.nextEventId&&(this.nextEventId=e.nextEventId)}),ne.on(ae.EVENT_EFFECTS_APPLIED,e=>{const t=e.effects.find(i=>i.type==="location_change");t&&(this.forceLocationChange=!0,this.targetLocation=t.locationId);const r=e.effects.find(i=>i.type==="next_event");r&&(this.nextEventId=r.eventId)})},resetEvents(){this.eventSystem?this.eventSystem.reset():this.initEventSystem(),this.activeEvents=[],this.activeEvent=null,this.forceLocationChange=!1,this.targetLocation=null,this.nextEventId=null,this.triggeredEvents=[]},generateRandomEvent(e,t,r){if(console.log("EventStore - å°è¯•ç”Ÿæˆéšæœºäº‹ä»¶, å½“å‰å‘¨æ•°:",e),this.activeEvent!==null)return console.log("EventStore - å·²æœ‰å¾…å¤„ç†äº‹ä»¶ï¼Œè·³è¿‡ç”Ÿæˆ:",this.activeEvent.id),null;if(this.nextEventId){console.log("EventStore - æ£€æµ‹åˆ°é¢„è®¾çš„ä¸‹ä¸€ä¸ªäº‹ä»¶:",this.nextEventId);const i=this.eventSystem.getEventById(this.nextEventId);if(this.nextEventId=null,i)return console.log("EventStore - è§¦å‘é¢„è®¾äº‹ä»¶:",i.id,i.title),this.triggeredEvents.push({id:i.id,week:e}),this.activeEvent=i,i}console.log("EventStore - åˆ›å»ºæ¸¸æˆçŠ¶æ€å¯¹è±¡"),console.log("EventStore - playerData:",t?"å·²æä¾›":"æœªæä¾›"),console.log("EventStore - marketData:",r?"å·²æä¾›":"æœªæä¾›");try{const i={currentWeek:e,player:t,market:r,currentLocation:r.currentLocation};if(console.log("EventStore - æ¸¸æˆçŠ¶æ€å¯¹è±¡åˆ›å»ºæˆåŠŸ"),console.log("EventStore - å½“å‰åœ°ç‚¹:",i.currentLocation?i.currentLocation.id:"æœªçŸ¥"),Math.random()<.15){console.log("EventStore - å°è¯•è§¦å‘å½©è›‹äº‹ä»¶");const l=this.eventSystem.getEventById("meet_mucs");if(l&&this.eventSystem.checkEventConditions(l,i))return console.log("EventStore - æˆåŠŸè§¦å‘å½©è›‹äº‹ä»¶:",l.id,l.title),this.triggeredEvents.push({id:l.id,week:e}),this.activeEvent=l,l}const n=Math.min(.3,e*.01);console.log("EventStore - è°ƒç”¨äº‹ä»¶ç³»ç»Ÿæ£€æŸ¥äº‹ä»¶ï¼Œé¢å¤–æ¦‚ç‡:",n);let a=this.eventSystem.checkForEvents(i);return!a&&Math.random()<n&&(console.log("EventStore - åº”ç”¨é¢å¤–æ¦‚ç‡ï¼Œå¼ºåˆ¶å°è¯•ç”Ÿæˆäº‹ä»¶"),a=this.eventSystem.generateStageAppropriateEvent(i)),a?(console.log("EventStore - æˆåŠŸç”Ÿæˆäº‹ä»¶:",a.id,a.title),this.triggeredEvents.push({id:a.id,week:e}),this.activeEvent=a,a):(console.log("EventStore - æ²¡æœ‰ç”Ÿæˆäº‹ä»¶"),null)}catch(i){return L(i,"EventState.generateRandomEvent",S.GAME_LOGIC,P.ERROR),console.error("EventStore - ç”Ÿæˆéšæœºäº‹ä»¶æ—¶å‡ºé”™:",i),null}},triggerSpecificEvent(e,t,r){const i={currentWeek:t.statistics.weekCount,player:t,market:r,currentLocation:r.currentLocation},o=this.eventSystem.triggerSpecificEvent(e,i);return o?(this.triggeredEvents.push({id:o.id,week:t.statistics.weekCount}),o):null},triggerTutorialEvent(e){const t=e.startsWith("tutorial_")?e:`tutorial_${e}`,r=this.eventSystem.getEventById(t);return r?(this.activeEvent=r,r):null},triggerEvent(e){var t;try{if(e.startsWith("tutorial_"))return!!this.triggerTutorialEvent(e);{const r=(t=this.eventSystem)==null?void 0:t.getEventById(e);if(r)return this.activeEvent=r,!0}return!1}catch(r){return L(r,"EventState.triggerEvent",S.GAME_LOGIC,P.WARNING),console.error("è§¦å‘äº‹ä»¶å¤±è´¥:",r),!1}},handleEventOption(e,t,r){if(!this.activeEvent||!e)return{success:!1,message:"æ— æ•ˆçš„äº‹ä»¶æˆ–é€‰é¡¹",appliedEffects:[]};console.log("EventState - å¤„ç†äº‹ä»¶é€‰é¡¹:",e),console.log("EventState - å½“å‰äº‹ä»¶:",this.activeEvent.id);const i={currentWeek:t.statistics.weekCount,player:t,market:r,currentLocation:r.currentLocation,products:r.products};let o;try{o=this.eventSystem.applyEventEffects(i,e.effects),console.log("EventState - äº‹ä»¶æ•ˆæœåº”ç”¨ç»“æœ:",o)}catch(n){console.error("EventState - åº”ç”¨äº‹ä»¶æ•ˆæœæ—¶å‡ºé”™:",n),L(n,"EventState.handleEventOption",S.GAME_LOGIC,P.ERROR),o={success:!1,message:"åº”ç”¨äº‹ä»¶æ•ˆæœæ—¶å‡ºé”™",appliedEffects:[]}}const s=o||{success:!0,appliedEffects:[]};if(typeof s.success>"u"&&(s.success=!0),s.appliedEffects||(s.appliedEffects=[]),e.effects&&e.effects.nextEvent&&(this.nextEventId=e.effects.nextEvent,console.log("EventState - è®¾ç½®ä¸‹ä¸€ä¸ªäº‹ä»¶:",this.nextEventId)),e.effects&&e.effects.forceLocationChange&&(this.forceLocationChange=!0,this.targetLocation=e.effects.targetLocation,console.log("EventState - è®¾ç½®å¼ºåˆ¶åœ°ç‚¹å˜æ›´:",this.targetLocation)),e.effects&&e.effects.capacity&&e.effects.capacity>0&&(console.log("EventState - èƒŒåŒ…å®¹é‡å¢åŠ :",e.effects.capacity),t.capacity+=e.effects.capacity,s.appliedEffects.some(n=>n.type==="capacity")||s.appliedEffects.push({type:"capacity",value:e.effects.capacity,success:!0})),e.effects&&e.effects.attributes){console.log("EventState - ç©å®¶å±æ€§å˜åŒ–:",e.effects.attributes),t.attributes||(t.attributes={});for(const[n,a]of Object.entries(e.effects.attributes)){const l=t.attributes[n];t.attributes[n]=a,s.appliedEffects.push({type:"attribute",attribute:n,oldValue:l,newValue:a,success:!0})}}return r&&s.appliedEffects&&s.appliedEffects.filter(a=>a.type==="market").length>0&&(console.log("EventState - åº”ç”¨å¸‚åœºæ•ˆæœåˆ°å¸‚åœºæ•°æ®"),typeof r.calculateAllPrices=="function"?r.calculateAllPrices():typeof r.updatePrices=="function"&&r.updatePrices()),ne.emit(ae.EVENT_COMPLETED,{eventId:this.activeEvent.id,optionId:e.id,nextEventId:this.nextEventId,effects:s.appliedEffects}),this.activeEvent=null,s},getActiveMarketModifiers(){return this.eventSystem?this.eventSystem.getActiveMarketModifiers():{}},clearForceLocationChange(){this.forceLocationChange=!1,this.targetLocation=null},clearNextEvent(){this.nextEventId=null}},getters:{currentEvent(e){return e.activeEvent},needsLocationChange(e){return e.forceLocationChange},targetLocationId(e){return e.targetLocation},eventStatistics(e){if(!e.eventSystem)return{total:0,byType:{}};const t=e.triggeredEvents.length,r={};return e.triggeredEvents.forEach(i=>{const o=e.eventSystem.getEventById(i.id);if(o){const s=o.type||"unknown";r[s]=(r[s]||0)+1}}),{total:t,byType:r}}}}),Lr=()=>{const e=Z(),t=H(),r=B(),i=m=>{const p={money:t.money,debt:t.debt,inventory:t.inventory,statistics:t.statistics,purchasedHouses:t.purchasedHouses},y={marketModifiers:r.marketModifiers,currentLocation:r.currentLocation?r.currentLocation.id:null,productPrices:r.productPrices};return e.generateRandomEvent(m,p,y)},o=m=>{const p=e.currentEvent;if(!p)return{success:!1,message:"æ²¡æœ‰æ´»è·ƒäº‹ä»¶"};let y=m;if(typeof m=="number"){if(m<0||m>=p.options.length)return{success:!1,message:"æ— æ•ˆçš„é€‰é¡¹ç´¢å¼•"};y=p.options[m]}if(!y)return console.warn("EventActions - æ— æ³•å¤„ç†ç©ºé€‰é¡¹"),{success:!1,message:"æ— æ•ˆçš„é€‰é¡¹"};try{console.log("EventActions - å¤„ç†é€‰é¡¹:",y);const k=y.effects||{},C=t,N=r,b={money:t.money,debt:t.debt,capacity:t.capacity,inventoryUsed:t.inventoryUsed,inventoryCount:t.inventory.length};console.log("EventActions - å¤„ç†é€‰é¡¹å‰çŠ¶æ€:",b);const M=e.handleEventOption(y,C,N),I={money:t.money,debt:t.debt,capacity:t.capacity,inventoryUsed:t.inventoryUsed,inventoryCount:t.inventory.length};console.log("EventActions - å¤„ç†é€‰é¡¹åçŠ¶æ€:",I);const x={money:I.money-b.money,debt:I.debt-b.debt,capacity:I.capacity-b.capacity,inventoryUsed:I.inventoryUsed-b.inventoryUsed,inventoryCount:I.inventoryCount-b.inventoryCount};console.log("EventActions - çŠ¶æ€å˜åŒ–:",x);const w=M||{success:!0};if(w.success!==!1){if(w.success=!0,w.appliedEffects||(w.appliedEffects=[]),x.money!==0&&!w.appliedEffects.some(O=>O.type==="money")&&w.appliedEffects.push({type:"money",value:x.money,success:!0}),x.debt!==0&&!w.appliedEffects.some(O=>O.type==="debt")&&w.appliedEffects.push({type:"debt",value:x.debt,success:!0}),x.capacity!==0&&!w.appliedEffects.some(O=>O.type==="capacity")&&w.appliedEffects.push({type:"capacity",value:x.capacity,success:!0}),k.market&&!w.appliedEffects.some(O=>O.type==="market")){const O={type:"market",effect:{...k.market},success:!0};(k.market.globalPriceModifier||k.market.categoryModifiers||k.market.productModifiers||k.market.locationModifiers||k.market.locationProductModifiers)&&w.appliedEffects.push(O)}if(w.effects&&w.effects.locationChanged&&e.needsLocationChange){const O=e.targetLocationId;O&&(r.changeLocation(O),e.clearForceLocationChange(),w.appliedEffects.push({type:"info",description:`å·²å‰å¾€${s(O)}`,success:!0}))}w.appliedEffects.length===0&&w.appliedEffects.push({type:"info",description:"é€‰é¡¹å·²æ‰§è¡Œï¼Œä½†æ²¡æœ‰äº§ç”Ÿç›´æ¥æ•ˆæœ",success:!0})}return w}catch(k){return console.error("EventActions - å¤„ç†é€‰é¡¹å‡ºé”™:",k),{success:!1,message:"å¤„ç†é€‰é¡¹æ—¶å‡ºé”™: "+(k.message||"æœªçŸ¥é”™è¯¯"),appliedEffects:[{type:"error",description:"å¤„ç†é€‰é¡¹å¤±è´¥: "+(k.message||"æœªçŸ¥é”™è¯¯"),success:!1}]}}},s=m=>({commodity_market:"å¤§å®—å•†å“å¸‚åœº",second_hand_market:"äºŒæ‰‹å¸‚åœº",premium_mall:"é«˜ç«¯å•†åœº",electronics_hub:"ç”µå­äº§å“ä¸­å¿ƒ",black_market:"é»‘å¸‚"})[m]||m;return{generateRandomEvent:i,handleEventOption:o,triggerSpecificEvent:m=>{const p={money:t.money,debt:t.debt,inventory:t.inventory,statistics:t.statistics,purchasedHouses:t.purchasedHouses},y={marketModifiers:r.marketModifiers,currentLocation:r.currentLocation?r.currentLocation.id:null,productPrices:r.productPrices};return e.triggerSpecificEvent(m,p,y)},triggerTutorialEvent:m=>e.triggerTutorialEvent(m),getCurrentEvent:()=>e.currentEvent,hasPendingEvent:()=>e.currentEvent!==null,getEventStatistics:()=>e.eventStatistics}},K=ce("gameCore",{state:()=>({currentWeek:1,maxWeeks:52,gameStarted:!1,gamePaused:!1,gameOver:!1,victoryAchieved:!1,gameResult:null,notifications:[],initialized:!1,gameGoals:{requiredNetWorth:4e5,targetWeeks:30}}),actions:{async startNewGame(e){console.log("GameCore - å¼€å§‹æ–°æ¸¸æˆ:",e),this.currentWeek=1,this.gameStarted=!0,this.gamePaused=!1,this.gameOver=!1,this.victoryAchieved=!1,this.gameResult=null;try{const t=H(),r=B(),i=Z();await t.initializePlayer(e),!t.name&&e&&(t.name=e),r.initializeMarket().then(()=>{r.updateLocationProducts(),console.log("GameCore - å¸‚åœºå•†å“å·²æ›´æ–°")}),i.resetEvents(),localStorage.setItem("lastPlayerName",e),console.log("GameCore - æ¸¸æˆåˆå§‹åŒ–å®Œæˆ")}catch(t){throw L(t,"gameState (gameCore)",S.UNKNOWN,P.ERROR),console.error("GameCore - åˆå§‹åŒ–æ¸¸æˆæ¨¡å—æ—¶å‡ºé”™:",t),t}},advanceWeek(){if(this.currentWeek<=this.maxWeeks&&!this.gameOver){this.currentWeek++,console.log(`GameCore - è¿›å…¥ç¬¬ ${this.currentWeek} å‘¨`);const e=H(),t=B(),r=Z();console.log("GameCore - æ›´æ–°ç©å®¶çŠ¶æ€"),e.updateWeeklyPlayerState(this.currentWeek),console.log("GameCore - æ›´æ–°å¸‚åœºçŠ¶æ€"),t.updateMarketState(this.currentWeek),console.log("GameCore - å‡†å¤‡ç”Ÿæˆéšæœºäº‹ä»¶");const i={money:e.money,debt:e.debt,inventory:e.inventory,statistics:e.statistics,purchasedHouses:e.purchasedHouses,name:e.name,capacity:e.capacity,inventoryUsed:e.inventoryUsed};console.log("GameCore - å·²å‡†å¤‡ç©å®¶æ•°æ®:",{money:i.money,debt:i.debt,inventoryCount:i.inventory.length});const o={marketModifiers:t.marketModifiers,currentLocation:t.currentLocation,productPrices:t.productPrices,products:t.products,locations:t.locations};console.log("GameCore - å·²å‡†å¤‡å¸‚åœºæ•°æ®:",{currentLocationId:o.currentLocation?o.currentLocation.id:"æœªè®¾ç½®",productCount:o.products.length,locationCount:o.locations.length}),console.log("GameCore - è°ƒç”¨äº‹ä»¶ç”Ÿæˆå‡½æ•°");let s=r.generateRandomEvent(this.currentWeek,i,o);return!s&&this.currentWeek%3===0&&(console.log("GameCore - ç¬¬ä¸€æ¬¡æœªç”Ÿæˆäº‹ä»¶ï¼Œå°è¯•ç¬¬äºŒæ¬¡ç”Ÿæˆ"),s=r.generateRandomEvent(this.currentWeek,i,o)),s?(console.log("GameCore - æˆåŠŸç”Ÿæˆéšæœºäº‹ä»¶:",s.id,s.title),r.activeEvents.includes(s)||(r.activeEvents.push(s),console.log("GameCore - äº‹ä»¶å·²åŠ å…¥æ´»è·ƒé˜Ÿåˆ—, å½“å‰é˜Ÿåˆ—é•¿åº¦:",r.activeEvents.length))):console.log("GameCore - æœ¬å‘¨æœªè§¦å‘äº‹ä»¶"),this.checkGameEnd(),!0}else{if(this.maxWeeks===52&&this.currentWeek>this.maxWeeks)this.gameOver=!0;else{this.currentWeek++;const e=H(),t=B(),r=Z();e.updateWeeklyPlayerState(this.currentWeek),t.updateMarketState(this.currentWeek);const i={money:e.money,debt:e.debt,inventory:e.inventory,statistics:e.statistics,purchasedHouses:e.purchasedHouses,name:e.name,capacity:e.capacity,inventoryUsed:e.inventoryUsed},o={marketModifiers:t.marketModifiers,currentLocation:t.currentLocation,productPrices:t.productPrices,products:t.products,locations:t.locations};let s=r.generateRandomEvent(this.currentWeek,i,o);return!s&&this.currentWeek%3===0&&(s=r.generateRandomEvent(this.currentWeek,i,o)),s&&(r.activeEvents.includes(s)||r.activeEvents.push(s)),this.checkGameEnd(),!0}return!1}},hasAffordableProducts(e=!0){const t=H(),r=B(),i=e?t.money+t.bankDeposit:t.money;if(t.inventoryUsed>0)return!0;for(const o of r.locations){const s=r.getLocationAvailableProducts(o);for(const n of s){if(!r.products.find(d=>d.id===n))continue;if(r.getCurrentProductPrice(n)<=i)return!0}}return!1},checkGameEnd(){if(this.gameOver)return;if(this.currentWeek>this.maxWeeks){this.endGameWithTimeLimit();return}const t=H().netWorth;if(t>=1e6&&!this.victoryAchieved){this.achieveVictory();return}if(this.currentWeek>1&&t<0&&!this.hasAffordableProducts(!0)){this.endGame("bankruptcy");return}},endGameWithTimeLimit(){var r,i,o,s,n,a,l;const e=H(),t=e.purchasedHouses&&e.purchasedHouses.length>0;if(console.log("æ¸¸æˆæ—¶é—´é™åˆ¶è¾¾åˆ° - endGameWithTimeLimit",{victoryAchieved:this.victoryAchieved,hasHouses:t,purchasedHouses:(r=e.purchasedHouses)==null?void 0:r.length,netWorth:e.netWorth}),this.victoryAchieved||t){const d=this.calculateGameScore("victoryTimeLimit"),h=this.calculateRank(d),m=this.calculateScoreDetails("victoryTimeLimit");if(console.log("æ—¶é—´é™åˆ¶èƒœåˆ© - ç›´æ¥è®¡ç®—å¾—åˆ†",{finalScore:d,rank:h}),this.gameResult={reason:"victoryTimeLimit",week:this.currentWeek,weeksPassed:this.currentWeek,score:d,achievementName:null,victoryAchieved:!0,firstVictoryWeek:((i=this.gameResult)==null?void 0:i.firstVictoryWeek)||this.currentWeek,firstVictoryHouse:((o=this.gameResult)==null?void 0:o.firstVictoryHouse)||null,finalMoney:e.money,finalAssets:e.netWorth,debt:e.debt,tradeStats:{totalTrades:((s=e.statistics)==null?void 0:s.transactionCount)||0,totalProfit:((n=e.statistics)==null?void 0:n.totalProfit)||0,averageProfit:((a=e.statistics)==null?void 0:a.transactionCount)>0?(((l=e.statistics)==null?void 0:l.totalProfit)||0)/e.statistics.transactionCount:0},scoreDetails:{score:d,rank:h,details:m},endReason:"victoryTimeLimit"},this.gameOver=!0,e.purchasedHouses.length>0){this.gameResult.allPurchasedHouses=e.purchasedHouses,this.gameResult.houseCount=e.purchasedHouses.length;let p=e.purchasedHouses[0],y=e.purchasedHouses[0];e.purchasedHouses.forEach(k=>{k.purchasePrice>p.purchasePrice&&(p=k),(k.level>y.level||k.level===y.level&&k.purchasePrice>y.purchasePrice)&&(y=k)}),this.gameResult.mostExpensiveHouse=p,this.gameResult.highestLevelHouse=y}console.log("æ—¶é—´é™åˆ¶èƒœåˆ© - æ¸¸æˆç»“æœå¯¹è±¡å·²åˆ›å»º",{score:this.gameResult.score,scoreDetails:this.gameResult.scoreDetails})}else this.endGame("timeLimit")},achieveVictory(){const e=H();this.gameResult={reason:"victory",week:this.currentWeek,score:this.calculateGameScore("victory"),continuedPlay:!0,firstVictoryWeek:this.currentWeek,firstVictoryHouse:e.mostExpensiveHouse},e.addMoney(5e4),this.addNotification("reward","ä½œä¸ºè´­ä¹°è±ªå®…çš„å¥–åŠ±ï¼Œæ‚¨è·å¾—äº†é¢å¤–çš„50,000å…ƒï¼")},achieveVictoryWithHouse(e){var a,l,d,h;this.victoryAchieved=!0;const t=H();console.log("è´­æˆ¿èƒœåˆ© - å¼€å§‹è®¡ç®—ç»“æœ",{houseCount:t.purchasedHouses.length,netWorth:t.netWorth}),e&&(e.image?e.image.startsWith("./")?e.image=e.image.replace("./","/"):e.image.startsWith("/")||(e.image=`/${e.image}`):e.image="/resources/assets/images/house_1.jpeg"),t.purchasedHouses.some(m=>m.houseId===e.id||m.id===e.id)||console.warn("æˆ¿å±‹è´­ä¹°è®°å½•ä¸ä¸€è‡´ï¼Œè¿™ç§æƒ…å†µä¸åº”è¯¥å‡ºç°");const i=this.calculateGameScore("houseVictory"),o=this.calculateRank(i),s=this.calculateScoreDetails("houseVictory");console.log("è´­æˆ¿èƒœåˆ© - è®¡ç®—å¾—åˆ†ç»“æœ",{finalScore:i,scoreRank:o,details:s});const n={...e};(!n.image||n.image.includes("NaN"))&&(console.warn("æˆ¿å±‹å›¾ç‰‡è·¯å¾„æ— æ•ˆï¼Œä½¿ç”¨é»˜è®¤å€¼"),n.image="/resources/assets/images/house_1.jpeg"),this.gameResult={reason:"houseVictory",week:this.currentWeek,weeksPassed:this.currentWeek,score:i,victoryAchieved:!0,firstVictoryWeek:this.currentWeek,firstVictoryHouse:n,canContinue:!0,finalMoney:t.money,finalAssets:t.netWorth,debt:t.debt,purchasedHouse:n,tradeStats:{totalTrades:((a=t.statistics)==null?void 0:a.transactionCount)||0,totalProfit:((l=t.statistics)==null?void 0:l.totalProfit)||0,averageProfit:((d=t.statistics)==null?void 0:d.transactionCount)>0?(((h=t.statistics)==null?void 0:h.totalProfit)||0)/t.statistics.transactionCount:0},scoreDetails:{score:i,rank:o,details:s},endReason:"houseVictory"},this.gameOver=!0,console.log("è´­æˆ¿èƒœåˆ© - æ¸¸æˆç»“æœå¯¹è±¡åˆ›å»ºå®Œæˆ",{score:this.gameResult.score,scoreDetails:this.gameResult.scoreDetails})},continueGame(){this.gameOver=!1,this.victoryAchieved=!0},endGame(e,t=null){var n,a,l,d,h,m,p,y;this.gameOver=!0,this.victoryAchieved&&e!=="victory"&&e!=="victoryTimeLimit"&&(e="victoryOther");const r=H();console.log("æ¸¸æˆç»“æŸ - endGame",{reason:e,week:this.currentWeek,netWorth:r.netWorth,houseCount:((n=r.purchasedHouses)==null?void 0:n.length)||0});const i=this.calculateGameScore(e),o=this.calculateRank(i),s=this.calculateScoreDetails(e);console.log("endGameå¾—åˆ†è®¡ç®—å®Œæˆ",{score:i,rank:o,details:s}),this.gameResult={reason:e,week:this.currentWeek,weeksPassed:this.currentWeek,score:i,achievementName:t,victoryAchieved:this.victoryAchieved,firstVictoryWeek:((a=this.gameResult)==null?void 0:a.firstVictoryWeek)||null,firstVictoryHouse:((l=this.gameResult)==null?void 0:l.firstVictoryHouse)||null,finalMoney:r.money,finalAssets:r.netWorth,debt:r.debt,tradeStats:{totalTrades:((d=r.statistics)==null?void 0:d.transactionCount)||0,totalProfit:((h=r.statistics)==null?void 0:h.totalProfit)||0,averageProfit:((m=r.statistics)==null?void 0:m.transactionCount)>0?(((p=r.statistics)==null?void 0:p.totalProfit)||0)/r.statistics.transactionCount:0},scoreDetails:{score:i,rank:o,details:s},endReason:e,data:{debt:r.debt,firstVictoryWeek:((y=this.gameResult)==null?void 0:y.firstVictoryWeek)||this.currentWeek}},console.log("æ¸¸æˆç»“æœå¯¹è±¡å·²åˆ›å»º",{score:this.gameResult.score,scoreInDetails:this.gameResult.scoreDetails.score})},calculateGameScore(e){var r,i;const t=H();try{console.log("è®¡ç®—æ¸¸æˆå¾—åˆ† - åŸå§‹æ•°æ®",{netWorth:t.netWorth,money:t.money,debt:t.debt,week:this.currentWeek,endReason:e,purchasedHouses:((r=t.purchasedHouses)==null?void 0:r.length)||0});let o=t.netWorth;(isNaN(o)||o===void 0)&&(console.warn("è®¡ç®—æ¸¸æˆå¾—åˆ† - å‡€èµ„äº§æ— æ•ˆï¼Œä½¿ç”¨å¤‡ç”¨è®¡ç®—"),o=(t.money||0)-(t.debt||0)),o=Math.max(1e3,o);const s=o/1e3;let n=1;switch(e){case"victory":case"houseVictory":n=1.5;break;case"victoryTimeLimit":n=2;break;case"bankruptcy":n=.5;break;case"achievement":n=1.2;break;default:n=1;break}let a=1;if(e.includes("victory")){const p=Math.max(1,this.currentWeek);a=Math.max(.5,1+10/p)}let d=1;const h=((i=t.purchasedHouses)==null?void 0:i.length)||0;h>0&&(d=1+h*.2);let m=s*n*a*d;return m=Math.max(1,Math.floor(m)),console.log("è®¡ç®—æ¸¸æˆå¾—åˆ† - æœ€ç»ˆç»“æœ",{baseScore:s,multiplier:n,speedMultiplier:a,houseBonus:d,totalScore:m}),m}catch(o){return console.error("è®¡ç®—æ¸¸æˆå¾—åˆ†æ—¶å‘ç”Ÿé”™è¯¯:",o),Math.max(1,Math.floor(t.netWorth/1e3))}},calculateRank(e){return e>=1e6?"S":e>=5e5?"A":e>=2e5?"B":e>=1e5?"C":"D"},calculateScoreDetails(e){var t,r,i;try{const o=H();console.log("è®¡ç®—å¾—åˆ†æ˜ç»† - å¼€å§‹",{endReason:e,playerNetWorth:o.netWorth});let s=0;try{s=Math.max(0,Math.floor(o.netWorth/800)),console.log("èµ„äº§å¾—åˆ†è®¡ç®—",{netWorth:o.netWorth,assetsScore:s})}catch(m){console.error("èµ„äº§å¾—åˆ†è®¡ç®—é”™è¯¯:",m),s=100}let n=0;try{if(e.includes("victory")){const m=Math.max(1,this.currentWeek);n=Math.round(5e5/m),console.log("æ—¶é—´æ•ˆç‡å¾—åˆ†è®¡ç®—",{week:m,timeScore:n})}}catch(m){console.error("æ—¶é—´æ•ˆç‡å¾—åˆ†è®¡ç®—é”™è¯¯:",m),n=50}let a=0;try{if(o.purchasedHouses&&o.purchasedHouses.length>0){let m=0;o.purchasedHouses.forEach(p=>{const y=p.purchasePrice||p.price||0;m+=y}),a=Math.floor(m/5e3),o.purchasedHouses.length>1&&(a*=1+(o.purchasedHouses.length-1)*.2),console.log("æˆ¿äº§å¾—åˆ†è®¡ç®—",{houseCount:o.purchasedHouses.length,totalHouseValue:m,houseScore:a})}}catch(m){console.error("æˆ¿äº§å¾—åˆ†è®¡ç®—é”™è¯¯:",m),a=100}let l=0;try{const m=((t=o.statistics)==null?void 0:t.totalProfit)||0,p=((r=o.statistics)==null?void 0:r.transactionCount)||0;p>0&&(l=Math.floor(m/1e3),p>10&&(l*=1+(p-10)*.02)),console.log("äº¤æ˜“å¾—åˆ†è®¡ç®—",{tradeCount:p,totalProfit:m,tradeScore:l})}catch(m){console.error("äº¤æ˜“å¾—åˆ†è®¡ç®—é”™è¯¯:",m),l=50}let d=0;try{const m=((i=o.statistics)==null?void 0:i.totalInterestEarned)||0;m>0?d=Math.floor(m/500):d=Math.floor(o.bankDeposit/1e4),console.log("é“¶è¡Œå¾—åˆ†è®¡ç®—",{totalInterest:m,bankDeposit:o.bankDeposit,bankScore:d})}catch(m){console.error("é“¶è¡Œå¾—åˆ†è®¡ç®—é”™è¯¯:",m),d=10}const h=s+n+a+l+d;return console.log("å¾—åˆ†æ˜ç»†æ€»ç»“",{assetsScore:s,timeScore:n,houseScore:a,tradeScore:l,bankScore:d,totalScore:h}),{assetsScore:s,timeScore:n,houseScore:a,tradeScore:l,bankScore:d,totalScore:h}}catch(o){return console.error("è®¡ç®—å¾—åˆ†æ˜ç»†æ—¶å‡ºé”™:",o),{assetsScore:100,timeScore:50,houseScore:100,tradeScore:50,bankScore:10,totalScore:310}}},addNotification(e,t){this.notifications.push({id:Date.now(),type:e,message:t,timestamp:new Date().toISOString()}),this.notifications.length>10&&this.notifications.shift()},pauseGame(){this.gameStarted&&!this.gameOver&&(this.gamePaused=!0)},resumeGame(){this.gamePaused=!1},manualEndGame(){const e=H();let t="playerChoice";e.purchasedHouses&&e.purchasedHouses.length>0&&(t="victory",this.victoryAchieved||(this.victoryAchieved=!0,this.gameResult={firstVictoryWeek:this.currentWeek,firstVictoryHouse:e.purchasedHouses[e.purchasedHouses.length-1]})),this.endGame(t)},triggerSpecificEvent(e){console.log("GameCore - å°è¯•è§¦å‘ç‰¹å®šäº‹ä»¶:",e);try{const t=Z(),r=H(),i=B(),o={money:r.money,debt:r.debt,inventory:r.inventory,statistics:r.statistics,purchasedHouses:r.purchasedHouses,name:r.name,capacity:r.capacity,inventoryUsed:r.inventoryUsed},s={marketModifiers:i.marketModifiers,currentLocation:i.currentLocation,productPrices:i.productPrices,products:i.products,locations:i.locations},n=t.triggerSpecificEvent(e,o,s);return n?(console.log("GameCore - æˆåŠŸè§¦å‘ç‰¹å®šäº‹ä»¶:",n.id,n.title),this.activeEvents.includes(n)||(this.activeEvents.push(n),console.log("GameCore - äº‹ä»¶å·²æ·»åŠ åˆ°æ´»è·ƒé˜Ÿåˆ—, å½“å‰é˜Ÿåˆ—é•¿åº¦:",this.activeEvents.length)),n):(console.warn("GameCore - è§¦å‘ç‰¹å®šäº‹ä»¶å¤±è´¥:",e),null)}catch(t){return L(t,"gameState.triggerSpecificEvent",S.GAME_LOGIC,P.ERROR),console.error("GameCore - è§¦å‘ç‰¹å®šäº‹ä»¶æ—¶å‡ºé”™:",t),null}},initializeGameCore(){return new Promise(e=>{console.log("GameCore - åˆå§‹åŒ–æ¸¸æˆæ ¸å¿ƒ"),setTimeout(()=>{this.initialized=!0,console.log("GameCore - æ¸¸æˆæ ¸å¿ƒåˆå§‹åŒ–å®Œæˆ"),e()},300)})},updateGameState(){console.log("GameCore - æ›´æ–°æ¸¸æˆçŠ¶æ€"),this.gameStarted&&!this.gameOver&&this.checkGameEnd(),this.notifications.length>10&&(this.notifications=this.notifications.slice(-10))}},getters:{gameProgress(){if(this.maxWeeks>52)return Math.min(5,this.currentWeek/1e3*100);const e=(this.currentWeek-1)/this.maxWeeks*100;return Math.max(0,Math.min(100,e))},isGameActive(){return this.gameStarted&&!this.gameOver&&!this.gamePaused},remainingWeeks(){if(this.maxWeeks>52)return"âˆ";const e=this.maxWeeks-this.currentWeek+1;return Math.max(0,e)},isEndlessMode(){return this.maxWeeks>52}}}),wr=Object.freeze(Object.defineProperty({__proto__:null,useGameCoreStore:K},Symbol.toStringTag,{value:"Module"}));function Ue(e){const t=[];if(!e||typeof e!="object")return{isValid:!1,issues:["å­˜æ¡£æ•°æ®æ— æ•ˆæˆ–å·²æŸå"]};e.version||t.push("ç¼ºå°‘ç‰ˆæœ¬ä¿¡æ¯");const r=["gameCore","player","market","event"];for(const i of r)e[i]||t.push(`ç¼ºå°‘${i}éƒ¨åˆ†`);if(e.gameCore&&(typeof e.gameCore.currentWeek!="number"&&t.push("æ¸¸æˆå‘¨æ•°æ— æ•ˆ"),typeof e.gameCore.maxWeeks!="number"&&t.push("æœ€å¤§å‘¨æ•°æ— æ•ˆ"),e.gameCore.currentWeek>e.gameCore.maxWeeks&&t.push("æ¸¸æˆå‘¨æ•°è¶…è¿‡æœ€å¤§å‘¨æ•°")),e.player)if(typeof e.player.name!="string"&&t.push("ç©å®¶åç§°æ— æ•ˆ"),typeof e.player.money!="number"&&t.push("ç©å®¶é‡‘é’±æ— æ•ˆ"),e.player.money<0&&t.push("ç©å®¶é‡‘é’±ä¸ºè´Ÿæ•°"),Array.isArray(e.player.inventory)||t.push("åº“å­˜æ•°æ®æ— æ•ˆ"),Array.isArray(e.player.purchasedHouses)||t.push("æˆ¿äº§æ•°æ®æ— æ•ˆ"),!e.player.statistics||typeof e.player.statistics!="object")t.push("ç©å®¶ç»Ÿè®¡æ•°æ®æ— æ•ˆ");else{const i=["weekCount","transactionCount","totalProfit","maxMoney"];for(const o of i)typeof e.player.statistics[o]!="number"&&t.push(`ç»Ÿè®¡æ•°æ® ${o} æ— æ•ˆæˆ–ç¼ºå¤±`)}return e.market&&(Array.isArray(e.market.locations)||t.push("åœ°ç‚¹æ•°æ®æ— æ•ˆ"),(!e.market.productPrices||typeof e.market.productPrices!="object")&&t.push("ä»·æ ¼æ•°æ®æ— æ•ˆ"),Array.isArray(e.market.products)&&e.market.products.length!==new Set(e.market.products).size&&t.push("äº§å“æ•°æ®åŒ…å«é‡å¤é¡¹")),e.event&&(e.event.activeEvent&&typeof e.event.activeEvent!="object"&&t.push("æ´»åŠ¨äº‹ä»¶æ•°æ®æ— æ•ˆ"),Array.isArray(e.event.triggeredEvents)||t.push("è§¦å‘äº‹ä»¶è®°å½•æ— æ•ˆ")),{isValid:t.length===0,issues:t}}function tt(e,t=null){const r=e||{};let i=[];t||(t=mr(),i.push("ä½¿ç”¨é»˜è®¤æ¨¡æ¿æ•°æ®")),r.version=r.version||"0.1.1",r.timestamp=r.timestamp||new Date().toISOString(),i.push(`è®¾ç½®ç‰ˆæœ¬ä¸º: ${r.version}`),r.gameCore=r.gameCore||{},r.player=r.player||{},r.market=r.market||{},r.event=r.event||{},r.gameCore.currentWeek=J(r.gameCore.currentWeek,1),r.gameCore.maxWeeks=J(r.gameCore.maxWeeks,52),r.gameCore.gameStarted=Ve(r.gameCore.gameStarted,!0),r.gameCore.gamePaused=Ve(r.gameCore.gamePaused,!1),r.gameCore.gameOver=Ve(r.gameCore.gameOver,!1),r.gameCore.notifications=Array.isArray(r.gameCore.notifications)?r.gameCore.notifications:[],r.gameCore.gameGoals=r.gameCore.gameGoals||{requiredNetWorth:4e5,targetWeeks:30,debtRatio:.4},r.gameCore.currentWeek>r.gameCore.maxWeeks&&(r.gameCore.currentWeek=r.gameCore.maxWeeks,i.push("ä¿®å¤: è°ƒæ•´å½“å‰å‘¨æ•°ä¸è¶…è¿‡æœ€å¤§å‘¨æ•°")),r.player.name=r.player.name||"ç©å®¶",r.player.money=J(r.player.money,5e3),r.player.money<0&&(r.player.money=0,i.push("ä¿®å¤: é‡ç½®è´Ÿæ•°é‡‘é’±ä¸º0")),r.player.debt=J(r.player.debt,2e3),r.player.capacity=J(r.player.capacity,100),r.player.inventoryUsed=J(r.player.inventoryUsed,0),r.player.inventory=Array.isArray(r.player.inventory)?r.player.inventory:[],r.player.purchasedHouses=Array.isArray(r.player.purchasedHouses)?r.player.purchasedHouses:[];const o=r.player.inventory.reduce((s,n)=>s+(n.quantity||0),0);if(r.player.inventoryUsed!==o&&(r.player.inventoryUsed=o,i.push("ä¿®å¤: è°ƒæ•´åº“å­˜ä½¿ç”¨é‡ä»¥åŒ¹é…å®é™…åº“å­˜")),r.player.statistics=r.player.statistics||{},r.player.statistics.weekCount=J(r.player.statistics.weekCount,r.gameCore.currentWeek),r.player.statistics.transactionCount=J(r.player.statistics.transactionCount,0),r.player.statistics.totalProfit=J(r.player.statistics.totalProfit,0),r.player.statistics.maxMoney=J(r.player.statistics.maxMoney,Math.max(r.player.money,5e3)),r.player.purchasedHouses.length>0&&(!r.player.statistics.housePurchases||r.player.statistics.housePurchases.length===0)?(r.player.statistics.housePurchases=r.player.purchasedHouses.map(s=>({houseId:s.houseId,name:s.name||`${s.level}çº§æˆ¿äº§`,level:s.level||1,price:s.purchasePrice,week:s.purchaseWeek||r.gameCore.currentWeek})),i.push("ä¿®å¤: é‡å»ºæˆ¿å±‹è´­ä¹°è®°å½•")):r.player.statistics.housePurchases||(r.player.statistics.housePurchases=[]),r.player.purchasedHouses.length>0&&r.player.statistics.firstHousePurchaseWeek===null){const s=[...r.player.purchasedHouses].sort((n,a)=>(n.purchaseWeek||1/0)-(a.purchaseWeek||1/0))[0];r.player.statistics.firstHousePurchaseWeek=s.purchaseWeek||Math.max(1,r.gameCore.currentWeek-1),i.push("ä¿®å¤: è®¾ç½®é¦–æ¬¡è´­æˆ¿å‘¨æ•°")}if((!Array.isArray(r.market.locations)||r.market.locations.length===0)&&(r.market.locations=t.market&&Array.isArray(t.market.locations)?[...t.market.locations]:[],r.market.locations.length>0&&i.push("ä¿®å¤: ä»æ¨¡æ¿æ¢å¤åœ°ç‚¹æ•°æ®")),r.market.productPrices=r.market.productPrices||{},t&&t.market&&t.market.productPrices){let s=0;for(const n in t.market.productPrices)r.market.productPrices[n]||(r.market.productPrices[n]=t.market.productPrices[n],s++);s>0&&i.push(`ä¿®å¤: ä»æ¨¡æ¿æ¢å¤${s}ä¸ªäº§å“ä»·æ ¼æ•°æ®`)}return Array.isArray(r.event.triggeredEvents)||(r.event.triggeredEvents=[],i.push("ä¿®å¤: åˆå§‹åŒ–è§¦å‘äº‹ä»¶è®°å½•")),console.log("å­˜æ¡£ä¿®å¤æ—¥å¿—:",i),{data:r,repairLog:i}}function mr(){return{version:"0.1.0",gameCore:{currentWeek:1,maxWeeks:52,gameStarted:!0,gamePaused:!1,gameOver:!1},player:{name:"ç©å®¶",money:5e3,debt:2e3,capacity:100,inventory:[],purchasedHouses:[]},market:{locations:[{id:"location1",name:"å¸‚ä¸­å¿ƒ",specialProducts:["product1","product2"]},{id:"location2",name:"éƒŠåŒº",specialProducts:["product3","product4"]},{id:"location3",name:"å•†ä¸šåŒº",specialProducts:["product5","product6"]},{id:"location4",name:"ä½å®…åŒº",specialProducts:["product7","product8"]},{id:"location5",name:"å·¥ä¸šåŒº",specialProducts:["product9","product10"]}],productPrices:{}},event:{activeEvent:null,triggeredEvents:[]}}}function J(e,t){const r=Number(e);return isNaN(r)?t:r}function Ve(e,t){return typeof e=="boolean"?e:t}function pr(e,t="0.1.1"){if(!e)return null;if(e.version||(e.version="0.1.0"),e.version===t)return e;let r={...e};return e.version==="0.1.0"&&t==="0.1.1"&&(r.gameState||(r.gameState={})),r.version=t,r}class ct{async getData(t){throw new Error("StorageService.getData must be implemented by subclass")}async setData(t,r){throw new Error("StorageService.setData must be implemented by subclass")}async removeData(t){throw new Error("StorageService.removeData must be implemented by subclass")}async clearAll(){throw new Error("StorageService.clearAll must be implemented by subclass")}}class fr extends ct{constructor(t="game_"){super(),this.prefix=t}getFullKey(t){return`${this.prefix}${t}`}async getData(t){try{const r=this.getFullKey(t),i=localStorage.getItem(r);return i?JSON.parse(i):null}catch(r){throw L(r,"storageService (persistence)",S.STORAGE,P.ERROR),Ge(`Failed to get data for key ${t}`,{originalError:r.message})}}_safeStringify(t){try{return JSON.stringify(t)}catch{if(console.warn("æ ‡å‡†åºåˆ—åŒ–å¤±è´¥ï¼Œå°è¯•æ‰‹åŠ¨åºåˆ—åŒ–"),t==null)return JSON.stringify(null);if(typeof t!="object")return JSON.stringify(t);if(Array.isArray(t)){const o=[];for(let s=0;s<t.length;s++)try{const n=t[s];typeof n=="object"&&n!==null?o.push(JSON.parse(this._safeStringify(n))):o.push(n)}catch{o.push(null)}return JSON.stringify(o)}const i={};for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{const s=t[o];typeof s=="object"&&s!==null?i[o]=JSON.parse(this._safeStringify(s)):typeof s=="function"?i[o]="[å‡½æ•°]":i[o]=s}catch{console.warn(`æ— æ³•åºåˆ—åŒ–å±æ€§ ${o}`),i[o]=null}return JSON.stringify(i)}}async setData(t,r){try{console.log(`LocalStorage: ä¿å­˜æ•°æ®åˆ° ${t}`);const i=this.getFullKey(t);let o;try{o=this._safeStringify(r)}catch(s){console.warn("åºåˆ—åŒ–å¤±è´¥ï¼Œä½¿ç”¨åŸºæœ¬æ•°æ®",s),o=JSON.stringify({_simplified:!0,timestamp:new Date().toISOString(),key:t})}return localStorage.setItem(i,o),!0}catch(i){return L(i,"storageService (persistence)",S.STORAGE,P.ERROR),console.error(`ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨å¤±è´¥: ${t}`,i),!1}}async removeData(t){try{const r=this.getFullKey(t);return localStorage.removeItem(r),!0}catch(r){throw L(r,"storageService (persistence)",S.STORAGE,P.ERROR),Ge(`Failed to remove data for key ${t}`,{originalError:r.message})}}async clearAll(){try{return Object.keys(localStorage).forEach(t=>{t.startsWith(this.prefix)&&localStorage.removeItem(t)}),!0}catch(t){throw L(t,"storageService (persistence)",S.STORAGE,P.ERROR),Ge("Failed to clear all data",{originalError:t.message})}}}class hr extends ct{constructor(t="game_"){super(),this.prefix=t,this.isInitialized=!1,this.fallbackStorage=new fr,this.initializeElectronAPI()}async initializeElectronAPI(){try{window.electronAPI&&window.electronAPI.getConfig?(await window.electronAPI.getConfig(),this.isInitialized=!0,console.log("ElectronStorageServiceåˆå§‹åŒ–æˆåŠŸ")):console.warn("Electron APIä¸å¯ç”¨ï¼Œå°†ä½¿ç”¨LocalStorageä½œä¸ºå¤‡ç”¨")}catch(t){L(t,"storageService (persistence)",S.STORAGE,P.ERROR),console.error("åˆå§‹åŒ–ElectronStorageServiceå¤±è´¥:",t)}return this.isInitialized}async getData(t){try{if(!this.isInitialized)return await this.fallbackStorage.getData(t);if(!window.electronAPI||!window.electronAPI.getConfig)throw new Error("Electron APIä¸å¯ç”¨");const r=this.prefix+t,i=await window.electronAPI.getConfig();return i&&i[r]!==void 0?i[r]:null}catch(r){return L(r,"storageService (persistence)",S.UNKNOWN,P.ERROR),console.error(`è·å–æ•°æ®å¤±è´¥ [${t}]:`,r),await this.fallbackStorage.getData(t)}}_safeSerialize(t){try{return console.log("å°è¯•å®‰å…¨åºåˆ—åŒ–æ•°æ®"),JSON.parse(JSON.stringify(t))}catch(r){if(console.warn("æ ‡å‡†JSONåºåˆ—åŒ–å¤±è´¥ï¼Œå°è¯•æ‰‹åŠ¨åºåˆ—åŒ–",r),t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>this._safeSerialize(o));const i={};for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{i[o]=this._safeSerialize(t[o])}catch(s){console.warn(`æ— æ³•åºåˆ—åŒ–å±æ€§ ${o}:`,s),typeof t[o]=="function"?i[o]="[å‡½æ•°]":typeof t[o]=="object"?i[o]="[å¤æ‚å¯¹è±¡]":i[o]=null}return i}}async setData(t,r){try{console.log(`æ­£åœ¨ä¿å­˜æ•°æ® [${t}]...`);const i=await this.fallbackStorage.setData(t,r);if(console.log(`å¤‡ç”¨å­˜å‚¨ä¿å­˜${i?"æˆåŠŸ":"å¤±è´¥"}`),!this.isInitialized)return console.log("ElectronAPIæœªåˆå§‹åŒ–ï¼Œä»…ä½¿ç”¨å¤‡ç”¨å­˜å‚¨"),i;if(!window.electronAPI||!window.electronAPI.setConfig)throw new Error("Electron APIä¸å¯ç”¨");const o=this._safeSerialize(r);console.log("æ•°æ®å·²å®‰å…¨åºåˆ—åŒ–");const n={[this.prefix+t]:o};return await window.electronAPI.setConfig(n),console.log(`æ•°æ®æˆåŠŸä¿å­˜åˆ° [${t}]`),!0}catch(i){if(L(i,"storageService (persistence)",S.UNKNOWN,P.ERROR),console.error(`è®¾ç½®æ•°æ®å¤±è´¥ [${t}]:`,i),t.includes("Save_")&&window.electronAPI&&window.electronAPI.saveGame)try{console.log("å°è¯•ä½¿ç”¨saveGame APIä¿å­˜...");const o=t.replace(this.prefix,"").replace("Save_",""),s=await window.electronAPI.saveGame({name:o,gameState:r});if(s&&s.success)return console.log("ä½¿ç”¨saveGame APIä¿å­˜æˆåŠŸ"),!0}catch(o){console.error("saveGame APIä¿å­˜å¤±è´¥",o)}return await this.fallbackStorage.setData(t,r)}}async removeData(t){try{if(!this.isInitialized)return await this.fallbackStorage.removeData(t);if(!window.electronAPI||!window.electronAPI.setConfig)throw new Error("Electron APIä¸å¯ç”¨");const i={[this.prefix+t]:void 0};return await window.electronAPI.setConfig(i),!0}catch(r){return L(r,"storageService (persistence)",S.UNKNOWN,P.ERROR),console.error(`åˆ é™¤æ•°æ®å¤±è´¥ [${t}]:`,r),await this.fallbackStorage.removeData(t)}}async clearAll(){try{if(!this.isInitialized)return await this.fallbackStorage.clearAll();if(!window.electronAPI||!window.electronAPI.clearConfig)throw new Error("Electron APIä¸å¯ç”¨");const t=await window.electronAPI.getConfig(),r=Object.keys(t).filter(o=>o.startsWith(this.prefix));if(r.length===0)return!0;const i={};return r.forEach(o=>{i[o]=void 0}),await window.electronAPI.setConfig(i),!0}catch(t){return L(t,"storageService (persistence)",S.UNKNOWN,P.ERROR),console.error("æ¸…é™¤æ‰€æœ‰æ•°æ®å¤±è´¥:",t),await this.fallbackStorage.clearAll()}}}const X=new hr,be="saveList",Ee="houseJourneySave_",xe=3,gr=5,ge="0.1.1",yr=ce("save",{state:()=>({saveList:[],isLoading:!1,lastAutoSaveWeek:0,autoSaveEnabled:!0,saveTemplate:null,lastValidatedSave:null}),actions:{async init(){try{await this.loadSaveList(),this.createSaveTemplate(),this.autoSaveEnabled&&setInterval(()=>{const e=K();e.gameStarted&&!e.gameOver&&!e.gamePaused&&this.checkAutoSave(e.currentWeek)},6e4)}catch(e){L(e,"saveSystem (persistence)",S.UNKNOWN,P.ERROR),console.error("åˆå§‹åŒ–å­˜æ¡£ç³»ç»Ÿå¤±è´¥",e)}},createSaveTemplate(){K(),H();const e=B();Z(),this.saveTemplate={version:ge,timestamp:new Date().toISOString(),gameCore:{currentWeek:1,maxWeeks:52,gameStarted:!0,gamePaused:!1,gameOver:!1,gameResult:null,notifications:[],gameGoals:{requiredNetWorth:4e5,targetWeeks:30,debtRatio:.4}},player:{name:"ç©å®¶",money:5e3,debt:2e3,capacity:100,inventoryUsed:0,inventory:[],purchasedHouses:[],statistics:{weekCount:1,transactionCount:0,totalProfit:0,maxMoney:5e3,visitedLocations:[]}},market:{locations:e.locations||[],currentLocation:null,productPrices:{},products:[],houses:[],marketModifiers:{}},event:{activeEvent:null,forceLocationChange:!1,targetLocation:null,nextEventId:null,triggeredEvents:[]}}},async loadSaveList(){try{console.log("å°è¯•åŠ è½½å­˜æ¡£åˆ—è¡¨...");const e=await X.getData(be);if(!e||!Array.isArray(e)||e.length===0){console.log("å­˜æ¡£åˆ—è¡¨ä¸ºç©ºæˆ–æ— æ•ˆï¼Œå°è¯•ä»æ–‡ä»¶ç³»ç»Ÿè·å–...");try{if(window.electronAPI&&window.electronAPI.listSaves){const t=await window.electronAPI.listSaves();if(t&&t.success&&Array.isArray(t.saves)){console.log("ä»Electron APIè·å–åˆ°",t.saves.length,"ä¸ªå­˜æ¡£");const r=t.saves.map(i=>({id:i.name,name:i.name,isAuto:i.name.startsWith("autosave_")||i.name.includes("è‡ªåŠ¨å­˜æ¡£"),timestamp:i.lastModified?new Date(i.lastModified).getTime():Date.now(),lastModified:i.lastModified}));return this.saveList=r,await X.setData(be,r),r}}}catch(t){console.error("ä»Electron APIè·å–å­˜æ¡£åˆ—è¡¨å¤±è´¥",t)}this.saveList=[]}else console.log("æˆåŠŸä»å­˜å‚¨ä¸­åŠ è½½å­˜æ¡£åˆ—è¡¨ï¼Œæ•°é‡:",e.length),this.saveList=e}catch(e){L(e,"saveSystem (persistence)",S.UNKNOWN,P.ERROR),console.error("åŠ è½½å­˜æ¡£åˆ—è¡¨å¤±è´¥",e),this.saveList=[]}return this.saveList},async validateSave(e){try{const t=e||this.lastValidatedSave;if(!t)return{success:!1,message:"æœªæŒ‡å®šå­˜æ¡£ID"};const r=await X.getData(`${Ee}${t}`);if(!r)return{success:!1,message:"å­˜æ¡£ä¸å­˜åœ¨æˆ–å·²æŸå"};const i=Ue(r);return{success:i.isValid,issues:i.issues,saveData:r,canRepair:i.issues.length>0}}catch(t){return L(t,"saveSystem (persistence)",S.UNKNOWN,P.ERROR),console.error("éªŒè¯å­˜æ¡£å¤±è´¥",t),{success:!1,message:`éªŒè¯å¤±è´¥: ${t.message}`,error:t}}},async saveGame(e,t=!1){return De(async()=>{const r=K(),i=H(),o=B(),s=Z(),n=ke();let a={version:ge,timestamp:new Date().toISOString()};try{console.log("å‡†å¤‡å­˜æ¡£æ•°æ®...");const p=r.gameResult?JSON.parse(JSON.stringify({reason:r.gameResult.reason,week:r.gameResult.week,score:r.gameResult.score,endReason:r.gameResult.endReason,victoryAchieved:r.gameResult.victoryAchieved,firstVictoryWeek:r.gameResult.firstVictoryWeek})):null,y=r.notifications?r.notifications.map(b=>({id:b.id,type:b.type,message:b.message,timestamp:b.timestamp})):[],k=i.inventory?i.inventory.map(b=>({productId:b.productId,name:b.name,quantity:b.quantity,purchasePrice:b.purchasePrice,purchaseWeek:b.purchaseWeek})):[],C=i.purchasedHouses?i.purchasedHouses.map(b=>({houseId:b.houseId,name:b.name,level:b.level,purchasePrice:b.purchasePrice,purchaseWeek:b.purchaseWeek,location:typeof b.location=="string"?b.location:null})):[];let N=null;s.activeEvent&&(N={id:s.activeEvent.id,title:s.activeEvent.title,type:s.activeEvent.type}),a={version:ge,timestamp:new Date().toISOString(),gameCore:{currentWeek:r.currentWeek,maxWeeks:r.maxWeeks,gameStarted:r.gameStarted,gamePaused:r.gamePaused,gameOver:r.gameOver,gameResult:p,notifications:y,gameGoals:JSON.parse(JSON.stringify(r.gameGoals||{}))},player:{name:i.name,money:i.money,debt:i.debt,capacity:i.capacity,inventoryUsed:i.inventoryUsed,inventory:k,purchasedHouses:C,statistics:JSON.parse(JSON.stringify(i.statistics||{}))},market:{locations:JSON.parse(JSON.stringify(o.locations||[])),currentLocation:o.currentLocation?o.currentLocation.id:null,productPrices:JSON.parse(JSON.stringify(o.productPrices||{})),products:o.products?o.products.map(b=>typeof b=="object"?b.id:b):[],houses:o.houses?o.houses.map(b=>typeof b=="object"?b.id:b):[],marketModifiers:JSON.parse(JSON.stringify(o.marketModifiers||{}))},event:{activeEvent:N,forceLocationChange:s.forceLocationChange,targetLocation:s.targetLocation,nextEventId:s.nextEventId,triggeredEvents:JSON.parse(JSON.stringify(s.triggeredEvents||[]))}},console.log("å­˜æ¡£æ•°æ®å‡†å¤‡å®Œæˆ")}catch(p){L(p,"saveSystem (persistence)",S.UNKNOWN,P.ERROR),console.error("å‡†å¤‡å­˜æ¡£æ•°æ®æ—¶å‡ºé”™:",p),a={version:ge,timestamp:new Date().toISOString(),gameCore:{currentWeek:r.currentWeek,maxWeeks:r.maxWeeks,gameStarted:!0,gamePaused:!1,gameOver:r.gameOver},player:{name:i.name,money:i.money,debt:i.debt,capacity:100,inventoryUsed:0,inventory:[],purchasedHouses:[]},market:{currentLocation:null,productPrices:{},products:[],houses:[],marketModifiers:{}},event:{triggeredEvents:[]}},t||n.showToast({type:"warning",message:"å­˜æ¡£æ•°æ®å¤„ç†å‡ºé”™ï¼Œä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬",duration:3e3})}const l=Ue(a);if(!l.isValid){console.warn("ç”Ÿæˆçš„å­˜æ¡£æ•°æ®æœ‰é—®é¢˜ï¼Œå°è¯•ä¿®å¤...",l.issues),t||n.showToast({type:"warning",message:"å­˜æ¡£æ•°æ®æœ‰é—®é¢˜ï¼Œæ­£åœ¨ä¿®å¤...",duration:3e3});const p=tt(a,this.saveTemplate);a=p.data,!t&&p.repairLog.length>0&&(console.info("å­˜æ¡£ä¿®å¤å®Œæˆ",p.repairLog),n.showToast({type:"info",message:`å­˜æ¡£å·²ä¿®å¤ (${p.repairLog.length}é¡¹é—®é¢˜)`,duration:3e3}))}let d,h=!0;if(t)d=`auto_${Date.now()}`,e=`è‡ªåŠ¨å­˜æ¡£ - ç¬¬${r.currentWeek}å‘¨ - ${new Date().toLocaleString()}`;else{const p=this.saveList.find(y=>y.name===e);p?(d=p.id,h=!1):d=`save_${Date.now()}`}const m={id:d,name:e,isAuto:t,timestamp:Date.now(),week:r.currentWeek,playerMoney:i.money,playerDebt:i.debt,location:o.currentLocation?o.currentLocation.name:"æœªçŸ¥ä½ç½®",version:ge};try{if(console.log("æ­£åœ¨ä¿å­˜æ¸¸æˆæ•°æ®åˆ°å­˜å‚¨..."),await X.setData(`${Ee}${d}`,a),console.log("æ¸¸æˆæ•°æ®å·²ä¿å­˜åˆ°å­˜å‚¨"),window.electronAPI&&window.electronAPI.saveGame){console.log("å°è¯•ä½¿ç”¨Electron APIä¿å­˜æ¸¸æˆ...");const p=await window.electronAPI.saveGame({name:e,gameState:a});p&&p.success?console.log("æ¸¸æˆå·²æˆåŠŸä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ:",p.path):console.warn("Electronä¿å­˜å¯èƒ½å¤±è´¥:",(p==null?void 0:p.error)||"æœªçŸ¥é”™è¯¯")}if(console.log("æ›´æ–°å­˜æ¡£åˆ—è¡¨..."),h)this.saveList.unshift(m);else{const p=this.saveList.findIndex(y=>y.id===d);p!==-1&&(this.saveList[p]=m)}}catch(p){if(L(p,"saveSystem (persistence)",S.STORAGE,P.ERROR),console.error("ä¿å­˜æ¸¸æˆæ•°æ®æ—¶å‡ºé”™:",p),window.electronAPI&&window.electronAPI.saveGame){console.log("å°è¯•ä½¿ç”¨å¤‡ç”¨æ–¹æ³•ä¿å­˜æ¸¸æˆ...");const y=await window.electronAPI.saveGame({name:e,gameState:a});if(!y||!y.success)throw p;console.log("å·²ä½¿ç”¨å¤‡ç”¨æ–¹æ³•ä¿å­˜æ¸¸æˆ")}else throw p}if(t){const p=this.saveList.filter(y=>y.isAuto);if(p.length>xe){const y=p.sort((k,C)=>k.timestamp-C.timestamp).slice(0,p.length-xe);for(const k of y)await this.deleteSave(k.id,!0)}}return await X.setData(be,this.saveList),t||n.showToast({type:"success",message:h?"æ¸¸æˆå·²ä¿å­˜":"å­˜æ¡£å·²æ›´æ–°",duration:2e3}),t&&(this.lastAutoSaveWeek=r.currentWeek),{success:!0,saveId:d,isNewSave:h}},"saveGame",S.STORAGE,P.ERROR)},async loadGame(e){return De(async()=>{const t=K(),r=H(),i=B(),o=Z(),s=ke();try{this.lastValidatedSave=e;const n=await this.validateSave(e);if(n.success)await this.loadStoresFromSaveData(n.saveData);else{s.showToast({type:"warning",message:"å­˜æ¡£å¯èƒ½å·²æŸåï¼Œæ­£åœ¨å°è¯•ä¿®å¤...",duration:3e3});const l=await X.getData(`${Ee}${e}`);if(!l)return s.showToast({type:"error",message:"å­˜æ¡£æ•°æ®æ— æ³•è¯»å–ï¼Œæ— æ³•ä¿®å¤",duration:5e3}),this.isLoading=!1,{success:!1,message:"å­˜æ¡£æ•°æ®æ— æ³•è¯»å–"};const d=tt(l,this.saveTemplate),h=d.data;if(!Ue(h).isValid)return s.showToast({type:"error",message:"å­˜æ¡£æŸåä¸¥é‡ï¼Œæ— æ³•ä¿®å¤",duration:5e3}),this.isLoading=!1,{success:!1,message:"å­˜æ¡£æ— æ³•ä¿®å¤"};s.showToast({type:"success",message:`å­˜æ¡£å·²æˆåŠŸä¿®å¤ (${d.repairLog.length}é¡¹é—®é¢˜)`,duration:5e3}),await X.setData(`${Ee}${e}`,h),console.info("å·²ä¿å­˜ä¿®å¤åçš„å­˜æ¡£",h),await this.loadStoresFromSaveData(h)}const a=this.saveList.find(l=>l.id===e);return a&&(a.previewData={purchasedHouses:r.purchasedHouses.length,debt:r.debt,inventory:r.inventory.length,netWorth:r.netWorth},await X.setData(be,this.saveList)),this.isLoading=!1,{success:!0,message:"åŠ è½½æˆåŠŸ"}}catch(n){return L(n,"saveSystem (persistence)",S.UNKNOWN,P.ERROR),console.error("åŠ è½½æ¸¸æˆå¤±è´¥",n),this.isLoading=!1,s.showToast({type:"error",message:"åŠ è½½å­˜æ¡£å¤±è´¥: "+n.message,duration:5e3}),{success:!1,error:n,message:"åŠ è½½å¤±è´¥: "+n.message}}},"loadGame",S.STORAGE,P.ERROR)},async loadStoresFromSaveData(e){const t=K(),r=H(),i=B(),o=Z();e=pr(e,ge),e.gameCore&&(t.currentWeek=e.gameCore.currentWeek||1,t.maxWeeks=e.gameCore.maxWeeks||52,t.gameStarted=!!e.gameCore.gameStarted,t.gamePaused=!!e.gameCore.gamePaused,t.gameOver=!!e.gameCore.gameOver,t.gameResult=e.gameCore.gameResult||null,t.notifications=Array.isArray(e.gameCore.notifications)?e.gameCore.notifications:[],t.gameGoals=e.gameCore.gameGoals||{requiredNetWorth:4e5,targetWeeks:30,debtRatio:.4}),e.player&&(r.name=e.player.name||"ç©å®¶",r.money=e.player.money||5e3,r.debt=e.player.debt||2e3,r.capacity=e.player.capacity||100,r.inventoryUsed=e.player.inventoryUsed||0,r.inventory=Array.isArray(e.player.inventory)?e.player.inventory:[],r.purchasedHouses=Array.isArray(e.player.purchasedHouses)?e.player.purchasedHouses:[],r.statistics=e.player.statistics||{weekCount:e.gameCore.currentWeek||1,transactionCount:0,totalProfit:0,maxMoney:r.money,visitedLocations:[],housePurchases:[],firstHousePurchaseWeek:null}),e.market&&(i.locations=Array.isArray(e.market.locations)?e.market.locations:[],i.productPrices=e.market.productPrices||{},e.market.currentLocation&&i.locations.length>0?i.currentLocation=i.locations.find(s=>s.id===e.market.currentLocation)||i.locations[0]:i.locations.length>0&&(i.currentLocation=i.locations[0]),i.loadProducts(e.market.products||[]),i.loadHouses(e.market.houses||[]),i.marketModifiers=e.market.marketModifiers||{}),e.event&&(o.activeEvent=e.event.activeEvent||null,o.forceLocationChange=!!e.event.forceLocationChange,o.targetLocation=e.event.targetLocation||null,o.nextEventId=e.event.nextEventId||null,o.triggeredEvents=Array.isArray(e.event.triggeredEvents)?e.event.triggeredEvents:[])},async deleteSave(e,t=!1){return De(async()=>{const r=this.saveList.findIndex(i=>i.id===e);try{return await X.removeData(`${Ee}${e}`),r!==-1&&this.saveList.splice(r,1),await X.setData(be,this.saveList),t||ke().showToast({type:"success",message:"å­˜æ¡£å·²åˆ é™¤",duration:2e3}),!0}catch(i){return L(i,"saveSystem (persistence)",S.UNKNOWN,P.ERROR),console.error("åˆ é™¤å­˜æ¡£å¤±è´¥",i),t||ke().showToast({type:"error",message:"åˆ é™¤å­˜æ¡£å¤±è´¥: "+i.message,duration:5e3}),!1}},"deleteSave",S.STORAGE,P.WARNING)},async cleanupOldAutoSaves(){const e=this.saveList.filter(t=>t.isAuto);if(e.length>xe){e.sort((t,r)=>r.timestamp-t.timestamp);for(let t=xe;t<e.length;t++)await this.deleteSave(e[t].id,!0)}},async checkAutoSave(e){if(!this.autoSaveEnabled)return;const t=K();!t.gameStarted||t.gameOver||e>this.lastAutoSaveWeek&&e%gr===0&&await this.autoSave()},async autoSave(){const e=K();H();const t=`è‡ªåŠ¨å­˜æ¡£ (ç¬¬${e.currentWeek}å‘¨)`;await this.saveGame(t,!0),console.log(`è‡ªåŠ¨å­˜æ¡£å®Œæˆ: ${t}`)},async triggerImportantActionAutoSave(e){if(!this.autoSaveEnabled)return;const t=K();if(!t.gameStarted||t.gameOver)return;let r="";switch(e){case"house_purchase":r=`è´­æˆ¿å­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;case"major_transaction":r=`å¤§é¢äº¤æ˜“å­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;case"event_completed":r=`äº‹ä»¶å®Œæˆå­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;case"debt_repaid":r=`è¿˜æ¸…å€ºåŠ¡å­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`;break;default:r=`é‡è¦æ“ä½œå­˜æ¡£ (ç¬¬${t.currentWeek}å‘¨)`}await this.saveGame(r,!0),console.log(`é‡è¦æ“ä½œè‡ªåŠ¨å­˜æ¡£å®Œæˆ: ${r}`)}},getters:{autoSaves(e){return e.saveList.filter(t=>t.isAuto).sort((t,r)=>r.timestamp-t.timestamp)},manualSaves(e){return e.saveList.filter(t=>!t.isAuto).sort((t,r)=>r.timestamp-t.timestamp)},latestSave(e){return e.saveList.length===0?null:e.saveList.sort((t,r)=>r.timestamp-t.timestamp)[0]}}}),Rr=ce("gameCompat",()=>{const e=K(),t=H(),r=B(),i=Z(),o=yr(),s=Nt(),n=D(()=>e.currentWeek),a=D(()=>e.maxWeeks),l=D(()=>e.gameStarted),d=D(()=>e.gamePaused),h=D(()=>e.gameOver),m=D(()=>e.gameResult),p=D(()=>e.notifications),y=D(()=>e.gameGoals),k=D(()=>e.gameProgress),C=D(()=>e.isGameActive),N=D(()=>t),b=D(()=>r.locations),M=D(()=>r.currentLocation),I=D(()=>r.productPrices),x=D(()=>r.products),w=D(()=>r.availableProducts),O=D(()=>r.houses),U=D(()=>r.marketModifiers),W=D(()=>i.currentEvent),V=D(()=>i.eventHistory);function ee(_){e.startNewGame(_)}function q(){return e.advanceWeek()}function ue(_){return r.changeLocation(_)}function le(){r.updateProductPrices(e.currentWeek)}function de(){r.updateLocationProducts(e.currentWeek)}function me(){i.generateRandomEvent(e.currentWeek)}function Se(_,R){var pe;const T=String(_),G=r.availableProducts.find(F=>String(F.id)===T);if(!G)return console.log("å•†å“ä¸å­˜åœ¨:",_,"å¯ç”¨å•†å“IDs:",r.availableProducts.map(F=>F.id)),{success:!1,message:"å•†å“ä¸å­˜åœ¨"};const j=(pe=r.productPrices[T])==null?void 0:pe.price;if(!j){console.log("ä»·æ ¼æœªå®šä¹‰:",_,"ä»·æ ¼åˆ—è¡¨keys:",Object.keys(r.productPrices));const F=G.basePrice||0;return F>0?(console.log("ä½¿ç”¨å•†å“åŸºæœ¬ä»·æ ¼:",F),Oe(G,F,R)):{success:!1,message:"ä»·æ ¼æœªå®šä¹‰"}}const re=j*R;if(t.money<re)return{success:!1,message:"èµ„é‡‘ä¸è¶³"};const se=s.addToInventory(G,R,j);return se.success?(t.money-=re,t.statistics.transactionCount+=1,{success:!0}):se}function Me(_,R){var Xe;if(!_||R<=0)return{success:!1,message:"æ— æ•ˆçš„å‚æ•°"};const T=String(_),G=t.inventory.find(oe=>String(oe.productId)===T);if(!G)return console.log("ç‰©å“ä¸å­˜åœ¨äºåº“å­˜ä¸­:",_,"åº“å­˜ç‰©å“IDs:",t.inventory.map(oe=>oe.productId)),{success:!1,message:"ç‰©å“ä¸å­˜åœ¨"};if(G.quantity<R)return{success:!1,message:"æ•°é‡ä¸è¶³"};const j=((Xe=r.productPrices[T])==null?void 0:Xe.price)||0;if(j<=0){console.log("å½“å‰å¸‚åœºä¸æ”¶è´­æ­¤ç‰©å“:",_,"ä»·æ ¼:",j);const oe=r.products.find(lt=>String(lt.id)===T);return oe&&oe.basePrice>0?(console.log("ä½¿ç”¨å•†å“åŸºæœ¬ä»·æ ¼å‡ºå”®:",oe.basePrice),z(G,oe.basePrice,R)):{success:!1,message:"å½“å‰å¸‚åœºä¸æ”¶è´­æ­¤ç‰©å“"}}const re=j*R,se=t.inventory.indexOf(G),F=G.purchasePrice*R,Je=s.removeFromInventory(se,R);if(!Je.success)return{success:!1,message:"å‡ºå”®å¤±è´¥ï¼š"+Je.message};const Ne=re-F;return t.money+=re,t.statistics.totalProfit+=Ne,t.statistics.transactionCount+=1,{success:!0,income:re,profit:Ne,profitPercent:F>0?(Ne/F*100).toFixed(1):0}}function ye(_,R=!1){return o.saveGame(_,R)}function te(_){return o.loadGame(_)}function ve(){return o.getSaves()}function We(){e.checkGameEnd()}function Le(_){var j;if(!_)return 0;const R=String(_),T=(j=r.productPrices[R])==null?void 0:j.price;if(T!=null)return T;const G=r.products.find(re=>String(re.id)===R);return G&&G.basePrice?G.basePrice:0}function we(_){return r.getProductPriceTrend(_)}function Re(_){return _<=0||_>t.money?{success:!1,message:"æ— æ•ˆçš„è¿˜æ¬¾é‡‘é¢"}:(_>t.debt&&(_=t.debt),t.money-=_,t.debt-=_,{success:!0,amountRepaid:_})}function Ae(_){const R=r.houses.find(T=>T.id===_);return R?t.money<R.price?{success:!1,message:"èµ„é‡‘ä¸è¶³"}:t.purchasedHouses.some(T=>T.houseId===_)?{success:!1,message:"å·²æ‹¥æœ‰æ­¤æˆ¿å±‹"}:(t.money-=R.price,t.purchasedHouses.push({houseId:R.id,name:R.name,purchasePrice:R.price,purchaseDate:new Date().toISOString()}),e.checkGameEnd(),{success:!0}):{success:!1,message:"æˆ¿å±‹ä¸å­˜åœ¨"}}function Ie(_,R){e.addNotification(_,R)}function Oe(_,R,T){const G=R*T;if(t.money<G)return{success:!1,message:"èµ„é‡‘ä¸è¶³"};const j=s.addToInventory(_,T,R);return j.success?(t.money-=G,t.statistics.transactionCount+=1,{success:!0}):j}function z(_,R,T){const G=R*T,j=t.inventory.indexOf(_),se=_.purchasePrice*T,pe=s.removeFromInventory(j,T);if(!pe.success)return{success:!1,message:"å‡ºå”®å¤±è´¥ï¼š"+pe.message};const F=G-se;return t.money+=G,t.statistics.totalProfit+=F,t.statistics.transactionCount+=1,{success:!0,income:G,profit:F,profitPercent:se>0?(F/se*100).toFixed(1):0}}return{currentWeek:n,maxWeeks:a,gameStarted:l,gamePaused:d,gameOver:h,gameResult:m,notifications:p,gameGoals:y,gameProgress:k,isGameActive:C,player:N,locations:b,currentLocation:M,productPrices:I,products:x,availableProducts:w,houses:O,marketModifiers:U,currentEvent:W,eventHistory:V,startNewGame:ee,advanceWeek:q,changeLocation:ue,updateProductPrices:le,updateLocationProducts:de,generateRandomEvent:me,buyProduct:Se,sellProduct:Me,saveGame:ye,loadGame:te,getSaves:ve,checkGameEnd:We,getCurrentProductPrice:Le,getProductPriceTrend:we,repayDebt:Re,buyHouse:Ae,addNotification:Ie}});export{Sr as A,wr as B,P as E,E as P,ft as _,S as a,Wt as b,Rr as c,Z as d,Nt as e,K as f,H as g,L as h,$ as i,Lr as j,B as k,hr as l,ne as m,Zt as n,je as o,Tt as p,yr as q,Er as r,Kt as s,Rt as t,ke as u,kr as v,_r as w,Pr as x,Ot as y,Ct as z};
